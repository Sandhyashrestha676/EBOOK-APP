<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="eyJjdXJyZW50Q29udmVyc2F0aW9uSWQiOiJlMDQzYmU2YS03NDAyLTQ1ODQtYmVhYS1lYWM3MDI5OWJmYjYiLCJjb252ZXJzYXRpb25zIjp7IjFmODMzZmIxLWQyMDMtNDNjZi05NGMyLWQ4ZjExNjliZTZhYyI6eyJpZCI6IjFmODMzZmIxLWQyMDMtNDNjZi05NGMyLWQ4ZjExNjliZTZhYyIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDUtMDZUMDQ6MDM6NTkuMDQ2WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTA2VDA0OjAzOjU5LjA0NloiLCJjaGF0SGlzdG9yeSI6W10sImZlZWRiYWNrU3RhdGVzIjp7fSwidG9vbFVzZVN0YXRlcyI6e30sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoiZ2l2ZSBtZSBkYXRhYmFzZSBzY2hlbWEgIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6ImdpdmUgbWUgZGF0YWJhc2Ugc2NoZW1hICJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RhdHVzIjoiZHJhZnQifSwiZHJhZnRBY3RpdmVDb250ZXh0SWRzIjpbIi9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvZWJvb2stYXBwIDUvc3JjL21haW4vamF2YS9kYW8vQm9va0RBTy5qYXZhIiwiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9lYm9vay1hcHAgNWZhbHNlZmFsc2UiXSwicmVxdWVzdElkcyI6W10sImlzUGlubmVkIjpmYWxzZSwiaXNTaGFyZWFibGUiOmZhbHNlLCJleHRyYURhdGEiOnsiaGFzRGlydHlFZGl0cyI6ZmFsc2V9LCJwZXJzb25hVHlwZSI6MH0sImUwNDNiZTZhLTc0MDItNDU4NC1iZWFhLWVhYzcwMjk5YmZiNiI6eyJpZCI6ImUwNDNiZTZhLTc0MDItNDU4NC1iZWFhLWVhYzcwMjk5YmZiNiIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDUtMDZUMDQ6MDQ6MDguOTM3WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTIxVDE0OjExOjQ4LjUyN1oiLCJjaGF0SGlzdG9yeSI6W3sicmVxdWVzdF9pZCI6IjRlZGQ5ZDUzLTQ1ODQtNDY3ZC1iMmJmLWQ2YjI2OGUzZTI1ZCIsInV1aWQiOiI5NzRlOGVlMi1lMjVjLTRlOWQtYjk5Ny0yNmFmNDIxMzdkNGMiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjAsInRvVGltZXN0YW1wIjoxNzQ2NTA0MjQ4OTM4LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJiNTk3NzQ0YS1mYjc4LTQ0NmItODBmNy05ZmM5ZjYxZmUxZDUiLCJyZXF1ZXN0X21lc3NhZ2UiOiJnaXZlIG1lIGRhdGFiYXNlIHNjaGVtYSAiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoiZ2l2ZSBtZSBkYXRhYmFzZSBzY2hlbWEgIn1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFOVjhvb3FFa3N3WldGWDEyNE1UWFBnIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIGRhdGFiYXNlIHNjaGVtYSBpbmZvcm1hdGlvbiwgU1FMIGZpbGVzLCBvciBkYXRhYmFzZSBjb25maWd1cmF0aW9uIGZpbGVzIHRoYXQgZGVmaW5lIHRoZSB0YWJsZXMgYW5kIHRoZWlyIHJlbGF0aW9uc2hpcHMgaW4gdGhlIGVib29rLWFwcCBwcm9qZWN0LiBMb29rIGZvciBmaWxlcyBsaWtlIHNjaGVtYS5zcWwsIGRhdGFiYXNlLnNxbCwgb3IgYW55IGZpbGVzIHRoYXQgY29udGFpbiBDUkVBVEUgVEFCTEUgc3RhdGVtZW50cy5cIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkknbGwgaGVscCB5b3UgZmluZCB0aGUgZGF0YWJhc2Ugc2NoZW1hIGZvciB0aGUgZWJvb2stYXBwIHByb2plY3QuIExldCBtZSBzZWFyY2ggZm9yIHJlbGV2YW50IGZpbGVzIHRoYXQgbWlnaHQgY29udGFpbiB0aGUgZGF0YWJhc2Ugc2NoZW1hIGluZm9ybWF0aW9uLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJnaXZlIG1lIGRhdGFiYXNlIHNjaGVtYSAifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL2Vib29rLWFwcCA1IiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvZWJvb2stYXBwIDUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiSSdsbCBoZWxwIHlvdSBmaW5kIHRoZSBkYXRhYmFzZSBzY2hlbWEgZm9yIHRoZSBlYm9vay1hcHAgcHJvamVjdC4gTGV0IG1lIHNlYXJjaCBmb3IgcmVsZXZhbnQgZmlsZXMgdGhhdCBtaWdodCBjb250YWluIHRoZSBkYXRhYmFzZSBzY2hlbWEgaW5mb3JtYXRpb24uXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYzcyNDk4ZTgtYmIwNC00YzM0LWE4MTEtOTZhZGY3Y2JlMjExIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSBmb3VuZCB0aGUgZGF0YWJhc2Ugc2NoZW1hIGZvciB0aGUgZWJvb2stYXBwIHByb2plY3QuIEhlcmUncyB0aGUgZGF0YWJhc2Ugc2NoZW1hIGluZm9ybWF0aW9uOlxuXG4jIyBEYXRhYmFzZSBTY2hlbWFcblxuVGhlIGFwcGxpY2F0aW9uIHVzZXMgYSBNeVNRTCBkYXRhYmFzZSBuYW1lZCBgZWJvb2tqYXZhYCB3aXRoIHRoZSBmb2xsb3dpbmcgdGFibGVzOlxuXG4jIyMgMS4gdXNlcnNcbmBgYHNxbFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB1c2VybmFtZSBWQVJDSEFSKDUwKSBOT1QgTlVMTCBVTklRVUUsXG4gICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgIGVtYWlsIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBmdWxsX25hbWUgVkFSQ0hBUigxMDApIE5PVCBOVUxMLFxuICAgIHJvbGUgVkFSQ0hBUigyMCkgTk9UIE5VTEwgREVGQVVMVCAndXNlcicsXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcbmBgYFxuXG4jIyMgMi4gYm9va3NcbmBgYHNxbFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYm9va3MgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB0aXRsZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgYXV0aG9yIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgIGNhdGVnb3J5IFZBUkNIQVIoNTApLFxuICAgIGdlbnJlIFZBUkNIQVIoNTApLFxuICAgIHByaWNlIERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIGltYWdlX3VybCBWQVJDSEFSKDI1NSksXG4gICAgc3RvY2sgSU5UIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4pO1xuYGBgXG5cbiMjIyAzLiBjYXJ0X2l0ZW1zXG5gYGBzcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNhcnRfaXRlbXMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB1c2VyX2lkIElOVCBOT1QgTlVMTCxcbiAgICBib29rX2lkIElOVCBOT1QgTlVMTCxcbiAgICBxdWFudGl0eSBJTlQgTk9UIE5VTEwgREVGQVVMVCAxLFxuICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFLFxuICAgIEZPUkVJR04gS0VZIChib29rX2lkKSBSRUZFUkVOQ0VTIGJvb2tzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERVxuKTtcbmBgYFxuXG4jIyMgNC4gb3JkZXJzXG5gYGBzcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIHVzZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIG9yZGVyX2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgdG90YWxfYW1vdW50IERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5gYGBcblxuIyMjIDUuIG9yZGVyX2l0ZW1zXG5gYGBzcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVyX2l0ZW1zIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgb3JkZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIGJvb2tfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHF1YW50aXR5IElOVCBOT1QgTlVMTCxcbiAgICBwcmljZSBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCxcbiAgICBGT1JFSUdOIEtFWSAob3JkZXJfaWQpIFJFRkVSRU5DRVMgb3JkZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoYm9va19pZCkgUkVGRVJFTkNFUyBib29rcyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5gYGBcblxuIyMjIDYuIHBheW1lbnRzXG5gYGBzcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHBheW1lbnRzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgb3JkZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHBheW1lbnRfbWV0aG9kIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgIGNhcmRfbnVtYmVyIFZBUkNIQVIoMjU1KSxcbiAgICBjYXJkX2hvbGRlcl9uYW1lIFZBUkNIQVIoMTAwKSxcbiAgICBleHBpcnlfZGF0ZSBWQVJDSEFSKDEwKSxcbiAgICBjdnYgVkFSQ0hBUigxMCksXG4gICAgYW1vdW50IERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICB0cmFuc2FjdGlvbl9pZCBWQVJDSEFSKDEwMCksXG4gICAgcGF5bWVudF9kYXRlIFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIEZPUkVJR04gS0VZIChvcmRlcl9pZCkgUkVGRVJFTkNFUyBvcmRlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFXG4pO1xuYGBgXG5cblRoZSBkYXRhYmFzZSBjb25uZWN0aW9uIHBhcmFtZXRlcnMgdXNlZCBpbiB0aGUgYXBwbGljYXRpb24gYXJlOlxuLSBKREJDIFVSTDogYGpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9lYm9va2phdmFgXG4tIFVzZXJuYW1lOiBgcm9vdGBcbi0gUGFzc3dvcmQ6IGBvcmFjbGVgXG5cbklzIHRoZXJlIGFueSBzcGVjaWZpYyBhc3BlY3Qgb2YgdGhlIGRhdGFiYXNlIHNjaGVtYSB5b3UnZCBsaWtlIG1lIHRvIGV4cGxhaW4gaW4gbW9yZSBkZXRhaWw/XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL3Jlc291cmNlcy9kYXRhYmFzZS5zcWxcbi0tIENyZWF0ZSBkYXRhYmFzZVxuQ1JFQVRFIERBVEFCQVNFIElGIE5PVCBFWElTVFMgZWJvb2tqYXZhO1xuVVNFIGVib29rc3RvcmU7XG5cbi0tIENyZWF0ZSB0YWJsZXNcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgdXNlcm5hbWUgVkFSQ0hBUig1MCkgTk9UIE5VTEwgVU5JUVVFLFxuICAgIHBhc3N3b3JkIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICBlbWFpbCBWQVJDSEFSKDEwMCkgTk9UIE5VTEwsXG4gICAgZnVsbF9uYW1lIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICByb2xlIFZBUkNIQVIoMjApIE5PVCBOVUxMIERFRkFVTFQgJ3VzZXInLFxuICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGJvb2tzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgdGl0bGUgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgIGF1dGhvciBWQVJDSEFSKDEwMCkgTk9UIE5VTEwsXG4gICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICBjYXRlZ29yeSBWQVJDSEFSKDUwKSxcbiAgICBnZW5yZSBWQVJDSEFSKDUwKSxcbiAgICBwcmljZSBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCxcbiAgICBpbWFnZV91cmwgVkFSQ0hBUigyNTUpLFxuICAgIHN0b2NrIElOVCBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcblxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2FydF9pdGVtcyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIHVzZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIGJvb2tfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHF1YW50aXR5IElOVCBOT1QgTlVMTCBERUZBVUxUIDEsXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgRk9SRUlHTiBLRVkgKGJvb2tfaWQpIFJFRkVSRU5DRVMgYm9va3MoaWQpIE9OIERFTEVURSBDQVNDQURFXG4pO1xuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBvcmRlcnMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB1c2VyX2lkIElOVCBOT1QgTlVMTCxcbiAgICBvcmRlcl9kYXRlIFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIHRvdGFsX2Ftb3VudCBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCxcbiAgICBzdGF0dXMgVkFSQ0hBUigyMCkgTk9UIE5VTEwgREVGQVVMVCAncGVuZGluZycsXG4gICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFXG4pO1xuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBvcmRlcl9pdGVtcyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIG9yZGVyX2lkIElOVCBOT1QgTlVMTCxcbiAgICBib29rX2lkIElOVCBOT1QgTlVMTCxcbiAgICBxdWFudGl0eSBJTlQgTk9UIE5VTEwsXG4gICAgcHJpY2UgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgRk9SRUlHTiBLRVkgKG9yZGVyX2lkKSBSRUZFUkVOQ0VTIG9yZGVycyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgRk9SRUlHTiBLRVkgKGJvb2tfaWQpIFJFRkVSRU5DRVMgYm9va3MoaWQpIE9OIERFTEVURSBDQVNDQURFXG4pO1xuXG4tLSBJbnNlcnQgc2FtcGxlIGRhdGFcbi0tIEFkbWluIHVzZXIgKHBhc3N3b3JkOiBhZG1pbjEyMylcbklOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIGVtYWlsLCBmdWxsX25hbWUsIHJvbGUpIFZBTFVFU1xuKCdhZG1pbicsICdhZG1pbjEyMycsICdhZG1pbkBlYm9va3N0b3JlLmNvbScsICdBZG1pbiBVc2VyJywgJ2FkbWluJyk7XG5cbi0tIFJlZ3VsYXIgdXNlcnMgKHBhc3N3b3JkOiB1c2VyMTIzKVxuSU5TRVJUIElOVE8gdXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgZW1haWwsIGZ1bGxfbmFtZSwgcm9sZSkgVkFMVUVTXG4oJ2pvaG4nLCAndXNlcjEyMycsICdqb2huQGV4YW1wbGUuY29tJywgJ0pvaG4gRG9lJywgJ3VzZXInKSxcbignamFuZScsICd1c2VyMTIzJywgJ2phbmVAZXhhbXBsZS5jb20nLCAnSmFuZSBTbWl0aCcsICd1c2VyJyk7XG5cbi0tIFNhbXBsZSBib29rc1xuSU5TRVJUIElOVE8gYm9va3MgKHRpdGxlLCBhdXRob3IsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSwgZ2VucmUsIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrKSBWQUxVRVNcbignVGhlIEdyZWF0IEdhdHNieScsICdGLiBTY290dCBGaXR6Z2VyYWxkJywgJ0Egbm92ZWwgYWJvdXQgdGhlIG15c3RlcmlvdXMgSmF5IEdhdHNieSBhbmQgaGlzIGxvdmUgZm9yIERhaXN5IEJ1Y2hhbmFuLicsICdGaWN0aW9uJywgJ0NsYXNzaWMnLCA5Ljk5LCAnaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZXMvZ2F0c2J5LmpwZycsIDEwMCksXG4oJ1RvIEtpbGwgYSBNb2NraW5nYmlyZCcsICdIYXJwZXIgTGVlJywgJ0Egbm92ZWwgYWJvdXQgcmFjaWFsIGluZXF1YWxpdHkgdGhyb3VnaCB0aGUgZXllcyBvZiBhIHlvdW5nIGdpcmwgaW4gQWxhYmFtYS4nLCAnRmljdGlvbicsICdDbGFzc2ljJywgOC45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL21vY2tpbmdiaXJkLmpwZycsIDc1KSxcbignMTk4NCcsICdHZW9yZ2UgT3J3ZWxsJywgJ0EgZHlzdG9waWFuIG5vdmVsIHNldCBpbiBhIHRvdGFsaXRhcmlhbiBzb2NpZXR5LicsICdGaWN0aW9uJywgJ0R5c3RvcGlhbicsIDcuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy8xOTg0LmpwZycsIDUwKSxcbignVGhlIEhvYmJpdCcsICdKLlIuUi4gVG9sa2llbicsICdBIGZhbnRhc3kgbm92ZWwgYWJvdXQgdGhlIGFkdmVudHVyZXMgb2YgQmlsYm8gQmFnZ2lucy4nLCAnRmljdGlvbicsICdGYW50YXN5JywgMTIuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9ob2JiaXQuanBnJywgNjApLFxuKCdBIEJyaWVmIEhpc3Rvcnkgb2YgVGltZScsICdTdGVwaGVuIEhhd2tpbmcnLCAnQSBib29rIGFib3V0IHRoZSBuYXR1cmUgb2YgdGltZSBhbmQgdGhlIHVuaXZlcnNlLicsICdOb24tRmljdGlvbicsICdTY2llbmNlJywgMTQuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy90aW1lLmpwZycsIDQwKSxcbignU2FwaWVuczogQSBCcmllZiBIaXN0b3J5IG9mIEh1bWFua2luZCcsICdZdXZhbCBOb2FoIEhhcmFyaScsICdBIGJvb2sgYWJvdXQgdGhlIGhpc3Rvcnkgb2YgaHVtYW4gZXZvbHV0aW9uLicsICdOb24tRmljdGlvbicsICdIaXN0b3J5JywgMTUuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9zYXBpZW5zLmpwZycsIDMwKSxcbignQ2xlYW4gQ29kZScsICdSb2JlcnQgQy4gTWFydGluJywgJ0EgaGFuZGJvb2sgb2YgYWdpbGUgc29mdHdhcmUgY3JhZnRzbWFuc2hpcC4nLCAnVGVjaG5vbG9neScsICdQcm9ncmFtbWluZycsIDI5Ljk5LCAnaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZXMvY2xlYW5jb2RlLmpwZycsIDI1KSxcbignVGhlIEFydCBvZiBDb21wdXRlciBQcm9ncmFtbWluZycsICdEb25hbGQgS251dGgnLCAnQSBjb21wcmVoZW5zaXZlIG1vbm9ncmFwaCBvbiBjb21wdXRlciBwcm9ncmFtbWluZy4nLCAnVGVjaG5vbG9neScsICdQcm9ncmFtbWluZycsIDQ5Ljk5LCAnaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZXMva251dGguanBnJywgMTUpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3Jlc291cmNlcy9hZGRfcGF5bWVudF90YWJsZS5zcWxcbi0tIENvbm5lY3QgdG8gdGhlIGVib29ramF2YSBkYXRhYmFzZVxuVVNFIGVib29ramF2YTtcblxuLS0gQ3JlYXRlIHBheW1lbnQgdGFibGVcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHBheW1lbnRzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgb3JkZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHBheW1lbnRfbWV0aG9kIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgIGNhcmRfbnVtYmVyIFZBUkNIQVIoMjU1KSxcbiAgICBjYXJkX2hvbGRlcl9uYW1lIFZBUkNIQVIoMTAwKSxcbiAgICBleHBpcnlfZGF0ZSBWQVJDSEFSKDEwKSxcbiAgICBjdnYgVkFSQ0hBUigxMCksXG4gICAgYW1vdW50IERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICB0cmFuc2FjdGlvbl9pZCBWQVJDSEFSKDEwMCksXG4gICAgcGF5bWVudF9kYXRlIFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIEZPUkVJR04gS0VZIChvcmRlcl9pZCkgUkVGRVJFTkNFUyBvcmRlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFXG4pO1xuXG4tLSBEaXNwbGF5IHRoZSB0YWJsZSBzdHJ1Y3R1cmVcbkRFU0NSSUJFIHBheW1lbnRzO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3Jlc291cmNlcy9lbnN1cmVfcGF5bWVudHNfdGFibGUuc3FsXG4tLSBDb25uZWN0IHRvIHRoZSBlYm9va2phdmEgZGF0YWJhc2VcblVTRSBlYm9va2phdmE7XG5cbi0tIENyZWF0ZSBwYXltZW50IHRhYmxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHBheW1lbnRzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgb3JkZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHBheW1lbnRfbWV0aG9kIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgIGNhcmRfbnVtYmVyIFZBUkNIQVIoMjU1KSxcbiAgICBjYXJkX2hvbGRlcl9uYW1lIFZBUkNIQVIoMTAwKSxcbiAgICBleHBpcnlfZGF0ZSBWQVJDSEFSKDEwKSxcbiAgICBjdnYgVkFSQ0hBUigxMCksXG4gICAgYW1vdW50IERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICB0cmFuc2FjdGlvbl9pZCBWQVJDSEFSKDEwMCksXG4gICAgcGF5bWVudF9kYXRlIFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIEZPUkVJR04gS0VZIChvcmRlcl9pZCkgUkVGRVJFTkNFUyBvcmRlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFXG4pO1xuXG4tLSBEaXNwbGF5IHRoZSB0YWJsZSBzdHJ1Y3R1cmVcbkRFU0NSSUJFIHBheW1lbnRzO1xuLi4uXG5QYXRoOiBhZG1pbl91cGRhdGUuc3FsXG4tLSBDb25uZWN0IHRvIHRoZSBlYm9va3N0b3JlIGRhdGFiYXNlXG5VU0UgZWJvb2tzdG9yZTtcblxuLS0gVXBkYXRlIHRoZSBhZG1pbiB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCBjcmVkZW50aWFsc1xuVVBEQVRFIHVzZXJzIFNFVCBcbiAgICBlbWFpbCA9ICdhZG1pbkBnbWFpbC5jb20nLFxuICAgIHBhc3N3b3JkID0gJ2FkbWluMTIzJ1xuV0hFUkUgdXNlcm5hbWUgPSAnYWRtaW4nO1xuXG4tLSBFbnN1cmUgYWxsIG90aGVyIHVzZXJzIGhhdmUgdGhlICd1c2VyJyByb2xlXG5VUERBVEUgdXNlcnMgU0VUIFxuICAgIHJvbGUgPSAndXNlcidcbldIRVJFIHVzZXJuYW1lICE9ICdhZG1pbic7XG5cbi0tIERpc3BsYXkgYWxsIHVzZXJzIHRvIHZlcmlmeSB0aGUgY2hhbmdlc1xuU0VMRUNUIGlkLCB1c2VybmFtZSwgZW1haWwsIHJvbGUgRlJPTSB1c2Vycztcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vQm9va0RBTy5qYXZhXG5wYWNrYWdlIGRhbztcblxuaW1wb3J0IG1vZGVsLkJvb2s7XG5pbXBvcnQgamF2YS5zcWwuRHJpdmVyTWFuYWdlcjtcblxuaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxucHVibGljIGNsYXNzIEJvb2tEQU8ge1xuXG4gICAgc3RhdGljIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIERhdGFiYXNlIGNvbm5lY3Rpb24gcGFyYW1ldGVyc1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1VSTCA9IFwiamRiYzpteXNxbDovL2xvY2FsaG9zdDozMzA2L2Vib29ramF2YVwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1VTRVIgPSBcInJvb3RcIjtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19QQVNTV09SRCA9IFwib3JhY2xlXCI7XG4uLi5cblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VOYW1lID0gaW1hZ2VVcmwuc3Vic3RyaW5nKGltYWdlVXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgICAgICAgICAgICAgICBpZiAoYm9vay5nZXRUaXRsZSgpLmVxdWFscyhcIlRoZSBHcmVhdCBHYXRzYnlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9nYXRzYnkuanBnXCI7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJPcmlnaW5hbCBpbWFnZSBVUkwgZm9yIFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCI6IFwiICsgaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udmVydGVkIHRvOiBcIiArIGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvdXRpbC9FbnN1cmVQYXltZW50c1RhYmxlLmphdmFcbnBhY2thZ2UgdXRpbDtcblxuaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247XG5pbXBvcnQgamF2YS5zcWwuRHJpdmVyTWFuYWdlcjtcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG5pbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uO1xuaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDtcblxuLyoqXG4gKiBVdGlsaXR5IGNsYXNzIHRvIGVuc3VyZSB0aGUgcGF5bWVudHMgdGFibGUgZXhpc3RzIGluIHRoZSBkYXRhYmFzZS5cbiAqL1xucHVibGljIGNsYXNzIEVuc3VyZVBheW1lbnRzVGFibGUge1xuXG4gICAgLy8gRGF0YWJhc2UgY29ubmVjdGlvbiBwYXJhbWV0ZXJzXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVJMID0gXCJqZGJjOm15c3FsOi8vbG9jYWxob3N0OjMzMDYvZWJvb2tqYXZhXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVNFUiA9IFwicm9vdFwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1BBU1NXT1JEID0gXCJvcmFjbGVcIjtcblxuICAgIHN0YXRpYyB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDbGFzcy5mb3JOYW1lKFwiY29tLm15c3FsLmNqLmpkYmMuRHJpdmVyXCIpO1xuICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRGlyZWN0IGRhdGFiYXNlIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwYXltZW50cyB0YWJsZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAgICAgcnMgPSBjb25uLmdldE1ldGFEYXRhKCkuZ2V0VGFibGVzKG51bGwsIG51bGwsIFwicGF5bWVudHNcIiwgbnVsbCk7XG4gICAgICAgICAgICBpZiAoIXJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIC8vIFRhYmxlIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdFxuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNyZWF0aW5nIHBheW1lbnRzIHRhYmxlLi4uXCIpO1xuICAgICAgICAgICAgICAgIHN0bXQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpO1xuXG4gICAgICAgICAgICAgICAgU3RyaW5nIGNyZWF0ZVRhYmxlU1FMID0gXCJDUkVBVEUgVEFCTEUgcGF5bWVudHMgKFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJvcmRlcl9pZCBJTlQgTk9UIE5VTEwsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJwYXltZW50X21ldGhvZCBWQVJDSEFSKDUwKSBOT1QgTlVMTCwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImNhcmRfbnVtYmVyIFZBUkNIQVIoMjU1KSwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImNhcmRfaG9sZGVyX25hbWUgVkFSQ0hBUigxMDApLCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiZXhwaXJ5X2RhdGUgVkFSQ0hBUigxMCksIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJjdnYgVkFSQ0hBUigxMCksIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJhbW91bnQgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJzdGF0dXMgVkFSQ0hBUigyMCkgTk9UIE5VTEwgREVGQVVMVCAncGVuZGluZycsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ0cmFuc2FjdGlvbl9pZCBWQVJDSEFSKDEwMCksIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJwYXltZW50X2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJGT1JFSUdOIEtFWSAob3JkZXJfaWQpIFJFRkVSRU5DRVMgb3JkZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERVwiICtcbiAgICAgICAgICAgICAgICBcIilcIjtcblxuICAgICAgICAgICAgICAgIHN0bXQuZXhlY3V0ZVVwZGF0ZShjcmVhdGVUYWJsZVNRTCk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUGF5bWVudHMgdGFibGUgY3JlYXRlZCBzdWNjZXNzZnVsbHkuXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQYXltZW50cyB0YWJsZSBhbHJlYWR5IGV4aXN0cy5cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRvbmUhXCIpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3Jlc291cmNlcy9jcmVhdGVfYWRtaW4uc3FsXG4tLSBBZGQgYWRtaW4gdXNlciBpZiBpdCBkb2Vzbid0IGV4aXN0XG5JTlNFUlQgSU5UTyB1c2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgZnVsbF9uYW1lLCByb2xlKVxuU0VMRUNUICdhZG1pbicsICdhZG1pbjEyMycsICdhZG1pbkBnbWFpbC5jb20nLCAnQWRtaW4gVXNlcicsICdhZG1pbidcbkZST00gZHVhbFxuV0hFUkUgTk9UIEVYSVNUUyAoXG4gICAgU0VMRUNUIDEgRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ICdhZG1pbidcbik7XG5cbi0tIERpc3BsYXkgdXNlcnNcblNFTEVDVCBpZCwgdXNlcm5hbWUsIGVtYWlsLCByb2xlIEZST00gdXNlcnM7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvdXRpbC9EYXRhYmFzZVV0aWwuamF2YVxucGFja2FnZSB1dGlsO1xuXG5pbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbmltcG9ydCBqYXZhLnNxbC5Ecml2ZXJNYW5hZ2VyO1xuaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjtcblxucHVibGljIGNsYXNzIERhdGFiYXNlVXRpbCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVJMID0gXCJqZGJjOm15c3FsOi8vbG9jYWxob3N0OjMzMDYvZWJvb2tqYXZhXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVNFUiA9IFwicm9vdFwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1BBU1NXT1JEID0gXCJvcmFjbGVcIjtcbiAgICBcbiAgICBzdGF0aWMge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclwiKTtcbiAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgQ29ubmVjdGlvbiBnZXRDb25uZWN0aW9uKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7XG4gICAgICAgIHJldHVybiBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBjbG9zZUNvbm5lY3Rpb24oQ29ubmVjdGlvbiBjb25uZWN0aW9uKSB7XG4gICAgICAgIGlmIChjb25uZWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL21vZGVsL1VzZXIuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBVc2VyIHtcbiAgICBwcml2YXRlIGludCBpZDtcbiAgICBwcml2YXRlIFN0cmluZyB1c2VybmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBwYXNzd29yZDtcbiAgICBwcml2YXRlIFN0cmluZyBlbWFpbDtcbiAgICBwcml2YXRlIFN0cmluZyBmdWxsTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyByb2xlOyAvLyBcImFkbWluXCIgb3IgXCJ1c2VyXCJcbiAgICBwcml2YXRlIERhdGUgY3JlYXRlZEF0OyAvLyBSZWdpc3RyYXRpb24gZGF0ZVxuXG4gICAgcHVibGljIFVzZXIoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIFVzZXIoaW50IGlkLCBTdHJpbmcgdXNlcm5hbWUsIFN0cmluZyBwYXNzd29yZCwgU3RyaW5nIGVtYWlsLCBTdHJpbmcgZnVsbE5hbWUsIFN0cmluZyByb2xlKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICAgIHRoaXMuZW1haWwgPSBlbWFpbDtcbiAgICAgICAgdGhpcy5mdWxsTmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IG5ldyBEYXRlKCk7IC8vIFNldCB0byBjdXJyZW50IGRhdGUgYnkgZGVmYXVsdFxuICAgIH1cblxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SWQoaW50IGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldFVzZXJuYW1lKCkge1xuICAgICAgICByZXR1cm4gdXNlcm5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvT3JkZXJJdGVtLmphdmFcbnBhY2thZ2UgbW9kZWw7XG5cbmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcblxucHVibGljIGNsYXNzIE9yZGVySXRlbSB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBpbnQgb3JkZXJJZDtcbiAgICBwcml2YXRlIGludCBib29rSWQ7XG4gICAgcHJpdmF0ZSBpbnQgcXVhbnRpdHk7XG4gICAgcHJpdmF0ZSBCaWdEZWNpbWFsIHByaWNlO1xuICAgIHByaXZhdGUgQm9vayBib29rO1xuICAgIFxuICAgIHB1YmxpYyBPcmRlckl0ZW0oKSB7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBPcmRlckl0ZW0oaW50IGlkLCBpbnQgb3JkZXJJZCwgaW50IGJvb2tJZCwgaW50IHF1YW50aXR5LCBCaWdEZWNpbWFsIHByaWNlKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJZDtcbiAgICAgICAgdGhpcy5ib29rSWQgPSBib29rSWQ7XG4gICAgICAgIHRoaXMucXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzXG4gICAgcHVibGljIGludCBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRJZChpbnQgaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldE9yZGVySWQoKSB7XG4gICAgICAgIHJldHVybiBvcmRlcklkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRPcmRlcklkKGludCBvcmRlcklkKSB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0Qm9va0lkKCkge1xuICAgICAgICByZXR1cm4gYm9va0lkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRCb29rSWQoaW50IGJvb2tJZCkge1xuICAgICAgICB0aGlzLmJvb2tJZCA9IGJvb2tJZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGludCBnZXRRdWFudGl0eSgpIHtcbiAgICAgICAgcmV0dXJuIHF1YW50aXR5O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRRdWFudGl0eShpbnQgcXVhbnRpdHkpIHtcbiAgICAgICAgdGhpcy5xdWFudGl0eSA9IHF1YW50aXR5O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgQmlnRGVjaW1hbCBnZXRQcmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHByaWNlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRQcmljZShCaWdEZWNpbWFsIHByaWNlKSB7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIEJvb2sgZ2V0Qm9vaygpIHtcbiAgICAgICAgcmV0dXJuIGJvb2s7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEJvb2soQm9vayBib29rKSB7XG4gICAgICAgIHRoaXMuYm9vayA9IGJvb2s7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBCaWdEZWNpbWFsIGdldFN1YnRvdGFsKCkge1xuICAgICAgICByZXR1cm4gcHJpY2UubXVsdGlwbHkobmV3IEJpZ0RlY2ltYWwocXVhbnRpdHkpKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvQm9vay5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIEJvb2sge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgU3RyaW5nIHRpdGxlO1xuICAgIHByaXZhdGUgU3RyaW5nIGF1dGhvcjtcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcbiAgICBwcml2YXRlIFN0cmluZyBjYXRlZ29yeTtcbiAgICBwcml2YXRlIFN0cmluZyBnZW5yZTtcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgcHJpY2U7XG4gICAgcHJpdmF0ZSBTdHJpbmcgaW1hZ2VVcmw7XG4gICAgcHJpdmF0ZSBpbnQgc3RvY2s7XG4gICAgXG4gICAgcHVibGljIEJvb2soKSB7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBCb29rKGludCBpZCwgU3RyaW5nIHRpdGxlLCBTdHJpbmcgYXV0aG9yLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBjYXRlZ29yeSwgXG4gICAgICAgICAgICAgICAgU3RyaW5nIGdlbnJlLCBCaWdEZWNpbWFsIHByaWNlLCBTdHJpbmcgaW1hZ2VVcmwsIGludCBzdG9jaykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5hdXRob3IgPSBhdXRob3I7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICB0aGlzLmdlbnJlID0gZ2VucmU7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgICAgICB0aGlzLnN0b2NrID0gc3RvY2s7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvT3JkZXIuamF2YVxucGFja2FnZSBtb2RlbDtcblxuaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuaW1wb3J0IGphdmEudXRpbC5EYXRlO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5wdWJsaWMgY2xhc3MgT3JkZXIge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgaW50IHVzZXJJZDtcbiAgICBwcml2YXRlIERhdGUgb3JkZXJEYXRlO1xuICAgIHByaXZhdGUgQmlnRGVjaW1hbCB0b3RhbEFtb3VudDtcbiAgICBwcml2YXRlIFN0cmluZyBzdGF0dXM7IC8vIFwicGVuZGluZ1wiLCBcInByb2Nlc3NpbmdcIiwgXCJzaGlwcGVkXCIsIFwiZGVsaXZlcmVkXCIsIFwiY2FuY2VsbGVkXCJcbiAgICBwcml2YXRlIExpc3Q8T3JkZXJJdGVtPiBvcmRlckl0ZW1zO1xuICAgIFxuICAgIHB1YmxpYyBPcmRlcigpIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIE9yZGVyKGludCBpZCwgaW50IHVzZXJJZCwgRGF0ZSBvcmRlckRhdGUsIEJpZ0RlY2ltYWwgdG90YWxBbW91bnQsIFN0cmluZyBzdGF0dXMpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcbiAgICAgICAgdGhpcy5vcmRlckRhdGUgPSBvcmRlckRhdGU7XG4gICAgICAgIHRoaXMudG90YWxBbW91bnQgPSB0b3RhbEFtb3VudDtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0VXNlcklkKCkge1xuICAgICAgICByZXR1cm4gdXNlcklkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VySWQoaW50IHVzZXJJZCkge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIERhdGUgZ2V0T3JkZXJEYXRlKCkge1xuICAgICAgICByZXR1cm4gb3JkZXJEYXRlO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vVXNlckRBTy5qYXZhXG5wYWNrYWdlIGRhbztcblxuaW1wb3J0IG1vZGVsLlVzZXI7XG5pbXBvcnQgamF2YS5zcWwuRHJpdmVyTWFuYWdlcjtcbmltcG9ydCB1dGlsLlBhc3N3b3JkVXRpbDtcblxuaW1wb3J0IGphdmEuc3FsLio7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxucHVibGljIGNsYXNzIFVzZXJEQU8ge1xuXG4gICAgc3RhdGljIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIERhdGFiYXNlIGNvbm5lY3Rpb24gcGFyYW1ldGVyc1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1VSTCA9IFwiamRiYzpteXNxbDovL2xvY2FsaG9zdDozMzA2L2Vib29ramF2YVwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1VTRVIgPSBcInJvb3RcIjtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19QQVNTV09SRCA9IFwib3JhY2xlXCI7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvQ2FydEl0ZW0uamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBDYXJ0SXRlbSB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBpbnQgdXNlcklkO1xuICAgIHByaXZhdGUgaW50IGJvb2tJZDtcbiAgICBwcml2YXRlIGludCBxdWFudGl0eTtcbiAgICBwcml2YXRlIEJvb2sgYm9vaztcbiAgICBcbiAgICBwdWJsaWMgQ2FydEl0ZW0oKSB7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBDYXJ0SXRlbShpbnQgaWQsIGludCB1c2VySWQsIGludCBib29rSWQsIGludCBxdWFudGl0eSkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xuICAgICAgICB0aGlzLmJvb2tJZCA9IGJvb2tJZDtcbiAgICAgICAgdGhpcy5xdWFudGl0eSA9IHF1YW50aXR5O1xuICAgIH1cbiAgICBcbiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzXG4gICAgcHVibGljIGludCBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRJZChpbnQgaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldFVzZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJJZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0VXNlcklkKGludCB1c2VySWQpIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0Qm9va0lkKCkge1xuICAgICAgICByZXR1cm4gYm9va0lkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRCb29rSWQoaW50IGJvb2tJZCkge1xuICAgICAgICB0aGlzLmJvb2tJZCA9IGJvb2tJZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGludCBnZXRRdWFudGl0eSgpIHtcbiAgICAgICAgcmV0dXJuIHF1YW50aXR5O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRRdWFudGl0eShpbnQgcXVhbnRpdHkpIHtcbiAgICAgICAgdGhpcy5xdWFudGl0eSA9IHF1YW50aXR5O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgQm9vayBnZXRCb29rKCkge1xuICAgICAgICByZXR1cm4gYm9vaztcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvUGF5bWVudC5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIFBheW1lbnQge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgaW50IG9yZGVySWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcGF5bWVudE1ldGhvZDtcbiAgICBwcml2YXRlIFN0cmluZyBjYXJkTnVtYmVyO1xuICAgIHByaXZhdGUgU3RyaW5nIGNhcmRIb2xkZXJOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGV4cGlyeURhdGU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgY3Z2O1xuICAgIHByaXZhdGUgQmlnRGVjaW1hbCBhbW91bnQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgc3RhdHVzO1xuICAgIHByaXZhdGUgU3RyaW5nIHRyYW5zYWN0aW9uSWQ7XG4gICAgcHJpdmF0ZSBEYXRlIHBheW1lbnREYXRlO1xuICAgIFxuICAgIC8vIENvbnN0cnVjdG9yc1xuICAgIHB1YmxpYyBQYXltZW50KCkge1xuICAgIH1cbiAgICBcbiAgICAvLyBHZXR0ZXJzIGFuZCBzZXR0ZXJzXG4gICAgcHVibGljIGludCBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRJZChpbnQgaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldE9yZGVySWQoKSB7XG4gICAgICAgIHJldHVybiBvcmRlcklkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRPcmRlcklkKGludCBvcmRlcklkKSB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGF5bWVudE1ldGhvZCgpIHtcbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2Q7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFBheW1lbnRNZXRob2QoU3RyaW5nIHBheW1lbnRNZXRob2QpIHtcbiAgICAgICAgdGhpcy5wYXltZW50TWV0aG9kID0gcGF5bWVudE1ldGhvZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRDYXJkTnVtYmVyKCkge1xuICAgICAgICByZXR1cm4gY2FyZE51bWJlcjtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvdXRpbC9DcmVhdGVBZG1pblVzZXIuamF2YVxucGFja2FnZSB1dGlsO1xuXG5pbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDtcbmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7XG5pbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uO1xuXG5wdWJsaWMgY2xhc3MgQ3JlYXRlQWRtaW5Vc2VyIHtcbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IGNoZWNrU3RtdCA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IGluc2VydFN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRGF0YWJhc2VVdGlsLmdldENvbm5lY3Rpb24oKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYWRtaW4gdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAgICAgU3RyaW5nIGNoZWNrU3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZS4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMU5WOG9vcUVrc3daV0ZYMTI0TVRYUGcifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL2Vib29rLWFwcCA1IiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvZWJvb2stYXBwIDUifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiSSBmb3VuZCB0aGUgZGF0YWJhc2Ugc2NoZW1hIGZvciB0aGUgZWJvb2stYXBwIHByb2plY3QuIEhlcmUncyB0aGUgZGF0YWJhc2Ugc2NoZW1hIGluZm9ybWF0aW9uOlxuXG4jIyBEYXRhYmFzZSBTY2hlbWFcblxuVGhlIGFwcGxpY2F0aW9uIHVzZXMgYSBNeVNRTCBkYXRhYmFzZSBuYW1lZCBgZWJvb2tqYXZhYCB3aXRoIHRoZSBmb2xsb3dpbmcgdGFibGVzOlxuXG4jIyMgMS4gdXNlcnNcbmBgYHNxbFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB1c2VybmFtZSBWQVJDSEFSKDUwKSBOT1QgTlVMTCBVTklRVUUsXG4gICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgIGVtYWlsIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBmdWxsX25hbWUgVkFSQ0hBUigxMDApIE5PVCBOVUxMLFxuICAgIHJvbGUgVkFSQ0hBUigyMCkgTk9UIE5VTEwgREVGQVVMVCAndXNlcicsXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcbmBgYFxuXG4jIyMgMi4gYm9va3NcbmBgYHNxbFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYm9va3MgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB0aXRsZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgYXV0aG9yIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgIGNhdGVnb3J5IFZBUkNIQVIoNTApLFxuICAgIGdlbnJlIFZBUkNIQVIoNTApLFxuICAgIHByaWNlIERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIGltYWdlX3VybCBWQVJDSEFSKDI1NSksXG4gICAgc3RvY2sgSU5UIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4pO1xuYGBgXG5cbiMjIyAzLiBjYXJ0X2l0ZW1zXG5gYGBzcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNhcnRfaXRlbXMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB1c2VyX2lkIElOVCBOT1QgTlVMTCxcbiAgICBib29rX2lkIElOVCBOT1QgTlVMTCxcbiAgICBxdWFudGl0eSBJTlQgTk9UIE5VTEwgREVGQVVMVCAxLFxuICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFLFxuICAgIEZPUkVJR04gS0VZIChib29rX2lkKSBSRUZFUkVOQ0VTIGJvb2tzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERVxuKTtcbmBgYFxuXG4jIyMgNC4gb3JkZXJzXG5gYGBzcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIHVzZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIG9yZGVyX2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgdG90YWxfYW1vdW50IERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5gYGBcblxuIyMjIDUuIG9yZGVyX2l0ZW1zXG5gYGBzcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVyX2l0ZW1zIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgb3JkZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIGJvb2tfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHF1YW50aXR5IElOVCBOT1QgTlVMTCxcbiAgICBwcmljZSBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCxcbiAgICBGT1JFSUdOIEtFWSAob3JkZXJfaWQpIFJFRkVSRU5DRVMgb3JkZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoYm9va19pZCkgUkVGRVJFTkNFUyBib29rcyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5gYGBcblxuIyMjIDYuIHBheW1lbnRzXG5gYGBzcWxcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHBheW1lbnRzIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgb3JkZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHBheW1lbnRfbWV0aG9kIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgIGNhcmRfbnVtYmVyIFZBUkNIQVIoMjU1KSxcbiAgICBjYXJkX2hvbGRlcl9uYW1lIFZBUkNIQVIoMTAwKSxcbiAgICBleHBpcnlfZGF0ZSBWQVJDSEFSKDEwKSxcbiAgICBjdnYgVkFSQ0hBUigxMCksXG4gICAgYW1vdW50IERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICB0cmFuc2FjdGlvbl9pZCBWQVJDSEFSKDEwMCksXG4gICAgcGF5bWVudF9kYXRlIFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIEZPUkVJR04gS0VZIChvcmRlcl9pZCkgUkVGRVJFTkNFUyBvcmRlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFXG4pO1xuYGBgXG5cblRoZSBkYXRhYmFzZSBjb25uZWN0aW9uIHBhcmFtZXRlcnMgdXNlZCBpbiB0aGUgYXBwbGljYXRpb24gYXJlOlxuLSBKREJDIFVSTDogYGpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9lYm9va2phdmFgXG4tIFVzZXJuYW1lOiBgcm9vdGBcbi0gUGFzc3dvcmQ6IGBvcmFjbGVgXG5cbklzIHRoZXJlIGFueSBzcGVjaWZpYyBhc3BlY3Qgb2YgdGhlIGRhdGFiYXNlIHNjaGVtYSB5b3UnZCBsaWtlIG1lIHRvIGV4cGxhaW4gaW4gbW9yZSBkZXRhaWw/XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiJkOGYyZDE3MC1kMjNiLTQ2YjgtYjdjZC1kMmNhMjhmNTgyNzgiLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjlhNWZmYTI5LTFiN2QtNDE4Zi05NzFlLTg5OTBlNmJhNzVkMiIsInJlcXVlc3RfbWVzc2FnZSI6ImluIHRleHQiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoiaW4gdGV4dCJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyBEYXRhYmFzZSBTY2hlbWEgZm9yIGVCb29rIEFwcFxuXG4jIyBEYXRhYmFzZSBOYW1lOiBlYm9va2phdmFcblxuIyMgVGFibGVzOlxuXG4xLiAqKnVzZXJzKipcbiAgIC0gaWQ6IElOVCAoUHJpbWFyeSBLZXksIEF1dG8gSW5jcmVtZW50KVxuICAgLSB1c2VybmFtZTogVkFSQ0hBUig1MCkgKE5vdCBOdWxsLCBVbmlxdWUpXG4gICAtIHBhc3N3b3JkOiBWQVJDSEFSKDI1NSkgKE5vdCBOdWxsKVxuICAgLSBlbWFpbDogVkFSQ0hBUigxMDApIChOb3QgTnVsbClcbiAgIC0gZnVsbF9uYW1lOiBWQVJDSEFSKDEwMCkgKE5vdCBOdWxsKVxuICAgLSByb2xlOiBWQVJDSEFSKDIwKSAoTm90IE51bGwsIERlZmF1bHQgJ3VzZXInKVxuICAgLSBjcmVhdGVkX2F0OiBUSU1FU1RBTVAgKERlZmF1bHQgQ3VycmVudCBUaW1lc3RhbXApXG5cbjIuICoqYm9va3MqKlxuICAgLSBpZDogSU5UIChQcmltYXJ5IEtleSwgQXV0byBJbmNyZW1lbnQpXG4gICAtIHRpdGxlOiBWQVJDSEFSKDI1NSkgKE5vdCBOdWxsKVxuICAgLSBhdXRob3I6IFZBUkNIQVIoMTAwKSAoTm90IE51bGwpXG4gICAtIGRlc2NyaXB0aW9uOiBURVhUXG4gICAtIGNhdGVnb3J5OiBWQVJDSEFSKDUwKVxuICAgLSBnZW5yZTogVkFSQ0hBUig1MClcbiAgIC0gcHJpY2U6IERFQ0lNQUwoMTAsMikgKE5vdCBOdWxsKVxuICAgLSBpbWFnZV91cmw6IFZBUkNIQVIoMjU1KVxuICAgLSBzdG9jazogSU5UIChOb3QgTnVsbCwgRGVmYXVsdCAwKVxuICAgLSBjcmVhdGVkX2F0OiBUSU1FU1RBTVAgKERlZmF1bHQgQ3VycmVudCBUaW1lc3RhbXApXG5cbjMuICoqY2FydF9pdGVtcyoqXG4gICAtIGlkOiBJTlQgKFByaW1hcnkgS2V5LCBBdXRvIEluY3JlbWVudClcbiAgIC0gdXNlcl9pZDogSU5UIChOb3QgTnVsbCwgRm9yZWlnbiBLZXkgdG8gdXNlcnMuaWQpXG4gICAtIGJvb2tfaWQ6IElOVCAoTm90IE51bGwsIEZvcmVpZ24gS2V5IHRvIGJvb2tzLmlkKVxuICAgLSBxdWFudGl0eTogSU5UIChOb3QgTnVsbCwgRGVmYXVsdCAxKVxuICAgLSBjcmVhdGVkX2F0OiBUSU1FU1RBTVAgKERlZmF1bHQgQ3VycmVudCBUaW1lc3RhbXApXG5cbjQuICoqb3JkZXJzKipcbiAgIC0gaWQ6IElOVCAoUHJpbWFyeSBLZXksIEF1dG8gSW5jcmVtZW50KVxuICAgLSB1c2VyX2lkOiBJTlQgKE5vdCBOdWxsLCBGb3JlaWduIEtleSB0byB1c2Vycy5pZClcbiAgIC0gb3JkZXJfZGF0ZTogVElNRVNUQU1QIChEZWZhdWx0IEN1cnJlbnQgVGltZXN0YW1wKVxuICAgLSB0b3RhbF9hbW91bnQ6IERFQ0lNQUwoMTAsMikgKE5vdCBOdWxsKVxuICAgLSBzdGF0dXM6IFZBUkNIQVIoMjApIChOb3QgTnVsbCwgRGVmYXVsdCAncGVuZGluZycpXG5cbjUuICoqb3JkZXJfaXRlbXMqKlxuICAgLSBpZDogSU5UIChQcmltYXJ5IEtleSwgQXV0byBJbmNyZW1lbnQpXG4gICAtIG9yZGVyX2lkOiBJTlQgKE5vdCBOdWxsLCBGb3JlaWduIEtleSB0byBvcmRlcnMuaWQpXG4gICAtIGJvb2tfaWQ6IElOVCAoTm90IE51bGwsIEZvcmVpZ24gS2V5IHRvIGJvb2tzLmlkKVxuICAgLSBxdWFudGl0eTogSU5UIChOb3QgTnVsbClcbiAgIC0gcHJpY2U6IERFQ0lNQUwoMTAsMikgKE5vdCBOdWxsKVxuXG42LiAqKnBheW1lbnRzKipcbiAgIC0gaWQ6IElOVCAoUHJpbWFyeSBLZXksIEF1dG8gSW5jcmVtZW50KVxuICAgLSBvcmRlcl9pZDogSU5UIChOb3QgTnVsbCwgRm9yZWlnbiBLZXkgdG8gb3JkZXJzLmlkKVxuICAgLSBwYXltZW50X21ldGhvZDogVkFSQ0hBUig1MCkgKE5vdCBOdWxsKVxuICAgLSBjYXJkX251bWJlcjogVkFSQ0hBUigyNTUpXG4gICAtIGNhcmRfaG9sZGVyX25hbWU6IFZBUkNIQVIoMTAwKVxuICAgLSBleHBpcnlfZGF0ZTogVkFSQ0hBUigxMClcbiAgIC0gY3Z2OiBWQVJDSEFSKDEwKVxuICAgLSBhbW91bnQ6IERFQ0lNQUwoMTAsMikgKE5vdCBOdWxsKVxuICAgLSBzdGF0dXM6IFZBUkNIQVIoMjApIChOb3QgTnVsbCwgRGVmYXVsdCAncGVuZGluZycpXG4gICAtIHRyYW5zYWN0aW9uX2lkOiBWQVJDSEFSKDEwMClcbiAgIC0gcGF5bWVudF9kYXRlOiBUSU1FU1RBTVAgKERlZmF1bHQgQ3VycmVudCBUaW1lc3RhbXApXG5cbiMjIFJlbGF0aW9uc2hpcHM6XG4tIGNhcnRfaXRlbXMudXNlcl9pZCDihpIgdXNlcnMuaWQgKENBU0NBREUgb24gZGVsZXRlKVxuLSBjYXJ0X2l0ZW1zLmJvb2tfaWQg4oaSIGJvb2tzLmlkIChDQVNDQURFIG9uIGRlbGV0ZSlcbi0gb3JkZXJzLnVzZXJfaWQg4oaSIHVzZXJzLmlkIChDQVNDQURFIG9uIGRlbGV0ZSlcbi0gb3JkZXJfaXRlbXMub3JkZXJfaWQg4oaSIG9yZGVycy5pZCAoQ0FTQ0FERSBvbiBkZWxldGUpXG4tIG9yZGVyX2l0ZW1zLmJvb2tfaWQg4oaSIGJvb2tzLmlkIChDQVNDQURFIG9uIGRlbGV0ZSlcbi0gcGF5bWVudHMub3JkZXJfaWQg4oaSIG9yZGVycy5pZCAoQ0FTQ0FERSBvbiBkZWxldGUpXG5cbiMjIERhdGFiYXNlIENvbm5lY3Rpb246XG4tIEpEQkMgVVJMOiBqZGJjOm15c3FsOi8vbG9jYWxob3N0OjMzMDYvZWJvb2tqYXZhXG4tIFVzZXJuYW1lOiByb290XG4tIFBhc3N3b3JkOiBvcmFjbGVcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50IjoiaW4gdGV4dCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvZWJvb2stYXBwIDUiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9lYm9vay1hcHAgNSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiIjIERhdGFiYXNlIFNjaGVtYSBmb3IgZUJvb2sgQXBwXG5cbiMjIERhdGFiYXNlIE5hbWU6IGVib29ramF2YVxuXG4jIyBUYWJsZXM6XG5cbjEuICoqdXNlcnMqKlxuICAgLSBpZDogSU5UIChQcmltYXJ5IEtleSwgQXV0byBJbmNyZW1lbnQpXG4gICAtIHVzZXJuYW1lOiBWQVJDSEFSKDUwKSAoTm90IE51bGwsIFVuaXF1ZSlcbiAgIC0gcGFzc3dvcmQ6IFZBUkNIQVIoMjU1KSAoTm90IE51bGwpXG4gICAtIGVtYWlsOiBWQVJDSEFSKDEwMCkgKE5vdCBOdWxsKVxuICAgLSBmdWxsX25hbWU6IFZBUkNIQVIoMTAwKSAoTm90IE51bGwpXG4gICAtIHJvbGU6IFZBUkNIQVIoMjApIChOb3QgTnVsbCwgRGVmYXVsdCAndXNlcicpXG4gICAtIGNyZWF0ZWRfYXQ6IFRJTUVTVEFNUCAoRGVmYXVsdCBDdXJyZW50IFRpbWVzdGFtcClcblxuMi4gKipib29rcyoqXG4gICAtIGlkOiBJTlQgKFByaW1hcnkgS2V5LCBBdXRvIEluY3JlbWVudClcbiAgIC0gdGl0bGU6IFZBUkNIQVIoMjU1KSAoTm90IE51bGwpXG4gICAtIGF1dGhvcjogVkFSQ0hBUigxMDApIChOb3QgTnVsbClcbiAgIC0gZGVzY3JpcHRpb246IFRFWFRcbiAgIC0gY2F0ZWdvcnk6IFZBUkNIQVIoNTApXG4gICAtIGdlbnJlOiBWQVJDSEFSKDUwKVxuICAgLSBwcmljZTogREVDSU1BTCgxMCwyKSAoTm90IE51bGwpXG4gICAtIGltYWdlX3VybDogVkFSQ0hBUigyNTUpXG4gICAtIHN0b2NrOiBJTlQgKE5vdCBOdWxsLCBEZWZhdWx0IDApXG4gICAtIGNyZWF0ZWRfYXQ6IFRJTUVTVEFNUCAoRGVmYXVsdCBDdXJyZW50IFRpbWVzdGFtcClcblxuMy4gKipjYXJ0X2l0ZW1zKipcbiAgIC0gaWQ6IElOVCAoUHJpbWFyeSBLZXksIEF1dG8gSW5jcmVtZW50KVxuICAgLSB1c2VyX2lkOiBJTlQgKE5vdCBOdWxsLCBGb3JlaWduIEtleSB0byB1c2Vycy5pZClcbiAgIC0gYm9va19pZDogSU5UIChOb3QgTnVsbCwgRm9yZWlnbiBLZXkgdG8gYm9va3MuaWQpXG4gICAtIHF1YW50aXR5OiBJTlQgKE5vdCBOdWxsLCBEZWZhdWx0IDEpXG4gICAtIGNyZWF0ZWRfYXQ6IFRJTUVTVEFNUCAoRGVmYXVsdCBDdXJyZW50IFRpbWVzdGFtcClcblxuNC4gKipvcmRlcnMqKlxuICAgLSBpZDogSU5UIChQcmltYXJ5IEtleSwgQXV0byBJbmNyZW1lbnQpXG4gICAtIHVzZXJfaWQ6IElOVCAoTm90IE51bGwsIEZvcmVpZ24gS2V5IHRvIHVzZXJzLmlkKVxuICAgLSBvcmRlcl9kYXRlOiBUSU1FU1RBTVAgKERlZmF1bHQgQ3VycmVudCBUaW1lc3RhbXApXG4gICAtIHRvdGFsX2Ftb3VudDogREVDSU1BTCgxMCwyKSAoTm90IE51bGwpXG4gICAtIHN0YXR1czogVkFSQ0hBUigyMCkgKE5vdCBOdWxsLCBEZWZhdWx0ICdwZW5kaW5nJylcblxuNS4gKipvcmRlcl9pdGVtcyoqXG4gICAtIGlkOiBJTlQgKFByaW1hcnkgS2V5LCBBdXRvIEluY3JlbWVudClcbiAgIC0gb3JkZXJfaWQ6IElOVCAoTm90IE51bGwsIEZvcmVpZ24gS2V5IHRvIG9yZGVycy5pZClcbiAgIC0gYm9va19pZDogSU5UIChOb3QgTnVsbCwgRm9yZWlnbiBLZXkgdG8gYm9va3MuaWQpXG4gICAtIHF1YW50aXR5OiBJTlQgKE5vdCBOdWxsKVxuICAgLSBwcmljZTogREVDSU1BTCgxMCwyKSAoTm90IE51bGwpXG5cbjYuICoqcGF5bWVudHMqKlxuICAgLSBpZDogSU5UIChQcmltYXJ5IEtleSwgQXV0byBJbmNyZW1lbnQpXG4gICAtIG9yZGVyX2lkOiBJTlQgKE5vdCBOdWxsLCBGb3JlaWduIEtleSB0byBvcmRlcnMuaWQpXG4gICAtIHBheW1lbnRfbWV0aG9kOiBWQVJDSEFSKDUwKSAoTm90IE51bGwpXG4gICAtIGNhcmRfbnVtYmVyOiBWQVJDSEFSKDI1NSlcbiAgIC0gY2FyZF9ob2xkZXJfbmFtZTogVkFSQ0hBUigxMDApXG4gICAtIGV4cGlyeV9kYXRlOiBWQVJDSEFSKDEwKVxuICAgLSBjdnY6IFZBUkNIQVIoMTApXG4gICAtIGFtb3VudDogREVDSU1BTCgxMCwyKSAoTm90IE51bGwpXG4gICAtIHN0YXR1czogVkFSQ0hBUigyMCkgKE5vdCBOdWxsLCBEZWZhdWx0ICdwZW5kaW5nJylcbiAgIC0gdHJhbnNhY3Rpb25faWQ6IFZBUkNIQVIoMTAwKVxuICAgLSBwYXltZW50X2RhdGU6IFRJTUVTVEFNUCAoRGVmYXVsdCBDdXJyZW50IFRpbWVzdGFtcClcblxuIyMgUmVsYXRpb25zaGlwczpcbi0gY2FydF9pdGVtcy51c2VyX2lkIOKGkiB1c2Vycy5pZCAoQ0FTQ0FERSBvbiBkZWxldGUpXG4tIGNhcnRfaXRlbXMuYm9va19pZCDihpIgYm9va3MuaWQgKENBU0NBREUgb24gZGVsZXRlKVxuLSBvcmRlcnMudXNlcl9pZCDihpIgdXNlcnMuaWQgKENBU0NBREUgb24gZGVsZXRlKVxuLSBvcmRlcl9pdGVtcy5vcmRlcl9pZCDihpIgb3JkZXJzLmlkIChDQVNDQURFIG9uIGRlbGV0ZSlcbi0gb3JkZXJfaXRlbXMuYm9va19pZCDihpIgYm9va3MuaWQgKENBU0NBREUgb24gZGVsZXRlKVxuLSBwYXltZW50cy5vcmRlcl9pZCDihpIgb3JkZXJzLmlkIChDQVNDQURFIG9uIGRlbGV0ZSlcblxuIyMgRGF0YWJhc2UgQ29ubmVjdGlvbjpcbi0gSkRCQyBVUkw6IGpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9lYm9va2phdmFcbi0gVXNlcm5hbWU6IHJvb3Rcbi0gUGFzc3dvcmQ6IG9yYWNsZVxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiNjIzMzZlZTAtMTRhNS00YTAwLTkxNmEtZDYyNTRmNGE2YWNiIiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmOTdjN2U3NC1kZDZjLTQ5ZTEtYjhlYy0xNGJhN2I4NzNjZmIiLCJyZXF1ZXN0X21lc3NhZ2UiOiJ0aGUgYWRtaW4gc2hvdWwgb25seSBhZGQgdW5pcXVlIGJvb2sgbm90IHRoZSBzYW1lIG9uZSIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJ0aGUgYWRtaW4gc2hvdWwgb25seSBhZGQgdW5pcXVlIGJvb2sgbm90IHRoZSBzYW1lIG9uZSJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxTnQ3MmZiVUgyU0FzNm55OHU0UmVVNiIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCBjb2RlIHJlbGF0ZWQgdG8gYWRkaW5nIGJvb2tzIGJ5IGFkbWluLCBlc3BlY2lhbGx5IGluIGFkbWluIHBhbmVscywgY29udHJvbGxlcnMsIG9yIHNlcnZsZXRzLiBMb29rIGZvciBmaWxlcyB0aGF0IGhhbmRsZSBib29rIGFkZGl0aW9uIGZ1bmN0aW9uYWxpdHkgYW5kIGFueSB2YWxpZGF0aW9uIHRoYXQgbWlnaHQgYmUgaW4gcGxhY2UuXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJIHVuZGVyc3RhbmQgeW91IHdhbnQgdG8gZW5zdXJlIHRoYXQgdGhlIGFkbWluIGNhbiBvbmx5IGFkZCB1bmlxdWUgYm9va3MgYW5kIG5vdCBkdXBsaWNhdGUgdGhlIHNhbWUgYm9vay4gTGV0IG1lIGxvb2sgYXQgdGhlIGN1cnJlbnQgaW1wbGVtZW50YXRpb24gb2YgYm9vayBhZGRpdGlvbiBmdW5jdGlvbmFsaXR5IGFuZCB0aGVuIHN1Z2dlc3QgY2hhbmdlcyB0byBlbmZvcmNlIHVuaXF1ZW5lc3MuXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6InRoZSBhZG1pbiBzaG91bCBvbmx5IGFkZCB1bmlxdWUgYm9vayBub3QgdGhlIHNhbWUgb25lIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiSSB1bmRlcnN0YW5kIHlvdSB3YW50IHRvIGVuc3VyZSB0aGF0IHRoZSBhZG1pbiBjYW4gb25seSBhZGQgdW5pcXVlIGJvb2tzIGFuZCBub3QgZHVwbGljYXRlIHRoZSBzYW1lIGJvb2suIExldCBtZSBsb29rIGF0IHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIGJvb2sgYWRkaXRpb24gZnVuY3Rpb25hbGl0eSBhbmQgdGhlbiBzdWdnZXN0IGNoYW5nZXMgdG8gZW5mb3JjZSB1bmlxdWVuZXNzLlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjhhMWQ2YjA4LTliYTgtNGI2Ni05NjdmLTYxNmNhMTMzZTdiMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVVGc1Q3YzJTM3RaSkVLNTNMdW9IOHQiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgZGF0YWJhc2Ugc2NoZW1hIGZvciBib29rcyB0YWJsZSwgZXNwZWNpYWxseSBhbnkgU1FMIGZpbGVzIHRoYXQgY3JlYXRlIHRoZSB0YWJsZSBvciBhbnkgdW5pcXVlbmVzcyBjb25zdHJhaW50cyBvbiB0aGUgYm9va3MgdGFibGUuXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgbG9vayBhdCB0aGUgZGF0YWJhc2Ugc2NoZW1hIHRvIHVuZGVyc3RhbmQgaG93IGJvb2tzIGFyZSBzdG9yZWQgYW5kIGlmIHRoZXJlJ3MgYW55IHVuaXF1ZW5lc3MgY29uc3RyYWludDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXG4uLi5cblxuQFdlYlNlcnZsZXQodmFsdWU9XCIvYWRtaW4vYm9va3MvKlwiKVxuQE11bHRpcGFydENvbmZpZyhmaWxlU2l6ZVRocmVzaG9sZD0xMDI0KjEwMjQqMiwgLy8gMk1CXG4gICAgICAgICAgICAgICAgIG1heEZpbGVTaXplPTEwMjQqMTAyNCoxMCwgICAgICAvLyAxME1CXG4gICAgICAgICAgICAgICAgIG1heFJlcXVlc3RTaXplPTEwMjQqMTAyNCo1MCkgICAvLyA1ME1CXG5wdWJsaWMgY2xhc3MgQWRtaW5Cb29rc1NlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgcHJpdmF0ZSBCb29rREFPIGJvb2tEQU87XG5cbiAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgICAgICBib29rREFPID0gbmV3IEJvb2tEQU8oKTtcbi4uLlxuXG4gICAgLy8gSGVscGVyIG1ldGhvZCB0byBoYW5kbGUgZmlsZSB1cGxvYWRcbiAgICBwcml2YXRlIFN0cmluZyBzYXZlRmlsZShQYXJ0IGZpbGVQYXJ0LCBTdHJpbmcgYXBwbGljYXRpb25QYXRoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgcGFydCBpcyB2YWxpZFxuICAgICAgICBpZiAoZmlsZVBhcnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IGlzIG51bGwhXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IGlzIG51bGxcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U2l6ZSgpIDw9IDApIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBmaWxlUGFydCBzaXplIGlzIDAhXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IHNpemUgaXMgMFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpID09IG51bGwgfHwgZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBObyBmaWxlbmFtZSBzdWJtaXR0ZWQhXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTm8gZmlsZW5hbWUgc3VibWl0dGVkXCIpO1xuICAgICAgICB9XG4uLi5cblxuICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIHVzaW5nIGEgc2ltcGxlciBhcHByb2FjaFxuICAgICAgICB0cnkgKElucHV0U3RyZWFtIGlucHV0ID0gZmlsZVBhcnQuZ2V0SW5wdXRTdHJlYW0oKTtcbiAgICAgICAgICAgICBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW0gb3V0cHV0ID0gbmV3IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbShmdWxsRmlsZVBhdGgpKSB7XG5cbiAgICAgICAgICAgIC8vIENvcHkgdGhlIGZpbGUgY29udGVudFxuICAgICAgICAgICAgYnl0ZVtdIGJ1ZmZlciA9IG5ldyBieXRlWzgxOTJdO1xuICAgICAgICAgICAgaW50IGJ5dGVzUmVhZDtcbiAgICAgICAgICAgIHdoaWxlICgoYnl0ZXNSZWFkID0gaW5wdXQucmVhZChidWZmZXIpKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgIG91dHB1dC53cml0ZShidWZmZXIsIDAsIGJ5dGVzUmVhZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgZmlsZSB3YXMgY3JlYXRlZFxuICAgICAgICAgICAgRmlsZSBzYXZlZEZpbGUgPSBuZXcgRmlsZShmdWxsRmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKHNhdmVkRmlsZS5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgc2F2ZWQgc3VjY2Vzc2Z1bGx5OiBcIiArIHNhdmVkRmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBzaXplOiBcIiArIHNhdmVkRmlsZS5sZW5ndGgoKSArIFwiIGJ5dGVzXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogRmlsZSB3YXMgbm90IGNyZWF0ZWQhXCIpO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSByZWxhdGl2ZSBwYXRoIHRvIGJlIHN0b3JlZCBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgLy8gVXNlIGEgcGF0aCB0aGF0IHdpbGwgYmUgYWNjZXNzaWJsZSBmcm9tIHRoZSB3ZWIgYXBwbGljYXRpb25cbiAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL1wiICsgdW5pcXVlRmlsZU5hbWU7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIGRhdGFiYXNlOiBcIiArIHJlbGF0aXZlUGF0aCk7XG5cbiAgICAgICAgLy8gQWxzbyBwcmludCB3aGF0IHRoZSBmdWxsIFVSTCB3b3VsZCBiZVxuICAgICAgICBTdHJpbmcgZnVsbFVybCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIFVSTCB3b3VsZCBiZTogXCIgKyBmdWxsVXJsKTtcblxuICAgICAgICByZXR1cm4gcmVsYXRpdmVQYXRoO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKCk7XG4gICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cbiAgICAgICAgaWYgKHVzZXIgPT0gbnVsbCB8fCAhdXNlci5pc0FkbWluKCkpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9sb2dpblwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vYm9va3MtbGlzdC5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocGF0aEluZm8uZXF1YWxzKFwiL2FkZFwiKSkge1xuICAgICAgICAgICAgLy8gU2hvdyBhZGQgYm9vayBmb3JtXG4gICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocGF0aEluZm8uc3RhcnRzV2l0aChcIi92aWV3L1wiKSkge1xuICAgICAgICAgICAgLy8gU2hvdyBib29rIGRldGFpbHMgaW4gdmlldy1vbmx5IG1vZGVcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW50IGJvb2tJZCA9IEludGVnZXIucGFyc2VJbnQocGF0aEluZm8uc3Vic3RyaW5nKDYpKTtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBib29rREFPLmdldEJvb2tCeUlkKGJvb2tJZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYm9vayAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiYm9va1wiLCBib29rKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJ2aWV3T25seVwiLCB0cnVlKTsgLy8gRmxhZyB0byBpbmRpY2F0ZSB2aWV3LW9ubHkgbW9kZVxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzXCIpO1xuICAgICAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgIGlmIChcImFkZFwiLmVxdWFscyhhY3Rpb24pKSB7XG4gICAgICAgICAgICAvLyBBZGQgbmV3IGJvb2tcbiAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICBib29rLnNldFRpdGxlKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhdXRob3JcIikpO1xuICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihyZXF1ZXN0LmdldFBhcmFtZXRlcihcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgIGJvb2suc2V0Q2F0ZWdvcnkocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICBib29rLnNldEdlbnJlKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiZ2VucmVcIikpO1xuICAgICAgICAgICAgYm9vay5zZXRQcmljZShuZXcgQmlnRGVjaW1hbChyZXF1ZXN0LmdldFBhcmFtZXRlcihcInByaWNlXCIpKSk7XG4gICAgICAgICAgICBib29rLnNldFN0b2NrKEludGVnZXIucGFyc2VJbnQocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJzdG9ja1wiKSkpO1xuXG4gICAgICAgICAgICAvLyBIYW5kbGUgaW1hZ2UgdXBsb2FkXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9jZXNzaW5nIGltYWdlIHVwbG9hZCBmb3IgQUREIG9wZXJhdGlvblwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVHJ5aW5nIHRvIGdldCBmaWxlIHBhcnQgd2l0aCBuYW1lICdib29rSW1hZ2UnLi4uXCIpO1xuICAgICAgICAgICAgICAgIFBhcnQgZmlsZVBhcnQgPSByZXF1ZXN0LmdldFBhcnQoXCJib29rSW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0IHJldHJpZXZlZDogXCIgKyAoZmlsZVBhcnQgIT0gbnVsbCkpO1xuXG4gICAgICAgICAgICAgICAgLy8gUHJpbnQgYWxsIHBhcnRzIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBbGwgcGFydHMgaW4gdGhlIHJlcXVlc3Q6XCIpO1xuICAgICAgICAgICAgICAgIGZvciAoUGFydCBwYXJ0IDogcmVxdWVzdC5nZXRQYXJ0cygpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgUGFydCBuYW1lOiBcIiArIHBhcnQuZ2V0TmFtZSgpICsgXCIsIFNpemU6IFwiICsgcGFydC5nZXRTaXplKCkgKyBcIiwgQ29udGVudCB0eXBlOiBcIiArIHBhcnQuZ2V0Q29udGVudFR5cGUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcImJvb2tJbWFnZVwiLmVxdWFscyhwYXJ0LmdldE5hbWUoKSkgJiYgcGFydC5nZXRTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIEZvdW5kIGJvb2tJbWFnZSBwYXJ0IHdpdGggc2l6ZSA+IDBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFN1Ym1pdHRlZCBmaWxlbmFtZTogXCIgKyBwYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVQYXJ0ICE9IG51bGwgJiYgZmlsZVBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHBhcnQgc2l6ZTogXCIgKyBmaWxlUGFydC5nZXRTaXplKCkpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIG5hbWU6IFwiICsgZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBhcHBsaWNhdGlvbidzIHJlYWwgcGF0aFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYXBwbGljYXRpb25QYXRoID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBcHBsaWNhdGlvbiBwYXRoOiBcIiArIGFwcGxpY2F0aW9uUGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSBhbmQgZ2V0IGl0cyBwYXRoXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVBhdGggPSBzYXZlRmlsZShmaWxlUGFydCwgYXBwbGljYXRpb25QYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2Ugc2F2ZWQsIHBhdGggdG8gc3RvcmUgaW4gREI6IFwiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgaW1hZ2UgVVJMXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIFVSTCBzZXQgaW4gYm9vayBvYmplY3Q6IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkwgd291bGQgYmU6IFwiICsgcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWFnZVBhdGgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vIGZpbGUgdXBsb2FkZWQgb3IgZmlsZSBpcyBlbXB0eSwgdXNpbmcgZGVmYXVsdCBpbWFnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIHByb2Nlc3NpbmcgZmlsZSB1cGxvYWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGggb24gZXJyb3JcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJvb2tEQU8uYWRkQm9vayhib29rKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9ib29rcz9hZGRlZD10cnVlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkZhaWxlZCB0byBhZGQgYm9va1wiKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImJvb2tcIiwgYm9vayk7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICBpZiAoZmlsZVBhcnQgIT0gbnVsbCAmJiBmaWxlUGFydC5nZXRTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCBzaXplOiBcIiArIGZpbGVQYXJ0LmdldFNpemUoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgbmFtZTogXCIgKyBmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGFwcGxpY2F0aW9uJ3MgcmVhbCBwYXRoXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFwcGxpY2F0aW9uIHBhdGg6IFwiICsgYXBwbGljYXRpb25QYXRoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIGFuZCBnZXQgaXRzIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlUGF0aCA9IHNhdmVGaWxlKGZpbGVQYXJ0LCBhcHBsaWNhdGlvblBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBzYXZlZCwgcGF0aCB0byBzdG9yZSBpbiBEQjogXCIgKyBpbWFnZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlUGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBpbWFnZSBVUkxcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2UgVVJMIHNldCBpbiBib29rIG9iamVjdDogXCIgKyBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIGltYWdlIFVSTCB3b3VsZCBiZTogXCIgKyByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgY3VycmVudCBpbWFnZSBpZiBubyBuZXcgaW1hZ2UgaXMgdXBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGN1cnJlbnRJbWFnZVVybCA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY3VycmVudEltYWdlVXJsXCIpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBuZXcgZmlsZSB1cGxvYWRlZCwgY3VycmVudCBpbWFnZSBVUkw6IFwiICsgY3VycmVudEltYWdlVXJsKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEltYWdlVXJsICE9IG51bGwgJiYgIWN1cnJlbnRJbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIktlZXBpbmcgY3VycmVudCBpbWFnZSBVUkw6IFwiICsgY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vIGN1cnJlbnQgaW1hZ2UgVVJMLCB1c2luZyBkZWZhdWx0IGltYWdlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgcHJvY2Vzc2luZyBmaWxlIHVwbG9hZDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcblxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byBrZWVwIGN1cnJlbnQgaW1hZ2Ugb24gZXJyb3JcbiAgICAgICAgICAgICAgICBTdHJpbmcgY3VycmVudEltYWdlVXJsID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjdXJyZW50SW1hZ2VVcmxcIik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbWFnZVVybCAhPSBudWxsICYmICFjdXJyZW50SW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXNpbmcgY3VycmVudCBpbWFnZSBVUkwgYWZ0ZXIgZXJyb3I6IFwiICsgY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKFwiaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIik7IC8vIERlZmF1bHQgaW1hZ2UgcGF0aCBvbiBlcnJvclxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2luZyBkZWZhdWx0IGltYWdlIGFmdGVyIGVycm9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vQm9va0RBTy5qYXZhXG4uLi5cblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgQm9vayBib29rID0gbmV3IEJvb2soKTtcbiAgICAgICAgICAgICAgICBib29rLnNldElkKHJzLmdldEludChcImlkXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFRpdGxlKHJzLmdldFN0cmluZyhcInRpdGxlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEF1dGhvcihycy5nZXRTdHJpbmcoXCJhdXRob3JcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0RGVzY3JpcHRpb24ocnMuZ2V0U3RyaW5nKFwiZGVzY3JpcHRpb25cIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0Q2F0ZWdvcnkocnMuZ2V0U3RyaW5nKFwiY2F0ZWdvcnlcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0R2VucmUocnMuZ2V0U3RyaW5nKFwiZ2VucmVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0UHJpY2UocnMuZ2V0QmlnRGVjaW1hbChcInByaWNlXCIpKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIik7XG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VOYW1lID0gaW1hZ2VVcmwuc3Vic3RyaW5nKGltYWdlVXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgICAgICAgICAgICAgICBpZiAoYm9vay5nZXRUaXRsZSgpLmVxdWFscyhcIlRoZSBHcmVhdCBHYXRzYnlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9nYXRzYnkuanBnXCI7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJJTlNFUlQgSU5UTyBib29rcyAodGl0bGUsIGF1dGhvciwgZGVzY3JpcHRpb24sIGNhdGVnb3J5LCBnZW5yZSwgcHJpY2UsIGltYWdlX3VybCwgc3RvY2spIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGJvb2suZ2V0VGl0bGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBib29rLmdldEF1dGhvcigpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBib29rLmdldENhdGVnb3J5KCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNSwgYm9vay5nZXRHZW5yZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQm9va0RBTy5hZGRCb29rOiBTZXR0aW5nIGltYWdlIFVSTCB0bzogXCIgKyBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNywgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDgsIGJvb2suZ2V0U3RvY2soKSk7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBib29rcyBTRVQgdGl0bGUgPSA/LCBhdXRob3IgPSA/LCBkZXNjcmlwdGlvbiA9ID8sIGNhdGVnb3J5ID0gPywgZ2VucmUgPSA/LCBwcmljZSA9ID8sIGltYWdlX3VybCA9ID8sIHN0b2NrID0gPyBXSEVSRSBpZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGJvb2suZ2V0VGl0bGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBib29rLmdldEF1dGhvcigpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBib29rLmdldENhdGVnb3J5KCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNSwgYm9vay5nZXRHZW5yZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQm9va0RBTy51cGRhdGVCb29rOiBTZXR0aW5nIGltYWdlIFVSTCB0bzogXCIgKyBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNywgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDgsIGJvb2suZ2V0U3RvY2soKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg5LCBib29rLmdldElkKCkpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL21vZGVsL0Jvb2suamF2YVxucGFja2FnZSBtb2RlbDtcblxuaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuXG5wdWJsaWMgY2xhc3MgQm9vayB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdGl0bGU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgYXV0aG9yO1xuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuICAgIHByaXZhdGUgU3RyaW5nIGNhdGVnb3J5O1xuICAgIHByaXZhdGUgU3RyaW5nIGdlbnJlO1xuICAgIHByaXZhdGUgQmlnRGVjaW1hbCBwcmljZTtcbiAgICBwcml2YXRlIFN0cmluZyBpbWFnZVVybDtcbiAgICBwcml2YXRlIGludCBzdG9jaztcbiAgICBcbiAgICBwdWJsaWMgQm9vaygpIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIEJvb2soaW50IGlkLCBTdHJpbmcgdGl0bGUsIFN0cmluZyBhdXRob3IsIFN0cmluZyBkZXNjcmlwdGlvbiwgU3RyaW5nIGNhdGVnb3J5LCBcbiAgICAgICAgICAgICAgICBTdHJpbmcgZ2VucmUsIEJpZ0RlY2ltYWwgcHJpY2UsIFN0cmluZyBpbWFnZVVybCwgaW50IHN0b2NrKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmF1dGhvciA9IGF1dGhvcjtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIHRoaXMuZ2VucmUgPSBnZW5yZTtcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgICAgIHRoaXMuc3RvY2sgPSBzdG9jaztcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0dGVycyBhbmQgU2V0dGVyc1xuICAgIHB1YmxpYyBpbnQgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0SWQoaW50IGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRUaXRsZShTdHJpbmcgdGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldEF1dGhvcigpIHtcbiAgICAgICAgcmV0dXJuIGF1dGhvcjtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0QXV0aG9yKFN0cmluZyBhdXRob3IpIHtcbiAgICAgICAgdGhpcy5hdXRob3IgPSBhdXRob3I7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0RGVzY3JpcHRpb24oU3RyaW5nIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRDYXRlZ29yeSgpIHtcbiAgICAgICAgcmV0dXJuIGNhdGVnb3J5O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRDYXRlZ29yeShTdHJpbmcgY2F0ZWdvcnkpIHtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldEdlbnJlKCkge1xuICAgICAgICByZXR1cm4gZ2VucmU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEdlbnJlKFN0cmluZyBnZW5yZSkge1xuICAgICAgICB0aGlzLmdlbnJlID0gZ2VucmU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBCaWdEZWNpbWFsIGdldFByaWNlKCkge1xuICAgICAgICByZXR1cm4gcHJpY2U7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFByaWNlKEJpZ0RlY2ltYWwgcHJpY2UpIHtcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldEltYWdlVXJsKCkge1xuICAgICAgICByZXR1cm4gaW1hZ2VVcmw7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEltYWdlVXJsKFN0cmluZyBpbWFnZVVybCkge1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0U3RvY2soKSB7XG4gICAgICAgIHJldHVybiBzdG9jaztcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0U3RvY2soaW50IHN0b2NrKSB7XG4gICAgICAgIHRoaXMuc3RvY2sgPSBzdG9jaztcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwXG4uLi5cblxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRhc2hib2FyZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhc2hib2FyZC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICA8JVxuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IChCb29rKSByZXF1ZXN0LmdldEF0dHJpYnV0ZShcImJvb2tcIik7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiB2aWV3T25seSA9IChyZXF1ZXN0LmdldEF0dHJpYnV0ZShcInZpZXdPbmx5XCIpICE9IG51bGwgJiYgKEJvb2xlYW4pcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJ2aWV3T25seVwiKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodmlld09ubHkpIHtcbiAgICAgICAgICAgICAgICAlPlxuICAgICAgICAgICAgICAgIDxoMT5WaWV3IEJvb2s8L2gxPlxuICAgICAgICAgICAgICAgIDwlIH0gZWxzZSBpZiAoYm9vayAhPSBudWxsKSB7ICU+XG4gICAgICAgICAgICAgICAgPGgxPkVkaXQgQm9vazwvaDE+XG4gICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT5cbiAgICAgICAgICAgICAgICA8aDE+QWRkIE5ldyBCb29rPC9oMT5cbiAgICAgICAgICAgICAgICA8JSB9ICU+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBEYXNoYm9hcmQgbWVudSBtb3ZlZCB0byBoZWFkZXIgLS0+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXNoYm9hcmQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgIDwlIGlmIChyZXF1ZXN0LmdldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiKSAhPSBudWxsKSB7ICU+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgIDwlPSByZXF1ZXN0LmdldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiKSAlPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwlIH0gJT5cbi4uLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPXJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSU+L2FkbWluL2Jvb2tzL2VkaXQvPCU9IGJvb2suZ2V0SWQoKSAlPlwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+RWRpdDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9cmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpJT4vYWRtaW4vYm9va3NcIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCI+QmFjazwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgPCEtLSBFZGl0L0FkZCBtb2RlIC0tPlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249XCI8JT1yZXF1ZXN0LmdldENvbnRleHRQYXRoKCklPi9hZG1pbi9ib29rc1wiIG1ldGhvZD1cInBvc3RcIiBlbmN0eXBlPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiIGlkPVwiYm9va0Zvcm1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwpIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImFjdGlvblwiIHZhbHVlPVwidXBkYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJpZFwiIHZhbHVlPVwiPCU9IGJvb2suZ2V0SWQoKSAlPlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImFjdGlvblwiIHZhbHVlPVwiYWRkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU+XG4uLi5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYm9va0ltYWdlXCI+Qm9vayBJbWFnZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJib29rSW1hZ2VcIiBuYW1lPVwiYm9va0ltYWdlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG9uY2hhbmdlPVwiY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0ZWQ6ICcgKyB0aGlzLmZpbGVzWzBdLm5hbWUpO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJyZW50IGltYWdlOjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltZ1BhdGggPSBib29rLmdldEltYWdlVXJsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWdQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBwYXRoIGluIEpTUDogXCIgKyBpbWdQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkw6IFwiICsgZnVsbEltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gVHJ5IGRpZmZlcmVudCB3YXlzIHRvIHJlZmVyZW5jZSB0aGUgaW1hZ2UgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cbi4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxTnQ3MmZiVUgyU0FzNm55OHU0UmVVNiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBsb29rIGF0IHRoZSBkYXRhYmFzZSBzY2hlbWEgdG8gdW5kZXJzdGFuZCBob3cgYm9va3MgYXJlIHN0b3JlZCBhbmQgaWYgdGhlcmUncyBhbnkgdW5pcXVlbmVzcyBjb25zdHJhaW50OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjAzOWQyNjU5LTM3NjMtNDI4NS1iNGFmLTY2YmUzMDE3OWYzMSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTZMMkdVVmllQWNCQVg3Y1VtRFQ3N3giLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgYW55IG1ldGhvZHMgaW4gQm9va0RBTyBvciBvdGhlciBjbGFzc2VzIHRoYXQgY2hlY2sgZm9yIGR1cGxpY2F0ZSBib29rcyBvciB2YWxpZGF0ZSBib29rIHVuaXF1ZW5lc3MgYmVmb3JlIGFkZGluZyBhIG5ldyBib29rLlwifSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IEkgbmVlZCB0byBjaGVjayBpZiB0aGVyZSdzIGFueSBleGlzdGluZyBtZXRob2QgaW4gdGhlIEJvb2tEQU8gY2xhc3MgdGhhdCBjaGVja3MgZm9yIGR1cGxpY2F0ZSBib29rczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2RhdGFiYXNlLnNxbFxuLS0gQ3JlYXRlIGRhdGFiYXNlXG5DUkVBVEUgREFUQUJBU0UgSUYgTk9UIEVYSVNUUyBlYm9va2phdmE7XG5VU0UgZWJvb2tzdG9yZTtcblxuLS0gQ3JlYXRlIHRhYmxlc1xuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB1c2VybmFtZSBWQVJDSEFSKDUwKSBOT1QgTlVMTCBVTklRVUUsXG4gICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgIGVtYWlsIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBmdWxsX25hbWUgVkFSQ0hBUigxMDApIE5PVCBOVUxMLFxuICAgIHJvbGUgVkFSQ0hBUigyMCkgTk9UIE5VTEwgREVGQVVMVCAndXNlcicsXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcblxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYm9va3MgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB0aXRsZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgYXV0aG9yIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgIGNhdGVnb3J5IFZBUkNIQVIoNTApLFxuICAgIGdlbnJlIFZBUkNIQVIoNTApLFxuICAgIHByaWNlIERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIGltYWdlX3VybCBWQVJDSEFSKDI1NSksXG4gICAgc3RvY2sgSU5UIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4pO1xuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjYXJ0X2l0ZW1zIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgdXNlcl9pZCBJTlQgTk9UIE5VTEwsXG4gICAgYm9va19pZCBJTlQgTk9UIE5VTEwsXG4gICAgcXVhbnRpdHkgSU5UIE5PVCBOVUxMIERFRkFVTFQgMSxcbiAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIHVzZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoYm9va19pZCkgUkVGRVJFTkNFUyBib29rcyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIHVzZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIG9yZGVyX2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgdG90YWxfYW1vdW50IERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVyX2l0ZW1zIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgb3JkZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIGJvb2tfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHF1YW50aXR5IElOVCBOT1QgTlVMTCxcbiAgICBwcmljZSBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCxcbiAgICBGT1JFSUdOIEtFWSAob3JkZXJfaWQpIFJFRkVSRU5DRVMgb3JkZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoYm9va19pZCkgUkVGRVJFTkNFUyBib29rcyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbi0tIEluc2VydCBzYW1wbGUgZGF0YVxuLS0gQWRtaW4gdXNlciAocGFzc3dvcmQ6IGFkbWluMTIzKVxuSU5TRVJUIElOVE8gdXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgZW1haWwsIGZ1bGxfbmFtZSwgcm9sZSkgVkFMVUVTXG4oJ2FkbWluJywgJ2FkbWluMTIzJywgJ2FkbWluQGVib29rc3RvcmUuY29tJywgJ0FkbWluIFVzZXInLCAnYWRtaW4nKTtcblxuLS0gUmVndWxhciB1c2VycyAocGFzc3dvcmQ6IHVzZXIxMjMpXG5JTlNFUlQgSU5UTyB1c2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgZnVsbF9uYW1lLCByb2xlKSBWQUxVRVNcbignam9obicsICd1c2VyMTIzJywgJ2pvaG5AZXhhbXBsZS5jb20nLCAnSm9obiBEb2UnLCAndXNlcicpLFxuKCdqYW5lJywgJ3VzZXIxMjMnLCAnamFuZUBleGFtcGxlLmNvbScsICdKYW5lIFNtaXRoJywgJ3VzZXInKTtcblxuLS0gU2FtcGxlIGJvb2tzXG5JTlNFUlQgSU5UTyBib29rcyAodGl0bGUsIGF1dGhvciwgZGVzY3JpcHRpb24sIGNhdGVnb3J5LCBnZW5yZSwgcHJpY2UsIGltYWdlX3VybCwgc3RvY2spIFZBTFVFU1xuKCdUaGUgR3JlYXQgR2F0c2J5JywgJ0YuIFNjb3R0IEZpdHpnZXJhbGQnLCAnQSBub3ZlbCBhYm91dCB0aGUgbXlzdGVyaW91cyBKYXkgR2F0c2J5IGFuZCBoaXMgbG92ZSBmb3IgRGFpc3kgQnVjaGFuYW4uJywgJ0ZpY3Rpb24nLCAnQ2xhc3NpYycsIDkuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9nYXRzYnkuanBnJywgMTAwKSxcbignVG8gS2lsbCBhIE1vY2tpbmdiaXJkJywgJ0hhcnBlciBMZWUnLCAnQSBub3ZlbCBhYm91dCByYWNpYWwgaW5lcXVhbGl0eSB0aHJvdWdoIHRoZSBleWVzIG9mIGEgeW91bmcgZ2lybCBpbiBBbGFiYW1hLicsICdGaWN0aW9uJywgJ0NsYXNzaWMnLCA4Ljk5LCAnaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZXMvbW9ja2luZ2JpcmQuanBnJywgNzUpLFxuKCcxOTg0JywgJ0dlb3JnZSBPcndlbGwnLCAnQSBkeXN0b3BpYW4gbm92ZWwgc2V0IGluIGEgdG90YWxpdGFyaWFuIHNvY2lldHkuJywgJ0ZpY3Rpb24nLCAnRHlzdG9waWFuJywgNy45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzLzE5ODQuanBnJywgNTApLFxuKCdUaGUgSG9iYml0JywgJ0ouUi5SLiBUb2xraWVuJywgJ0EgZmFudGFzeSBub3ZlbCBhYm91dCB0aGUgYWR2ZW50dXJlcyBvZiBCaWxibyBCYWdnaW5zLicsICdGaWN0aW9uJywgJ0ZhbnRhc3knLCAxMi45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL2hvYmJpdC5qcGcnLCA2MCksXG4oJ0EgQnJpZWYgSGlzdG9yeSBvZiBUaW1lJywgJ1N0ZXBoZW4gSGF3a2luZycsICdBIGJvb2sgYWJvdXQgdGhlIG5hdHVyZSBvZiB0aW1lIGFuZCB0aGUgdW5pdmVyc2UuJywgJ05vbi1GaWN0aW9uJywgJ1NjaWVuY2UnLCAxNC45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL3RpbWUuanBnJywgNDApLFxuKCdTYXBpZW5zOiBBIEJyaWVmIEhpc3Rvcnkgb2YgSHVtYW5raW5kJywgJ1l1dmFsIE5vYWggSGFyYXJpJywgJ0EgYm9vayBhYm91dCB0aGUgaGlzdG9yeSBvZiBodW1hbiBldm9sdXRpb24uJywgJ05vbi1GaWN0aW9uJywgJ0hpc3RvcnknLCAxNS45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL3NhcGllbnMuanBnJywgMzApLFxuKCdDbGVhbiBDb2RlJywgJ1JvYmVydCBDLiBNYXJ0aW4nLCAnQSBoYW5kYm9vayBvZiBhZ2lsZSBzb2Z0d2FyZSBjcmFmdHNtYW5zaGlwLicsICdUZWNobm9sb2d5JywgJ1Byb2dyYW1taW5nJywgMjkuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9jbGVhbmNvZGUuanBnJywgMjUpLFxuKCdUaGUgQXJ0IG9mIENvbXB1dGVyIFByb2dyYW1taW5nJywgJ0RvbmFsZCBLbnV0aCcsICdBIGNvbXByZWhlbnNpdmUgbW9ub2dyYXBoIG9uIGNvbXB1dGVyIHByb2dyYW1taW5nLicsICdUZWNobm9sb2d5JywgJ1Byb2dyYW1taW5nJywgNDkuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9rbnV0aC5qcGcnLCAxNSk7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2FkZF9wYXltZW50X3RhYmxlLnNxbFxuLS0gQ29ubmVjdCB0byB0aGUgZWJvb2tqYXZhIGRhdGFiYXNlXG5VU0UgZWJvb2tqYXZhO1xuXG4tLSBDcmVhdGUgcGF5bWVudCB0YWJsZVxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcGF5bWVudHMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICBvcmRlcl9pZCBJTlQgTk9UIE5VTEwsXG4gICAgcGF5bWVudF9tZXRob2QgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgY2FyZF9udW1iZXIgVkFSQ0hBUigyNTUpLFxuICAgIGNhcmRfaG9sZGVyX25hbWUgVkFSQ0hBUigxMDApLFxuICAgIGV4cGlyeV9kYXRlIFZBUkNIQVIoMTApLFxuICAgIGN2diBWQVJDSEFSKDEwKSxcbiAgICBhbW91bnQgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgc3RhdHVzIFZBUkNIQVIoMjApIE5PVCBOVUxMIERFRkFVTFQgJ3BlbmRpbmcnLFxuICAgIHRyYW5zYWN0aW9uX2lkIFZBUkNIQVIoMTAwKSxcbiAgICBwYXltZW50X2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgRk9SRUlHTiBLRVkgKG9yZGVyX2lkKSBSRUZFUkVOQ0VTIG9yZGVycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbi0tIERpc3BsYXkgdGhlIHRhYmxlIHN0cnVjdHVyZVxuREVTQ1JJQkUgcGF5bWVudHM7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2Vuc3VyZV9wYXltZW50c190YWJsZS5zcWxcbi0tIENvbm5lY3QgdG8gdGhlIGVib29ramF2YSBkYXRhYmFzZVxuVVNFIGVib29ramF2YTtcblxuLS0gQ3JlYXRlIHBheW1lbnQgdGFibGUgaWYgaXQgZG9lc24ndCBleGlzdFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcGF5bWVudHMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICBvcmRlcl9pZCBJTlQgTk9UIE5VTEwsXG4gICAgcGF5bWVudF9tZXRob2QgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgY2FyZF9udW1iZXIgVkFSQ0hBUigyNTUpLFxuICAgIGNhcmRfaG9sZGVyX25hbWUgVkFSQ0hBUigxMDApLFxuICAgIGV4cGlyeV9kYXRlIFZBUkNIQVIoMTApLFxuICAgIGN2diBWQVJDSEFSKDEwKSxcbiAgICBhbW91bnQgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgc3RhdHVzIFZBUkNIQVIoMjApIE5PVCBOVUxMIERFRkFVTFQgJ3BlbmRpbmcnLFxuICAgIHRyYW5zYWN0aW9uX2lkIFZBUkNIQVIoMTAwKSxcbiAgICBwYXltZW50X2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgRk9SRUlHTiBLRVkgKG9yZGVyX2lkKSBSRUZFUkVOQ0VTIG9yZGVycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbi0tIERpc3BsYXkgdGhlIHRhYmxlIHN0cnVjdHVyZVxuREVTQ1JJQkUgcGF5bWVudHM7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGFvL0Jvb2tEQU8uamF2YVxuLi4uXG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcblxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0U3RvY2socnMuZ2V0SW50KFwic3RvY2tcIikpO1xuICAgICAgICAgICAgICAgIGJvb2tzLmFkZChib29rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYm9va3M7XG4gICAgfVxuXG4gICAgcHVibGljIExpc3Q8Qm9vaz4gZ2V0QWxsQm9va3MoKSB7XG4gICAgICAgIExpc3Q8Qm9vaz4gYm9va3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQm9va0RBTzogR2V0dGluZyBhbGwgYm9va3NcIik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIGJvb2tzXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGVjdXRpbmcgU1FMOiBcIiArIHNxbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJPcmlnaW5hbCBpbWFnZSBVUkwgZm9yIFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCI6IFwiICsgaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udmVydGVkIHRvOiBcIiArIGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRTdG9jayhycy5nZXRJbnQoXCJzdG9ja1wiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvb2s7XG4gICAgfVxuXG4gICAgcHVibGljIExpc3Q8Qm9vaz4gZ2V0Qm9va3NCeUNhdGVnb3J5KFN0cmluZyBjYXRlZ29yeSkge1xuICAgICAgICByZXR1cm4gZ2V0Qm9va3NCeUNhdGVnb3J5KGNhdGVnb3J5LCAxLCBJbnRlZ2VyLk1BWF9WQUxVRSk7XG4gICAgfVxuXG4gICAgcHVibGljIExpc3Q8Qm9vaz4gZ2V0Qm9va3NCeUNhdGVnb3J5KFN0cmluZyBjYXRlZ29yeSwgaW50IHBhZ2UsIGludCBib29rc1BlclBhZ2UpIHtcbiAgICAgICAgTGlzdDxCb29rPiBib29rcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPOiBHZXR0aW5nIGJvb2tzIGJ5IGNhdGVnb3J5OiBcIiArIGNhdGVnb3J5ICsgXCIsIHBhZ2U6IFwiICsgcGFnZSArIFwiLCBib29rc1BlclBhZ2U6IFwiICsgYm9va3NQZXJQYWdlKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gYm9va3MgV0hFUkUgY2F0ZWdvcnkgPSA/IExJTUlUID8gT0ZGU0VUID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGNhdGVnb3J5KTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGJvb2tzUGVyUGFnZSk7XG4gICAgICAgICAgICBzdG10LnNldEludCgzLCAocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkV4ZWN1dGluZyBTUUw6IFwiICsgc3FsICsgXCIgd2l0aCBwYXJhbWV0ZXJzOiBjYXRlZ29yeT1cIiArIGNhdGVnb3J5ICsgXCIsIGxpbWl0PVwiICsgYm9va3NQZXJQYWdlICsgXCIsIG9mZnNldD1cIiArICgocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgIHB1YmxpYyBMaXN0PEJvb2s+IHNlYXJjaEJvb2tzKFN0cmluZyBrZXl3b3JkLCBpbnQgcGFnZSwgaW50IGJvb2tzUGVyUGFnZSkge1xuICAgICAgICBMaXN0PEJvb2s+IGJvb2tzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBib29rcyBXSEVSRSB0aXRsZSBMSUtFID8gT1IgYXV0aG9yIExJS0UgPyBPUiBjYXRlZ29yeSBMSUtFID8gTElNSVQgPyBPRkZTRVQgP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgU3RyaW5nIHNlYXJjaEtleXdvcmQgPSBcIiVcIiArIGtleXdvcmQgKyBcIiVcIjtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaEtleXdvcmQpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgc2VhcmNoS2V5d29yZCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBzZWFyY2hLZXl3b3JkKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDQsIGJvb2tzUGVyUGFnZSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg1LCAocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gYm9va3MgKHRpdGxlLCBhdXRob3IsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSwgZ2VucmUsIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBib29rLmdldERlc2NyaXB0aW9uKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJpZ0RlY2ltYWwoNiwgYm9vay5nZXRQcmljZSgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8uYWRkQm9vazogU2V0dGluZyBpbWFnZSBVUkwgdG86IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg4LCBib29rLmdldFN0b2NrKCkpO1xuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgYm9va3MgU0VUIHRpdGxlID0gPywgYXV0aG9yID0gPywgZGVzY3JpcHRpb24gPSA/LCBjYXRlZ29yeSA9ID8sIGdlbnJlID0gPywgcHJpY2UgPSA/LCBpbWFnZV91cmwgPSA/LCBzdG9jayA9ID8gV0hFUkUgaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBib29rLmdldERlc2NyaXB0aW9uKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJpZ0RlY2ltYWwoNiwgYm9vay5nZXRQcmljZSgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8udXBkYXRlQm9vazogU2V0dGluZyBpbWFnZSBVUkwgdG86IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg4LCBib29rLmdldFN0b2NrKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoOSwgYm9vay5nZXRJZCgpKTtcbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBGaXJzdCwgZGVsZXRlIHJlbGF0ZWQgcmVjb3JkcyBpbiBjYXJ0X2l0ZW1zXG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIGRlbGV0ZUNhcnRTcWwgPSBcIkRFTEVURSBGUk9NIGNhcnRfaXRlbXMgV0hFUkUgYm9va19pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoZGVsZXRlQ2FydFNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBpZCk7XG4gICAgICAgICAgICBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIHN0bXQuY2xvc2UoKTtcblxuICAgICAgICAgICAgLy8gVGhlbiwgZGVsZXRlIHJlbGF0ZWQgcmVjb3JkcyBpbiBvcmRlcl9pdGVtc1xuICAgICAgICAgICAgU3RyaW5nIGRlbGV0ZU9yZGVySXRlbXNTcWwgPSBcIkRFTEVURSBGUk9NIG9yZGVyX2l0ZW1zIFdIRVJFIGJvb2tfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KGRlbGV0ZU9yZGVySXRlbXNTcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgaWQpO1xuICAgICAgICAgICAgc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBzdG10LmNsb3NlKCk7XG5cbiAgICAgICAgICAgIC8vIEZpbmFsbHksIGRlbGV0ZSB0aGUgYm9va1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiREVMRVRFIEZST00gYm9va3MgV0hFUkUgaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBpZCk7XG4gICAgICAgICAgICBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9tb2RlbC9Cb29rLmphdmFcbnBhY2thZ2UgbW9kZWw7XG5cbmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcblxucHVibGljIGNsYXNzIEJvb2sge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgU3RyaW5nIHRpdGxlO1xuICAgIHByaXZhdGUgU3RyaW5nIGF1dGhvcjtcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcbiAgICBwcml2YXRlIFN0cmluZyBjYXRlZ29yeTtcbiAgICBwcml2YXRlIFN0cmluZyBnZW5yZTtcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgcHJpY2U7XG4gICAgcHJpdmF0ZSBTdHJpbmcgaW1hZ2VVcmw7XG4gICAgcHJpdmF0ZSBpbnQgc3RvY2s7XG4gICAgXG4gICAgcHVibGljIEJvb2soKSB7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBCb29rKGludCBpZCwgU3RyaW5nIHRpdGxlLCBTdHJpbmcgYXV0aG9yLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBjYXRlZ29yeSwgXG4gICAgICAgICAgICAgICAgU3RyaW5nIGdlbnJlLCBCaWdEZWNpbWFsIHByaWNlLCBTdHJpbmcgaW1hZ2VVcmwsIGludCBzdG9jaykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5hdXRob3IgPSBhdXRob3I7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICB0aGlzLmdlbnJlID0gZ2VucmU7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgICAgICB0aGlzLnN0b2NrID0gc3RvY2s7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0VGl0bGUoU3RyaW5nIHRpdGxlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRBdXRob3IoKSB7XG4gICAgICAgIHJldHVybiBhdXRob3I7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEF1dGhvcihTdHJpbmcgYXV0aG9yKSB7XG4gICAgICAgIHRoaXMuYXV0aG9yID0gYXV0aG9yO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gZGVzY3JpcHRpb247XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldERlc2NyaXB0aW9uKFN0cmluZyBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2F0ZWdvcnkoKSB7XG4gICAgICAgIHJldHVybiBjYXRlZ29yeTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRHZW5yZSgpIHtcbiAgICAgICAgcmV0dXJuIGdlbnJlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRHZW5yZShTdHJpbmcgZ2VucmUpIHtcbiAgICAgICAgdGhpcy5nZW5yZSA9IGdlbnJlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgQmlnRGVjaW1hbCBnZXRQcmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHByaWNlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRQcmljZShCaWdEZWNpbWFsIHByaWNlKSB7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRJbWFnZVVybCgpIHtcbiAgICAgICAgcmV0dXJuIGltYWdlVXJsO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRJbWFnZVVybChTdHJpbmcgaW1hZ2VVcmwpIHtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldFN0b2NrKCkge1xuICAgICAgICByZXR1cm4gc3RvY2s7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFN0b2NrKGludCBzdG9jaykge1xuICAgICAgICB0aGlzLnN0b2NrID0gc3RvY2s7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3Jlc291cmNlcy9jcmVhdGVfYWRtaW4uc3FsXG4tLSBBZGQgYWRtaW4gdXNlciBpZiBpdCBkb2Vzbid0IGV4aXN0XG5JTlNFUlQgSU5UTyB1c2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgZnVsbF9uYW1lLCByb2xlKVxuU0VMRUNUICdhZG1pbicsICdhZG1pbjEyMycsICdhZG1pbkBnbWFpbC5jb20nLCAnQWRtaW4gVXNlcicsICdhZG1pbidcbkZST00gZHVhbFxuV0hFUkUgTk9UIEVYSVNUUyAoXG4gICAgU0VMRUNUIDEgRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ICdhZG1pbidcbik7XG5cbi0tIERpc3BsYXkgdXNlcnNcblNFTEVDVCBpZCwgdXNlcm5hbWUsIGVtYWlsLCByb2xlIEZST00gdXNlcnM7XG4uLi5cblBhdGg6IGFkbWluX3VwZGF0ZS5zcWxcbi0tIENvbm5lY3QgdG8gdGhlIGVib29rc3RvcmUgZGF0YWJhc2VcblVTRSBlYm9va3N0b3JlO1xuXG4tLSBVcGRhdGUgdGhlIGFkbWluIHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGNyZWRlbnRpYWxzXG5VUERBVEUgdXNlcnMgU0VUIFxuICAgIGVtYWlsID0gJ2FkbWluQGdtYWlsLmNvbScsXG4gICAgcGFzc3dvcmQgPSAnYWRtaW4xMjMnXG5XSEVSRSB1c2VybmFtZSA9ICdhZG1pbic7XG5cbi0tIEVuc3VyZSBhbGwgb3RoZXIgdXNlcnMgaGF2ZSB0aGUgJ3VzZXInIHJvbGVcblVQREFURSB1c2VycyBTRVQgXG4gICAgcm9sZSA9ICd1c2VyJ1xuV0hFUkUgdXNlcm5hbWUgIT0gJ2FkbWluJztcblxuLS0gRGlzcGxheSBhbGwgdXNlcnMgdG8gdmVyaWZ5IHRoZSBjaGFuZ2VzXG5TRUxFQ1QgaWQsIHVzZXJuYW1lLCBlbWFpbCwgcm9sZSBGUk9NIHVzZXJzO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL21vZGVsL09yZGVyLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgT3JkZXIge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgaW50IHVzZXJJZDtcbiAgICBwcml2YXRlIERhdGUgb3JkZXJEYXRlO1xuICAgIHByaXZhdGUgQmlnRGVjaW1hbCB0b3RhbEFtb3VudDtcbiAgICBwcml2YXRlIFN0cmluZyBzdGF0dXM7IC8vIFwicGVuZGluZ1wiLCBcInByb2Nlc3NpbmdcIiwgXCJzaGlwcGVkXCIsIFwiZGVsaXZlcmVkXCIsIFwiY2FuY2VsbGVkXCJcbiAgICBwcml2YXRlIExpc3Q8T3JkZXJJdGVtPiBvcmRlckl0ZW1zO1xuICAgIFxuICAgIHB1YmxpYyBPcmRlcigpIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIE9yZGVyKGludCBpZCwgaW50IHVzZXJJZCwgRGF0ZSBvcmRlckRhdGUsIEJpZ0RlY2ltYWwgdG90YWxBbW91bnQsIFN0cmluZyBzdGF0dXMpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcbiAgICAgICAgdGhpcy5vcmRlckRhdGUgPSBvcmRlckRhdGU7XG4gICAgICAgIHRoaXMudG90YWxBbW91bnQgPSB0b3RhbEFtb3VudDtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgfVxuICAgIFxuICAgIC8uLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFVRnNUN2MyUzN0WkpFSzUzTHVvSDh0In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTm93IEkgbmVlZCB0byBjaGVjayBpZiB0aGVyZSdzIGFueSBleGlzdGluZyBtZXRob2QgaW4gdGhlIEJvb2tEQU8gY2xhc3MgdGhhdCBjaGVja3MgZm9yIGR1cGxpY2F0ZSBib29rczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIyZmVlZDZjZi0zZTMxLTQ5NDQtODVhYS0xYTM3ZmIxOTJiNzUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFQN3Q5ZVpwdW5BTllzWjNIdzlhNHNpIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvZGFvL0Jvb2tEQU8uamF2YVwifSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiQmFzZWQgb24gbXkgYW5hbHlzaXMsIEkgbmVlZCB0byBpbXBsZW1lbnQgYSBmZWF0dXJlIHRvIHByZXZlbnQgZHVwbGljYXRlIGJvb2tzIGZyb20gYmVpbmcgYWRkZWQuIEN1cnJlbnRseSwgdGhlcmUncyBubyB2YWxpZGF0aW9uIGluIHBsYWNlIHRvIGNoZWNrIGlmIGEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHMgYmVmb3JlIGFkZGluZyBpdC5cblxuSGVyZSdzIG15IHBsYW4gdG8gaW1wbGVtZW50IHRoaXMgZmVhdHVyZTpcblxuIyMgUGxhbiBmb3IgSW1wbGVtZW50aW5nIEJvb2sgVW5pcXVlbmVzcyBWYWxpZGF0aW9uXG5cbjEuIEFkZCBhIG5ldyBtZXRob2QgaW4gQm9va0RBTyB0byBjaGVjayBpZiBhIGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yIGFscmVhZHkgZXhpc3RzXG4yLiBNb2RpZnkgdGhlIEFkbWluQm9va3NTZXJ2bGV0IHRvIHVzZSB0aGlzIG1ldGhvZCBiZWZvcmUgYWRkaW5nIGEgbmV3IGJvb2tcbjMuIEFkZCBhcHByb3ByaWF0ZSBlcnJvciBoYW5kbGluZyBhbmQgdXNlciBmZWVkYmFja1xuXG5MZXQncyBpbXBsZW1lbnQgdGhlc2UgY2hhbmdlczpcblxuIyMjIFN0ZXAgMTogQWRkIGEgbWV0aG9kIHRvIGNoZWNrIGZvciBkdXBsaWNhdGUgYm9va3MgaW4gQm9va0RBT1xuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vQm9va0RBTy5qYXZhXG4uLi5cblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VOYW1lID0gaW1hZ2VVcmwuc3Vic3RyaW5nKGltYWdlVXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgICAgICAgICAgICAgICBpZiAoYm9vay5nZXRUaXRsZSgpLmVxdWFscyhcIlRoZSBHcmVhdCBHYXRzYnlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9nYXRzYnkuanBnXCI7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJPcmlnaW5hbCBpbWFnZSBVUkwgZm9yIFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCI6IFwiICsgaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udmVydGVkIHRvOiBcIiArIGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcIik7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaW5hbCBpbWFnZSBVUkw6IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgICAgICAgICAgICAgICBib29rcy5hZGQoYm9vayk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRm91bmQgYm9vazogXCIgKyBib29rLmdldFRpdGxlKCkgKyBcIiB3aXRoIGNhdGVnb3J5OiBcIiArIGJvb2suZ2V0Q2F0ZWdvcnkoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgIH1cbi4uLlxuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYm9vaztcbiAgICB9XG5cbiAgICBwdWJsaWMgTGlzdDxCb29rPiBnZXRCb29rc0J5Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIHJldHVybiBnZXRCb29rc0J5Q2F0ZWdvcnkoY2F0ZWdvcnksIDEsIEludGVnZXIuTUFYX1ZBTFVFKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgTGlzdDxCb29rPiBnZXRCb29rc0J5Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5LCBpbnQgcGFnZSwgaW50IGJvb2tzUGVyUGFnZSkge1xuICAgICAgICBMaXN0PEJvb2s+IGJvb2tzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU86IEdldHRpbmcgYm9va3MgYnkgY2F0ZWdvcnk6IFwiICsgY2F0ZWdvcnkgKyBcIiwgcGFnZTogXCIgKyBwYWdlICsgXCIsIGJvb2tzUGVyUGFnZTogXCIgKyBib29rc1BlclBhZ2UpO1xuLi4uXG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIGJvb2tzIFdIRVJFIHRpdGxlIExJS0UgPyBPUiBhdXRob3IgTElLRSA/IE9SIGNhdGVnb3J5IExJS0UgP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgU3RyaW5nIHNlYXJjaEtleXdvcmQgPSBcIiVcIiArIGtleXdvcmQgKyBcIiVcIjtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaEtleXdvcmQpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgc2VhcmNoS2V5d29yZCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBzZWFyY2hLZXl3b3JkKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIGNvdW50ID0gcnMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG5cbiAgICBwdWJsaWMgTGlzdDxCb29rPiBzZWFyY2hCb29rcyhTdHJpbmcga2V5d29yZCkge1xuICAgICAgICByZXR1cm4gc2VhcmNoQm9va3Moa2V5d29yZCwgMSwgSW50ZWdlci5NQVhfVkFMVUUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBMaXN0PEJvb2s+IHNlYXJjaEJvb2tzKFN0cmluZyBrZXl3b3JkLCBpbnQgcGFnZSwgaW50IGJvb2tzUGVyUGFnZSkge1xuICAgICAgICBMaXN0PEJvb2s+IGJvb2tzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBib29rcyBXSEVSRSB0aXRsZSBMSUtFID8gT1IgYXV0aG9yIExJS0UgPyBPUiBjYXRlZ29yeSBMSUtFID8gTElNSVQgPyBPRkZTRVQgP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgU3RyaW5nIHNlYXJjaEtleXdvcmQgPSBcIiVcIiArIGtleXdvcmQgKyBcIiVcIjtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaEtleXdvcmQpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgc2VhcmNoS2V5d29yZCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBzZWFyY2hLZXl3b3JkKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDQsIGJvb2tzUGVyUGFnZSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg1LCAocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgICAgICAgICAgICAgICBib29rcy5hZGQoYm9vayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIGFkZEJvb2soQm9vayBib29rKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gYm9va3MgKHRpdGxlLCBhdXRob3IsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSwgZ2VucmUsIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBib29rLmdldERlc2NyaXB0aW9uKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJpZ0RlY2ltYWwoNiwgYm9vay5nZXRQcmljZSgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8uYWRkQm9vazogU2V0dGluZyBpbWFnZSBVUkwgdG86IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg4LCBib29rLmdldFN0b2NrKCkpO1xuXG4gICAgICAgICAgICBpbnQgcm93c0FmZmVjdGVkID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPLmFkZEJvb2s6IFJvd3MgYWZmZWN0ZWQ6IFwiICsgcm93c0FmZmVjdGVkKTtcbiAgICAgICAgICAgIHJldHVybiByb3dzQWZmZWN0ZWQgPiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIHVwZGF0ZUJvb2soQm9vayBib29rKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIGJvb2tzIFNFVCB0aXRsZSA9ID8sIGF1dGhvciA9ID8sIGRlc2NyaXB0aW9uID0gPywgY2F0ZWdvcnkgPSA/LCBnZW5yZSA9ID8sIHByaWNlID0gPywgaW1hZ2VfdXJsID0gPywgc3RvY2sgPSA/IFdIRVJFIGlkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgYm9vay5nZXRUaXRsZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGJvb2suZ2V0QXV0aG9yKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgYm9vay5nZXREZXNjcmlwdGlvbigpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGJvb2suZ2V0Q2F0ZWdvcnkoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg1LCBib29rLmdldEdlbnJlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCaWdEZWNpbWFsKDYsIGJvb2suZ2V0UHJpY2UoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPLnVwZGF0ZUJvb2s6IFNldHRpbmcgaW1hZ2UgVVJMIHRvOiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg3LCBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoOCwgYm9vay5nZXRTdG9jaygpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDksIGJvb2suZ2V0SWQoKSk7XG4uLi5cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEFsd2F5cyByZXR1cm4gdHJ1ZSB0byBhdm9pZCBhbnkgZGVsYXlzXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAvLyBTaWxlbnRseSBoYW5kbGUgdGhlIGV4Y2VwdGlvbiB0byBhdm9pZCBkZWxheXNcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBSZXR1cm4gdHJ1ZSBhbnl3YXkgdG8gYXZvaWQgcmVkaXJlY3RzXG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAvLyBIZWxwZXIgbWV0aG9kIHRvIGhhbmRsZSBmaWxlIHVwbG9hZFxuICAgIHByaXZhdGUgU3RyaW5nIHNhdmVGaWxlKFBhcnQgZmlsZVBhcnQsIFN0cmluZyBhcHBsaWNhdGlvblBhdGgpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIC8vIFZlcmlmeSB0aGUgZmlsZSBwYXJ0IGlzIHZhbGlkXG4gICAgICAgIGlmIChmaWxlUGFydCA9PSBudWxsKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogZmlsZVBhcnQgaXMgbnVsbCFcIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJGaWxlIHBhcnQgaXMgbnVsbFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWxlUGFydC5nZXRTaXplKCkgPD0gMCkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IHNpemUgaXMgMCFcIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJGaWxlIHBhcnQgc2l6ZSBpcyAwXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkgPT0gbnVsbCB8fCBmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IE5vIGZpbGVuYW1lIHN1Ym1pdHRlZCFcIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJObyBmaWxlbmFtZSBzdWJtaXR0ZWRcIik7XG4gICAgICAgIH1cbi4uLlxuXG4gICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgdXNpbmcgYSBzaW1wbGVyIGFwcHJvYWNoXG4gICAgICAgIHRyeSAoSW5wdXRTdHJlYW0gaW5wdXQgPSBmaWxlUGFydC5nZXRJbnB1dFN0cmVhbSgpO1xuICAgICAgICAgICAgIGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbSBvdXRwdXQgPSBuZXcgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtKGZ1bGxGaWxlUGF0aCkpIHtcblxuICAgICAgICAgICAgLy8gQ29weSB0aGUgZmlsZSBjb250ZW50XG4gICAgICAgICAgICBieXRlW10gYnVmZmVyID0gbmV3IGJ5dGVbODE5Ml07XG4gICAgICAgICAgICBpbnQgYnl0ZXNSZWFkO1xuICAgICAgICAgICAgd2hpbGUgKChieXRlc1JlYWQgPSBpbnB1dC5yZWFkKGJ1ZmZlcikpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0LndyaXRlKGJ1ZmZlciwgMCwgYnl0ZXNSZWFkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHdhcyBjcmVhdGVkXG4gICAgICAgICAgICBGaWxlIHNhdmVkRmlsZSA9IG5ldyBGaWxlKGZ1bGxGaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoc2F2ZWRGaWxlLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBzYXZlZCBzdWNjZXNzZnVsbHk6IFwiICsgc2F2ZWRGaWxlLmdldEFic29sdXRlUGF0aCgpKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHNpemU6IFwiICsgc2F2ZWRGaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXNcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBGaWxlIHdhcyBub3QgY3JlYXRlZCFcIik7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgLy8gSGFuZGxlIGltYWdlIHVwbG9hZFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvY2Vzc2luZyBpbWFnZSB1cGxvYWQgZm9yIEFERCBvcGVyYXRpb25cIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlRyeWluZyB0byBnZXQgZmlsZSBwYXJ0IHdpdGggbmFtZSAnYm9va0ltYWdlJy4uLlwiKTtcbiAgICAgICAgICAgICAgICBQYXJ0IGZpbGVQYXJ0ID0gcmVxdWVzdC5nZXRQYXJ0KFwiYm9va0ltYWdlXCIpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCByZXRyaWV2ZWQ6IFwiICsgKGZpbGVQYXJ0ICE9IG51bGwpKTtcblxuICAgICAgICAgICAgICAgIC8vIFByaW50IGFsbCBwYXJ0cyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWxsIHBhcnRzIGluIHRoZSByZXF1ZXN0OlwiKTtcbiAgICAgICAgICAgICAgICBmb3IgKFBhcnQgcGFydCA6IHJlcXVlc3QuZ2V0UGFydHMoKSkge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFBhcnQgbmFtZTogXCIgKyBwYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIHBhcnQuZ2V0U2l6ZSgpICsgXCIsIENvbnRlbnQgdHlwZTogXCIgKyBwYXJ0LmdldENvbnRlbnRUeXBlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJib29rSW1hZ2VcIi5lcXVhbHMocGFydC5nZXROYW1lKCkpICYmIHBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBGb3VuZCBib29rSW1hZ2UgcGFydCB3aXRoIHNpemUgPiAwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBTdWJtaXR0ZWQgZmlsZW5hbWU6IFwiICsgcGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmaWxlUGFydCAhPSBudWxsICYmIGZpbGVQYXJ0LmdldFNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0IHNpemU6IFwiICsgZmlsZVBhcnQuZ2V0U2l6ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBuYW1lOiBcIiArIGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgYXBwbGljYXRpb24ncyByZWFsIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXBwbGljYXRpb24gcGF0aDogXCIgKyBhcHBsaWNhdGlvblBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgYW5kIGdldCBpdHMgcGF0aFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VQYXRoID0gc2F2ZUZpbGUoZmlsZVBhcnQsIGFwcGxpY2F0aW9uUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIHNhdmVkLCBwYXRoIHRvIHN0b3JlIGluIERCOiBcIiArIGltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VQYXRoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGltYWdlIFVSTFxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBVUkwgc2V0IGluIGJvb2sgb2JqZWN0OiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgaW1hZ2UgVVJMIHdvdWxkIGJlOiBcIiArIHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBmaWxlIHVwbG9hZGVkIG9yIGZpbGUgaXMgZW1wdHksIHVzaW5nIGRlZmF1bHQgaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgdXBsb2FkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgLy8gSGFuZGxlIGltYWdlIHVwbG9hZFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvY2Vzc2luZyBpbWFnZSB1cGxvYWQgZm9yIFVQREFURSBvcGVyYXRpb25cIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlRyeWluZyB0byBnZXQgZmlsZSBwYXJ0IHdpdGggbmFtZSAnYm9va0ltYWdlJy4uLlwiKTtcbiAgICAgICAgICAgICAgICBQYXJ0IGZpbGVQYXJ0ID0gcmVxdWVzdC5nZXRQYXJ0KFwiYm9va0ltYWdlXCIpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCByZXRyaWV2ZWQ6IFwiICsgKGZpbGVQYXJ0ICE9IG51bGwpKTtcblxuICAgICAgICAgICAgICAgIC8vIFByaW50IGFsbCBwYXJ0cyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWxsIHBhcnRzIGluIHRoZSByZXF1ZXN0OlwiKTtcbiAgICAgICAgICAgICAgICBmb3IgKFBhcnQgcGFydCA6IHJlcXVlc3QuZ2V0UGFydHMoKSkge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFBhcnQgbmFtZTogXCIgKyBwYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIHBhcnQuZ2V0U2l6ZSgpICsgXCIsIENvbnRlbnQgdHlwZTogXCIgKyBwYXJ0LmdldENvbnRlbnRUeXBlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJib29rSW1hZ2VcIi5lcXVhbHMocGFydC5nZXROYW1lKCkpICYmIHBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBGb3VuZCBib29rSW1hZ2UgcGFydCB3aXRoIHNpemUgPiAwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBTdWJtaXR0ZWQgZmlsZW5hbWU6IFwiICsgcGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmaWxlUGFydCAhPSBudWxsICYmIGZpbGVQYXJ0LmdldFNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0IHNpemU6IFwiICsgZmlsZVBhcnQuZ2V0U2l6ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBuYW1lOiBcIiArIGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgYXBwbGljYXRpb24ncyByZWFsIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXBwbGljYXRpb24gcGF0aDogXCIgKyBhcHBsaWNhdGlvblBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgYW5kIGdldCBpdHMgcGF0aFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VQYXRoID0gc2F2ZUZpbGUoZmlsZVBhcnQsIGFwcGxpY2F0aW9uUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIHNhdmVkLCBwYXRoIHRvIHN0b3JlIGluIERCOiBcIiArIGltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VQYXRoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGltYWdlIFVSTFxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBVUkwgc2V0IGluIGJvb2sgb2JqZWN0OiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgaW1hZ2UgVVJMIHdvdWxkIGJlOiBcIiArIHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSBjdXJyZW50IGltYWdlIGlmIG5vIG5ldyBpbWFnZSBpcyB1cGxvYWRlZFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY3VycmVudEltYWdlVXJsID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjdXJyZW50SW1hZ2VVcmxcIik7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vIG5ldyBmaWxlIHVwbG9hZGVkLCBjdXJyZW50IGltYWdlIFVSTDogXCIgKyBjdXJyZW50SW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SW1hZ2VVcmwgIT0gbnVsbCAmJiAhY3VycmVudEltYWdlVXJsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChjdXJyZW50SW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiS2VlcGluZyBjdXJyZW50IGltYWdlIFVSTDogXCIgKyBjdXJyZW50SW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTm8gY3VycmVudCBpbWFnZSBVUkwsIHVzaW5nIGRlZmF1bHQgaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKFwiaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIik7IC8vIERlZmF1bHQgaW1hZ2UgcGF0aFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgdXBsb2FkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGtlZXAgY3VycmVudCBpbWFnZSBvbiBlcnJvclxuICAgICAgICAgICAgICAgIFN0cmluZyBjdXJyZW50SW1hZ2VVcmwgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImN1cnJlbnRJbWFnZVVybFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEltYWdlVXJsICE9IG51bGwgJiYgIWN1cnJlbnRJbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChjdXJyZW50SW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2luZyBjdXJyZW50IGltYWdlIFVSTCBhZnRlciBlcnJvcjogXCIgKyBjdXJyZW50SW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVzaW5nIGRlZmF1bHQgaW1hZ2UgYWZ0ZXIgLi4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNkwyR1VWaWVBY0JBWDdjVW1EVDc3eCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IkJhc2VkIG9uIG15IGFuYWx5c2lzLCBJIG5lZWQgdG8gaW1wbGVtZW50IGEgZmVhdHVyZSB0byBwcmV2ZW50IGR1cGxpY2F0ZSBib29rcyBmcm9tIGJlaW5nIGFkZGVkLiBDdXJyZW50bHksIHRoZXJlJ3Mgbm8gdmFsaWRhdGlvbiBpbiBwbGFjZSB0byBjaGVjayBpZiBhIGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yIGFscmVhZHkgZXhpc3RzIGJlZm9yZSBhZGRpbmcgaXQuXG5cbkhlcmUncyBteSBwbGFuIHRvIGltcGxlbWVudCB0aGlzIGZlYXR1cmU6XG5cbiMjIFBsYW4gZm9yIEltcGxlbWVudGluZyBCb29rIFVuaXF1ZW5lc3MgVmFsaWRhdGlvblxuXG4xLiBBZGQgYSBuZXcgbWV0aG9kIGluIEJvb2tEQU8gdG8gY2hlY2sgaWYgYSBib29rIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvciBhbHJlYWR5IGV4aXN0c1xuMi4gTW9kaWZ5IHRoZSBBZG1pbkJvb2tzU2VydmxldCB0byB1c2UgdGhpcyBtZXRob2QgYmVmb3JlIGFkZGluZyBhIG5ldyBib29rXG4zLiBBZGQgYXBwcm9wcmlhdGUgZXJyb3IgaGFuZGxpbmcgYW5kIHVzZXIgZmVlZGJhY2tcblxuTGV0J3MgaW1wbGVtZW50IHRoZXNlIGNoYW5nZXM6XG5cbiMjIyBTdGVwIDE6IEFkZCBhIG1ldGhvZCB0byBjaGVjayBmb3IgZHVwbGljYXRlIGJvb2tzIGluIEJvb2tEQU9cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2NWQ5ZTNmMC1mMjE0LTRmMWUtOTE4ZC1lYzc2YmY0MTMxMGMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE0dm5DQlREYnBuNXY0YXgzTXAzd2tGIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2Rhby9Cb29rREFPLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIHB1YmxpYyBib29sZWFuIGFkZEJvb2soQm9vayBib29rKSB7XFxuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XFxuXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XFxuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFxcXCJJTlNFUlQgSU5UTyBib29rcyAodGl0bGUsIGF1dGhvciwgZGVzY3JpcHRpb24sIGNhdGVnb3J5LCBnZW5yZSwgcHJpY2UsIGltYWdlX3VybCwgc3RvY2spIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPylcXFwiO1xcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGJvb2suZ2V0QXV0aG9yKCkpO1xcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XFxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg1LCBib29rLmdldEdlbnJlKCkpO1xcbiAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiQm9va0RBTy5hZGRCb29rOiBTZXR0aW5nIGltYWdlIFVSTCB0bzogXFxcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XFxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNywgYm9vay5nZXRJbWFnZVVybCgpKTtcXG4gICAgICAgICAgICBzdG10LnNldEludCg4LCBib29rLmdldFN0b2NrKCkpO1xcblxcbiAgICAgICAgICAgIGludCByb3dzQWZmZWN0ZWQgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkJvb2tEQU8uYWRkQm9vazogUm93cyBhZmZlY3RlZDogXFxcIiArIHJvd3NBZmZlY3RlZCk7XFxuICAgICAgICAgICAgcmV0dXJuIHJvd3NBZmZlY3RlZCA+IDA7XFxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfSBmaW5hbGx5IHtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcXG4gICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgLyoqXFxuICAgICAqIENoZWNrIGlmIGEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHNcXG4gICAgICogQHBhcmFtIGJvb2sgVGhlIGJvb2sgdG8gY2hlY2tcXG4gICAgICogQHJldHVybiB0cnVlIGlmIGEgZHVwbGljYXRlIGJvb2sgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2VcXG4gICAgICovXFxuICAgIHB1YmxpYyBib29sZWFuIGlzRHVwbGljYXRlQm9vayhCb29rIGJvb2spIHtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcXG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XFxuICAgICAgICBib29sZWFuIGlzRHVwbGljYXRlID0gZmFsc2U7XFxuXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XFxuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFxcXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBib29rcyBXSEVSRSB0aXRsZSA9ID8gQU5EIGF1dGhvciA9ID9cXFwiO1xcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGJvb2suZ2V0QXV0aG9yKCkpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiQ2hlY2tpbmcgZm9yIGR1cGxpY2F0ZSBib29rOiBcXFwiICsgYm9vay5nZXRUaXRsZSgpICsgXFxcIiBieSBcXFwiICsgYm9vay5nZXRBdXRob3IoKSk7XFxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xcblxcbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcXG4gICAgICAgICAgICAgICAgaW50IGNvdW50ID0gcnMuZ2V0SW50KDEpO1xcbiAgICAgICAgICAgICAgICBpc0R1cGxpY2F0ZSA9IGNvdW50ID4gMDtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJGb3VuZCBcXFwiICsgY291bnQgKyBcXFwiIGV4aXN0aW5nIGJvb2tzIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvclxcXCIpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgIH0gZmluYWxseSB7XFxuICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcXG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xcbiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgcmV0dXJuIGlzRHVwbGljYXRlO1xcbiAgICB9XFxuXFxuICAgIHB1YmxpYyBib29sZWFuIGFkZEJvb2soQm9vayBib29rKSB7XFxuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XFxuXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XFxuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFxcXCJJTlNFUlQgSU5UTyBib29rcyAodGl0bGUsIGF1dGhvciwgZGVzY3JpcHRpb24sIGNhdGVnb3J5LCBnZW5yZSwgcHJpY2UsIGltYWdlX3VybCwgc3RvY2spIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPylcXFwiO1xcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGJvb2suZ2V0QXV0aG9yKCkpO1xcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XFxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg1LCBib29rLmdldEdlbnJlKCkpO1xcbiAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiQm9va0RBTy5hZGRCb29rOiBTZXR0aW5nIGltYWdlIFVSTCB0bzogXFxcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XFxuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNywgYm9vay5nZXRJbWFnZVVybCgpKTtcXG4gICAgICAgICAgICBzdG10LnNldEludCg4LCBib29rLmdldFN0b2NrKCkpO1xcblxcbiAgICAgICAgICAgIGludCByb3dzQWZmZWN0ZWQgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkJvb2tEQU8uYWRkQm9vazogUm93cyBhZmZlY3RlZDogXFxcIiArIHJvd3NBZmZlY3RlZCk7XFxuICAgICAgICAgICAgcmV0dXJuIHJvd3NBZmZlY3RlZCA+IDA7XFxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfSBmaW5hbGx5IHtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcXG4gICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogNDEyLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDQ0NH1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIGFkZCBhIG1ldGhvZCB0byBjaGVjayBmb3IgZHVwbGljYXRlIGJvb2tzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2Rhby9Cb29rREFPLmphdmE6XG4gICAgIDFcdHBhY2thZ2UgZGFvO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IG1vZGVsLkJvb2s7XG4gICAgIDRcdGltcG9ydCBqYXZhLnNxbC5Ecml2ZXJNYW5hZ2VyO1xuICAgICA1XHRcbiAgICAgNlx0aW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuICAgICA3XHRpbXBvcnQgamF2YS5zcWwuKjtcbiAgICAgOFx0aW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4gICAgIDlcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAxMFx0XG4gICAgMTFcdHB1YmxpYyBjbGFzcyBCb29rREFPIHtcbiAgICAxMlx0XG4gICAgMTNcdCAgICBzdGF0aWMge1xuICAgIDE0XHQgICAgICAgIHRyeSB7XG4gICAgMTVcdCAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgMTZcdCAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBlKSB7XG4gICAgMTdcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgMThcdCAgICAgICAgfVxuICAgIDE5XHQgICAgfVxuICAgIDIwXHRcbiAgICAyMVx0ICAgIC8vIERhdGFiYXNlIGNvbm5lY3Rpb24gcGFyYW1ldGVyc1xuICAgIDIyXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVJMID0gXCJqZGJjOm15c3FsOi8vbG9jYWxob3N0OjMzMDYvZWJvb2tqYXZhXCI7XG4gICAgMjNcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19VU0VSID0gXCJyb290XCI7XG4gICAgMjRcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19QQVNTV09SRCA9IFwib3JhY2xlXCI7XG4gICAgMjVcdFxuICAgIDI2XHQgICAgLy8gR2V0IHRvdGFsIG51bWJlciBvZiBib29rcyBmb3IgcGFnaW5hdGlvblxuICAgIDI3XHQgICAgcHVibGljIGludCBnZXRUb3RhbEJvb2tzKCkge1xuICAgIDI4XHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgMjlcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgMzBcdCAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICAzMVx0ICAgICAgICBpbnQgY291bnQgPSAwO1xuICAgIDMyXHRcbiAgICAzM1x0ICAgICAgICB0cnkge1xuICAgIDM0XHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgIDM1XHQgICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBib29rc1wiO1xuICAgIDM2XHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgMzdcdCAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbiAgICAzOFx0XG4gICAgMzlcdCAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICA0MFx0ICAgICAgICAgICAgICAgIGNvdW50ID0gcnMuZ2V0SW50KDEpO1xuICAgIDQxXHQgICAgICAgICAgICB9XG4gICAgNDJcdCAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICA0M1x0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICA0NFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgIDQ1XHQgICAgICAgICAgICB0cnkge1xuICAgIDQ2XHQgICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAgNDdcdCAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAgNDhcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgNDlcdCAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgNTBcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDUxXHQgICAgICAgICAgICB9XG4gICAgNTJcdCAgICAgICAgfVxuICAgIDUzXHRcbiAgICA1NFx0ICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgNTVcdCAgICB9XG4gICAgNTZcdFxuICAgIDU3XHQgICAgLy8gR2V0IHRvdGFsIG51bWJlciBvZiBib29rcyBieSBjYXRlZ29yeSBmb3IgcGFnaW5hdGlvblxuICAgIDU4XHQgICAgcHVibGljIGludCBnZXRUb3RhbEJvb2tzQnlDYXRlZ29yeShTdHJpbmcgY2F0ZWdvcnkpIHtcbiAgICA1OVx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDYwXHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgIDYxXHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgNjJcdCAgICAgICAgaW50IGNvdW50ID0gMDtcbiAgICA2M1x0XG4gICAgNjRcdCAgICAgICAgdHJ5IHtcbiAgICA2NVx0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICA2Nlx0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gYm9va3MgV0hFUkUgY2F0ZWdvcnkgPSA/XCI7XG4gICAgNjdcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICA2OFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgY2F0ZWdvcnkpO1xuICAgIDY5XHQgICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICAgNzBcdFxuICAgIDcxXHQgICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgNzJcdCAgICAgICAgICAgICAgICBjb3VudCA9IHJzLmdldEludCgxKTtcbiAgICA3M1x0ICAgICAgICAgICAgfVxuICAgIDc0XHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgNzVcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNzZcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgICA3N1x0ICAgICAgICAgICAgdHJ5IHtcbiAgICA3OFx0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgIDc5XHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgIDgwXHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgIDgxXHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgIDgyXHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICA4M1x0ICAgICAgICAgICAgfVxuICAgIDg0XHQgICAgICAgIH1cbiAgICA4NVx0XG4gICAgODZcdCAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIDg3XHQgICAgfVxuICAgIDg4XHRcbiAgICA4OVx0ICAgIC8vIEdldCBwYWdpbmF0ZWQgYm9va3NcbiAgICA5MFx0ICAgIHB1YmxpYyBMaXN0PEJvb2s+IGdldEJvb2tzKGludCBwYWdlLCBpbnQgYm9va3NQZXJQYWdlKSB7XG4gICAgOTFcdCAgICAgICAgTGlzdDxCb29rPiBib29rcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgIDkyXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgOTNcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgOTRcdCAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgICA5NVx0XG4gICAgOTZcdCAgICAgICAgdHJ5IHtcbiAgICA5N1x0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICA5OFx0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBib29rcyBMSU1JVCA/IE9GRlNFVCA/XCI7XG4gICAgOTlcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDEwMFx0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgYm9va3NQZXJQYWdlKTtcbiAgIDEwMVx0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoMiwgKHBhZ2UgLSAxKSAqIGJvb2tzUGVyUGFnZSk7XG4gICAxMDJcdCAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbiAgIDEwM1x0XG4gICAxMDRcdCAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgIDEwNVx0ICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAxMDZcdCAgICAgICAgICAgICAgICBib29rLnNldElkKHJzLmdldEludChcImlkXCIpKTtcbiAgIDEwN1x0ICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgMTA4XHQgICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgIDEwOVx0ICAgICAgICAgICAgICAgIGJvb2suc2V0RGVzY3JpcHRpb24ocnMuZ2V0U3RyaW5nKFwiZGVzY3JpcHRpb25cIikpO1xuICAgMTEwXHQgICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAxMTFcdCAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgIDExMlx0ICAgICAgICAgICAgICAgIGJvb2suc2V0UHJpY2UocnMuZ2V0QmlnRGVjaW1hbChcInByaWNlXCIpKTtcbiAgIDExM1x0ICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgIDExNFx0XG4gICAxMTVcdCAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgIDExNlx0ICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgIDExN1x0ICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VOYW1lID0gaW1hZ2VVcmwuc3Vic3RyaW5nKGltYWdlVXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgMTE4XHQgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAxMTlcdCAgICAgICAgICAgICAgICB9XG4gICAxMjBcdFxuICAgMTIxXHQgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgMTIyXHQgICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAxMjNcdCAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9nYXRzYnkuanBnXCI7XG4gICAxMjRcdCAgICAgICAgICAgICAgICB9XG4gICAxMjVcdFxuICAgMTI2XHQgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVVybCk7XG4gICAxMjdcdCAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgIDEyOFx0ICAgICAgICAgICAgICAgIGJvb2tzLmFkZChib29rKTtcbiAgIDEyOVx0ICAgICAgICAgICAgfVxuICAgMTMwXHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAxMzFcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxMzJcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDEzM1x0ICAgICAgICAgICAgdHJ5IHtcbiAgIDEzNFx0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgMTM1XHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgMTM2XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgMTM3XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgMTM4XHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDEzOVx0ICAgICAgICAgICAgfVxuICAgMTQwXHQgICAgICAgIH1cbiAgIDE0MVx0XG4gICAxNDJcdCAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgMTQzXHQgICAgfVxuICAgMTQ0XHRcbiAgIDE0NVx0ICAgIHB1YmxpYyBMaXN0PEJvb2s+IGdldEFsbEJvb2tzKCkge1xuICAgMTQ2XHQgICAgICAgIExpc3Q8Qm9vaz4gYm9va3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDE0N1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgMTQ4XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgMTQ5XHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAxNTBcdFxuICAgMTUxXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU86IEdldHRpbmcgYWxsIGJvb2tzXCIpO1xuICAgMTUyXHRcbiAgIDE1M1x0ICAgICAgICB0cnkge1xuICAgMTU0XHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgMTU1XHQgICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIGJvb2tzXCI7XG4gICAxNTZcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDE1N1x0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXhlY3V0aW5nIFNRTDogXCIgKyBzcWwpO1xuICAgMTU4XHQgICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICAxNTlcdFxuICAgMTYwXHQgICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAxNjFcdCAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgMTYyXHQgICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAxNjNcdCAgICAgICAgICAgICAgICBib29rLnNldFRpdGxlKHJzLmdldFN0cmluZyhcInRpdGxlXCIpKTtcbiAgIDE2NFx0ICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAxNjVcdCAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgIDE2Nlx0ICAgICAgICAgICAgICAgIGJvb2suc2V0Q2F0ZWdvcnkocnMuZ2V0U3RyaW5nKFwiY2F0ZWdvcnlcIikpO1xuICAgMTY3XHQgICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAxNjhcdCAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAxNjlcdCAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIik7XG4gICAxNzBcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJPcmlnaW5hbCBpbWFnZSBVUkwgZm9yIFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCI6IFwiICsgaW1hZ2VVcmwpO1xuICAgMTcxXHQgICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAxNzJcdCAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAxNzNcdCAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgIDE3NFx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgMTc1XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNvbnZlcnRlZCB0bzogXCIgKyBpbWFnZVVybCk7XG4gICAxNzZcdCAgICAgICAgICAgICAgICB9XG4gICAxNzdcdFxuICAgMTc4XHQgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgMTc5XHQgICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAxODBcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVwiKTtcbiAgIDE4MVx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgIDE4Mlx0ICAgICAgICAgICAgICAgIH1cbiAgIDE4M1x0ICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VVcmwpO1xuICAgMTg0XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmluYWwgaW1hZ2UgVVJMOiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAxODVcdCAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgIDE4Nlx0ICAgICAgICAgICAgICAgIGJvb2tzLmFkZChib29rKTtcbiAgIDE4N1x0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZvdW5kIGJvb2s6IFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCIgd2l0aCBjYXRlZ29yeTogXCIgKyBib29rLmdldENhdGVnb3J5KCkpO1xuICAgMTg4XHQgICAgICAgICAgICB9XG4gICAxODlcdCAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDE5MFx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDE5MVx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMTkyXHQgICAgICAgICAgICB0cnkge1xuICAgMTkzXHQgICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAxOTRcdCAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAxOTVcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAxOTZcdCAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAxOTdcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMTk4XHQgICAgICAgICAgICB9XG4gICAxOTlcdCAgICAgICAgfVxuICAgMjAwXHRcbiAgIDIwMVx0ICAgICAgICByZXR1cm4gYm9va3M7XG4gICAyMDJcdCAgICB9XG4gICAyMDNcdFxuICAgMjA0XHQgICAgcHVibGljIEJvb2sgZ2V0Qm9va0J5SWQoaW50IGlkKSB7XG4gICAyMDVcdCAgICAgICAgQm9vayBib29rID0gbnVsbDtcbiAgIDIwNlx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgMjA3XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgMjA4XHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAyMDlcdFxuICAgMjEwXHQgICAgICAgIHRyeSB7XG4gICAyMTFcdCAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAyMTJcdCAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gYm9va3MgV0hFUkUgaWQgPSA/XCI7XG4gICAyMTNcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDIxNFx0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgaWQpO1xuICAgMjE1XHQgICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICAyMTZcdFxuICAgMjE3XHQgICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAyMThcdCAgICAgICAgICAgICAgICBib29rID0gbmV3IEJvb2soKTtcbiAgIDIxOVx0ICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgMjIwXHQgICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAyMjFcdCAgICAgICAgICAgICAgICBib29rLnNldEF1dGhvcihycy5nZXRTdHJpbmcoXCJhdXRob3JcIikpO1xuICAgMjIyXHQgICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAyMjNcdCAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgIDIyNFx0ICAgICAgICAgICAgICAgIGJvb2suc2V0R2VucmUocnMuZ2V0U3RyaW5nKFwiZ2VucmVcIikpO1xuICAgMjI1XHQgICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgMjI2XHQgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgMjI3XHQgICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAyMjhcdCAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAyMjlcdCAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgIDIzMFx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgMjMxXHQgICAgICAgICAgICAgICAgfVxuICAgMjMyXHRcbiAgIDIzM1x0ICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgIDIzNFx0ICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgMjM1XHQgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgMjM2XHQgICAgICAgICAgICAgICAgfVxuICAgMjM3XHQgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVVybCk7XG4gICAyMzhcdCAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgIDIzOVx0ICAgICAgICAgICAgfVxuICAgMjQwXHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAyNDFcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAyNDJcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDI0M1x0ICAgICAgICAgICAgdHJ5IHtcbiAgIDI0NFx0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgMjQ1XHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgMjQ2XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgMjQ3XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgMjQ4XHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDI0OVx0ICAgICAgICAgICAgfVxuICAgMjUwXHQgICAgICAgIH1cbiAgIDI1MVx0XG4gICAyNTJcdCAgICAgICAgcmV0dXJuIGJvb2s7XG4gICAyNTNcdCAgICB9XG4gICAyNTRcdFxuICAgMjU1XHQgICAgcHVibGljIExpc3Q8Qm9vaz4gZ2V0Qm9va3NCeUNhdGVnb3J5KFN0cmluZyBjYXRlZ29yeSkge1xuICAgMjU2XHQgICAgICAgIHJldHVybiBnZXRCb29rc0J5Q2F0ZWdvcnkoY2F0ZWdvcnksIDEsIEludGVnZXIuTUFYX1ZBTFVFKTtcbiAgIDI1N1x0ICAgIH1cbiAgIDI1OFx0XG4gICAyNTlcdCAgICBwdWJsaWMgTGlzdDxCb29rPiBnZXRCb29rc0J5Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5LCBpbnQgcGFnZSwgaW50IGJvb2tzUGVyUGFnZSkge1xuICAgMjYwXHQgICAgICAgIExpc3Q8Qm9vaz4gYm9va3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDI2MVx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgMjYyXHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgMjYzXHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAyNjRcdFxuICAgMjY1XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU86IEdldHRpbmcgYm9va3MgYnkgY2F0ZWdvcnk6IFwiICsgY2F0ZWdvcnkgKyBcIiwgcGFnZTogXCIgKyBwYWdlICsgXCIsIGJvb2tzUGVyUGFnZTogXCIgKyBib29rc1BlclBhZ2UpO1xuICAgMjY2XHRcbiAgIDI2N1x0ICAgICAgICB0cnkge1xuICAgMjY4XHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgMjY5XHQgICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIGJvb2tzIFdIRVJFIGNhdGVnb3J5ID0gPyBMSU1JVCA/IE9GRlNFVCA/XCI7XG4gICAyNzBcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDI3MVx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgY2F0ZWdvcnkpO1xuICAgMjcyXHQgICAgICAgICAgICBzdG10LnNldEludCgyLCBib29rc1BlclBhZ2UpO1xuICAgMjczXHQgICAgICAgICAgICBzdG10LnNldEludCgzLCAocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKTtcbiAgIDI3NFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXhlY3V0aW5nIFNRTDogXCIgKyBzcWwgKyBcIiB3aXRoIHBhcmFtZXRlcnM6IGNhdGVnb3J5PVwiICsgY2F0ZWdvcnkgKyBcIiwgbGltaXQ9XCIgKyBib29rc1BlclBhZ2UgKyBcIiwgb2Zmc2V0PVwiICsgKChwYWdlIC0gMSkgKiBib29rc1BlclBhZ2UpKTtcbiAgIDI3NVx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgMjc2XHRcbiAgIDI3N1x0ICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgMjc4XHQgICAgICAgICAgICAgICAgQm9vayBib29rID0gbmV3IEJvb2soKTtcbiAgIDI3OVx0ICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgMjgwXHQgICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAyODFcdCAgICAgICAgICAgICAgICBib29rLnNldEF1dGhvcihycy5nZXRTdHJpbmcoXCJhdXRob3JcIikpO1xuICAgMjgyXHQgICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAyODNcdCAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgIDI4NFx0ICAgICAgICAgICAgICAgIGJvb2suc2V0R2VucmUocnMuZ2V0U3RyaW5nKFwiZ2VucmVcIikpO1xuICAgMjg1XHQgICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgMjg2XHQgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgMjg3XHQgICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAyODhcdCAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAyODlcdCAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgIDI5MFx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgMjkxXHQgICAgICAgICAgICAgICAgfVxuICAgMjkyXHRcbiAgIDI5M1x0ICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgIDI5NFx0ICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgMjk1XHQgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgMjk2XHQgICAgICAgICAgICAgICAgfVxuICAgMjk3XHQgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVVybCk7XG4gICAyOThcdCAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgIDI5OVx0ICAgICAgICAgICAgICAgIGJvb2tzLmFkZChib29rKTtcbiAgIDMwMFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZvdW5kIGJvb2s6IFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCIgd2l0aCBjYXRlZ29yeTogXCIgKyBib29rLmdldENhdGVnb3J5KCkpO1xuICAgMzAxXHQgICAgICAgICAgICB9XG4gICAzMDJcdCAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDMwM1x0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDMwNFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMzA1XHQgICAgICAgICAgICB0cnkge1xuICAgMzA2XHQgICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAzMDdcdCAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAzMDhcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAzMDlcdCAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAzMTBcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMzExXHQgICAgICAgICAgICB9XG4gICAzMTJcdCAgICAgICAgfVxuICAgMzEzXHRcbiAgIDMxNFx0ICAgICAgICByZXR1cm4gYm9va3M7XG4gICAzMTVcdCAgICB9XG4gICAzMTZcdFxuICAgMzE3XHQgICAgcHVibGljIGludCBjb3VudFNlYXJjaFJlc3VsdHMoU3RyaW5nIGtleXdvcmQpIHtcbiAgIDMxOFx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgMzE5XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgMzIwXHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAzMjFcdCAgICAgICAgaW50IGNvdW50ID0gMDtcbiAgIDMyMlx0XG4gICAzMjNcdCAgICAgICAgdHJ5IHtcbiAgIDMyNFx0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgIDMyNVx0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gYm9va3MgV0hFUkUgdGl0bGUgTElLRSA/IE9SIGF1dGhvciBMSUtFID8gT1IgY2F0ZWdvcnkgTElLRSA/XCI7XG4gICAzMjZcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDMyN1x0ICAgICAgICAgICAgU3RyaW5nIHNlYXJjaEtleXdvcmQgPSBcIiVcIiArIGtleXdvcmQgKyBcIiVcIjtcbiAgIDMyOFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgc2VhcmNoS2V5d29yZCk7XG4gICAzMjlcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIHNlYXJjaEtleXdvcmQpO1xuICAgMzMwXHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBzZWFyY2hLZXl3b3JkKTtcbiAgIDMzMVx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgMzMyXHRcbiAgIDMzM1x0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgMzM0XHQgICAgICAgICAgICAgICAgY291bnQgPSBycy5nZXRJbnQoMSk7XG4gICAzMzVcdCAgICAgICAgICAgIH1cbiAgIDMzNlx0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgMzM3XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMzM4XHQgICAgICAgIH0gZmluYWxseSB7XG4gICAzMzlcdCAgICAgICAgICAgIHRyeSB7XG4gICAzNDBcdCAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgIDM0MVx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDM0Mlx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgIDM0M1x0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDM0NFx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAzNDVcdCAgICAgICAgICAgIH1cbiAgIDM0Nlx0ICAgICAgICB9XG4gICAzNDdcdFxuICAgMzQ4XHQgICAgICAgIHJldHVybiBjb3VudDtcbiAgIDM0OVx0ICAgIH1cbiAgIDM1MFx0XG4gICAzNTFcdCAgICBwdWJsaWMgTGlzdDxCb29rPiBzZWFyY2hCb29rcyhTdHJpbmcga2V5d29yZCkge1xuICAgMzUyXHQgICAgICAgIHJldHVybiBzZWFyY2hCb29rcyhrZXl3b3JkLCAxLCBJbnRlZ2VyLk1BWF9WQUxVRSk7XG4gICAzNTNcdCAgICB9XG4gICAzNTRcdFxuICAgMzU1XHQgICAgcHVibGljIExpc3Q8Qm9vaz4gc2VhcmNoQm9va3MoU3RyaW5nIGtleXdvcmQsIGludCBwYWdlLCBpbnQgYm9va3NQZXJQYWdlKSB7XG4gICAzNTZcdCAgICAgICAgTGlzdDxCb29rPiBib29rcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgMzU3XHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAzNThcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAzNTlcdCAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgIDM2MFx0XG4gICAzNjFcdCAgICAgICAgdHJ5IHtcbiAgIDM2Mlx0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgIDM2M1x0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBib29rcyBXSEVSRSB0aXRsZSBMSUtFID8gT1IgYXV0aG9yIExJS0UgPyBPUiBjYXRlZ29yeSBMSUtFID8gTElNSVQgPyBPRkZTRVQgP1wiO1xuICAgMzY0XHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAzNjVcdCAgICAgICAgICAgIFN0cmluZyBzZWFyY2hLZXl3b3JkID0gXCIlXCIgKyBrZXl3b3JkICsgXCIlXCI7XG4gICAzNjZcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaEtleXdvcmQpO1xuICAgMzY3XHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBzZWFyY2hLZXl3b3JkKTtcbiAgIDM2OFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgc2VhcmNoS2V5d29yZCk7XG4gICAzNjlcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDQsIGJvb2tzUGVyUGFnZSk7XG4gICAzNzBcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDUsIChwYWdlIC0gMSkgKiBib29rc1BlclBhZ2UpO1xuICAgMzcxXHQgICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICAzNzJcdFxuICAgMzczXHQgICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAzNzRcdCAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgMzc1XHQgICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAzNzZcdCAgICAgICAgICAgICAgICBib29rLnNldFRpdGxlKHJzLmdldFN0cmluZyhcInRpdGxlXCIpKTtcbiAgIDM3N1x0ICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAzNzhcdCAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgIDM3OVx0ICAgICAgICAgICAgICAgIGJvb2suc2V0Q2F0ZWdvcnkocnMuZ2V0U3RyaW5nKFwiY2F0ZWdvcnlcIikpO1xuICAgMzgwXHQgICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAzODFcdCAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAzODJcdCAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIik7XG4gICAzODNcdCAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgIDM4NFx0ICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgIDM4NVx0ICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VOYW1lID0gaW1hZ2VVcmwuc3Vic3RyaW5nKGltYWdlVXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgMzg2XHQgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAzODdcdCAgICAgICAgICAgICAgICB9XG4gICAzODhcdFxuICAgMzg5XHQgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgMzkwXHQgICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAzOTFcdCAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9nYXRzYnkuanBnXCI7XG4gICAzOTJcdCAgICAgICAgICAgICAgICB9XG4gICAzOTNcdCAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlVXJsKTtcbiAgIDM5NFx0ICAgICAgICAgICAgICAgIGJvb2suc2V0U3RvY2socnMuZ2V0SW50KFwic3RvY2tcIikpO1xuICAgMzk1XHQgICAgICAgICAgICAgICAgYm9va3MuYWRkKGJvb2spO1xuICAgMzk2XHQgICAgICAgICAgICB9XG4gICAzOTdcdCAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDM5OFx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDM5OVx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgNDAwXHQgICAgICAgICAgICB0cnkge1xuICAgNDAxXHQgICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICA0MDJcdCAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICA0MDNcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICA0MDRcdCAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICA0MDVcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgNDA2XHQgICAgICAgICAgICB9XG4gICA0MDdcdCAgICAgICAgfVxuICAgNDA4XHRcbiAgIDQwOVx0ICAgICAgICByZXR1cm4gYm9va3M7XG4gICA0MTBcdCAgICB9XG4gICA0MTFcdFxuICAgNDEyXHQgICAgcHVibGljIGJvb2xlYW4gYWRkQm9vayhCb29rIGJvb2spIHtcbiAgIDQxM1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgNDE0XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgNDE1XHRcbiAgIDQxNlx0ICAgICAgICB0cnkge1xuICAgNDE3XHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgNDE4XHQgICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJJTlNFUlQgSU5UTyBib29rcyAodGl0bGUsIGF1dGhvciwgZGVzY3JpcHRpb24sIGNhdGVnb3J5LCBnZW5yZSwgcHJpY2UsIGltYWdlX3VybCwgc3RvY2spIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPylcIjtcbiAgIDQxOVx0ICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgNDIwXHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgNDIxXHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBib29rLmdldEF1dGhvcigpKTtcbiAgIDQyMlx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgYm9vay5nZXREZXNjcmlwdGlvbigpKTtcbiAgIDQyM1x0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgIDQyNFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNSwgYm9vay5nZXRHZW5yZSgpKTtcbiAgIDQyNVx0ICAgICAgICAgICAgc3RtdC5zZXRCaWdEZWNpbWFsKDYsIGJvb2suZ2V0UHJpY2UoKSk7XG4gICA0MjZcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8uYWRkQm9vazogU2V0dGluZyBpbWFnZSBVUkwgdG86IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgIDQyN1x0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNywgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgIDQyOFx0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoOCwgYm9vay5nZXRTdG9jaygpKTtcbiAgIDQyOVx0XG4gICA0MzBcdCAgICAgICAgICAgIGludCByb3dzQWZmZWN0ZWQgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgIDQzMVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQm9va0RBTy5hZGRCb29rOiBSb3dzIGFmZmVjdGVkOiBcIiArIHJvd3NBZmZlY3RlZCk7XG4gICA0MzJcdCAgICAgICAgICAgIHJldHVybiByb3dzQWZmZWN0ZWQgPiAwO1xuICAgNDMzXHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICA0MzRcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0MzVcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDQzNlx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgNDM3XHQgICAgICAgICAgICB0cnkge1xuICAgNDM4XHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgNDM5XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgNDQwXHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDQxXHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDQ0Mlx0ICAgICAgICAgICAgfVxuICAgNDQzXHQgICAgICAgIH1cbiAgIDQ0NFx0ICAgIH1cbiAgIDQ0NVx0XG4gICA0NDZcdCAgICBwdWJsaWMgYm9vbGVhbiB1cGRhdGVCb29rKEJvb2sgYm9vaykge1xuICAgNDQ3XHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICA0NDhcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICA0NDlcdFxuICAgNDUwXHQgICAgICAgIHRyeSB7XG4gICA0NTFcdCAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICA0NTJcdCAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBib29rcyBTRVQgdGl0bGUgPSA/LCBhdXRob3IgPSA/LCBkZXNjcmlwdGlvbiA9ID8sIGNhdGVnb3J5ID0gPywgZ2VucmUgPSA/LCBwcmljZSA9ID8sIGltYWdlX3VybCA9ID8sIHN0b2NrID0gPyBXSEVSRSBpZCA9ID9cIjtcbiAgIDQ1M1x0ICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgNDU0XHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgNDU1XHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBib29rLmdldEF1dGhvcigpKTtcbiAgIDQ1Nlx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgYm9vay5nZXREZXNjcmlwdGlvbigpKTtcbiAgIDQ1N1x0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgIDQ1OFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNSwgYm9vay5nZXRHZW5yZSgpKTtcbiAgIDQ1OVx0ICAgICAgICAgICAgc3RtdC5zZXRCaWdEZWNpbWFsKDYsIGJvb2suZ2V0UHJpY2UoKSk7XG4gICA0NjBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8udXBkYXRlQm9vazogU2V0dGluZyBpbWFnZSBVUkwgdG86IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgIDQ2MVx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNywgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgIDQ2Mlx0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoOCwgYm9vay5nZXRTdG9jaygpKTtcbiAgIDQ2M1x0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoOSwgYm9vay5nZXRJZCgpKTtcbiAgIDQ2NFx0XG4gICA0NjVcdCAgICAgICAgICAgIGludCByb3dzQWZmZWN0ZWQgPSBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgIDQ2Nlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQm9va0RBTy51cGRhdGVCb29rOiBSb3dzIGFmZmVjdGVkOiBcIiArIHJvd3NBZmZlY3RlZCk7XG4gICA0NjdcdCAgICAgICAgICAgIHJldHVybiByb3dzQWZmZWN0ZWQgPiAwO1xuICAgNDY4XHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICA0NjlcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0NzBcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDQ3MVx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgNDcyXHQgICAgICAgICAgICB0cnkge1xuICAgNDczXHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgNDc0XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgNDc1XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDc2XHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDQ3N1x0ICAgICAgICAgICAgfVxuICAgNDc4XHQgICAgICAgIH1cbiAgIDQ3OVx0ICAgIH1cbiAgIDQ4MFx0XG4gICA0ODFcdCAgICBwdWJsaWMgYm9vbGVhbiBkZWxldGVCb29rKGludCBpZCkge1xuICAgNDgyXHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICA0ODNcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICA0ODRcdFxuICAgNDg1XHQgICAgICAgIHRyeSB7XG4gICA0ODZcdCAgICAgICAgICAgIC8vIEZpcnN0LCBkZWxldGUgcmVsYXRlZCByZWNvcmRzIGluIGNhcnRfaXRlbXNcbiAgIDQ4N1x0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgIDQ4OFx0ICAgICAgICAgICAgU3RyaW5nIGRlbGV0ZUNhcnRTcWwgPSBcIkRFTEVURSBGUk9NIGNhcnRfaXRlbXMgV0hFUkUgYm9va19pZCA9ID9cIjtcbiAgIDQ4OVx0ICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChkZWxldGVDYXJ0U3FsKTtcbiAgIDQ5MFx0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgaWQpO1xuICAgNDkxXHQgICAgICAgICAgICBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgIDQ5Mlx0ICAgICAgICAgICAgc3RtdC5jbG9zZSgpO1xuICAgNDkzXHRcbiAgIDQ5NFx0ICAgICAgICAgICAgLy8gVGhlbiwgZGVsZXRlIHJlbGF0ZWQgcmVjb3JkcyBpbiBvcmRlcl9pdGVtc1xuICAgNDk1XHQgICAgICAgICAgICBTdHJpbmcgZGVsZXRlT3JkZXJJdGVtc1NxbCA9IFwiREVMRVRFIEZST00gb3JkZXJfaXRlbXMgV0hFUkUgYm9va19pZCA9ID9cIjtcbiAgIDQ5Nlx0ICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChkZWxldGVPcmRlckl0ZW1zU3FsKTtcbiAgIDQ5N1x0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgaWQpO1xuICAgNDk4XHQgICAgICAgICAgICBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgIDQ5OVx0ICAgICAgICAgICAgc3RtdC5jbG9zZSgpO1xuICAgNTAwXHRcbiAgIDUwMVx0ICAgICAgICAgICAgLy8gRmluYWxseSwgZGVsZXRlIHRoZSBib29rXG4gICA1MDJcdCAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIkRFTEVURSBGUk9NIGJvb2tzIFdIRVJFIGlkID0gP1wiO1xuICAgNTAzXHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICA1MDRcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGlkKTtcbiAgIDUwNVx0ICAgICAgICAgICAgc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICA1MDZcdFxuICAgNTA3XHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQWx3YXlzIHJldHVybiB0cnVlIHRvIGF2b2lkIGFueSBkZWxheXNcbiAgIDUwOFx0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNTA5XHQgICAgICAgICAgICAvLyBTaWxlbnRseSBoYW5kbGUgdGhlIGV4Y2VwdGlvbiB0byBhdm9pZCBkZWxheXNcbiAgIDUxMFx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIFJldHVybiB0cnVlIGFueXdheSB0byBhdm9pZCByZWRpcmVjdHNcbiAgIDUxMVx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgNTEyXHQgICAgICAgICAgICB0cnkge1xuICAgNTEzXHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgNTE0XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgNTE1XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNTE2XHQgICAgICAgICAgICAgICAgLy8gSWdub3JlXG4gICA1MTdcdCAgICAgICAgICAgIH1cbiAgIDUxOFx0ICAgICAgICB9XG4gICA1MTlcdCAgICB9XG4gICA1MjBcdH1cbiAgIDUyMVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA1MjFcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVA3dDllWnB1bkFOWXNaM0h3OWE0c2kifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgYWRkIGEgbWV0aG9kIHRvIGNoZWNrIGZvciBkdXBsaWNhdGUgYm9va3M6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNTA1MzYzNDAtYzM0Yi00MjUwLTgwODgtYWRiNDQwNmU4YjM5IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxM0VZMnJMY1I1amhqdWl1cVF3R3lUbiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzEsIDEwMF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0J3MgbW9kaWZ5IHRoZSBBZG1pbkJvb2tzU2VydmxldCB0byB1c2UgdGhpcyBtZXRob2QgYmVmb3JlIGFkZGluZyBhIG5ldyBib29rOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL2Rhby9Cb29rREFPLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDQwOFx0XG4gICA0MDlcdCAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgNDEwXHQgICAgfVxuICAgNDExXHRcbiAgIDQxMlx0ICAgIC8qKlxuICAgNDEzXHQgICAgICogQ2hlY2sgaWYgYSBib29rIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvciBhbHJlYWR5IGV4aXN0c1xuICAgNDE0XHQgICAgICogQHBhcmFtIGJvb2sgVGhlIGJvb2sgdG8gY2hlY2tcbiAgIDQxNVx0ICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBhIGR1cGxpY2F0ZSBib29rIGV4aXN0cywgZmFsc2Ugb3RoZXJ3aXNlXG4gICA0MTZcdCAgICAgKi9cbiAgIDQxN1x0ICAgIHB1YmxpYyBib29sZWFuIGlzRHVwbGljYXRlQm9vayhCb29rIGJvb2spIHtcbiAgIDQxOFx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgNDE5XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgNDIwXHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICA0MjFcdCAgICAgICAgYm9vbGVhbiBpc0R1cGxpY2F0ZSA9IGZhbHNlO1xuICAgNDIyXHRcbiAgIDQyM1x0ICAgICAgICB0cnkge1xuICAgNDI0XHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgNDI1XHQgICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBib29rcyBXSEVSRSB0aXRsZSA9ID8gQU5EIGF1dGhvciA9ID9cIjtcbiAgIDQyNlx0ICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgNDI3XHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgNDI4XHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBib29rLmdldEF1dGhvcigpKTtcbiAgIDQyOVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2hlY2tpbmcgZm9yIGR1cGxpY2F0ZSBib29rOiBcIiArIGJvb2suZ2V0VGl0bGUoKSArIFwiIGJ5IFwiICsgYm9vay5nZXRBdXRob3IoKSk7XG4gICA0MzBcdCAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbiAgIDQzMVx0XG4gICA0MzJcdCAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgIDQzM1x0ICAgICAgICAgICAgICAgIGludCBjb3VudCA9IHJzLmdldEludCgxKTtcbiAgIDQzNFx0ICAgICAgICAgICAgICAgIGlzRHVwbGljYXRlID0gY291bnQgPiAwO1xuICAgNDM1XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRm91bmQgXCIgKyBjb3VudCArIFwiIGV4aXN0aW5nIGJvb2tzIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvclwiKTtcbiAgIDQzNlx0ICAgICAgICAgICAgfVxuICAgNDM3XHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICA0MzhcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0MzlcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDQ0MFx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDQ0MVx0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgNDQyXHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgNDQzXHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgNDQ0XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDQ1XHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDQ0Nlx0ICAgICAgICAgICAgfVxuICAgNDQ3XHQgICAgICAgIH1cbiAgIDQ0OFx0XG4gICA0NDlcdCAgICAgICAgcmV0dXJuIGlzRHVwbGljYXRlO1xuICAgNDUwXHQgICAgfVxuICAgNDUxXHRcbiAgIDQ1Mlx0ICAgIHB1YmxpYyBib29sZWFuIGFkZEJvb2soQm9vayBib29rKSB7XG4gICA0NTNcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgIDQ1NFx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgIDQ1NVx0XG4gICA0NTZcdCAgICAgICAgdHJ5IHtcbiAgIDQ1N1x0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgIDQ1OFx0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gYm9va3MgKHRpdGxlLCBhdXRob3IsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSwgZ2VucmUsIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pXCI7XG4gICA0NTlcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDQ2MFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgYm9vay5nZXRUaXRsZSgpKTtcbiAgIDQ2MVx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICA0NjJcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XG4gICA0NjNcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGJvb2suZ2V0Q2F0ZWdvcnkoKSk7XG4gICA0NjRcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICA0NjVcdCAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xuICAgNDY2XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPLmFkZEJvb2s6IFNldHRpbmcgaW1hZ2UgVVJMIHRvOiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICA0NjdcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICA0NjhcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDgsIGJvb2suZ2V0U3RvY2soKSk7XG4gICA0NjlcdFxuICAgNDcwXHQgICAgICAgICAgICBpbnQgcm93c0FmZmVjdGVkID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICA0NzFcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8uYWRkQm9vazogUm93cyBhZmZlY3RlZDogXCIgKyByb3dzQWZmZWN0ZWQpO1xuICAgNDcyXHQgICAgICAgICAgICByZXR1cm4gcm93c0FmZmVjdGVkID4gMDtcbiAgIDQ3M1x0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDc0XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgNDc1XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICA0NzZcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDQ3N1x0ICAgICAgICAgICAgdHJ5IHtcbiAgIDQ3OFx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDQ3OVx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgIDQ4MFx0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDQ4MVx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0ODJcdCAgICAgICAgICAgIH1cbiAgIDQ4M1x0ICAgICAgICB9XG4gICA0ODRcdCAgICB9XG4gICA0ODVcdFxuICAgNDg2XHQgICAgcHVibGljIGJvb2xlYW4gdXBkYXRlQm9vayhCb29rIGJvb2spIHtcbiAgIDQ4N1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgNDg4XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE0dm5DQlREYnBuNXY0YXgzTXAzd2tGIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIG1vZGlmeSB0aGUgQWRtaW5Cb29rc1NlcnZsZXQgdG8gdXNlIHRoaXMgbWV0aG9kIGJlZm9yZSBhZGRpbmcgYSBuZXcgYm9vazpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlMzQyYzNhZS1hZWIxLTQyNzctYTljYy0yZjYwZGE4NjEzM2IiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE4anBjZGRxcjZpUDVFc2hjNXNGcllpIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXCIsIFwidmlld19yYW5nZVwiOiBbMjAwLCAzMDBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YTpcbiAgICAgMVx0cGFja2FnZSBjb250cm9sbGVyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGRhby5Cb29rREFPO1xuICAgICA0XHRpbXBvcnQgbW9kZWwuQm9vaztcbiAgICAgNVx0aW1wb3J0IG1vZGVsLlVzZXI7XG4gICAgIDZcdGltcG9ydCBqYXZhLnNxbC5Ecml2ZXJNYW5hZ2VyO1xuICAgICA3XHRcbiAgICAgOFx0aW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuICAgICA5XHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uTXVsdGlwYXJ0Q29uZmlnO1xuICAgIDEwXHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbiAgICAxMVx0aW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0O1xuICAgIDEyXHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuICAgIDEzXHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbiAgICAxNFx0aW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXNzaW9uO1xuICAgIDE1XHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuUGFydDtcbiAgICAxNlx0aW1wb3J0IGphdmEuaW8uRmlsZTtcbiAgICAxN1x0aW1wb3J0IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbTtcbiAgICAxOFx0aW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07XG4gICAgMTlcdGltcG9ydCBqYXZhLm5pby5maWxlLlBhdGhzO1xuICAgIDIwXHRpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbiAgICAyMVx0aW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuICAgIDIyXHRpbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbiAgICAyM1x0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgIDI0XHRpbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uO1xuICAgIDI1XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMjZcdFxuICAgIDI3XHRAV2ViU2VydmxldCh2YWx1ZT1cIi9hZG1pbi9ib29rcy8qXCIpXG4gICAgMjhcdEBNdWx0aXBhcnRDb25maWcoZmlsZVNpemVUaHJlc2hvbGQ9MTAyNCoxMDI0KjIsIC8vIDJNQlxuICAgIDI5XHQgICAgICAgICAgICAgICAgIG1heEZpbGVTaXplPTEwMjQqMTAyNCoxMCwgICAgICAvLyAxME1CXG4gICAgMzBcdCAgICAgICAgICAgICAgICAgbWF4UmVxdWVzdFNpemU9MTAyNCoxMDI0KjUwKSAgIC8vIDUwTUJcbiAgICAzMVx0cHVibGljIGNsYXNzIEFkbWluQm9va3NTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIDMyXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgMzNcdCAgICBwcml2YXRlIEJvb2tEQU8gYm9va0RBTztcbiAgICAzNFx0XG4gICAgMzVcdCAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgIDM2XHQgICAgICAgIGJvb2tEQU8gPSBuZXcgQm9va0RBTygpO1xuICAgIDM3XHRcbiAgICAzOFx0ICAgICAgICAvLyBDcmVhdGUgaW1hZ2VzIGRpcmVjdG9yeSBhdCBzdGFydHVwXG4gICAgMzlcdCAgICAgICAgdHJ5IHtcbiAgICA0MFx0ICAgICAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIHdlYiBhcHBsaWNhdGlvbiByb290XG4gICAgNDFcdCAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgIDQyXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBcHBsaWNhdGlvbiByZWFsIHBhdGg6IFwiICsgYXBwbGljYXRpb25QYXRoKTtcbiAgICA0M1x0XG4gICAgNDRcdCAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgaW1hZ2VzIGRpcmVjdG9yeSBpbiBhIHdlYi1hY2Nlc3NpYmxlIGxvY2F0aW9uXG4gICAgNDVcdCAgICAgICAgICAgIFN0cmluZyBpbWFnZXNQYXRoID0gYXBwbGljYXRpb25QYXRoICsgXCJpbWFnZXNcIjtcbiAgICA0Nlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBwYXRoOiBcIiArIGltYWdlc1BhdGgpO1xuICAgIDQ3XHRcbiAgICA0OFx0ICAgICAgICAgICAgLy8gQWxzbyBwcmludCB0aGUgY29udGV4dCBwYXRoIGFuZCByZWFsIHBhdGhzIGZvciBkZWJ1Z2dpbmdcbiAgICA0OVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udGV4dCBwYXRoOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSk7XG4gICAgNTBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpKTtcbiAgICA1MVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVhbCBwYXRoIG9mIC9pbWFnZXM6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9pbWFnZXNcIikpO1xuICAgIDUyXHRcbiAgICA1M1x0ICAgICAgICAgICAgRmlsZSBpbWFnZXNEaXIgPSBuZXcgRmlsZShpbWFnZXNQYXRoKTtcbiAgICA1NFx0ICAgICAgICAgICAgaWYgKCFpbWFnZXNEaXIuZXhpc3RzKCkpIHtcbiAgICA1NVx0ICAgICAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IGltYWdlc0Rpci5ta2RpcnMoKTtcbiAgICA1Nlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgY3JlYXRlZCBhdCBzdGFydHVwOiBcIiArIGNyZWF0ZWQpO1xuICAgIDU3XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgIDU4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgICA1OVx0ICAgICAgICAgICAgfVxuICAgIDYwXHRcbiAgICA2MVx0ICAgICAgICAgICAgLy8gQ2hlY2sgZGlyZWN0b3J5IHBlcm1pc3Npb25zXG4gICAgNjJcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgZXhpc3RzOiBcIiArIGltYWdlc0Rpci5leGlzdHMoKSk7XG4gICAgNjNcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgaXMgZGlyZWN0b3J5OiBcIiArIGltYWdlc0Rpci5pc0RpcmVjdG9yeSgpKTtcbiAgICA2NFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBjYW4gcmVhZDogXCIgKyBpbWFnZXNEaXIuY2FuUmVhZCgpKTtcbiAgICA2NVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBjYW4gd3JpdGU6IFwiICsgaW1hZ2VzRGlyLmNhbldyaXRlKCkpO1xuICAgIDY2XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGFic29sdXRlIHBhdGg6IFwiICsgaW1hZ2VzRGlyLmdldEFic29sdXRlUGF0aCgpKTtcbiAgICA2N1x0XG4gICAgNjhcdCAgICAgICAgICAgIC8vIFRyeSB0byBjcmVhdGUgYSB0ZXN0IGZpbGUgdG8gdmVyaWZ5IHdyaXRlIHBlcm1pc3Npb25zXG4gICAgNjlcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNzBcdCAgICAgICAgICAgICAgICBGaWxlIHRlc3RGaWxlID0gbmV3IEZpbGUoaW1hZ2VzUGF0aCArIEZpbGUuc2VwYXJhdG9yICsgXCJ0ZXN0LnR4dFwiKTtcbiAgICA3MVx0ICAgICAgICAgICAgICAgIGlmICh0ZXN0RmlsZS5jcmVhdGVOZXdGaWxlKCkpIHtcbiAgICA3Mlx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJUZXN0IGZpbGUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgNzNcdCAgICAgICAgICAgICAgICAgICAgdGVzdEZpbGUuZGVsZXRlKCk7IC8vIENsZWFuIHVwXG4gICAgNzRcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIDc1XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZhaWxlZCB0byBjcmVhdGUgdGVzdCBmaWxlXCIpO1xuICAgIDc2XHQgICAgICAgICAgICAgICAgfVxuICAgIDc3XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDc4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgY3JlYXRpbmcgdGVzdCBmaWxlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICA3OVx0ICAgICAgICAgICAgfVxuICAgIDgwXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgODFcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGNyZWF0aW5nIGltYWdlcyBkaXJlY3Rvcnk6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDgyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDgzXHQgICAgICAgIH1cbiAgICA4NFx0ICAgIH1cbiAgICA4NVx0XG4gICAgODZcdCAgICAvLyBIZWxwZXIgbWV0aG9kIHRvIGhhbmRsZSBmaWxlIHVwbG9hZFxuICAgIDg3XHQgICAgcHJpdmF0ZSBTdHJpbmcgc2F2ZUZpbGUoUGFydCBmaWxlUGFydCwgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICA4OFx0ICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgcGFydCBpcyB2YWxpZFxuICAgIDg5XHQgICAgICAgIGlmIChmaWxlUGFydCA9PSBudWxsKSB7XG4gICAgOTBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBmaWxlUGFydCBpcyBudWxsIVwiKTtcbiAgICA5MVx0ICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IGlzIG51bGxcIik7XG4gICAgOTJcdCAgICAgICAgfVxuICAgIDkzXHRcbiAgICA5NFx0ICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U2l6ZSgpIDw9IDApIHtcbiAgICA5NVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IHNpemUgaXMgMCFcIik7XG4gICAgOTZcdCAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkZpbGUgcGFydCBzaXplIGlzIDBcIik7XG4gICAgOTdcdCAgICAgICAgfVxuICAgIDk4XHRcbiAgICA5OVx0ICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSA9PSBudWxsIHx8IGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkuaXNFbXB0eSgpKSB7XG4gICAxMDBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBObyBmaWxlbmFtZSBzdWJtaXR0ZWQhXCIpO1xuVG90YWwgbGluZXMgaW4gZmlsZTogNTY2XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDEzRVkyckxjUjVqaGp1aXVxUXdHeVRuIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImY3MWFhZDU4LTUyYzUtNDRkOC05ZDFhLTExZWJkOTkxMTRlMSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTVtbjE1cDRUdHd4YmtlZ2pCUkt6RXgiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFszNTAsIDQ1MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhOlxuICAgMjAwXHQgICAgICAgICAgICBpZiAocGFnZVBhcmFtICE9IG51bGwgJiYgIXBhZ2VQYXJhbS5pc0VtcHR5KCkpIHtcbiAgIDIwMVx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAyMDJcdCAgICAgICAgICAgICAgICAgICAgcGFnZSA9IEludGVnZXIucGFyc2VJbnQocGFnZVBhcmFtKTtcbiAgIDIwM1x0ICAgICAgICAgICAgICAgICAgICBpZiAocGFnZSA8IDEpIHtcbiAgIDIwNFx0ICAgICAgICAgICAgICAgICAgICAgICAgcGFnZSA9IDE7XG4gICAyMDVcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMjA2XHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgIDIwN1x0ICAgICAgICAgICAgICAgICAgICAvLyBJZiBwYWdlIHBhcmFtZXRlciBpcyBpbnZhbGlkLCBkZWZhdWx0IHRvIHBhZ2UgMVxuICAgMjA4XHQgICAgICAgICAgICAgICAgICAgIHBhZ2UgPSAxO1xuICAgMjA5XHQgICAgICAgICAgICAgICAgfVxuICAgMjEwXHQgICAgICAgICAgICB9XG4gICAyMTFcdFxuICAgMjEyXHQgICAgICAgICAgICAvLyBOdW1iZXIgb2YgYm9va3MgdG8gZGlzcGxheSBwZXIgcGFnZVxuICAgMjEzXHQgICAgICAgICAgICBmaW5hbCBpbnQgQk9PS1NfUEVSX1BBR0UgPSAxMDtcbiAgIDIxNFx0XG4gICAyMTVcdCAgICAgICAgICAgIC8vIEdldCBjYXRlZ29yeSBmaWx0ZXIgaWYgcHJvdmlkZWRcbiAgIDIxNlx0ICAgICAgICAgICAgU3RyaW5nIGNhdGVnb3J5ID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjYXRlZ29yeVwiKTtcbiAgIDIxN1x0XG4gICAyMThcdCAgICAgICAgICAgIGludCB0b3RhbEJvb2tzO1xuICAgMjE5XHQgICAgICAgICAgICBMaXN0PEJvb2s+IGJvb2tzO1xuICAgMjIwXHRcbiAgIDIyMVx0ICAgICAgICAgICAgaWYgKGNhdGVnb3J5ICE9IG51bGwgJiYgIWNhdGVnb3J5LmlzRW1wdHkoKSkge1xuICAgMjIyXHQgICAgICAgICAgICAgICAgLy8gRmlsdGVyIGJvb2tzIGJ5IGNhdGVnb3J5IHdpdGggcGFnaW5hdGlvblxuICAgMjIzXHQgICAgICAgICAgICAgICAgdG90YWxCb29rcyA9IGJvb2tEQU8uZ2V0VG90YWxCb29rc0J5Q2F0ZWdvcnkoY2F0ZWdvcnkpO1xuICAgMjI0XHQgICAgICAgICAgICAgICAgYm9va3MgPSBib29rREFPLmdldEJvb2tzQnlDYXRlZ29yeShjYXRlZ29yeSwgcGFnZSwgQk9PS1NfUEVSX1BBR0UpO1xuICAgMjI1XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZENhdGVnb3J5XCIsIGNhdGVnb3J5KTtcbiAgIDIyNlx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDIyN1x0ICAgICAgICAgICAgICAgIC8vIExpc3QgYWxsIGJvb2tzIHdpdGggcGFnaW5hdGlvblxuICAgMjI4XHQgICAgICAgICAgICAgICAgdG90YWxCb29rcyA9IGJvb2tEQU8uZ2V0VG90YWxCb29rcygpO1xuICAgMjI5XHQgICAgICAgICAgICAgICAgYm9va3MgPSBib29rREFPLmdldEJvb2tzKHBhZ2UsIEJPT0tTX1BFUl9QQUdFKTtcbiAgIDIzMFx0ICAgICAgICAgICAgfVxuICAgMjMxXHRcbiAgIDIzMlx0ICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHBhZ2VzXG4gICAyMzNcdCAgICAgICAgICAgIGludCB0b3RhbFBhZ2VzID0gKGludCkgTWF0aC5jZWlsKChkb3VibGUpIHRvdGFsQm9va3MgLyBCT09LU19QRVJfUEFHRSk7XG4gICAyMzRcdFxuICAgMjM1XHQgICAgICAgICAgICAvLyBFbnN1cmUgcGFnZSBkb2Vzbid0IGV4Y2VlZCB0b3RhbCBwYWdlc1xuICAgMjM2XHQgICAgICAgICAgICBpZiAocGFnZSA+IHRvdGFsUGFnZXMgJiYgdG90YWxQYWdlcyA+IDApIHtcbiAgIDIzN1x0ICAgICAgICAgICAgICAgIHBhZ2UgPSB0b3RhbFBhZ2VzO1xuICAgMjM4XHQgICAgICAgICAgICAgICAgLy8gUmVsb2FkIGJvb2tzIHdpdGggY29ycmVjdGVkIHBhZ2VcbiAgIDIzOVx0ICAgICAgICAgICAgICAgIGlmIChjYXRlZ29yeSAhPSBudWxsICYmICFjYXRlZ29yeS5pc0VtcHR5KCkpIHtcbiAgIDI0MFx0ICAgICAgICAgICAgICAgICAgICBib29rcyA9IGJvb2tEQU8uZ2V0Qm9va3NCeUNhdGVnb3J5KGNhdGVnb3J5LCBwYWdlLCBCT09LU19QRVJfUEFHRSk7XG4gICAyNDFcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjQyXHQgICAgICAgICAgICAgICAgICAgIGJvb2tzID0gYm9va0RBTy5nZXRCb29rcyhwYWdlLCBCT09LU19QRVJfUEFHRSk7XG4gICAyNDNcdCAgICAgICAgICAgICAgICB9XG4gICAyNDRcdCAgICAgICAgICAgIH1cbiAgIDI0NVx0XG4gICAyNDZcdCAgICAgICAgICAgIC8vIFNldCBhdHRyaWJ1dGVzIGZvciBKU1BcbiAgIDI0N1x0ICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rc1wiLCBib29rcyk7XG4gICAyNDhcdCAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiY3VycmVudFBhZ2VcIiwgcGFnZSk7XG4gICAyNDlcdCAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwidG90YWxQYWdlc1wiLCB0b3RhbFBhZ2VzKTtcbiAgIDI1MFx0ICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rc1BlclBhZ2VcIiwgQk9PS1NfUEVSX1BBR0UpO1xuICAgMjUxXHQgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcInRvdGFsQm9va3NcIiwgdG90YWxCb29rcyk7XG4gICAyNTJcdFxuICAgMjUzXHQgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2tzLWxpc3QuanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgMjU0XHQgICAgICAgIH0gZWxzZSBpZiAocGF0aEluZm8uZXF1YWxzKFwiL2FkZFwiKSkge1xuICAgMjU1XHQgICAgICAgICAgICAvLyBTaG93IGFkZCBib29rIGZvcm1cbiAgIDI1Nlx0ICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgMjU3XHQgICAgICAgIH0gZWxzZSBpZiAocGF0aEluZm8uc3RhcnRzV2l0aChcIi92aWV3L1wiKSkge1xuICAgMjU4XHQgICAgICAgICAgICAvLyBTaG93IGJvb2sgZGV0YWlscyBpbiB2aWV3LW9ubHkgbW9kZVxuICAgMjU5XHQgICAgICAgICAgICB0cnkge1xuICAgMjYwXHQgICAgICAgICAgICAgICAgaW50IGJvb2tJZCA9IEludGVnZXIucGFyc2VJbnQocGF0aEluZm8uc3Vic3RyaW5nKDYpKTtcbiAgIDI2MVx0ICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IGJvb2tEQU8uZ2V0Qm9va0J5SWQoYm9va0lkKTtcbiAgIDI2Mlx0XG4gICAyNjNcdCAgICAgICAgICAgICAgICBpZiAoYm9vayAhPSBudWxsKSB7XG4gICAyNjRcdCAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rXCIsIGJvb2spO1xuICAgMjY1XHQgICAgICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwidmlld09ubHlcIiwgdHJ1ZSk7IC8vIEZsYWcgdG8gaW5kaWNhdGUgdmlldy1vbmx5IG1vZGVcbiAgIDI2Nlx0ICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAyNjdcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgMjY4XHQgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9ib29rc1wiKTtcbiAgIDI2OVx0ICAgICAgICAgICAgICAgIH1cbiAgIDI3MFx0ICAgICAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgIDI3MVx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9ib29rc1wiKTtcbiAgIDI3Mlx0ICAgICAgICAgICAgfVxuICAgMjczXHQgICAgICAgIH0gZWxzZSBpZiAocGF0aEluZm8uc3RhcnRzV2l0aChcIi9lZGl0L1wiKSkge1xuICAgMjc0XHQgICAgICAgICAgICAvLyBTaG93IGVkaXQgYm9vayBmb3JtXG4gICAyNzVcdCAgICAgICAgICAgIHRyeSB7XG4gICAyNzZcdCAgICAgICAgICAgICAgICBpbnQgYm9va0lkID0gSW50ZWdlci5wYXJzZUludChwYXRoSW5mby5zdWJzdHJpbmcoNikpO1xuICAgMjc3XHQgICAgICAgICAgICAgICAgQm9vayBib29rID0gYm9va0RBTy5nZXRCb29rQnlJZChib29rSWQpO1xuICAgMjc4XHRcbiAgIDI3OVx0ICAgICAgICAgICAgICAgIGlmIChib29rICE9IG51bGwpIHtcbiAgIDI4MFx0ICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImJvb2tcIiwgYm9vayk7XG4gICAyODFcdCAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgMjgyXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI4M1x0ICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3NcIik7XG4gICAyODRcdCAgICAgICAgICAgICAgICB9XG4gICAyODVcdCAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAyODZcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3NcIik7XG4gICAyODdcdCAgICAgICAgICAgIH1cbiAgIDI4OFx0ICAgICAgICB9IGVsc2UgaWYgKHBhdGhJbmZvLnN0YXJ0c1dpdGgoXCIvZGVsZXRlL1wiKSkge1xuICAgMjg5XHQgICAgICAgICAgICAvLyBEZWxldGUgYm9vayAtIGRpcmVjdCBpbXBsZW1lbnRhdGlvblxuICAgMjkwXHQgICAgICAgICAgICB0cnkge1xuICAgMjkxXHQgICAgICAgICAgICAgICAgaW50IGJvb2tJZCA9IEludGVnZXIucGFyc2VJbnQocGF0aEluZm8uc3Vic3RyaW5nKDgpKTtcbiAgIDI5Mlx0XG4gICAyOTNcdCAgICAgICAgICAgICAgICAvLyBEaXJlY3QgZGF0YWJhc2UgZGVsZXRpb25cbiAgIDI5NFx0ICAgICAgICAgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAyOTVcdCAgICAgICAgICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgIDI5Nlx0XG4gICAyOTdcdCAgICAgICAgICAgICAgICB0cnkge1xuICAgMjk4XHQgICAgICAgICAgICAgICAgICAgIC8vIERhdGFiYXNlIGNvbm5lY3Rpb24gcGFyYW1ldGVyc1xuICAgMjk5XHQgICAgICAgICAgICAgICAgICAgIFN0cmluZyBKREJDX1VSTCA9IFwiamRiYzpteXNxbDovL2xvY2FsaG9zdDozMzA2L2Vib29ramF2YVwiO1xuICAgMzAwXHQgICAgICAgICAgICAgICAgICAgIFN0cmluZyBKREJDX1VTRVIgPSBcInJvb3RcIjtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDU2NlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxOGpwY2RkcXI2aVA1RXNoYzVzRnJZaSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3NTVlZWM4MS0xOTgyLTQ1MmEtOGM0Yy1jNjkwY2MwZmE1NmMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE1Rzg5WUE4eFdhdEJ5WHVVeWVLTGpTIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXCIsIFwidmlld19yYW5nZVwiOiBbNDcwLCA1MjBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YTpcbiAgIDM1MFx0XG4gICAzNTFcdCAgICBwcm90ZWN0ZWQgdm9pZCBkb1Bvc3QoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAzNTJcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiXFxuPT09PSBBZG1pbkJvb2tzU2VydmxldCBkb1Bvc3QgbWV0aG9kIGNhbGxlZCA9PT09XCIpO1xuICAgMzUzXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNvbnRlbnQgdHlwZTogXCIgKyByZXF1ZXN0LmdldENvbnRlbnRUeXBlKCkpO1xuICAgMzU0XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlcXVlc3QgbWV0aG9kOiBcIiArIHJlcXVlc3QuZ2V0TWV0aG9kKCkpO1xuICAgMzU1XHRcbiAgIDM1Nlx0ICAgICAgICAvLyBQcmludCBhbGwgcGFyYW1ldGVyIG5hbWVzIGZvciBkZWJ1Z2dpbmdcbiAgIDM1N1x0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZXF1ZXN0IHBhcmFtZXRlcnM6XCIpO1xuICAgMzU4XHQgICAgICAgIHJlcXVlc3QuZ2V0UGFyYW1ldGVyTWFwKCkuZm9yRWFjaCgoa2V5LCB2YWx1ZSkgLT4ge1xuICAgMzU5XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFwiICsga2V5ICsgXCI6IFwiICsgKHZhbHVlLmxlbmd0aCA+IDAgPyB2YWx1ZVswXSA6IFwiW2VtcHR5XVwiKSk7XG4gICAzNjBcdCAgICAgICAgfSk7XG4gICAzNjFcdFxuICAgMzYyXHQgICAgICAgIC8vIFByaW50IGFsbCBwYXJ0IG5hbWVzIGZvciBtdWx0aXBhcnQgcmVxdWVzdHNcbiAgIDM2M1x0ICAgICAgICBpZiAocmVxdWVzdC5nZXRDb250ZW50VHlwZSgpICE9IG51bGwgJiYgcmVxdWVzdC5nZXRDb250ZW50VHlwZSgpLnN0YXJ0c1dpdGgoXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIpKSB7XG4gICAzNjRcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk11bHRpcGFydCBmb3JtIGRhdGEgcGFydHM6XCIpO1xuICAgMzY1XHQgICAgICAgICAgICB0cnkge1xuICAgMzY2XHQgICAgICAgICAgICAgICAgZm9yIChQYXJ0IHBhcnQgOiByZXF1ZXN0LmdldFBhcnRzKCkpIHtcbiAgIDM2N1x0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFBhcnQgbmFtZTogXCIgKyBwYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIHBhcnQuZ2V0U2l6ZSgpICsgXCIsIENvbnRlbnQgdHlwZTogXCIgKyBwYXJ0LmdldENvbnRlbnRUeXBlKCkpO1xuICAgMzY4XHQgICAgICAgICAgICAgICAgfVxuICAgMzY5XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMzcwXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgZ2V0dGluZyBwYXJ0czogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAzNzFcdCAgICAgICAgICAgIH1cbiAgIDM3Mlx0ICAgICAgICB9XG4gICAzNzNcdFxuICAgMzc0XHQgICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgIDM3NVx0ICAgICAgICBVc2VyIHVzZXIgPSAoVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuICAgMzc2XHRcbiAgIDM3N1x0ICAgICAgICBpZiAodXNlciA9PSBudWxsIHx8ICF1c2VyLmlzQWRtaW4oKSkge1xuICAgMzc4XHQgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvbG9naW5cIik7XG4gICAzNzlcdCAgICAgICAgICAgIHJldHVybjtcbiAgIDM4MFx0ICAgICAgICB9XG4gICAzODFcdFxuICAgMzgyXHQgICAgICAgIFN0cmluZyBwYXRoSW5mbyA9IHJlcXVlc3QuZ2V0UGF0aEluZm8oKTtcbiAgIDM4M1x0ICAgICAgICBTdHJpbmcgYWN0aW9uID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhY3Rpb25cIik7XG4gICAzODRcdFxuICAgMzg1XHQgICAgICAgIC8vIEhhbmRsZSBkZWxldGUgcmVxdWVzdHMgZnJvbSB0aGUgVVJMIHBhdHRlcm5cbiAgIDM4Nlx0ICAgICAgICBpZiAocGF0aEluZm8gIT0gbnVsbCAmJiBwYXRoSW5mby5zdGFydHNXaXRoKFwiL2RlbGV0ZS9cIikpIHtcbiAgIDM4N1x0ICAgICAgICAgICAgLy8gRGVsZXRlIGJvb2sgdmlhIFBPU1QgcmVxdWVzdFxuICAgMzg4XHQgICAgICAgICAgICB0cnkge1xuICAgMzg5XHQgICAgICAgICAgICAgICAgaW50IGJvb2tJZCA9IEludGVnZXIucGFyc2VJbnQocGF0aEluZm8uc3Vic3RyaW5nKDgpKTtcbiAgIDM5MFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFkbWluQm9va3NTZXJ2bGV0OiBBdHRlbXB0aW5nIHRvIGRlbGV0ZSBib29rIHdpdGggSUQ6IFwiICsgYm9va0lkICsgXCIgdmlhIFBPU1RcIik7XG4gICAzOTFcdFxuICAgMzkyXHQgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBib29rIHRvIHZlcmlmeSBpdCBleGlzdHNcbiAgIDM5M1x0ICAgICAgICAgICAgICAgIEJvb2sgYm9va1RvRGVsZXRlID0gYm9va0RBTy5nZXRCb29rQnlJZChib29rSWQpO1xuICAgMzk0XHQgICAgICAgICAgICAgICAgaWYgKGJvb2tUb0RlbGV0ZSA9PSBudWxsKSB7XG4gICAzOTVcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWRtaW5Cb29rc1NlcnZsZXQ6IEJvb2sgd2l0aCBJRCBcIiArIGJvb2tJZCArIFwiIG5vdCBmb3VuZFwiKTtcbiAgIDM5Nlx0ICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3M/ZXJyb3I9Ym9vay1ub3QtZm91bmRcIik7XG4gICAzOTdcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgMzk4XHQgICAgICAgICAgICAgICAgfVxuICAgMzk5XHRcbiAgIDQwMFx0ICAgICAgICAgICAgICAgIGJvb2xlYW4gZGVsZXRlZCA9IGJvb2tEQU8uZGVsZXRlQm9vayhib29rSWQpO1xuICAgNDAxXHQgICAgICAgICAgICAgICAgaWYgKGRlbGV0ZWQpIHtcbiAgIDQwMlx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBZG1pbkJvb2tzU2VydmxldDogQm9vayB3aXRoIElEIFwiICsgYm9va0lkICsgXCIgd2FzIHN1Y2Nlc3NmdWxseSBkZWxldGVkIHZpYSBQT1NUXCIpO1xuICAgNDAzXHQgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9ib29rcz9kZWxldGVkPXRydWVcIik7XG4gICA0MDRcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgNDA1XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFkbWluQm9va3NTZXJ2bGV0OiBGYWlsZWQgdG8gZGVsZXRlIGJvb2sgd2l0aCBJRCBcIiArIGJvb2tJZCk7XG4gICA0MDZcdCAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzP2Vycm9yPWRlbGV0ZS1mYWlsZWRcIik7XG4gICA0MDdcdCAgICAgICAgICAgICAgICB9XG4gICA0MDhcdCAgICAgICAgICAgICAgICByZXR1cm47XG4gICA0MDlcdCAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICA0MTBcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBZG1pbkJvb2tzU2VydmxldDogSW52YWxpZCBib29rIElEIGZvcm1hdDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICA0MTFcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgNDEyXHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzP2Vycm9yPWludmFsaWQtaWRcIik7XG4gICA0MTNcdCAgICAgICAgICAgICAgICByZXR1cm47XG4gICA0MTRcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICA0MTVcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBZG1pbkJvb2tzU2VydmxldDogRXJyb3IgZGVsZXRpbmcgYm9vazogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICA0MTZcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgNDE3XHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzP2Vycm9yPWRlbGV0ZS1lcnJvclwiKTtcbiAgIDQxOFx0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgIDQxOVx0ICAgICAgICAgICAgfVxuICAgNDIwXHQgICAgICAgIH1cbiAgIDQyMVx0XG4gICA0MjJcdCAgICAgICAgaWYgKFwiYWRkXCIuZXF1YWxzKGFjdGlvbikpIHtcbiAgIDQyM1x0ICAgICAgICAgICAgLy8gQWRkIG5ldyBib29rXG4gICA0MjRcdCAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICA0MjVcdCAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJ0aXRsZVwiKSk7XG4gICA0MjZcdCAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiYXV0aG9yXCIpKTtcbiAgIDQyN1x0ICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihyZXF1ZXN0LmdldFBhcmFtZXRlcihcImRlc2NyaXB0aW9uXCIpKTtcbiAgIDQyOFx0ICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShyZXF1ZXN0LmdldFBhcmFtZXRlcihcImNhdGVnb3J5XCIpKTtcbiAgIDQyOVx0ICAgICAgICAgICAgYm9vay5zZXRHZW5yZShyZXF1ZXN0LmdldFBhcmFtZXRlcihcImdlbnJlXCIpKTtcbiAgIDQzMFx0ICAgICAgICAgICAgYm9vay5zZXRQcmljZShuZXcgQmlnRGVjaW1hbChyZXF1ZXN0LmdldFBhcmFtZXRlcihcInByaWNlXCIpKSk7XG4gICA0MzFcdCAgICAgICAgICAgIGJvb2suc2V0U3RvY2soSW50ZWdlci5wYXJzZUludChyZXF1ZXN0LmdldFBhcmFtZXRlcihcInN0b2NrXCIpKSk7XG4gICA0MzJcdFxuICAgNDMzXHQgICAgICAgICAgICAvLyBIYW5kbGUgaW1hZ2UgdXBsb2FkXG4gICA0MzRcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2Nlc3NpbmcgaW1hZ2UgdXBsb2FkIGZvciBBREQgb3BlcmF0aW9uXCIpO1xuICAgNDM1XHQgICAgICAgICAgICB0cnkge1xuICAgNDM2XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVHJ5aW5nIHRvIGdldCBmaWxlIHBhcnQgd2l0aCBuYW1lICdib29rSW1hZ2UnLi4uXCIpO1xuICAgNDM3XHQgICAgICAgICAgICAgICAgUGFydCBmaWxlUGFydCA9IHJlcXVlc3QuZ2V0UGFydChcImJvb2tJbWFnZVwiKTtcbiAgIDQzOFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCByZXRyaWV2ZWQ6IFwiICsgKGZpbGVQYXJ0ICE9IG51bGwpKTtcbiAgIDQzOVx0XG4gICA0NDBcdCAgICAgICAgICAgICAgICAvLyBQcmludCBhbGwgcGFydHMgZm9yIGRlYnVnZ2luZ1xuICAgNDQxXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWxsIHBhcnRzIGluIHRoZSByZXF1ZXN0OlwiKTtcbiAgIDQ0Mlx0ICAgICAgICAgICAgICAgIGZvciAoUGFydCBwYXJ0IDogcmVxdWVzdC5nZXRQYXJ0cygpKSB7XG4gICA0NDNcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBQYXJ0IG5hbWU6IFwiICsgcGFydC5nZXROYW1lKCkgKyBcIiwgU2l6ZTogXCIgKyBwYXJ0LmdldFNpemUoKSArIFwiLCBDb250ZW50IHR5cGU6IFwiICsgcGFydC5nZXRDb250ZW50VHlwZSgpKTtcbiAgIDQ0NFx0ICAgICAgICAgICAgICAgICAgICBpZiAoXCJib29rSW1hZ2VcIi5lcXVhbHMocGFydC5nZXROYW1lKCkpICYmIHBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgNDQ1XHQgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIEZvdW5kIGJvb2tJbWFnZSBwYXJ0IHdpdGggc2l6ZSA+IDBcIik7XG4gICA0NDZcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgU3VibWl0dGVkIGZpbGVuYW1lOiBcIiArIHBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSk7XG4gICA0NDdcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgNDQ4XHQgICAgICAgICAgICAgICAgfVxuICAgNDQ5XHRcbiAgIDQ1MFx0ICAgICAgICAgICAgICAgIGlmIChmaWxlUGFydCAhPSBudWxsICYmIGZpbGVQYXJ0LmdldFNpemUoKSA+IDApIHtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDU2NlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNW1uMTVwNFR0d3hia2VnakJSS3pFeCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI4OWE5ZjMxYS03YjdiLTQ1ZjYtYmMxMi05M2MwNDU5MDBlZjEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFXR2VRM0djR25TaWs5eWpKSnZaaWpEIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICAgICAgICBpZiAoYm9va0RBTy5hZGRCb29rKGJvb2spKSB7XFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcXFwiL2FkbWluL2Jvb2tzP2FkZGVkPXRydWVcXFwiKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcXFwiZXJyb3JNZXNzYWdlXFxcIiwgXFxcIkZhaWxlZCB0byBhZGQgYm9va1xcXCIpO1xcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcXFwiYm9va1xcXCIsIGJvb2spO1xcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFxcXCIvYWRtaW4vYm9vay1mb3JtLmpzcFxcXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xcbiAgICAgICAgICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYm9vayBhbHJlYWR5IGV4aXN0cyBiZWZvcmUgYWRkaW5nXFxuICAgICAgICAgICAgaWYgKGJvb2tEQU8uaXNEdXBsaWNhdGVCb29rKGJvb2spKSB7XFxuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiRHVwbGljYXRlIGJvb2sgZGV0ZWN0ZWQ6IFxcXCIgKyBib29rLmdldFRpdGxlKCkgKyBcXFwiIGJ5IFxcXCIgKyBib29rLmdldEF1dGhvcigpKTtcXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXFxcImVycm9yTWVzc2FnZVxcXCIsIFxcXCJBIGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yIGFscmVhZHkgZXhpc3RzXFxcIik7XFxuICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFxcXCJib29rXFxcIiwgYm9vayk7XFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXFxcIi9hZG1pbi9ib29rLWZvcm0uanNwXFxcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChib29rREFPLmFkZEJvb2soYm9vaykpIHtcXG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFxcXCIvYWRtaW4vYm9va3M/YWRkZWQ9dHJ1ZVxcXCIpO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFxcXCJlcnJvck1lc3NhZ2VcXFwiLCBcXFwiRmFpbGVkIHRvIGFkZCBib29rXFxcIik7XFxuICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFxcXCJib29rXFxcIiwgYm9vayk7XFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXFxcIi9hZG1pbi9ib29rLWZvcm0uanNwXFxcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XFxuICAgICAgICAgICAgfVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogNDc2LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDQ4Mn1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIG1vZGlmeSB0aGUgQWRtaW5Cb29rc1NlcnZsZXQgdG8gY2hlY2sgZm9yIGR1cGxpY2F0ZSBib29rcyBiZWZvcmUgYWRkaW5nIGEgbmV3IG9uZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmE6XG4gICA0NzBcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICA0NzFcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgdXBsb2FkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDQ3Mlx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0NzNcdCAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKFwiaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIik7IC8vIERlZmF1bHQgaW1hZ2UgcGF0aCBvbiBlcnJvclxuICAgNDc0XHQgICAgICAgICAgICB9XG4gICA0NzVcdFxuICAgNDc2XHQgICAgICAgICAgICBpZiAoYm9va0RBTy5hZGRCb29rKGJvb2spKSB7XG4gICA0NzdcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3M/YWRkZWQ9dHJ1ZVwiKTtcbiAgIDQ3OFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDQ3OVx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiZXJyb3JNZXNzYWdlXCIsIFwiRmFpbGVkIHRvIGFkZCBib29rXCIpO1xuICAgNDgwXHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rXCIsIGJvb2spO1xuICAgNDgxXHQgICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgNDgyXHQgICAgICAgICAgICB9XG4gICA0ODNcdCAgICAgICAgfSBlbHNlIGlmIChcInVwZGF0ZVwiLmVxdWFscyhhY3Rpb24pKSB7XG4gICA0ODRcdCAgICAgICAgICAgIC8vIFVwZGF0ZSBib29rXG4gICA0ODVcdCAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICA0ODZcdCAgICAgICAgICAgIGJvb2suc2V0SWQoSW50ZWdlci5wYXJzZUludChyZXF1ZXN0LmdldFBhcmFtZXRlcihcImlkXCIpKSk7XG4gICA0ODdcdCAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJ0aXRsZVwiKSk7XG4gICA0ODhcdCAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiYXV0aG9yXCIpKTtcbiAgIDQ4OVx0ICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihyZXF1ZXN0LmdldFBhcmFtZXRlcihcImRlc2NyaXB0aW9uXCIpKTtcbiAgIDQ5MFx0ICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShyZXF1ZXN0LmdldFBhcmFtZXRlcihcImNhdGVnb3J5XCIpKTtcbiAgIDQ5MVx0ICAgICAgICAgICAgYm9vay5zZXRHZW5yZShyZXF1ZXN0LmdldFBhcmFtZXRlcihcImdlbnJlXCIpKTtcbiAgIDQ5Mlx0ICAgICAgICAgICAgYm9vay5zZXRQcmljZShuZXcgQmlnRGVjaW1hbChyZXF1ZXN0LmdldFBhcmFtZXRlcihcInByaWNlXCIpKSk7XG4gICA0OTNcdCAgICAgICAgICAgIGJvb2suc2V0U3RvY2soSW50ZWdlci5wYXJzZUludChyZXF1ZXN0LmdldFBhcmFtZXRlcihcInN0b2NrXCIpKSk7XG4gICA0OTRcdFxuICAgNDk1XHQgICAgICAgICAgICAvLyBIYW5kbGUgaW1hZ2UgdXBsb2FkXG4gICA0OTZcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlByb2Nlc3NpbmcgaW1hZ2UgdXBsb2FkIGZvciBVUERBVEUgb3BlcmF0aW9uXCIpO1xuICAgNDk3XHQgICAgICAgICAgICB0cnkge1xuICAgNDk4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVHJ5aW5nIHRvIGdldCBmaWxlIHBhcnQgd2l0aCBuYW1lICdib29rSW1hZ2UnLi4uXCIpO1xuICAgNDk5XHQgICAgICAgICAgICAgICAgUGFydCBmaWxlUGFydCA9IHJlcXVlc3QuZ2V0UGFydChcImJvb2tJbWFnZVwiKTtcbiAgIDUwMFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCByZXRyaWV2ZWQ6IFwiICsgKGZpbGVQYXJ0ICE9IG51bGwpKTtcbiAgIDUwMVx0XG4gICA1MDJcdCAgICAgICAgICAgICAgICAvLyBQcmludCBhbGwgcGFydHMgZm9yIGRlYnVnZ2luZ1xuICAgNTAzXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWxsIHBhcnRzIGluIHRoZSByZXF1ZXN0OlwiKTtcbiAgIDUwNFx0ICAgICAgICAgICAgICAgIGZvciAoUGFydCBwYXJ0IDogcmVxdWVzdC5nZXRQYXJ0cygpKSB7XG4gICA1MDVcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBQYXJ0IG5hbWU6IFwiICsgcGFydC5nZXROYW1lKCkgKyBcIiwgU2l6ZTogXCIgKyBwYXJ0LmdldFNpemUoKSArIFwiLCBDb250ZW50IHR5cGU6IFwiICsgcGFydC5nZXRDb250ZW50VHlwZSgpKTtcbiAgIDUwNlx0ICAgICAgICAgICAgICAgICAgICBpZiAoXCJib29rSW1hZ2VcIi5lcXVhbHMocGFydC5nZXROYW1lKCkpICYmIHBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgNTA3XHQgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIEZvdW5kIGJvb2tJbWFnZSBwYXJ0IHdpdGggc2l6ZSA+IDBcIik7XG4gICA1MDhcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgU3VibWl0dGVkIGZpbGVuYW1lOiBcIiArIHBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSk7XG4gICA1MDlcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgNTEwXHQgICAgICAgICAgICAgICAgfVxuICAgNTExXHRcbiAgIDUxMlx0ICAgICAgICAgICAgICAgIGlmIChmaWxlUGFydCAhPSBudWxsICYmIGZpbGVQYXJ0LmdldFNpemUoKSA+IDApIHtcbiAgIDUxM1x0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHBhcnQgc2l6ZTogXCIgKyBmaWxlUGFydC5nZXRTaXplKCkpO1xuICAgNTE0XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgbmFtZTogXCIgKyBmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcbiAgIDUxNVx0XG4gICA1MTZcdCAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBhcHBsaWNhdGlvbidzIHJlYWwgcGF0aFxuICAgNTE3XHQgICAgICAgICAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCJcIik7XG4gICA1MThcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXBwbGljYXRpb24gcGF0aDogXCIgKyBhcHBsaWNhdGlvblBhdGgpO1xuICAgNTE5XHRcbiAgIDUyMFx0ICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIGFuZCBnZXQgaXRzIHBhdGhcblRvdGFsIGxpbmVzIGluIGZpbGU6IDU2NlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNUc4OVlBOHhXYXRCeVh1VXllS0xqUyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6Ik5vdyBsZXQncyBtb2RpZnkgdGhlIEFkbWluQm9va3NTZXJ2bGV0IHRvIGNoZWNrIGZvciBkdXBsaWNhdGUgYm9va3MgYmVmb3JlIGFkZGluZyBhIG5ldyBvbmU6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNzQ0OTAyYzEtOTY4MC00MDUxLWJhZmYtY2Q0ZGU1NTZlZmUxIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxQ3RjbndmaUdEemhGSkc4ZEt6NG9UQiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzU0MCwgNTY2XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFsc28gYWRkIGEgY2hlY2sgZm9yIHRoZSB1cGRhdGUgb3BlcmF0aW9uIHRvIGVuc3VyZSB0aGF0IGlmIHRoZSB0aXRsZSBhbmQgYXV0aG9yIGFyZSBjaGFuZ2VkLCB0aGV5IGRvbid0IGNvbmZsaWN0IHdpdGggYW4gZXhpc3RpbmcgYm9vazpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDQ3Mlx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0NzNcdCAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKFwiaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIik7IC8vIERlZmF1bHQgaW1hZ2UgcGF0aCBvbiBlcnJvclxuICAgNDc0XHQgICAgICAgICAgICB9XG4gICA0NzVcdFxuICAgNDc2XHQgICAgICAgICAgICAvLyBDaGVjayBpZiBib29rIGFscmVhZHkgZXhpc3RzIGJlZm9yZSBhZGRpbmdcbiAgIDQ3N1x0ICAgICAgICAgICAgaWYgKGJvb2tEQU8uaXNEdXBsaWNhdGVCb29rKGJvb2spKSB7XG4gICA0NzhcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEdXBsaWNhdGUgYm9vayBkZXRlY3RlZDogXCIgKyBib29rLmdldFRpdGxlKCkgKyBcIiBieSBcIiArIGJvb2suZ2V0QXV0aG9yKCkpO1xuICAgNDc5XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJlcnJvck1lc3NhZ2VcIiwgXCJBIGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yIGFscmVhZHkgZXhpc3RzXCIpO1xuICAgNDgwXHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rXCIsIGJvb2spO1xuICAgNDgxXHQgICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgNDgyXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGJvb2tEQU8uYWRkQm9vayhib29rKSkge1xuICAgNDgzXHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzP2FkZGVkPXRydWVcIik7XG4gICA0ODRcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICA0ODVcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkZhaWxlZCB0byBhZGQgYm9va1wiKTtcbiAgIDQ4Nlx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiYm9va1wiLCBib29rKTtcbiAgIDQ4N1x0ICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vYm9vay1mb3JtLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgIDQ4OFx0ICAgICAgICAgICAgfVxuICAgNDg5XHQgICAgICAgIH0gZWxzZSBpZiAoXCJ1cGRhdGVcIi5lcXVhbHMoYWN0aW9uKSkge1xuICAgNDkwXHQgICAgICAgICAgICAvLyBVcGRhdGUgYm9va1xuICAgNDkxXHQgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgNDkyXHQgICAgICAgICAgICBib29rLnNldElkKEludGVnZXIucGFyc2VJbnQocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJpZFwiKSkpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFXR2VRM0djR25TaWs5eWpKSnZaaWpEIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgYWxzbyBhZGQgYSBjaGVjayBmb3IgdGhlIHVwZGF0ZSBvcGVyYXRpb24gdG8gZW5zdXJlIHRoYXQgaWYgdGhlIHRpdGxlIGFuZCBhdXRob3IgYXJlIGNoYW5nZWQsIHRoZXkgZG9uJ3QgY29uZmxpY3Qgd2l0aCBhbiBleGlzdGluZyBib29rOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjczZGJmMDU4LTRhYTgtNDMwOS05ZjIzLWNhZTI2YzFiMzZlYiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTNQWWI3bkZkMjI2Y1NEdlRxU3Z5NDQiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFs1NjAsIDU3Ml19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhOlxuICAgNTQwXHQgICAgICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGN1cnJlbnRJbWFnZVVybCk7XG4gICA1NDFcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIktlZXBpbmcgY3VycmVudCBpbWFnZSBVUkw6IFwiICsgY3VycmVudEltYWdlVXJsKTtcbiAgIDU0Mlx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgNTQzXHQgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBjdXJyZW50IGltYWdlIFVSTCwgdXNpbmcgZGVmYXVsdCBpbWFnZVwiKTtcbiAgIDU0NFx0ICAgICAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGhcbiAgIDU0NVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICA1NDZcdCAgICAgICAgICAgICAgICB9XG4gICA1NDdcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICA1NDhcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgdXBsb2FkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDU0OVx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA1NTBcdFxuICAgNTUxXHQgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGtlZXAgY3VycmVudCBpbWFnZSBvbiBlcnJvclxuICAgNTUyXHQgICAgICAgICAgICAgICAgU3RyaW5nIGN1cnJlbnRJbWFnZVVybCA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY3VycmVudEltYWdlVXJsXCIpO1xuICAgNTUzXHQgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbWFnZVVybCAhPSBudWxsICYmICFjdXJyZW50SW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICA1NTRcdCAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChjdXJyZW50SW1hZ2VVcmwpO1xuICAgNTU1XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVzaW5nIGN1cnJlbnQgaW1hZ2UgVVJMIGFmdGVyIGVycm9yOiBcIiArIGN1cnJlbnRJbWFnZVVybCk7XG4gICA1NTZcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgNTU3XHQgICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICA1NThcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXNpbmcgZGVmYXVsdCBpbWFnZSBhZnRlciBlcnJvclwiKTtcbiAgIDU1OVx0ICAgICAgICAgICAgICAgIH1cbiAgIDU2MFx0ICAgICAgICAgICAgfVxuICAgNTYxXHRcbiAgIDU2Mlx0ICAgICAgICAgICAgaWYgKGJvb2tEQU8udXBkYXRlQm9vayhib29rKSkge1xuICAgNTYzXHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzP3VwZGF0ZWQ9dHJ1ZVwiKTtcbiAgIDU2NFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDU2NVx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiZXJyb3JNZXNzYWdlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBib29rXCIpO1xuICAgNTY2XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rXCIsIGJvb2spO1xuVG90YWwgbGluZXMgaW4gZmlsZTogNTcyXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFDdGNud2ZpR0R6aEZKRzhkS3o0b1RCIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjRiMjhjNzgzLWQ5MzgtNDE1ZC04NzcwLWYzZjdlOGM0N2ZlYSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTE4TmlxaTFERkVkTGFUV3hBS2ZlYVoiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAgICAgICAgIGlmIChib29rREFPLnVwZGF0ZUJvb2soYm9vaykpIHtcXG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFxcXCIvYWRtaW4vYm9va3M/dXBkYXRlZD10cnVlXFxcIik7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXFxcImVycm9yTWVzc2FnZVxcXCIsIFxcXCJGYWlsZWQgdG8gdXBkYXRlIGJvb2tcXFwiKTtcXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXFxcImJvb2tcXFwiLCBib29rKTtcXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcXFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcXFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcXG4gICAgICAgICAgICB9XCIsIFwibmV3X3N0clwiOiBcIiAgICAgICAgICAgIC8vIEdldCB0aGUgb3JpZ2luYWwgYm9vayB0byBjaGVjayBpZiB0aXRsZS9hdXRob3IgY2hhbmdlZFxcbiAgICAgICAgICAgIEJvb2sgb3JpZ2luYWxCb29rID0gYm9va0RBTy5nZXRCb29rQnlJZChib29rLmdldElkKCkpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBkdXBsaWNhdGUgb25seSBpZiB0aXRsZSBvciBhdXRob3IgY2hhbmdlZFxcbiAgICAgICAgICAgIGJvb2xlYW4gdGl0bGVPckF1dGhvckNoYW5nZWQgPSBvcmlnaW5hbEJvb2sgIT0gbnVsbCAmJiBcXG4gICAgICAgICAgICAgICAgKCFvcmlnaW5hbEJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoYm9vay5nZXRUaXRsZSgpKSB8fCBcXG4gICAgICAgICAgICAgICAgICFvcmlnaW5hbEJvb2suZ2V0QXV0aG9yKCkuZXF1YWxzKGJvb2suZ2V0QXV0aG9yKCkpKTtcXG4gICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGlmICh0aXRsZU9yQXV0aG9yQ2hhbmdlZCAmJiBib29rREFPLmlzRHVwbGljYXRlQm9vayhib29rKSkge1xcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkR1cGxpY2F0ZSBib29rIGRldGVjdGVkIGR1cmluZyB1cGRhdGU6IFxcXCIgKyBib29rLmdldFRpdGxlKCkgKyBcXFwiIGJ5IFxcXCIgKyBib29rLmdldEF1dGhvcigpKTtcXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXFxcImVycm9yTWVzc2FnZVxcXCIsIFxcXCJBIGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yIGFscmVhZHkgZXhpc3RzXFxcIik7XFxuICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFxcXCJib29rXFxcIiwgYm9vayk7XFxuICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXFxcIi9hZG1pbi9ib29rLWZvcm0uanNwXFxcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChib29rREFPLnVwZGF0ZUJvb2soYm9vaykpIHtcXG4gICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFxcXCIvYWRtaW4vYm9va3M/dXBkYXRlZD10cnVlXFxcIik7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXFxcImVycm9yTWVzc2FnZVxcXCIsIFxcXCJGYWlsZWQgdG8gdXBkYXRlIGJvb2tcXFwiKTtcXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXFxcImJvb2tcXFwiLCBib29rKTtcXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcXFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcXFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcXG4gICAgICAgICAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA1NjIsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNTY4fV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQncyBtb2RpZnkgdGhlIHVwZGF0ZSBvcGVyYXRpb24gdG8gY2hlY2sgZm9yIGR1cGxpY2F0ZSBib29rczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmE6XG4gICA1NjBcdCAgICAgICAgICAgIH1cbiAgIDU2MVx0XG4gICA1NjJcdCAgICAgICAgICAgIGlmIChib29rREFPLnVwZGF0ZUJvb2soYm9vaykpIHtcbiAgIDU2M1x0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9ib29rcz91cGRhdGVkPXRydWVcIik7XG4gICA1NjRcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICA1NjVcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgYm9va1wiKTtcbiAgIDU2Nlx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiYm9va1wiLCBib29rKTtcbiAgIDU2N1x0ICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vYm9vay1mb3JtLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgIDU2OFx0ICAgICAgICAgICAgfVxuICAgNTY5XHQgICAgICAgIH1cbiAgIDU3MFx0ICAgIH1cbiAgIDU3MVx0fVxuICAgNTcyXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDU3MlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxM1BZYjduRmQyMjZjU0R2VHFTdnk0NCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIG1vZGlmeSB0aGUgdXBkYXRlIG9wZXJhdGlvbiB0byBjaGVjayBmb3IgZHVwbGljYXRlIGJvb2tzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjM3ODgxNTA5LTg1NzEtNGRkNS05OGQ4LTk2MGExOGQyMTRiNiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTF2UWZpV3FpdmVMQm02ZmI3aEc4UTUiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvZGFvL0Jvb2tEQU8uamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgLyoqXFxuICAgICAqIENoZWNrIGlmIGEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHNcXG4gICAgICogQHBhcmFtIGJvb2sgVGhlIGJvb2sgdG8gY2hlY2tcXG4gICAgICogQHJldHVybiB0cnVlIGlmIGEgZHVwbGljYXRlIGJvb2sgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2VcXG4gICAgICovXFxuICAgIHB1YmxpYyBib29sZWFuIGlzRHVwbGljYXRlQm9vayhCb29rIGJvb2spIHtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcXG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XFxuICAgICAgICBib29sZWFuIGlzRHVwbGljYXRlID0gZmFsc2U7XFxuXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XFxuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFxcXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBib29rcyBXSEVSRSB0aXRsZSA9ID8gQU5EIGF1dGhvciA9ID9cXFwiO1xcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGJvb2suZ2V0QXV0aG9yKCkpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiQ2hlY2tpbmcgZm9yIGR1cGxpY2F0ZSBib29rOiBcXFwiICsgYm9vay5nZXRUaXRsZSgpICsgXFxcIiBieSBcXFwiICsgYm9vay5nZXRBdXRob3IoKSk7XFxuICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xcblxcbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcXG4gICAgICAgICAgICAgICAgaW50IGNvdW50ID0gcnMuZ2V0SW50KDEpO1xcbiAgICAgICAgICAgICAgICBpc0R1cGxpY2F0ZSA9IGNvdW50ID4gMDtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJGb3VuZCBcXFwiICsgY291bnQgKyBcXFwiIGV4aXN0aW5nIGJvb2tzIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvclxcXCIpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgIH0gZmluYWxseSB7XFxuICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcXG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xcbiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgcmV0dXJuIGlzRHVwbGljYXRlO1xcbiAgICB9XCIsIFwibmV3X3N0clwiOiBcIiAgICAvKipcXG4gICAgICogQ2hlY2sgaWYgYSBib29rIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvciBhbHJlYWR5IGV4aXN0c1xcbiAgICAgKiBAcGFyYW0gYm9vayBUaGUgYm9vayB0byBjaGVja1xcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgYSBkdXBsaWNhdGUgYm9vayBleGlzdHMsIGZhbHNlIG90aGVyd2lzZVxcbiAgICAgKi9cXG4gICAgcHVibGljIGJvb2xlYW4gaXNEdXBsaWNhdGVCb29rKEJvb2sgYm9vaykge1xcbiAgICAgICAgcmV0dXJuIGlzRHVwbGljYXRlQm9vayhib29rLCAwKTsgLy8gMCBtZWFucyBubyBib29rIElEIHRvIGV4Y2x1ZGVcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIENoZWNrIGlmIGEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHMsIGV4Y2x1ZGluZyBhIHNwZWNpZmljIGJvb2sgSURcXG4gICAgICogQHBhcmFtIGJvb2sgVGhlIGJvb2sgdG8gY2hlY2tcXG4gICAgICogQHBhcmFtIGV4Y2x1ZGVCb29rSWQgVGhlIElEIG9mIHRoZSBib29rIHRvIGV4Y2x1ZGUgZnJvbSB0aGUgY2hlY2sgKGZvciB1cGRhdGVzKVxcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgYSBkdXBsaWNhdGUgYm9vayBleGlzdHMsIGZhbHNlIG90aGVyd2lzZVxcbiAgICAgKi9cXG4gICAgcHVibGljIGJvb2xlYW4gaXNEdXBsaWNhdGVCb29rKEJvb2sgYm9vaywgaW50IGV4Y2x1ZGVCb29rSWQpIHtcXG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XFxuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcXG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XFxuICAgICAgICBib29sZWFuIGlzRHVwbGljYXRlID0gZmFsc2U7XFxuXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XFxuICAgICAgICAgICAgU3RyaW5nIHNxbDtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAoZXhjbHVkZUJvb2tJZCA+IDApIHtcXG4gICAgICAgICAgICAgICAgLy8gRXhjbHVkZSB0aGUgYm9vayB3aXRoIHRoZSBnaXZlbiBJRCAoZm9yIHVwZGF0ZXMpXFxuICAgICAgICAgICAgICAgIHNxbCA9IFxcXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBib29rcyBXSEVSRSB0aXRsZSA9ID8gQU5EIGF1dGhvciA9ID8gQU5EIGlkICE9ID9cXFwiO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBhbnkgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3JcXG4gICAgICAgICAgICAgICAgc3FsID0gXFxcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIGJvb2tzIFdIRVJFIHRpdGxlID0gPyBBTkQgYXV0aG9yID0gP1xcXCI7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcXG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGJvb2suZ2V0QXV0aG9yKCkpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGlmIChleGNsdWRlQm9va0lkID4gMCkge1xcbiAgICAgICAgICAgICAgICBzdG10LnNldEludCgzLCBleGNsdWRlQm9va0lkKTtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJDaGVja2luZyBmb3IgZHVwbGljYXRlIGJvb2s6IFxcXCIgKyBib29rLmdldFRpdGxlKCkgKyBcXFwiIGJ5IFxcXCIgKyBib29rLmdldEF1dGhvcigpICsgXFxcIiwgZXhjbHVkaW5nIGJvb2sgSUQ6IFxcXCIgKyBleGNsdWRlQm9va0lkKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkNoZWNraW5nIGZvciBkdXBsaWNhdGUgYm9vazogXFxcIiArIGJvb2suZ2V0VGl0bGUoKSArIFxcXCIgYnkgXFxcIiArIGJvb2suZ2V0QXV0aG9yKCkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XFxuXFxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xcbiAgICAgICAgICAgICAgICBpbnQgY291bnQgPSBycy5nZXRJbnQoMSk7XFxuICAgICAgICAgICAgICAgIGlzRHVwbGljYXRlID0gY291bnQgPiAwO1xcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkZvdW5kIFxcXCIgKyBjb3VudCArIFxcXCIgZXhpc3RpbmcgYm9va3Mgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yXFxcIik7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgfSBmaW5hbGx5IHtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcXG4gICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XFxuICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuXFxuICAgICAgICByZXR1cm4gaXNEdXBsaWNhdGU7XFxuICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDQxMiwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA0NTB9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IlRoZXJlJ3MgYSBwb3RlbnRpYWwgaXNzdWUgd2l0aCBvdXIgaW1wbGVtZW50YXRpb24uIFdoZW4gY2hlY2tpbmcgZm9yIGR1cGxpY2F0ZXMgZHVyaW5nIGFuIHVwZGF0ZSwgd2UgbmVlZCB0byBleGNsdWRlIHRoZSBjdXJyZW50IGJvb2sgZnJvbSB0aGUgY2hlY2suIExldCdzIG1vZGlmeSB0aGUgYGlzRHVwbGljYXRlQm9va2AgbWV0aG9kIGluIEJvb2tEQU8gdG8gaGFuZGxlIHRoaXMgY2FzZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDU1OFx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2luZyBkZWZhdWx0IGltYWdlIGFmdGVyIGVycm9yXCIpO1xuICAgNTU5XHQgICAgICAgICAgICAgICAgfVxuICAgNTYwXHQgICAgICAgICAgICB9XG4gICA1NjFcdFxuICAgNTYyXHQgICAgICAgICAgICAvLyBHZXQgdGhlIG9yaWdpbmFsIGJvb2sgdG8gY2hlY2sgaWYgdGl0bGUvYXV0aG9yIGNoYW5nZWRcbiAgIDU2M1x0ICAgICAgICAgICAgQm9vayBvcmlnaW5hbEJvb2sgPSBib29rREFPLmdldEJvb2tCeUlkKGJvb2suZ2V0SWQoKSk7XG4gICA1NjRcdFxuICAgNTY1XHQgICAgICAgICAgICAvLyBDaGVjayBmb3IgZHVwbGljYXRlIG9ubHkgaWYgdGl0bGUgb3IgYXV0aG9yIGNoYW5nZWRcbiAgIDU2Nlx0ICAgICAgICAgICAgYm9vbGVhbiB0aXRsZU9yQXV0aG9yQ2hhbmdlZCA9IG9yaWdpbmFsQm9vayAhPSBudWxsICYmXG4gICA1NjdcdCAgICAgICAgICAgICAgICAoIW9yaWdpbmFsQm9vay5nZXRUaXRsZSgpLmVxdWFscyhib29rLmdldFRpdGxlKCkpIHx8XG4gICA1NjhcdCAgICAgICAgICAgICAgICAgIW9yaWdpbmFsQm9vay5nZXRBdXRob3IoKS5lcXVhbHMoYm9vay5nZXRBdXRob3IoKSkpO1xuICAgNTY5XHRcbiAgIDU3MFx0ICAgICAgICAgICAgaWYgKHRpdGxlT3JBdXRob3JDaGFuZ2VkICYmIGJvb2tEQU8uaXNEdXBsaWNhdGVCb29rKGJvb2spKSB7XG4gICA1NzFcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEdXBsaWNhdGUgYm9vayBkZXRlY3RlZCBkdXJpbmcgdXBkYXRlOiBcIiArIGJvb2suZ2V0VGl0bGUoKSArIFwiIGJ5IFwiICsgYm9vay5nZXRBdXRob3IoKSk7XG4gICA1NzJcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHNcIik7XG4gICA1NzNcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImJvb2tcIiwgYm9vayk7XG4gICA1NzRcdCAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICA1NzVcdCAgICAgICAgICAgIH0gZWxzZSBpZiAoYm9va0RBTy51cGRhdGVCb29rKGJvb2spKSB7XG4gICA1NzZcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3M/dXBkYXRlZD10cnVlXCIpO1xuICAgNTc3XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgNTc4XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJlcnJvck1lc3NhZ2VcIiwgXCJGYWlsZWQgdG8gdXBkYXRlIGJvb2tcIik7XG4gICA1NzlcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImJvb2tcIiwgYm9vayk7XG4gICA1ODBcdCAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICA1ODFcdCAgICAgICAgICAgIH1cbiAgIDU4Mlx0ICAgICAgICB9XG4gICA1ODNcdCAgICB9XG4gICA1ODRcdH1cbiAgIDU4NVx0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTE4TmlxaTFERkVkTGFUV3hBS2ZlYVoifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJUaGVyZSdzIGEgcG90ZW50aWFsIGlzc3VlIHdpdGggb3VyIGltcGxlbWVudGF0aW9uLiBXaGVuIGNoZWNraW5nIGZvciBkdXBsaWNhdGVzIGR1cmluZyBhbiB1cGRhdGUsIHdlIG5lZWQgdG8gZXhjbHVkZSB0aGUgY3VycmVudCBib29rIGZyb20gdGhlIGNoZWNrLiBMZXQncyBtb2RpZnkgdGhlIGBpc0R1cGxpY2F0ZUJvb2tgIG1ldGhvZCBpbiBCb29rREFPIHRvIGhhbmRsZSB0aGlzIGNhc2U6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMjU2NTYyMTktZDAzYi00MTFiLTg4MjEtYjRlOWYwYjUyNjZiIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxUkptTWtpZUR6czYxcTRSaW5VTVIxZiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgICAgICAgICAgLy8gR2V0IHRoZSBvcmlnaW5hbCBib29rIHRvIGNoZWNrIGlmIHRpdGxlL2F1dGhvciBjaGFuZ2VkXFxuICAgICAgICAgICAgQm9vayBvcmlnaW5hbEJvb2sgPSBib29rREFPLmdldEJvb2tCeUlkKGJvb2suZ2V0SWQoKSk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZSBvbmx5IGlmIHRpdGxlIG9yIGF1dGhvciBjaGFuZ2VkXFxuICAgICAgICAgICAgYm9vbGVhbiB0aXRsZU9yQXV0aG9yQ2hhbmdlZCA9IG9yaWdpbmFsQm9vayAhPSBudWxsICYmIFxcbiAgICAgICAgICAgICAgICAoIW9yaWdpbmFsQm9vay5nZXRUaXRsZSgpLmVxdWFscyhib29rLmdldFRpdGxlKCkpIHx8IFxcbiAgICAgICAgICAgICAgICAgIW9yaWdpbmFsQm9vay5nZXRBdXRob3IoKS5lcXVhbHMoYm9vay5nZXRBdXRob3IoKSkpO1xcbiAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgaWYgKHRpdGxlT3JBdXRob3JDaGFuZ2VkICYmIGJvb2tEQU8uaXNEdXBsaWNhdGVCb29rKGJvb2spKSB7XCIsIFwibmV3X3N0clwiOiBcIiAgICAgICAgICAgIC8vIEdldCB0aGUgb3JpZ2luYWwgYm9vayB0byBjaGVjayBpZiB0aXRsZS9hdXRob3IgY2hhbmdlZFxcbiAgICAgICAgICAgIEJvb2sgb3JpZ2luYWxCb29rID0gYm9va0RBTy5nZXRCb29rQnlJZChib29rLmdldElkKCkpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBkdXBsaWNhdGUgb25seSBpZiB0aXRsZSBvciBhdXRob3IgY2hhbmdlZFxcbiAgICAgICAgICAgIGJvb2xlYW4gdGl0bGVPckF1dGhvckNoYW5nZWQgPSBvcmlnaW5hbEJvb2sgIT0gbnVsbCAmJiBcXG4gICAgICAgICAgICAgICAgKCFvcmlnaW5hbEJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoYm9vay5nZXRUaXRsZSgpKSB8fCBcXG4gICAgICAgICAgICAgICAgICFvcmlnaW5hbEJvb2suZ2V0QXV0aG9yKCkuZXF1YWxzKGJvb2suZ2V0QXV0aG9yKCkpKTtcXG4gICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGlmICh0aXRsZU9yQXV0aG9yQ2hhbmdlZCAmJiBib29rREFPLmlzRHVwbGljYXRlQm9vayhib29rLCBib29rLmdldElkKCkpKSB7XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA1NjIsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNTcwfV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0J3MgdXBkYXRlIHRoZSBBZG1pbkJvb2tzU2VydmxldCB0byB1c2UgdGhlIG5ldyBtZXRob2Qgd2l0aCB0aGUgZXhjbHVkZUJvb2tJZCBwYXJhbWV0ZXI6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9tYWluL2phdmEvZGFvL0Jvb2tEQU8uamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNDA4XHRcbiAgIDQwOVx0ICAgICAgICByZXR1cm4gYm9va3M7XG4gICA0MTBcdCAgICB9XG4gICA0MTFcdFxuICAgNDEyXHQgICAgLyoqXG4gICA0MTNcdCAgICAgKiBDaGVjayBpZiBhIGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yIGFscmVhZHkgZXhpc3RzXG4gICA0MTRcdCAgICAgKiBAcGFyYW0gYm9vayBUaGUgYm9vayB0byBjaGVja1xuICAgNDE1XHQgICAgICogQHJldHVybiB0cnVlIGlmIGEgZHVwbGljYXRlIGJvb2sgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2VcbiAgIDQxNlx0ICAgICAqL1xuICAgNDE3XHQgICAgcHVibGljIGJvb2xlYW4gaXNEdXBsaWNhdGVCb29rKEJvb2sgYm9vaykge1xuICAgNDE4XHQgICAgICAgIHJldHVybiBpc0R1cGxpY2F0ZUJvb2soYm9vaywgMCk7IC8vIDAgbWVhbnMgbm8gYm9vayBJRCB0byBleGNsdWRlXG4gICA0MTlcdCAgICB9XG4gICA0MjBcdFxuICAgNDIxXHQgICAgLyoqXG4gICA0MjJcdCAgICAgKiBDaGVjayBpZiBhIGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yIGFscmVhZHkgZXhpc3RzLCBleGNsdWRpbmcgYSBzcGVjaWZpYyBib29rIElEXG4gICA0MjNcdCAgICAgKiBAcGFyYW0gYm9vayBUaGUgYm9vayB0byBjaGVja1xuICAgNDI0XHQgICAgICogQHBhcmFtIGV4Y2x1ZGVCb29rSWQgVGhlIElEIG9mIHRoZSBib29rIHRvIGV4Y2x1ZGUgZnJvbSB0aGUgY2hlY2sgKGZvciB1cGRhdGVzKVxuICAgNDI1XHQgICAgICogQHJldHVybiB0cnVlIGlmIGEgZHVwbGljYXRlIGJvb2sgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2VcbiAgIDQyNlx0ICAgICAqL1xuICAgNDI3XHQgICAgcHVibGljIGJvb2xlYW4gaXNEdXBsaWNhdGVCb29rKEJvb2sgYm9vaywgaW50IGV4Y2x1ZGVCb29rSWQpIHtcbiAgIDQyOFx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgNDI5XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgNDMwXHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICA0MzFcdCAgICAgICAgYm9vbGVhbiBpc0R1cGxpY2F0ZSA9IGZhbHNlO1xuICAgNDMyXHRcbiAgIDQzM1x0ICAgICAgICB0cnkge1xuICAgNDM0XHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgNDM1XHQgICAgICAgICAgICBTdHJpbmcgc3FsO1xuICAgNDM2XHRcbiAgIDQzN1x0ICAgICAgICAgICAgaWYgKGV4Y2x1ZGVCb29rSWQgPiAwKSB7XG4gICA0MzhcdCAgICAgICAgICAgICAgICAvLyBFeGNsdWRlIHRoZSBib29rIHdpdGggdGhlIGdpdmVuIElEIChmb3IgdXBkYXRlcylcbiAgIDQzOVx0ICAgICAgICAgICAgICAgIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gYm9va3MgV0hFUkUgdGl0bGUgPSA/IEFORCBhdXRob3IgPSA/IEFORCBpZCAhPSA/XCI7XG4gICA0NDBcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICA0NDFcdCAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgYW55IGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yXG4gICA0NDJcdCAgICAgICAgICAgICAgICBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIGJvb2tzIFdIRVJFIHRpdGxlID0gPyBBTkQgYXV0aG9yID0gP1wiO1xuICAgNDQzXHQgICAgICAgICAgICB9XG4gICA0NDRcdFxuICAgNDQ1XHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICA0NDZcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGJvb2suZ2V0VGl0bGUoKSk7XG4gICA0NDdcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGJvb2suZ2V0QXV0aG9yKCkpO1xuICAgNDQ4XHRcbiAgIDQ0OVx0ICAgICAgICAgICAgaWYgKGV4Y2x1ZGVCb29rSWQgPiAwKSB7XG4gICA0NTBcdCAgICAgICAgICAgICAgICBzdG10LnNldEludCgzLCBleGNsdWRlQm9va0lkKTtcbiAgIDQ1MVx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNoZWNraW5nIGZvciBkdXBsaWNhdGUgYm9vazogXCIgKyBib29rLmdldFRpdGxlKCkgKyBcIiBieSBcIiArIGJvb2suZ2V0QXV0aG9yKCkgKyBcIiwgZXhjbHVkaW5nIGJvb2sgSUQ6IFwiICsgZXhjbHVkZUJvb2tJZCk7XG4gICA0NTJcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICA0NTNcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDaGVja2luZyBmb3IgZHVwbGljYXRlIGJvb2s6IFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCIgYnkgXCIgKyBib29rLmdldEF1dGhvcigpKTtcbiAgIDQ1NFx0ICAgICAgICAgICAgfVxuICAgNDU1XHRcbiAgIDQ1Nlx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgNDU3XHRcbiAgIDQ1OFx0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgNDU5XHQgICAgICAgICAgICAgICAgaW50IGNvdW50ID0gcnMuZ2V0SW50KDEpO1xuICAgNDYwXHQgICAgICAgICAgICAgICAgaXNEdXBsaWNhdGUgPSBjb3VudCA+IDA7XG4gICA0NjFcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGb3VuZCBcIiArIGNvdW50ICsgXCIgZXhpc3RpbmcgYm9va3Mgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yXCIpO1xuICAgNDYyXHQgICAgICAgICAgICB9XG4gICA0NjNcdCAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDQ2NFx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDQ2NVx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgNDY2XHQgICAgICAgICAgICB0cnkge1xuICAgNDY3XHQgICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICA0NjhcdCAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICA0NjlcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICA0NzBcdCAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICA0NzFcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgNDcyXHQgICAgICAgICAgICB9XG4gICA0NzNcdCAgICAgICAgfVxuICAgNDc0XHRcbiAgIDQ3NVx0ICAgICAgICByZXR1cm4gaXNEdXBsaWNhdGU7XG4gICA0NzZcdCAgICB9XG4gICA0NzdcdFxuICAgNDc4XHQgICAgcHVibGljIGJvb2xlYW4gYWRkQm9vayhCb29rIGJvb2spIHtcbiAgIDQ3OVx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgNDgwXHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDExdlFmaVdxaXZlTEJtNmZiN2hHOFE1In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIHVwZGF0ZSB0aGUgQWRtaW5Cb29rc1NlcnZsZXQgdG8gdXNlIHRoZSBuZXcgbWV0aG9kIHdpdGggdGhlIGV4Y2x1ZGVCb29rSWQgcGFyYW1ldGVyOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImNjOGFkYzY1LWU4YWMtNGRhMS04YmY3LTQzYzQyNDcwYWQ1MiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkdyZWF0ISBOb3cgbGV0J3MgdGVzdCBvdXIgaW1wbGVtZW50YXRpb24gdG8gbWFrZSBzdXJlIGl0IHdvcmtzIGNvcnJlY3RseS4gTGV0J3Mgc3VtbWFyaXplIHRoZSBjaGFuZ2VzIHdlJ3ZlIG1hZGU6XG5cbiMjIFN1bW1hcnkgb2YgQ2hhbmdlc1xuXG4xLiBBZGRlZCBhIG5ldyBtZXRob2QgYGlzRHVwbGljYXRlQm9vayhCb29rIGJvb2spYCBpbiBCb29rREFPIHRvIGNoZWNrIGlmIGEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHMuXG4yLiBBZGRlZCBhbiBvdmVybG9hZGVkIG1ldGhvZCBgaXNEdXBsaWNhdGVCb29rKEJvb2sgYm9vaywgaW50IGV4Y2x1ZGVCb29rSWQpYCB0byBleGNsdWRlIGEgc3BlY2lmaWMgYm9vayBJRCBmcm9tIHRoZSBjaGVjayAoZm9yIHVwZGF0ZXMpLlxuMy4gTW9kaWZpZWQgdGhlIGBkb1Bvc3RgIG1ldGhvZCBpbiBBZG1pbkJvb2tzU2VydmxldCB0byBjaGVjayBmb3IgZHVwbGljYXRlIGJvb2tzIGJlZm9yZSBhZGRpbmcgYSBuZXcgYm9vay5cbjQuIE1vZGlmaWVkIHRoZSB1cGRhdGUgb3BlcmF0aW9uIGluIEFkbWluQm9va3NTZXJ2bGV0IHRvIGNoZWNrIGZvciBkdXBsaWNhdGUgYm9va3Mgd2hlbiB0aGUgdGl0bGUgb3IgYXV0aG9yIGlzIGNoYW5nZWQuXG5cblRoZXNlIGNoYW5nZXMgZW5zdXJlIHRoYXQ6XG4xLiBBZG1pbnMgY2Fubm90IGFkZCBhIG5ldyBib29rIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvciBhcyBhbiBleGlzdGluZyBib29rLlxuMi4gQWRtaW5zIGNhbm5vdCB1cGRhdGUgYSBib29rJ3MgdGl0bGUgYW5kIGF1dGhvciB0byBtYXRjaCBhbiBleGlzdGluZyBib29rLlxuMy4gQXBwcm9wcmlhdGUgZXJyb3IgbWVzc2FnZXMgYXJlIGRpc3BsYXllZCB0byB0aGUgYWRtaW4gd2hlbiBhdHRlbXB0aW5nIHRvIGFkZCBvciB1cGRhdGUgYSBkdXBsaWNhdGUgYm9vay5cblxuIyMgVGVzdGluZ1xuXG5UaGUgaW1wbGVtZW50YXRpb24gc2hvdWxkIG5vdyBwcmV2ZW50IGR1cGxpY2F0ZSBib29rcyBmcm9tIGJlaW5nIGFkZGVkIHRvIHRoZSBzeXN0ZW0uIFdoZW4gYW4gYWRtaW4gdHJpZXMgdG8gYWRkIGEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYXMgYW4gZXhpc3RpbmcgYm9vaywgdGhleSB3aWxsIHNlZSBhbiBlcnJvciBtZXNzYWdlIHNheWluZyBcIkEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHNcIi5cblxuU2ltaWxhcmx5LCB3aGVuIHVwZGF0aW5nIGEgYm9vaywgaWYgdGhlIGFkbWluIGNoYW5nZXMgdGhlIHRpdGxlIGFuZCBhdXRob3IgdG8gbWF0Y2ggYW4gZXhpc3RpbmcgYm9vaywgdGhleSB3aWxsIHNlZSB0aGUgc2FtZSBlcnJvciBtZXNzYWdlLlxuXG5JcyB0aGVyZSBhbnl0aGluZyBlbHNlIHlvdSdkIGxpa2UgbWUgdG8gZXhwbGFpbiBvciBtb2RpZnkgYWJvdXQgdGhlIGltcGxlbWVudGF0aW9uP1xuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNTU4XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVzaW5nIGRlZmF1bHQgaW1hZ2UgYWZ0ZXIgZXJyb3JcIik7XG4gICA1NTlcdCAgICAgICAgICAgICAgICB9XG4gICA1NjBcdCAgICAgICAgICAgIH1cbiAgIDU2MVx0XG4gICA1NjJcdCAgICAgICAgICAgIC8vIEdldCB0aGUgb3JpZ2luYWwgYm9vayB0byBjaGVjayBpZiB0aXRsZS9hdXRob3IgY2hhbmdlZFxuICAgNTYzXHQgICAgICAgICAgICBCb29rIG9yaWdpbmFsQm9vayA9IGJvb2tEQU8uZ2V0Qm9va0J5SWQoYm9vay5nZXRJZCgpKTtcbiAgIDU2NFx0XG4gICA1NjVcdCAgICAgICAgICAgIC8vIENoZWNrIGZvciBkdXBsaWNhdGUgb25seSBpZiB0aXRsZSBvciBhdXRob3IgY2hhbmdlZFxuICAgNTY2XHQgICAgICAgICAgICBib29sZWFuIHRpdGxlT3JBdXRob3JDaGFuZ2VkID0gb3JpZ2luYWxCb29rICE9IG51bGwgJiZcbiAgIDU2N1x0ICAgICAgICAgICAgICAgICghb3JpZ2luYWxCb29rLmdldFRpdGxlKCkuZXF1YWxzKGJvb2suZ2V0VGl0bGUoKSkgfHxcbiAgIDU2OFx0ICAgICAgICAgICAgICAgICAhb3JpZ2luYWxCb29rLmdldEF1dGhvcigpLmVxdWFscyhib29rLmdldEF1dGhvcigpKSk7XG4gICA1NjlcdFxuICAgNTcwXHQgICAgICAgICAgICBpZiAodGl0bGVPckF1dGhvckNoYW5nZWQgJiYgYm9va0RBTy5pc0R1cGxpY2F0ZUJvb2soYm9vaywgYm9vay5nZXRJZCgpKSkge1xuICAgNTcxXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRHVwbGljYXRlIGJvb2sgZGV0ZWN0ZWQgZHVyaW5nIHVwZGF0ZTogXCIgKyBib29rLmdldFRpdGxlKCkgKyBcIiBieSBcIiArIGJvb2suZ2V0QXV0aG9yKCkpO1xuICAgNTcyXHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJlcnJvck1lc3NhZ2VcIiwgXCJBIGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yIGFscmVhZHkgZXhpc3RzXCIpO1xuICAgNTczXHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rXCIsIGJvb2spO1xuICAgNTc0XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFSSm1Na2llRHpzNjFxNFJpblVNUjFmIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiR3JlYXQhIE5vdyBsZXQncyB0ZXN0IG91ciBpbXBsZW1lbnRhdGlvbiB0byBtYWtlIHN1cmUgaXQgd29ya3MgY29ycmVjdGx5LiBMZXQncyBzdW1tYXJpemUgdGhlIGNoYW5nZXMgd2UndmUgbWFkZTpcblxuIyMgU3VtbWFyeSBvZiBDaGFuZ2VzXG5cbjEuIEFkZGVkIGEgbmV3IG1ldGhvZCBgaXNEdXBsaWNhdGVCb29rKEJvb2sgYm9vaylgIGluIEJvb2tEQU8gdG8gY2hlY2sgaWYgYSBib29rIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvciBhbHJlYWR5IGV4aXN0cy5cbjIuIEFkZGVkIGFuIG92ZXJsb2FkZWQgbWV0aG9kIGBpc0R1cGxpY2F0ZUJvb2soQm9vayBib29rLCBpbnQgZXhjbHVkZUJvb2tJZClgIHRvIGV4Y2x1ZGUgYSBzcGVjaWZpYyBib29rIElEIGZyb20gdGhlIGNoZWNrIChmb3IgdXBkYXRlcykuXG4zLiBNb2RpZmllZCB0aGUgYGRvUG9zdGAgbWV0aG9kIGluIEFkbWluQm9va3NTZXJ2bGV0IHRvIGNoZWNrIGZvciBkdXBsaWNhdGUgYm9va3MgYmVmb3JlIGFkZGluZyBhIG5ldyBib29rLlxuNC4gTW9kaWZpZWQgdGhlIHVwZGF0ZSBvcGVyYXRpb24gaW4gQWRtaW5Cb29rc1NlcnZsZXQgdG8gY2hlY2sgZm9yIGR1cGxpY2F0ZSBib29rcyB3aGVuIHRoZSB0aXRsZSBvciBhdXRob3IgaXMgY2hhbmdlZC5cblxuVGhlc2UgY2hhbmdlcyBlbnN1cmUgdGhhdDpcbjEuIEFkbWlucyBjYW5ub3QgYWRkIGEgbmV3IGJvb2sgd2l0aCB0aGUgc2FtZSB0aXRsZSBhbmQgYXV0aG9yIGFzIGFuIGV4aXN0aW5nIGJvb2suXG4yLiBBZG1pbnMgY2Fubm90IHVwZGF0ZSBhIGJvb2sncyB0aXRsZSBhbmQgYXV0aG9yIHRvIG1hdGNoIGFuIGV4aXN0aW5nIGJvb2suXG4zLiBBcHByb3ByaWF0ZSBlcnJvciBtZXNzYWdlcyBhcmUgZGlzcGxheWVkIHRvIHRoZSBhZG1pbiB3aGVuIGF0dGVtcHRpbmcgdG8gYWRkIG9yIHVwZGF0ZSBhIGR1cGxpY2F0ZSBib29rLlxuXG4jIyBUZXN0aW5nXG5cblRoZSBpbXBsZW1lbnRhdGlvbiBzaG91bGQgbm93IHByZXZlbnQgZHVwbGljYXRlIGJvb2tzIGZyb20gYmVpbmcgYWRkZWQgdG8gdGhlIHN5c3RlbS4gV2hlbiBhbiBhZG1pbiB0cmllcyB0byBhZGQgYSBib29rIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvciBhcyBhbiBleGlzdGluZyBib29rLCB0aGV5IHdpbGwgc2VlIGFuIGVycm9yIG1lc3NhZ2Ugc2F5aW5nIFwiQSBib29rIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvciBhbHJlYWR5IGV4aXN0c1wiLlxuXG5TaW1pbGFybHksIHdoZW4gdXBkYXRpbmcgYSBib29rLCBpZiB0aGUgYWRtaW4gY2hhbmdlcyB0aGUgdGl0bGUgYW5kIGF1dGhvciB0byBtYXRjaCBhbiBleGlzdGluZyBib29rLCB0aGV5IHdpbGwgc2VlIHRoZSBzYW1lIGVycm9yIG1lc3NhZ2UuXG5cbklzIHRoZXJlIGFueXRoaW5nIGVsc2UgeW91J2QgbGlrZSBtZSB0byBleHBsYWluIG9yIG1vZGlmeSBhYm91dCB0aGUgaW1wbGVtZW50YXRpb24/XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiJkNTNmYTc2MC1jOWQxLTQzMDUtOTdmZi03MGZkOGYyYTNiNWMiLCJ1dWlkIjoiMTBlOTg5MzktMTZlMi00ZTcxLTkxZmYtMDg5NTUyZTNjNzA4IiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ2NTA0MjQ4OTM4LCJ0b1RpbWVzdGFtcCI6MTc0NzczNjkzMjQ5OCwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InJlcXVlc3RfaWQiOiJjZWFkNjdkNi1hZmE0LTQ2NGYtOGM4YS0yODhlZTA2YWRkMGYiLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjhmMjFkMDY3LWUyYWEtNDFiYi05ZmMxLTk5MGRkOThlZGVlOCIsInJlcXVlc3RfbWVzc2FnZSI6ImFsbCBnb29kIGJ1dCB3aGVuIGFkbWluIGFkZCBib29rIGFuZCBhZGRpbmcgdGhlIGltYWdlIGkgd2FudCB0aGF0IHByb3BlciBpdCBpcyBub3QgZ29vZCIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJhbGwgZ29vZCBidXQgd2hlbiBhZG1pbiBhZGQgYm9vayBhbmQgYWRkaW5nIHRoZSBpbWFnZSBpIHdhbnQgdGhhdCBwcm9wZXIgaXQgaXMgbm90IGdvb2QifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVRxQWtpWGo0QjlmMzNGNHlFUEJLRHMiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIGltYWdlIHVwbG9hZCBmdW5jdGlvbmFsaXR5IGluIEFkbWluQm9va3NTZXJ2bGV0LCBlc3BlY2lhbGx5IHRoZSBzYXZlRmlsZSBtZXRob2QgYW5kIGFueSBjb2RlIHRoYXQgaGFuZGxlcyBpbWFnZSBwYXRocywgc3RvcmFnZSwgYW5kIGRpc3BsYXkuIEFsc28gbG9vayBmb3IgYW55IEpTUCBmaWxlcyB0aGF0IGRpc3BsYXkgYm9vayBpbWFnZXMuXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJIHVuZGVyc3RhbmQgdGhhdCB0aGVyZSBhcmUgaXNzdWVzIHdpdGggdGhlIGltYWdlIHVwbG9hZCBmdW5jdGlvbmFsaXR5IHdoZW4gYW4gYWRtaW4gYWRkcyBhIGJvb2suIExldCBtZSBleGFtaW5lIHRoZSBjdXJyZW50IGltYWdlIHVwbG9hZCBpbXBsZW1lbnRhdGlvbiBhbmQgc3VnZ2VzdCBpbXByb3ZlbWVudHMgdG8gbWFrZSBpdCB3b3JrIHByb3Blcmx5LlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJhbGwgZ29vZCBidXQgd2hlbiBhZG1pbiBhZGQgYm9vayBhbmQgYWRkaW5nIHRoZSBpbWFnZSBpIHdhbnQgdGhhdCBwcm9wZXIgaXQgaXMgbm90IGdvb2QifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJJIHVuZGVyc3RhbmQgdGhhdCB0aGVyZSBhcmUgaXNzdWVzIHdpdGggdGhlIGltYWdlIHVwbG9hZCBmdW5jdGlvbmFsaXR5IHdoZW4gYW4gYWRtaW4gYWRkcyBhIGJvb2suIExldCBtZSBleGFtaW5lIHRoZSBjdXJyZW50IGltYWdlIHVwbG9hZCBpbXBsZW1lbnRhdGlvbiBhbmQgc3VnZ2VzdCBpbXByb3ZlbWVudHMgdG8gbWFrZSBpdCB3b3JrIHByb3Blcmx5LlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImU5ZmM1ZjAxLWFkODctNDRiZi04ZTg1LWJhZGI2MTAzYjAwMiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVBhMUpENFdxTE5wUEZmOXQyY0RWZUciLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIHdlYi54bWwgZmlsZSBvciBhbnkgc2VydmxldCBjb25maWd1cmF0aW9uIHRoYXQgbWlnaHQgYmUgcmVsYXRlZCB0byBzZXJ2aW5nIHN0YXRpYyByZXNvdXJjZXMgbGlrZSBpbWFnZXMuIEFsc28gbG9vayBmb3IgYW55IGNvbnRleHQgbGlzdGVuZXJzIG9yIGZpbHRlcnMgdGhhdCBtaWdodCBiZSBpbnZvbHZlZCBpbiBoYW5kbGluZyBmaWxlIHVwbG9hZHMgb3Igc3RhdGljIHJlc291cmNlcy5cIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCBtZSBjaGVjayB0aGUgd2ViIGFwcGxpY2F0aW9uIHN0cnVjdHVyZSB0byB1bmRlcnN0YW5kIGhvdyBpbWFnZXMgYXJlIGJlaW5nIHNlcnZlZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXG4uLi5cblxuICAgICAgICAvLyBDcmVhdGUgaW1hZ2VzIGRpcmVjdG9yeSBhdCBzdGFydHVwXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHJvb3RcbiAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXBwbGljYXRpb24gcmVhbCBwYXRoOiBcIiArIGFwcGxpY2F0aW9uUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgaW1hZ2VzIGRpcmVjdG9yeSBpbiBhIHdlYi1hY2Nlc3NpYmxlIGxvY2F0aW9uXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VzUGF0aCA9IGFwcGxpY2F0aW9uUGF0aCArIFwiaW1hZ2VzXCI7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IHBhdGg6IFwiICsgaW1hZ2VzUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIEFsc28gcHJpbnQgdGhlIGNvbnRleHQgcGF0aCBhbmQgcmVhbCBwYXRocyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb250ZXh0IHBhdGg6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvaW1hZ2VzOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzXCIpKTtcbi4uLlxuXG4gICAgLy8gSGVscGVyIG1ldGhvZCB0byBoYW5kbGUgZmlsZSB1cGxvYWRcbiAgICBwcml2YXRlIFN0cmluZyBzYXZlRmlsZShQYXJ0IGZpbGVQYXJ0LCBTdHJpbmcgYXBwbGljYXRpb25QYXRoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgcGFydCBpcyB2YWxpZFxuICAgICAgICBpZiAoZmlsZVBhcnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IGlzIG51bGwhXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IGlzIG51bGxcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U2l6ZSgpIDw9IDApIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBmaWxlUGFydCBzaXplIGlzIDAhXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IHNpemUgaXMgMFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpID09IG51bGwgfHwgZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBObyBmaWxlbmFtZSBzdWJtaXR0ZWQhXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTm8gZmlsZW5hbWUgc3VibWl0dGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlZmluZSBhIGZpeGVkIHVwbG9hZCBkaXJlY3RvcnkgcGF0aCByZWxhdGl2ZSB0byB0aGUgd2ViIGFwcGxpY2F0aW9uXG4gICAgICAgIC8vIFdlJ2xsIHVzZSBhIGRpcmVjdCBwYXRoIHdpdGhvdXQgRmlsZS5zZXBhcmF0b3IgdG8gZW5zdXJlIHdlYiBhY2Nlc3NpYmlsaXR5XG4gICAgICAgIFN0cmluZyB1cGxvYWREaXIgPSBcImltYWdlc1wiO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTdGFydGluZyBmaWxlIHVwbG9hZCBwcm9jZXNzLi4uXCIpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHBhcnQ6IFwiICsgZmlsZVBhcnQuZ2V0TmFtZSgpICsgXCIsIFNpemU6IFwiICsgZmlsZVBhcnQuZ2V0U2l6ZSgpKTtcblxuICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBQYXRocy5nZXQoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSkuZ2V0RmlsZU5hbWUoKS50b1N0cmluZygpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJPcmlnaW5hbCBmaWxlbmFtZTogXCIgKyBmaWxlTmFtZSk7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgZmlsZW5hbWUgdG8gcHJldmVudCBvdmVyd3JpdGluZ1xuICAgICAgICBTdHJpbmcgdW5pcXVlRmlsZU5hbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSArIFwiX1wiICsgZmlsZU5hbWU7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkdlbmVyYXRlZCB1bmlxdWUgZmlsZW5hbWU6IFwiICsgdW5pcXVlRmlsZU5hbWUpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgcmVhbCBwYXRoIHRvIHRoZSBpbWFnZXMgZGlyZWN0b3J5XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSB1c2luZyBhIHdlYi1hY2Nlc3NpYmxlIHBhdGhcbiAgICAgICAgU3RyaW5nIHVwbG9hZFBhdGggPSBhcHBsaWNhdGlvblBhdGggKyBcImltYWdlc1wiO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVcGxvYWQgZGlyZWN0b3J5IHBhdGg6IFwiICsgdXBsb2FkUGF0aCk7XG5cbiAgICAgICAgLy8gQWxzbyBwcmludCB0aGUgY29udGV4dCBwYXRoIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udGV4dCBwYXRoIHdvdWxkIGJlOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVhbCBwYXRoIG9mIC9pbWFnZXM6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9pbWFnZXNcIikpO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZGlyZWN0b3J5IGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgRmlsZSB1cGxvYWREaXJGaWxlID0gbmV3IEZpbGUodXBsb2FkUGF0aCk7XG4gICAgICAgIGlmICghdXBsb2FkRGlyRmlsZS5leGlzdHMoKSkge1xuICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gdXBsb2FkRGlyRmlsZS5ta2RpcnMoKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNyZWF0ZWQgdXBsb2FkIGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSB1c2luZyBhIHNpbXBsZXIgYXBwcm9hY2hcbiAgICAgICAgdHJ5IChJbnB1dFN0cmVhbSBpbnB1dCA9IGZpbGVQYXJ0LmdldElucHV0U3RyZWFtKCk7XG4gICAgICAgICAgICAgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtIG91dHB1dCA9IG5ldyBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW0oZnVsbEZpbGVQYXRoKSkge1xuXG4gICAgICAgICAgICAvLyBDb3B5IHRoZSBmaWxlIGNvbnRlbnRcbiAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVs4MTkyXTtcbiAgICAgICAgICAgIGludCBieXRlc1JlYWQ7XG4gICAgICAgICAgICB3aGlsZSAoKGJ5dGVzUmVhZCA9IGlucHV0LnJlYWQoYnVmZmVyKSkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQud3JpdGUoYnVmZmVyLCAwLCBieXRlc1JlYWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgd2FzIGNyZWF0ZWRcbiAgICAgICAgICAgIEZpbGUgc2F2ZWRGaWxlID0gbmV3IEZpbGUoZnVsbEZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChzYXZlZEZpbGUuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHNhdmVkIHN1Y2Nlc3NmdWxseTogXCIgKyBzYXZlZEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgc2l6ZTogXCIgKyBzYXZlZEZpbGUubGVuZ3RoKCkgKyBcIiBieXRlc1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IEZpbGUgd2FzIG5vdCBjcmVhdGVkIVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTGlzdCBhbGwgZmlsZXMgaW4gdGhlIGRpcmVjdG9yeVxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZXMgaW4gdXBsb2FkIGRpcmVjdG9yeTpcIik7XG4gICAgICAgICAgICBGaWxlW10gZmlsZXMgPSB1cGxvYWREaXJGaWxlLmxpc3RGaWxlcygpO1xuICAgICAgICAgICAgaWYgKGZpbGVzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKEZpbGUgZmlsZSA6IGZpbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgXCIgKyBmaWxlLmdldE5hbWUoKSArIFwiIChcIiArIGZpbGUubGVuZ3RoKCkgKyBcIiBieXRlcylcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIE5vIGZpbGVzIGZvdW5kIG9yIGRpcmVjdG9yeSBjYW5ub3QgYmUgcmVhZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIHNhdmluZyBmaWxlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSByZWxhdGl2ZSBwYXRoIHRvIGJlIHN0b3JlZCBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgLy8gVXNlIGEgcGF0aCB0aGF0IHdpbGwgYmUgYWNjZXNzaWJsZSBmcm9tIHRoZSB3ZWIgYXBwbGljYXRpb25cbiAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL1wiICsgdW5pcXVlRmlsZU5hbWU7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIGRhdGFiYXNlOiBcIiArIHJlbGF0aXZlUGF0aCk7XG5cbiAgICAgICAgLy8gQWxzbyBwcmludCB3aGF0IHRoZSBmdWxsIFVSTCB3b3VsZCBiZVxuICAgICAgICBTdHJpbmcgZnVsbFVybCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIFVSTCB3b3VsZCBiZTogXCIgKyBmdWxsVXJsKTtcblxuICAgICAgICByZXR1cm4gcmVsYXRpdmVQYXRoO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKCk7XG4gICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cbiAgICAgICAgaWYgKHVzZXIgPT0gbnVsbCB8fCAhdXNlci5pc0FkbWluKCkpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9sb2dpblwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICBpZiAoZmlsZVBhcnQgIT0gbnVsbCAmJiBmaWxlUGFydC5nZXRTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCBzaXplOiBcIiArIGZpbGVQYXJ0LmdldFNpemUoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgbmFtZTogXCIgKyBmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGFwcGxpY2F0aW9uJ3MgcmVhbCBwYXRoXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFwcGxpY2F0aW9uIHBhdGg6IFwiICsgYXBwbGljYXRpb25QYXRoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIGFuZCBnZXQgaXRzIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlUGF0aCA9IHNhdmVGaWxlKGZpbGVQYXJ0LCBhcHBsaWNhdGlvblBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBzYXZlZCwgcGF0aCB0byBzdG9yZSBpbiBEQjogXCIgKyBpbWFnZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlUGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBpbWFnZSBVUkxcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2UgVVJMIHNldCBpbiBib29rIG9iamVjdDogXCIgKyBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIGltYWdlIFVSTCB3b3VsZCBiZTogXCIgKyByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTm8gZmlsZSB1cGxvYWRlZCBvciBmaWxlIGlzIGVtcHR5LCB1c2luZyBkZWZhdWx0IGltYWdlXCIpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKFwiaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIik7IC8vIERlZmF1bHQgaW1hZ2UgcGF0aFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgcHJvY2Vzc2luZyBmaWxlIHVwbG9hZDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKFwiaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIik7IC8vIERlZmF1bHQgaW1hZ2UgcGF0aCBvbiBlcnJvclxuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICBpZiAoZmlsZVBhcnQgIT0gbnVsbCAmJiBmaWxlUGFydC5nZXRTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCBzaXplOiBcIiArIGZpbGVQYXJ0LmdldFNpemUoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgbmFtZTogXCIgKyBmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGFwcGxpY2F0aW9uJ3MgcmVhbCBwYXRoXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFwcGxpY2F0aW9uIHBhdGg6IFwiICsgYXBwbGljYXRpb25QYXRoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIGFuZCBnZXQgaXRzIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlUGF0aCA9IHNhdmVGaWxlKGZpbGVQYXJ0LCBhcHBsaWNhdGlvblBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBzYXZlZCwgcGF0aCB0byBzdG9yZSBpbiBEQjogXCIgKyBpbWFnZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlUGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBpbWFnZSBVUkxcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2UgVVJMIHNldCBpbiBib29rIG9iamVjdDogXCIgKyBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIGltYWdlIFVSTCB3b3VsZCBiZTogXCIgKyByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgY3VycmVudCBpbWFnZSBpZiBubyBuZXcgaW1hZ2UgaXMgdXBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGN1cnJlbnRJbWFnZVVybCA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY3VycmVudEltYWdlVXJsXCIpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBuZXcgZmlsZSB1cGxvYWRlZCwgY3VycmVudCBpbWFnZSBVUkw6IFwiICsgY3VycmVudEltYWdlVXJsKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEltYWdlVXJsICE9IG51bGwgJiYgIWN1cnJlbnRJbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIktlZXBpbmcgY3VycmVudCBpbWFnZSBVUkw6IFwiICsgY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vIGN1cnJlbnQgaW1hZ2UgVVJMLCB1c2luZyBkZWZhdWx0IGltYWdlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgcHJvY2Vzc2luZyBmaWxlIHVwbG9hZDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcblxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byBrZWVwIGN1cnJlbnQgaW1hZ2Ugb24gZXJyb3JcbiAgICAgICAgICAgICAgICBTdHJpbmcgY3VycmVudEltYWdlVXJsID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjdXJyZW50SW1hZ2VVcmxcIik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbWFnZVVybCAhPSBudWxsICYmICFjdXJyZW50SW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXNpbmcgY3VycmVudCBpbWFnZSBVUkwgYWZ0ZXIgZXJyb3I6IFwiICsgY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKFwiaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIik7IC8vIERlZmF1bHQgaW1hZ2UgcGF0aCBvbiBlcnJvclxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2luZyBkZWZhdWx0IGltYWdlIGFmdGVyIGVycm9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3Bcbi4uLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJib29rSW1hZ2VcIj5Cb29rIEltYWdlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBpZD1cImJvb2tJbWFnZVwiIG5hbWU9XCJib29rSW1hZ2VcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgb25jaGFuZ2U9XCJjb25zb2xlLmxvZygnRmlsZSBzZWxlY3RlZDogJyArIHRoaXMuZmlsZXNbMF0ubmFtZSk7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGJvb2sgIT0gbnVsbCAmJiBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCAmJiAhYm9vay5nZXRJbWFnZVVybCgpLmlzRW1wdHkoKSkgeyAlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LWltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkN1cnJlbnQgaW1hZ2U6PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1nUGF0aCA9IGJvb2suZ2V0SW1hZ2VVcmwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGZ1bGxJbWFnZVBhdGggPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltZ1BhdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIHBhdGggaW4gSlNQOiBcIiArIGltZ1BhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIGltYWdlIFVSTDogXCIgKyBmdWxsSW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBUcnkgZGlmZmVyZW50IHdheXMgdG8gcmVmZXJlbmNlIHRoZSBpbWFnZSAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCI8JT0gZnVsbEltYWdlUGF0aCAlPlwiIGFsdD1cIjwlPSBib29rLmdldFRpdGxlKCkgJT5cIiBzdHlsZT1cIm1heC13aWR0aDogMTAwcHg7IG1heC1oZWlnaHQ6IDE1MHB4O1wiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gQWxzbyB0cnkgd2l0aCBqdXN0IHRoZSByZWxhdGl2ZSBwYXRoIC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5BbHRlcm5hdGl2ZSBpbWFnZSBkaXNwbGF5OjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvPCU9IGltZ1BhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+SW1hZ2UgcGF0aDogPCU9IGltZ1BhdGggJT48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkZ1bGwgVVJMOiA8JT0gZnVsbEltYWdlUGF0aCAlPjwvcD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgaW1hZ2UgZmlsZSBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHJlYWxQYXRoID0gYXBwbGljYXRpb24uZ2V0UmVhbFBhdGgoXCIvXCIgKyBpbWdQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmlsZSBpbWFnZUZpbGUgPSBuZXcgRmlsZShyZWFsUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkltYWdlIGZpbGUgZXhpc3RzOiA8JT0gaW1hZ2VGaWxlLmV4aXN0cygpICU+PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5SZWFsIHBhdGg6IDwlPSByZWFsUGF0aCAlPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiY3VycmVudEltYWdlVXJsXCIgdmFsdWU9XCI8JT0gYm9vay5nZXRJbWFnZVVybCgpICU+XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZm9ybS1oaW50XCI+U2VsZWN0IGFuIGltYWdlIGZpbGUgdG8gdXBsb2FkLiBTdXBwb3J0ZWQgZm9ybWF0czogSlBHLCBQTkcsIEdJRi48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9tb2RlbC9Cb29rLmphdmFcbnBhY2thZ2UgbW9kZWw7XG5cbmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcblxucHVibGljIGNsYXNzIEJvb2sge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgU3RyaW5nIHRpdGxlO1xuICAgIHByaXZhdGUgU3RyaW5nIGF1dGhvcjtcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcbiAgICBwcml2YXRlIFN0cmluZyBjYXRlZ29yeTtcbiAgICBwcml2YXRlIFN0cmluZyBnZW5yZTtcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgcHJpY2U7XG4gICAgcHJpdmF0ZSBTdHJpbmcgaW1hZ2VVcmw7XG4gICAgcHJpdmF0ZSBpbnQgc3RvY2s7XG4gICAgXG4gICAgcHVibGljIEJvb2soKSB7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBCb29rKGludCBpZCwgU3RyaW5nIHRpdGxlLCBTdHJpbmcgYXV0aG9yLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBjYXRlZ29yeSwgXG4gICAgICAgICAgICAgICAgU3RyaW5nIGdlbnJlLCBCaWdEZWNpbWFsIHByaWNlLCBTdHJpbmcgaW1hZ2VVcmwsIGludCBzdG9jaykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5hdXRob3IgPSBhdXRob3I7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICB0aGlzLmdlbnJlID0gZ2VucmU7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgICAgICB0aGlzLnN0b2NrID0gc3RvY2s7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0VGl0bGUoU3RyaW5nIHRpdGxlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRBdXRob3IoKSB7XG4gICAgICAgIHJldHVybiBhdXRob3I7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEF1dGhvcihTdHJpbmcgYXV0aG9yKSB7XG4gICAgICAgIHRoaXMuYXV0aG9yID0gYXV0aG9yO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gZGVzY3JpcHRpb247XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldERlc2NyaXB0aW9uKFN0cmluZyBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2F0ZWdvcnkoKSB7XG4gICAgICAgIHJldHVybiBjYXRlZ29yeTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRHZW5yZSgpIHtcbiAgICAgICAgcmV0dXJuIGdlbnJlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRHZW5yZShTdHJpbmcgZ2VucmUpIHtcbiAgICAgICAgdGhpcy5nZW5yZSA9IGdlbnJlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgQmlnRGVjaW1hbCBnZXRQcmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHByaWNlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRQcmljZShCaWdEZWNpbWFsIHByaWNlKSB7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRJbWFnZVVybCgpIHtcbiAgICAgICAgcmV0dXJuIGltYWdlVXJsO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRJbWFnZVVybChTdHJpbmcgaW1hZ2VVcmwpIHtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldFN0b2NrKCkge1xuICAgICAgICByZXR1cm4gc3RvY2s7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFN0b2NrKGludCBzdG9jaykge1xuICAgICAgICB0aGlzLnN0b2NrID0gc3RvY2s7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvYm9vay1kZXRhaWxzLmpzcFxuPCVAIHBhZ2UgbGFuZ3VhZ2U9XCJqYXZhXCIgY29udGVudFR5cGU9XCJ0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLThcIiBwYWdlRW5jb2Rpbmc9XCJVVEYtOFwiJT5cbjwlQCBwYWdlIGltcG9ydD1cIm1vZGVsLkJvb2tcIiAlPlxuPCFET0NUWVBFIGh0bWw+XG48aHRtbD5cbjxoZWFkPlxuICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiPlxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCI+XG4gICAgPHRpdGxlPkJvb2sgRGV0YWlscyAtIEUtQm9vayBTdG9yZTwvdGl0bGU+XG4gICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCI8JT1yZXF1ZXN0LmdldENvbnRleHRQYXRoKCklPi9jc3Mvc3R5bGUuY3NzXCI+XG48L2hlYWQ+XG48Ym9keT5cbiAgICA8anNwOmluY2x1ZGUgcGFnZT1cImhlYWRlci5qc3BcIiAvPlxuXG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICA8JVxuICAgICAgICBCb29rIGJvb2sgPSAoQm9vaykgcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJib29rXCIpO1xuICAgICAgICBpZiAoYm9vayAhPSBudWxsKSB7XG4gICAgICAgICU+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJib29rLWRldGFpbHNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJib29rLWltYWdlXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCI8JT0gYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgPyByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSA6IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2ltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIgJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCI+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJvb2staW5mb1wiPlxuICAgICAgICAgICAgICAgIDxoMT48JT0gYm9vay5nZXRUaXRsZSgpICU+PC9oMT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImF1dGhvclwiPmJ5IDwlPSBib29rLmdldEF1dGhvcigpICU+PC9wPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2F0ZWdvcnlcIj48c3Ryb25nPkNhdGVnb3J5Ojwvc3Ryb25nPiA8JT0gYm9vay5nZXRDYXRlZ29yeSgpICU+PC9wPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZ2VucmVcIj48c3Ryb25nPkdlbnJlOjwvc3Ryb25nPiA8JT0gYm9vay5nZXRHZW5yZSgpICU+PC9wPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwicHJpY2VcIj48c3Ryb25nPlByaWNlOjwvc3Ryb25nPiAkPCU9IGJvb2suZ2V0UHJpY2UoKSAlPjwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInN0b2NrXCI+PHN0cm9uZz5BdmFpbGFiaWxpdHk6PC9zdHJvbmc+IDwlPSBib29rLmdldFN0b2NrKCkgPiAwID8gXCJJbiBTdG9ja1wiIDogXCJPdXQgb2YgU3RvY2tcIiAlPjwvcD5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8aDM+RGVzY3JpcHRpb248L2gzPlxuICAgICAgICAgICAgICAgICAgICA8cD48JT0gYm9vay5nZXREZXNjcmlwdGlvbigpICU+PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPCUgaWYgKGJvb2suZ2V0U3RvY2soKSA+IDApIHsgJT5cbiAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249XCI8JT1yZXF1ZXN0LmdldENvbnRleHRQYXRoKCklPi9jYXJ0XCIgbWV0aG9kPVwicG9zdFwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJhY3Rpb25cIiB2YWx1ZT1cImFkZFwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJib29rSWRcIiB2YWx1ZT1cIjwlPSBib29rLmdldElkKCkgJT5cIj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInF1YW50aXR5XCI+UXVhbnRpdHk6PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgaWQ9XCJxdWFudGl0eVwiIG5hbWU9XCJxdWFudGl0eVwiIHZhbHVlPVwiMVwiIG1pbj1cIjFcIiBtYXg9XCI8JT0gYm9vay5nZXRTdG9jaygpICU+XCI+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+QWRkIHRvIENhcnQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cIm91dC1vZi1zdG9ja1wiPlRoaXMgYm9vayBpcyBjdXJyZW50bHkgb3V0IG9mIHN0b2NrLjwvcD5cbiAgICAgICAgICAgICAgICA8JSB9ICU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDwlIH0gZWxzZSB7ICU+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJlcnJvci1tZXNzYWdlXCI+XG4gICAgICAgICAgICA8cD5Cb29rIG5vdCBmb3VuZC48L3A+XG4gICAgICAgICAgICA8YSBocmVmPVwiPCU9cmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpJT4vYm9va3NcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPkJhY2sgdG8gQm9va3M8L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8JSB9ICU+XG4gICAgPC9kaXY+XG5cbiAgICA8anNwOmluY2x1ZGUgcGFnZT1cImZvb3Rlci5qc3BcIiAvPlxuXG4gICAgPHNjcmlwdCBzcmM9XCI8JT1yZXF1ZXN0LmdldENvbnRleHRQYXRoKCklPi9qcy9zY3JpcHQuanNcIj48L3NjcmlwdD5cbjwvYm9keT5cbjwvaHRtbD5cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vQm9va0RBTy5qYXZhXG4uLi5cblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2Jvb2tzLmpzcFxuLi4uXG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJvb2stZ3JpZFwiPlxuICAgICAgICAgICAgPCVcbiAgICAgICAgICAgIExpc3Q8Qm9vaz4gYm9va3MgPSAoTGlzdDxCb29rPikgcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJib29rc1wiKTtcbiAgICAgICAgICAgIGlmIChib29rcyAhPSBudWxsICYmICFib29rcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKEJvb2sgYm9vayA6IGJvb2tzKSB7XG4gICAgICAgICAgICAlPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJvb2stY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJib29rLWNvdmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGJvb2suZ2V0SW1hZ2VVcmwoKSAhPSBudWxsID8gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBib29rLmdldEltYWdlVXJsKCkgOiByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9pbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiICU+XCIgYWx0PVwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlwiPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJib29rLWluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzPjwlPSBib29rLmdldFRpdGxlKCkgJT48L2gzPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImF1dGhvclwiPmJ5IDwlPSBib29rLmdldEF1dGhvcigpICU+PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNhdGVnb3J5XCI+PCU9IGJvb2suZ2V0Q2F0ZWdvcnkoKSAlPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJwcmljZVwiPiQ8JT0gYm9vay5nZXRQcmljZSguLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFUcUFraVhqNEI5ZjMzRjR5RVBCS0RzIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIHRoZSB3ZWIgYXBwbGljYXRpb24gc3RydWN0dXJlIHRvIHVuZGVyc3RhbmQgaG93IGltYWdlcyBhcmUgYmVpbmcgc2VydmVkOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijg1MTJmMjkwLTc2OTgtNDVjMC04NmRmLTJlNmU4YTZmOWVkNiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTZHR2hpZ3dlbzU3Mm9IdkhRYXZaVWEiLCJ0b29sX25hbWUiOiJsYXVuY2gtcHJvY2VzcyIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwiZmluZCAvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCAtdHlwZSBkIC1uYW1lIFxcXCJpbWFnZXNcXFwiIC1vIC1uYW1lIFxcXCJpbWdcXFwiIHwgc29ydFwiLCBcIndhaXRcIjogdHJ1ZSwgXCJtYXhfd2FpdF9zZWNvbmRzXCI6IDMwfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIHRoZSBwcm9qZWN0IHN0cnVjdHVyZSB0byB1bmRlcnN0YW5kIGhvdyBpbWFnZXMgYXJlIG9yZ2FuaXplZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL3dlYmFwcC9XRUItSU5GL3dlYi54bWxcbjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxuPHdlYi1hcHAgeG1sbnM9XCJodHRwOi8veG1sbnMuamNwLm9yZy94bWwvbnMvamF2YWVlXCJcbiAgICAgICAgIHhtbG5zOnhzaT1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlXCJcbiAgICAgICAgIHhzaTpzY2hlbWFMb2NhdGlvbj1cImh0dHA6Ly94bWxucy5qY3Aub3JnL3htbC9ucy9qYXZhZWUgaHR0cDovL3htbG5zLmpjcC5vcmcveG1sL25zL2phdmFlZS93ZWItYXBwXzRfMC54c2RcIlxuICAgICAgICAgdmVyc2lvbj1cIjQuMFwiPlxuICAgIFxuICAgIDx3ZWxjb21lLWZpbGUtbGlzdD5cbiAgICAgICAgPHdlbGNvbWUtZmlsZT5yZWRpcmVjdC5qc3A8L3dlbGNvbWUtZmlsZT5cbiAgICA8L3dlbGNvbWUtZmlsZS1saXN0PlxuICAgIFxuPC93ZWItYXBwPlxuLi4uXG5QYXRoOiB3ZWIvV0VCLUlORi93ZWIueG1sXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbjx3ZWItYXBwIHhtbG5zPVwiaHR0cDovL3htbG5zLmpjcC5vcmcveG1sL25zL2phdmFlZVwiXG4gICAgICAgICB4bWxuczp4c2k9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZVwiXG4gICAgICAgICB4c2k6c2NoZW1hTG9jYXRpb249XCJodHRwOi8veG1sbnMuamNwLm9yZy94bWwvbnMvamF2YWVlIGh0dHA6Ly94bWxucy5qY3Aub3JnL3htbC9ucy9qYXZhZWUvd2ViLWFwcF80XzAueHNkXCJcbiAgICAgICAgIHZlcnNpb249XCI0LjBcIj5cbjwvd2ViLWFwcD4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXG4uLi5cblxuQFdlYlNlcnZsZXQodmFsdWU9XCIvYWRtaW4vYm9va3MvKlwiKVxuQE11bHRpcGFydENvbmZpZyhmaWxlU2l6ZVRocmVzaG9sZD0xMDI0KjEwMjQqMiwgLy8gMk1CXG4gICAgICAgICAgICAgICAgIG1heEZpbGVTaXplPTEwMjQqMTAyNCoxMCwgICAgICAvLyAxME1CXG4gICAgICAgICAgICAgICAgIG1heFJlcXVlc3RTaXplPTEwMjQqMTAyNCo1MCkgICAvLyA1ME1CXG5wdWJsaWMgY2xhc3MgQWRtaW5Cb29rc1NlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgcHJpdmF0ZSBCb29rREFPIGJvb2tEQU87XG5cbiAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgICAgICBib29rREFPID0gbmV3IEJvb2tEQU8oKTtcblxuICAgICAgICAvLyBDcmVhdGUgaW1hZ2VzIGRpcmVjdG9yeSBhdCBzdGFydHVwXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHJvb3RcbiAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXBwbGljYXRpb24gcmVhbCBwYXRoOiBcIiArIGFwcGxpY2F0aW9uUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgaW1hZ2VzIGRpcmVjdG9yeSBpbiBhIHdlYi1hY2Nlc3NpYmxlIGxvY2F0aW9uXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VzUGF0aCA9IGFwcGxpY2F0aW9uUGF0aCArIFwiaW1hZ2VzXCI7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IHBhdGg6IFwiICsgaW1hZ2VzUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIEFsc28gcHJpbnQgdGhlIGNvbnRleHQgcGF0aCBhbmQgcmVhbCBwYXRocyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb250ZXh0IHBhdGg6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvaW1hZ2VzOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzXCIpKTtcblxuICAgICAgICAgICAgRmlsZSBpbWFnZXNEaXIgPSBuZXcgRmlsZShpbWFnZXNQYXRoKTtcbiAgICAgICAgICAgIGlmICghaW1hZ2VzRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gaW1hZ2VzRGlyLm1rZGlycygpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgY3JlYXRlZCBhdCBzdGFydHVwOiBcIiArIGNyZWF0ZWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGFscmVhZHkgZXhpc3RzXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayBkaXJlY3RvcnkgcGVybWlzc2lvbnNcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgZXhpc3RzOiBcIiArIGltYWdlc0Rpci5leGlzdHMoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGlzIGRpcmVjdG9yeTogXCIgKyBpbWFnZXNEaXIuaXNEaXJlY3RvcnkoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGNhbiByZWFkOiBcIiArIGltYWdlc0Rpci5jYW5SZWFkKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBjYW4gd3JpdGU6IFwiICsgaW1hZ2VzRGlyLmNhbldyaXRlKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBhYnNvbHV0ZSBwYXRoOiBcIiArIGltYWdlc0Rpci5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4uLi5cbiAgICAgICAgLy8gRGVmaW5lIGEgZml4ZWQgdXBsb2FkIGRpcmVjdG9yeSBwYXRoIHJlbGF0aXZlIHRvIHRoZSB3ZWIgYXBwbGljYXRpb25cbiAgICAgICAgLy8gV2UnbGwgdXNlIGEgZGlyZWN0IHBhdGggd2l0aG91dCBGaWxlLnNlcGFyYXRvciB0byBlbnN1cmUgd2ViIGFjY2Vzc2liaWxpdHlcbiAgICAgICAgU3RyaW5nIHVwbG9hZERpciA9IFwiaW1hZ2VzXCI7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlN0YXJ0aW5nIGZpbGUgdXBsb2FkIHByb2Nlc3MuLi5cIik7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydDogXCIgKyBmaWxlUGFydC5nZXROYW1lKCkgKyBcIiwgU2l6ZTogXCIgKyBmaWxlUGFydC5nZXRTaXplKCkpO1xuXG4gICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IFBhdGhzLmdldChmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKS5nZXRGaWxlTmFtZSgpLnRvU3RyaW5nKCk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk9yaWdpbmFsIGZpbGVuYW1lOiBcIiArIGZpbGVOYW1lKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBmaWxlbmFtZSB0byBwcmV2ZW50IG92ZXJ3cml0aW5nXG4gICAgICAgIFN0cmluZyB1bmlxdWVGaWxlTmFtZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpICsgXCJfXCIgKyBmaWxlTmFtZTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiR2VuZXJhdGVkIHVuaXF1ZSBmaWxlbmFtZTogXCIgKyB1bmlxdWVGaWxlTmFtZSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIGltYWdlcyBkaXJlY3RvcnlcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlJ3JlIHVzaW5nIGEgd2ViLWFjY2Vzc2libGUgcGF0aFxuICAgICAgICBTdHJpbmcgdXBsb2FkUGF0aCA9IGFwcGxpY2F0aW9uUGF0aCArIFwiaW1hZ2VzXCI7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVwbG9hZCBkaXJlY3RvcnkgcGF0aDogXCIgKyB1cGxvYWRQYXRoKTtcblxuICAgICAgICAvLyBBbHNvIHByaW50IHRoZSBjb250ZXh0IHBhdGggZm9yIGRlYnVnZ2luZ1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb250ZXh0IHBhdGggd291bGQgYmU6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVhbCBwYXRoIG9mIC86IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIikpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWFsIHBhdGggb2YgL2ltYWdlczogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlc1wiKSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICBGaWxlIHVwbG9hZERpckZpbGUgPSBuZXcgRmlsZSh1cGxvYWRQYXRoKTtcbiAgICAgICAgaWYgKCF1cGxvYWREaXJGaWxlLmV4aXN0cygpKSB7XG4gICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSB1cGxvYWREaXJGaWxlLm1rZGlycygpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ3JlYXRlZCB1cGxvYWQgZGlyZWN0b3J5OiBcIiArIGNyZWF0ZWQpO1xuICAgICAgICB9XG4uLi5cblxuICAgICAgICAvLyBSZXR1cm4gdGhlIHJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAvLyBVc2UgYSBwYXRoIHRoYXQgd2lsbCBiZSBhY2Nlc3NpYmxlIGZyb20gdGhlIHdlYiBhcHBsaWNhdGlvblxuICAgICAgICBTdHJpbmcgcmVsYXRpdmVQYXRoID0gXCJpbWFnZXMvXCIgKyB1bmlxdWVGaWxlTmFtZTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVsYXRpdmUgcGF0aCB0byBiZSBzdG9yZWQgaW4gZGF0YWJhc2U6IFwiICsgcmVsYXRpdmVQYXRoKTtcblxuICAgICAgICAvLyBBbHNvIHByaW50IHdoYXQgdGhlIGZ1bGwgVVJMIHdvdWxkIGJlXG4gICAgICAgIFN0cmluZyBmdWxsVXJsID0gZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgVVJMIHdvdWxkIGJlOiBcIiArIGZ1bGxVcmwpO1xuXG4gICAgICAgIHJldHVybiByZWxhdGl2ZVBhdGg7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgICAgICAgVXNlciB1c2VyID0gKFVzZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKTtcblxuICAgICAgICBpZiAodXNlciA9PSBudWxsIHx8ICF1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGltYWdlIFVSTFxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBVUkwgc2V0IGluIGJvb2sgb2JqZWN0OiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgaW1hZ2UgVVJMIHdvdWxkIGJlOiBcIiArIHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBmaWxlIHVwbG9hZGVkIG9yIGZpbGUgaXMgZW1wdHksIHVzaW5nIGRlZmF1bHQgaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgdXBsb2FkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwXG4uLi5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYm9va0ltYWdlXCI+Qm9vayBJbWFnZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJib29rSW1hZ2VcIiBuYW1lPVwiYm9va0ltYWdlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG9uY2hhbmdlPVwiY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0ZWQ6ICcgKyB0aGlzLmZpbGVzWzBdLm5hbWUpO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJyZW50IGltYWdlOjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltZ1BhdGggPSBib29rLmdldEltYWdlVXJsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWdQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBwYXRoIGluIEpTUDogXCIgKyBpbWdQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkw6IFwiICsgZnVsbEltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gVHJ5IGRpZmZlcmVudCB3YXlzIHRvIHJlZmVyZW5jZSB0aGUgaW1hZ2UgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIEFsc28gdHJ5IHdpdGgganVzdCB0aGUgcmVsYXRpdmUgcGF0aCAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+QWx0ZXJuYXRpdmUgaW1hZ2UgZGlzcGxheTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLzwlPSBpbWdQYXRoICU+XCIgYWx0PVwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlwiIHN0eWxlPVwibWF4LXdpZHRoOiAxMDBweDsgbWF4LWhlaWdodDogMTUwcHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkltYWdlIHBhdGg6IDwlPSBpbWdQYXRoICU+PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5GdWxsIFVSTDogPCU9IGZ1bGxJbWFnZVBhdGggJT48L3A+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGltYWdlIGZpbGUgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyByZWFsUGF0aCA9IGFwcGxpY2F0aW9uLmdldFJlYWxQYXRoKFwiL1wiICsgaW1nUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbGUgaW1hZ2VGaWxlID0gbmV3IEZpbGUocmVhbFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbWFnZSBmaWxlIGV4aXN0czogPCU9IGltYWdlRmlsZS5leGlzdHMoKSAlPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UmVhbCBwYXRoOiA8JT0gcmVhbFBhdGggJT48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImN1cnJlbnRJbWFnZVVybFwiIHZhbHVlPVwiPCU9IGJvb2suZ2V0SW1hZ2VVcmwoKSAlPlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZvcm0taGludFwiPlNlbGVjdCBhbiBpbWFnZSBmaWxlIHRvIHVwbG9hZC4gU3VwcG9ydGVkIGZvcm1hdHM6IEpQRywgUE5HLCBHSUYuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9ib29rLWRldGFpbHMuanNwXG48JUAgcGFnZSBsYW5ndWFnZT1cImphdmFcIiBjb250ZW50VHlwZT1cInRleHQvaHRtbDsgY2hhcnNldD1VVEYtOFwiIHBhZ2VFbmNvZGluZz1cIlVURi04XCIlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuQm9va1wiICU+XG48IURPQ1RZUEUgaHRtbD5cbjxodG1sPlxuPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cbiAgICA8dGl0bGU+Qm9vayBEZXRhaWxzIC0gRS1Cb29rIFN0b3JlPC90aXRsZT5cbiAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIjwlPXJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSU+L2Nzcy9zdHlsZS5jc3NcIj5cbjwvaGVhZD5cbjxib2R5PlxuICAgIDxqc3A6aW5jbHVkZSBwYWdlPVwiaGVhZGVyLmpzcFwiIC8+XG5cbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAgICAgIDwlXG4gICAgICAgIEJvb2sgYm9vayA9IChCb29rKSByZXF1ZXN0LmdldEF0dHJpYnV0ZShcImJvb2tcIik7XG4gICAgICAgIGlmIChib29rICE9IG51bGwpIHtcbiAgICAgICAgJT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJvb2stZGV0YWlsc1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJvb2staW1hZ2VcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIjwlPSBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCA/IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgYm9vay5nZXRJbWFnZVVybCgpIDogcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIiAlPlwiIGFsdD1cIjwlPSBib29rLmdldFRpdGxlKCkgJT5cIj5cbiAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvaW5kZXguanNwXG48JUAgcGFnZSBsYW5ndWFnZT1cImphdmFcIiBjb250ZW50VHlwZT1cInRleHQvaHRtbDsgY2hhcnNldD1VVEYtOFwiIHBhZ2VFbmNvZGluZz1cIlVURi04XCIlPlxuPCVAIHBhZ2UgaW1wb3J0PVwiamF2YS51dGlsLkxpc3RcIiAlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuQm9va1wiICU+XG48IURPQ1RZUEUgaHRtbD5cbjxodG1sPlxuPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cbiAgICA8dGl0bGU+RS1Cb29rIFN0b3JlIC0gSG9tZTwvdGl0bGU+XG4gICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCJjc3Mvc3R5bGUuY3NzXCI+XG4gICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNS4xNS4zL2Nzcy9hbGwubWluLmNzc1wiPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGRpdiBjbGFzcz1cImJhY2tncm91bmQtd3JhcHBlclwiPlxuICAgICAgICA8anNwOmluY2x1ZGUgcGFnZT1cImhlYWRlci5qc3BcIiAvPlxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2ZpbHRlci9BdXRoZW50aWNhdGlvbkZpbHRlci5qYXZhXG5wYWNrYWdlIGZpbHRlcjtcblxuaW1wb3J0IG1vZGVsLlVzZXI7XG5cbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5GaWx0ZXJDaGFpbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyQ29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYkZpbHRlcjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5AV2ViRmlsdGVyKHVybFBhdHRlcm5zID0ge1wiL3VzZXIvKlwiLCBcIi9hZG1pbi8qXCIsIFwiL2NhcnQvKlwiLCBcIi9jaGVja291dC8qXCJ9KVxucHVibGljIGNsYXNzIEF1dGhlbnRpY2F0aW9uRmlsdGVyIGltcGxlbWVudHMgRmlsdGVyIHtcbiAgICBcbiAgICBwdWJsaWMgdm9pZCBpbml0KEZpbHRlckNvbmZpZyBmaWx0ZXJDb25maWcpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgZG9GaWx0ZXIoU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBGaWx0ZXJDaGFpbiBjaGFpbilcbiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCBodHRwUmVxdWVzdCA9IChIdHRwU2VydmxldFJlcXVlc3QpIHJlcXVlc3Q7XG4gICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgaHR0cFJlc3BvbnNlID0gKEh0dHBTZXJ2bGV0UmVzcG9uc2UpIHJlc3BvbnNlO1xuICAgICAgICBcbiAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IGh0dHBSZXF1ZXN0LmdldFNlc3Npb24oZmFsc2UpO1xuICAgICAgICBib29sZWFuIGlzTG9nZ2VkSW4gPSAoc2Vzc2lvbiAhPSBudWxsICYmIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKSAhPSBudWxsKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghaXNMb2dnZWRJbikge1xuICAgICAgICAgICAgaHR0cFJlc3BvbnNlLnNlbmRSZWRpcmVjdChodHRwUmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvbG9naW5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhZG1pbiBpcyB0cnlpbmcgdG8gYWNjZXNzIGFkbWluIHBhZ2VzXG4gICAgICAgICAgICBTdHJpbmcgcmVxdWVzdFVSSSA9IGh0dHBSZXF1ZXN0LmdldFJlcXVlc3RVUkkoKTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0VVJJLmNvbnRhaW5zKFwiL2FkbWluL1wiKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgICAgICAgICBodHRwUmVzcG9uc2Uuc2VuZFJlZGlyZWN0KGh0dHBSZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi91c2VyL2Rhc2hib2FyZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2hhaW4uZG9GaWx0ZXIocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIGRlc3Ryb3koKSB7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2ZpbHRlci9BZG1pbkFjY2Vzc0ZpbHRlci5qYXZhXG5wYWNrYWdlIGZpbHRlcjtcblxuaW1wb3J0IG1vZGVsLlVzZXI7XG5cbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5GaWx0ZXJDaGFpbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyQ29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYkZpbHRlcjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5AV2ViRmlsdGVyKHVybFBhdHRlcm5zID0ge1wiL2Jvb2tzLypcIiwgXCIvYm9va3NcIiwgXCIvY2FydC8qXCIsIFwiL2NhcnRcIiwgXCIvY2hlY2tvdXQvKlwiLCBcIi9jaGVja291dFwifSlcbnB1YmxpYyBjbGFzcyBBZG1pbkFjY2Vzc0ZpbHRlciBpbXBsZW1lbnRzIEZpbHRlciB7XG4gICAgXG4gICAgcHVibGljIHZvaWQgaW5pdChGaWx0ZXJDb25maWcgZmlsdGVyQ29uZmlnKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIGRvRmlsdGVyKFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSwgRmlsdGVyQ2hhaW4gY2hhaW4pXG4gICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgICAgICBIdHRwU2VydmxldFJlcXVlc3QgaHR0cFJlcXVlc3QgPSAoSHR0cFNlcnZsZXRSZXF1ZXN0KSByZXF1ZXN0O1xuICAgICAgICBIdHRwU2VydmxldFJlc3BvbnNlIGh0dHBSZXNwb25zZSA9IChIdHRwU2VydmxldFJlc3BvbnNlKSByZXNwb25zZTtcbiAgICAgICAgXG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSBodHRwUmVxdWVzdC5nZXRTZXNzaW9uKGZhbHNlKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZXNzaW9uICE9IG51bGwgJiYgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpICE9IG51bGwpIHtcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXMgYWRtaW4sIHJlZGlyZWN0IHRvIGFkbWluIGRhc2hib2FyZFxuICAgICAgICAgICAgaWYgKHVzZXIuaXNBZG1pbigpKSB7XG4gICAgICAgICAgICAgICAgaHR0cFJlc3BvbnNlLnNlbmRSZWRpcmVjdChodHRwUmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vZGFzaGJvYXJkXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29udGludWUgdGhlIGZpbHRlciBjaGFpbiBmb3Igbm9uLWFkbWluIHVzZXJzXG4gICAgICAgIGNoYWluLmRvRmlsdGVyKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgZGVzdHJveSgpIHtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9Db250YWN0VXNTZXJ2bGV0LmphdmFcbnBhY2thZ2UgY29udHJvbGxlcjtcblxuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYlNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcblxuQFdlYlNlcnZsZXQoe1wiL2NvbnRhY3QtdXNcIiwgXCIvY29udGFjdFwifSlcbnB1YmxpYyBjbGFzcyBDb250YWN0VXNTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xuXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIC8vIEZvcndhcmQgdG8gdGhlIGNvbnRhY3QtdXMuanNwIHBhZ2VcbiAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9jb250YWN0LXVzLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9Mb2dpblNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIHN1Y2Nlc3MgbWVzc2FnZSBpbiB0aGUgc2Vzc2lvblxuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKGZhbHNlKTtcbiAgICAgICAgaWYgKHNlc3Npb24gIT0gbnVsbCAmJiBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIpICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFRyYW5zZmVyIHRoZSBtZXNzYWdlIGZyb20gc2Vzc2lvbiB0byByZXF1ZXN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJzdWNjZXNzTWVzc2FnZVwiLCBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIpKTtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWVzc2FnZSBmcm9tIHRoZSBzZXNzaW9uIHRvIHByZXZlbnQgaXQgZnJvbSBzaG93aW5nIGFnYWluXG4gICAgICAgICAgICBzZXNzaW9uLnJlbW92ZUF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIpO1xuICAgICAgICB9XG5cbiAgICBcdHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvbG9naW4uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJ1c2VybmFtZVwiKTtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJwYXNzd29yZFwiKTtcbiAgICAgICAgU3RyaW5nIHJvbGUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcInJvbGVcIik7XG5cbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTG9naW4gYXR0ZW1wdCAtIFVzZXJuYW1lOiBcIiArIHVzZXJuYW1lICsgXCIsIFJvbGU6IFwiICsgcm9sZSk7XG5cbiAgICAgICAgLy8gU2ltcGxlIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKHVzZXJuYW1lID09IG51bGwgfHwgdXNlcm5hbWUuaXNFbXB0eSgpIHx8IHBhc3N3b3JkID09IG51bGwgfHwgcGFzc3dvcmQuaXNFbXB0eSgpIHx8IHJvbGUgPT0gbnVsbCB8fCByb2xlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJlcnJvck1lc3NhZ2VcIiwgXCJVc2VybmFtZSwgcGFzc3dvcmQsIGFuZCByb2xlIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvbG9naW4uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXV0aGVudGljYXRlIHVzZXJcbiAgICAgICAgaWYgKHVzZXJEQU8udmFsaWRhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkpIHtcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZ2V0VXNlckJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VsZWN0ZWQgcm9sZSBtYXRjaGVzIHRoZSB1c2VyJ3Mgcm9sZVxuICAgICAgICAgICAgaWYgKCFyb2xlLmVxdWFscyh1c2VyLmdldFJvbGUoKSkpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkludmFsaWQgcm9sZSBmb3IgdGhpcyB1c2VyLiBQbGVhc2Ugc2VsZWN0IHRoZSBjb3JyZWN0IHJvbGUuXCIpO1xuICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvbG9naW4uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IHJlcXVlc3QuZ2V0U2Vzc2lvbigpO1xuICAgICAgICAgICAgc2Vzc2lvbi5zZXRBdHRyaWJ1dGUoXCJ1c2VyXCIsIHVzZXIpO1xuXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCBiYXNlZCBvbiByb2xlXG4gICAgICAgICAgICBpZiAodXNlci5pc0FkbWluKCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vZGFzaGJvYXJkXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvdXNlci9kYXNoYm9hcmRcIik7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BYm91dFNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5AV2ViU2VydmxldCh2YWx1ZT1cIi9hYm91dFwiKVxucHVibGljIGNsYXNzIEFib3V0U2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICBcbiAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgLy8gRm9yd2FyZCB0byBhYm91dCBwYWdlXG4gICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWJvdXQuanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluVXNlcnNTZXJ2bGV0LmphdmFcbi4uLlxuXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgICAgICAgVXNlciBjdXJyZW50VXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyID09IG51bGwgfHwgIWN1cnJlbnRVc2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU3RyaW5nIHBhdGhJbmZvID0gcmVxdWVzdC5nZXRQYXRoSW5mbygpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5PcmRlcnNTZXJ2bGV0LmphdmFcbi4uLlxuXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgICAgICAgVXNlciB1c2VyID0gKFVzZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKTtcblxuICAgICAgICBpZiAodXNlciA9PSBudWxsIHx8ICF1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU3RyaW5nIHBhdGhJbmZvID0gcmVxdWVzdC5nZXRQYXRoSW5mbygpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2FydFNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgZGFvLkJvb2tEQU87XG5pbXBvcnQgZGFvLkNhcnREQU87XG5pbXBvcnQgbW9kZWwuQm9vaztcbmltcG9ydCBtb2RlbC5DYXJ0SXRlbTtcbmltcG9ydCBtb2RlbC5Vc2VyO1xuXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5AV2ViU2VydmxldCh2YWx1ZT1cIi9jYXJ0LypcIilcbnB1YmxpYyBjbGFzcyBDYXJ0U2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICBwcml2YXRlIENhcnREQU8gY2FydERBTztcbiAgICBwcml2YXRlIEJvb2tEQU8gYm9va0RBTztcbiAgICBcbiAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgICAgICBjYXJ0REFPID0gbmV3IENhcnREQU8oKTtcbiAgICAgICAgYm9va0RBTyA9IG5ldyBCb29rREFPKCk7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvTG9nb3V0U2VydmxldC5qYXZhXG4uLi5cblxuICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKGZhbHNlKTtcbiAgICAgICAgU3RyaW5nIGxvZ291dE1lc3NhZ2UgPSBcIllvdSBoYXZlIGJlZW4gbG9nZ2VkIG91dCBzdWNjZXNzZnVsbHkuXCI7XG5cbiAgICAgICAgaWYgKHNlc3Npb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSB1c2VyIGJlZm9yZSBpbnZhbGlkYXRpbmcgdGhlIHNlc3Npb25cbiAgICAgICAgICAgIG1vZGVsLlVzZXIgdXNlciA9IChtb2RlbC5Vc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cbiAgICAgICAgICAgIGlmICh1c2VyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBTZXQgYXBwcm9wcmlhdGUgbWVzc2FnZSBiYXNlZCBvbiB1c2VyIHJvbGVcbiAgICAgICAgICAgICAgICBpZiAodXNlci5pc0FkbWluKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nb3V0TWVzc2FnZSA9IFwiQWRtaW4gbG9nZ2VkIG91dCBzdWNjZXNzZnVsbHkuIFRoYW5rIHlvdSBmb3IgbWFuYWdpbmcgdGhlIHN5Li4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxUGExSkQ0V3FMTnBQRmY5dDJjRFZlRyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBjaGVjayB0aGUgcHJvamVjdCBzdHJ1Y3R1cmUgdG8gdW5kZXJzdGFuZCBob3cgaW1hZ2VzIGFyZSBvcmdhbml6ZWQ6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNjAyNTc1ZWQtNDNiNy00ODQxLWEwNzUtNjg0ZjM1ZWE0MTc0IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxUXYxVmVveHg4TXpUUU5TWFlEWEJWbyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzg1LCAxODBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiQmFzZWQgb24gbXkgYW5hbHlzaXMgb2YgdGhlIGNvZGUgYW5kIHByb2plY3Qgc3RydWN0dXJlLCBJJ3ZlIGlkZW50aWZpZWQgc2V2ZXJhbCBpc3N1ZXMgd2l0aCB0aGUgaW1hZ2UgdXBsb2FkIGZ1bmN0aW9uYWxpdHkuIExldCBtZSBpbXBsZW1lbnQgYSBzb2x1dGlvbiB0byBmaXggdGhlIGltYWdlIHVwbG9hZCBwcm9jZXNzIGZvciB0aGUgYWRtaW4gd2hlbiBhZGRpbmcgYm9va3MuXG5cbiMjIElzc3VlcyBJZGVudGlmaWVkOlxuMS4gVGhlIGltYWdlIHBhdGggaGFuZGxpbmcgaXMgaW5jb25zaXN0ZW50XG4yLiBUaGUgZGlyZWN0b3J5IGNyZWF0aW9uIG1pZ2h0IG5vdCBiZSB3b3JraW5nIGNvcnJlY3RseVxuMy4gVGhlIGltYWdlIFVSTCBzdG9yZWQgaW4gdGhlIGRhdGFiYXNlIG1pZ2h0IG5vdCBiZSBjb3JyZWN0bHkgZm9ybWF0dGVkIGZvciB3ZWIgYWNjZXNzXG40LiBUaGUgSlNQIHBhZ2VzIGFyZSB1c2luZyBkaWZmZXJlbnQgYXBwcm9hY2hlcyB0byBkaXNwbGF5IGltYWdlc1xuXG4jIyBQbGFuIHRvIEZpeCB0aGUgSW1hZ2UgVXBsb2FkIEZ1bmN0aW9uYWxpdHk6XG5cbjEuIEZpeCB0aGUgYHNhdmVGaWxlYCBtZXRob2QgaW4gYEFkbWluQm9va3NTZXJ2bGV0LmphdmFgIHRvIGVuc3VyZSBwcm9wZXIgcGF0aCBoYW5kbGluZ1xuMi4gRW5zdXJlIHRoZSBpbWFnZXMgZGlyZWN0b3J5IGV4aXN0cyBhbmQgaGFzIHByb3BlciBwZXJtaXNzaW9uc1xuMy4gVXBkYXRlIHRoZSBpbWFnZSBVUkwgZm9ybWF0IHRvIGJlIGNvbnNpc3RlbnQgYWNyb3NzIHRoZSBhcHBsaWNhdGlvblxuNC4gU2ltcGxpZnkgdGhlIGltYWdlIGRpc3BsYXkgaW4gSlNQIHBhZ2VzXG5cbkxldCdzIHN0YXJ0IHdpdGggdGhlIGltcGxlbWVudGF0aW9uOlxuXG4jIyMgU3RlcCAxOiBGaXggdGhlIHNhdmVGaWxlIG1ldGhvZCBpbiBBZG1pbkJvb2tzU2VydmxldC5qYXZhXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlIGFyZSB0aGUgcmVzdWx0cyBmcm9tIGV4ZWN1dGluZyB0aGUgY29tbWFuZC5cbiAgICAgICAgPHJldHVybi1jb2RlPlxuICAgICAgICAwXG4gICAgICAgIDwvcmV0dXJuLWNvZGU+XG4gICAgICAgIDxzdGRvdXQ+XG4gICAgICAgIC9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwL291dC9hcnRpZmFjdHMvZWJvb2tfYXBwX1dlYl9leHBsb2RlZC9pbWFnZXNcbi9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwL3NyYy9tYWluL3dlYmFwcC9pbWFnZXNcbi9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwL3RhcmdldC9lYm9vay1hcHAtMS4wLVNOQVBTSE9UL2ltYWdlc1xuXG4gICAgICAgIDwvc3Rkb3V0PlxuICAgICAgICA8c3RkZXJyPlxuICAgICAgICBcbiAgICAgICAgPC9zdGRlcnI+IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNkdHaGlnd2VvNTcyb0h2SFFhdlpVYSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjYwLCJjdXJyZW50V29ya2luZ0RpcmVjdG9yeSI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn19fV0sInJlc3BvbnNlX3RleHQiOiJCYXNlZCBvbiBteSBhbmFseXNpcyBvZiB0aGUgY29kZSBhbmQgcHJvamVjdCBzdHJ1Y3R1cmUsIEkndmUgaWRlbnRpZmllZCBzZXZlcmFsIGlzc3VlcyB3aXRoIHRoZSBpbWFnZSB1cGxvYWQgZnVuY3Rpb25hbGl0eS4gTGV0IG1lIGltcGxlbWVudCBhIHNvbHV0aW9uIHRvIGZpeCB0aGUgaW1hZ2UgdXBsb2FkIHByb2Nlc3MgZm9yIHRoZSBhZG1pbiB3aGVuIGFkZGluZyBib29rcy5cblxuIyMgSXNzdWVzIElkZW50aWZpZWQ6XG4xLiBUaGUgaW1hZ2UgcGF0aCBoYW5kbGluZyBpcyBpbmNvbnNpc3RlbnRcbjIuIFRoZSBkaXJlY3RvcnkgY3JlYXRpb24gbWlnaHQgbm90IGJlIHdvcmtpbmcgY29ycmVjdGx5XG4zLiBUaGUgaW1hZ2UgVVJMIHN0b3JlZCBpbiB0aGUgZGF0YWJhc2UgbWlnaHQgbm90IGJlIGNvcnJlY3RseSBmb3JtYXR0ZWQgZm9yIHdlYiBhY2Nlc3NcbjQuIFRoZSBKU1AgcGFnZXMgYXJlIHVzaW5nIGRpZmZlcmVudCBhcHByb2FjaGVzIHRvIGRpc3BsYXkgaW1hZ2VzXG5cbiMjIFBsYW4gdG8gRml4IHRoZSBJbWFnZSBVcGxvYWQgRnVuY3Rpb25hbGl0eTpcblxuMS4gRml4IHRoZSBgc2F2ZUZpbGVgIG1ldGhvZCBpbiBgQWRtaW5Cb29rc1NlcnZsZXQuamF2YWAgdG8gZW5zdXJlIHByb3BlciBwYXRoIGhhbmRsaW5nXG4yLiBFbnN1cmUgdGhlIGltYWdlcyBkaXJlY3RvcnkgZXhpc3RzIGFuZCBoYXMgcHJvcGVyIHBlcm1pc3Npb25zXG4zLiBVcGRhdGUgdGhlIGltYWdlIFVSTCBmb3JtYXQgdG8gYmUgY29uc2lzdGVudCBhY3Jvc3MgdGhlIGFwcGxpY2F0aW9uXG40LiBTaW1wbGlmeSB0aGUgaW1hZ2UgZGlzcGxheSBpbiBKU1AgcGFnZXNcblxuTGV0J3Mgc3RhcnQgd2l0aCB0aGUgaW1wbGVtZW50YXRpb246XG5cbiMjIyBTdGVwIDE6IEZpeCB0aGUgc2F2ZUZpbGUgbWV0aG9kIGluIEFkbWluQm9va3NTZXJ2bGV0LmphdmFcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmMGQ2YTYyZS1jODJkLTQxNTYtOGRkNC1lN2M0ODExYWVhMzQiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDEyOEhxUVkxazN2NkE5cll1ZnZXMTRrIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXCIsIFwidmlld19yYW5nZVwiOiBbMzAsIDg1XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGNoZWNrIHRoZSBpbml0IG1ldGhvZCB0byBzZWUgaG93IHRoZSBpbWFnZXMgZGlyZWN0b3J5IGlzIGJlaW5nIGNyZWF0ZWQ6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhOlxuICAgIDg1XHRcbiAgICA4Nlx0ICAgIC8vIEhlbHBlciBtZXRob2QgdG8gaGFuZGxlIGZpbGUgdXBsb2FkXG4gICAgODdcdCAgICBwcml2YXRlIFN0cmluZyBzYXZlRmlsZShQYXJ0IGZpbGVQYXJ0LCBTdHJpbmcgYXBwbGljYXRpb25QYXRoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgIDg4XHQgICAgICAgIC8vIFZlcmlmeSB0aGUgZmlsZSBwYXJ0IGlzIHZhbGlkXG4gICAgODlcdCAgICAgICAgaWYgKGZpbGVQYXJ0ID09IG51bGwpIHtcbiAgICA5MFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IGlzIG51bGwhXCIpO1xuICAgIDkxXHQgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJGaWxlIHBhcnQgaXMgbnVsbFwiKTtcbiAgICA5Mlx0ICAgICAgICB9XG4gICAgOTNcdFxuICAgIDk0XHQgICAgICAgIGlmIChmaWxlUGFydC5nZXRTaXplKCkgPD0gMCkge1xuICAgIDk1XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogZmlsZVBhcnQgc2l6ZSBpcyAwIVwiKTtcbiAgICA5Nlx0ICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IHNpemUgaXMgMFwiKTtcbiAgICA5N1x0ICAgICAgICB9XG4gICAgOThcdFxuICAgIDk5XHQgICAgICAgIGlmIChmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpID09IG51bGwgfHwgZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKS5pc0VtcHR5KCkpIHtcbiAgIDEwMFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IE5vIGZpbGVuYW1lIHN1Ym1pdHRlZCFcIik7XG4gICAxMDFcdCAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk5vIGZpbGVuYW1lIHN1Ym1pdHRlZFwiKTtcbiAgIDEwMlx0ICAgICAgICB9XG4gICAxMDNcdCAgICAgICAgLy8gRGVmaW5lIGEgZml4ZWQgdXBsb2FkIGRpcmVjdG9yeSBwYXRoIHJlbGF0aXZlIHRvIHRoZSB3ZWIgYXBwbGljYXRpb25cbiAgIDEwNFx0ICAgICAgICAvLyBXZSdsbCB1c2UgYSBkaXJlY3QgcGF0aCB3aXRob3V0IEZpbGUuc2VwYXJhdG9yIHRvIGVuc3VyZSB3ZWIgYWNjZXNzaWJpbGl0eVxuICAgMTA1XHQgICAgICAgIFN0cmluZyB1cGxvYWREaXIgPSBcImltYWdlc1wiO1xuICAgMTA2XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlN0YXJ0aW5nIGZpbGUgdXBsb2FkIHByb2Nlc3MuLi5cIik7XG4gICAxMDdcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0OiBcIiArIGZpbGVQYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIGZpbGVQYXJ0LmdldFNpemUoKSk7XG4gICAxMDhcdFxuICAgMTA5XHQgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IFBhdGhzLmdldChmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKS5nZXRGaWxlTmFtZSgpLnRvU3RyaW5nKCk7XG4gICAxMTBcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiT3JpZ2luYWwgZmlsZW5hbWU6IFwiICsgZmlsZU5hbWUpO1xuICAgMTExXHRcbiAgIDExMlx0ICAgICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBmaWxlbmFtZSB0byBwcmV2ZW50IG92ZXJ3cml0aW5nXG4gICAxMTNcdCAgICAgICAgU3RyaW5nIHVuaXF1ZUZpbGVOYW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgKyBcIl9cIiArIGZpbGVOYW1lO1xuICAgMTE0XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkdlbmVyYXRlZCB1bmlxdWUgZmlsZW5hbWU6IFwiICsgdW5pcXVlRmlsZU5hbWUpO1xuICAgMTE1XHRcbiAgIDExNlx0ICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgaW1hZ2VzIGRpcmVjdG9yeVxuICAgMTE3XHQgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSB1c2luZyBhIHdlYi1hY2Nlc3NpYmxlIHBhdGhcbiAgIDExOFx0ICAgICAgICBTdHJpbmcgdXBsb2FkUGF0aCA9IGFwcGxpY2F0aW9uUGF0aCArIFwiaW1hZ2VzXCI7XG4gICAxMTlcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXBsb2FkIGRpcmVjdG9yeSBwYXRoOiBcIiArIHVwbG9hZFBhdGgpO1xuICAgMTIwXHRcbiAgIDEyMVx0ICAgICAgICAvLyBBbHNvIHByaW50IHRoZSBjb250ZXh0IHBhdGggZm9yIGRlYnVnZ2luZ1xuICAgMTIyXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNvbnRleHQgcGF0aCB3b3VsZCBiZTogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldENvbnRleHRQYXRoKCkpO1xuICAgMTIzXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpKTtcbiAgIDEyNFx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWFsIHBhdGggb2YgL2ltYWdlczogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlc1wiKSk7XG4gICAxMjVcdFxuICAgMTI2XHQgICAgICAgIC8vIENyZWF0ZSB0aGUgZGlyZWN0b3J5IGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgIDEyN1x0ICAgICAgICBGaWxlIHVwbG9hZERpckZpbGUgPSBuZXcgRmlsZSh1cGxvYWRQYXRoKTtcbiAgIDEyOFx0ICAgICAgICBpZiAoIXVwbG9hZERpckZpbGUuZXhpc3RzKCkpIHtcbiAgIDEyOVx0ICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gdXBsb2FkRGlyRmlsZS5ta2RpcnMoKTtcbiAgIDEzMFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ3JlYXRlZCB1cGxvYWQgZGlyZWN0b3J5OiBcIiArIGNyZWF0ZWQpO1xuICAgMTMxXHQgICAgICAgIH1cbiAgIDEzMlx0XG4gICAxMzNcdCAgICAgICAgLy8gQ3JlYXRlIHRoZSBmdWxsIGZpbGUgcGF0aFxuICAgMTM0XHQgICAgICAgIFN0cmluZyBmdWxsRmlsZVBhdGggPSB1cGxvYWRQYXRoICsgRmlsZS5zZXBhcmF0b3IgKyB1bmlxdWVGaWxlTmFtZTtcbiAgIDEzNVx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIGZpbGUgcGF0aDogXCIgKyBmdWxsRmlsZVBhdGgpO1xuICAgMTM2XHRcbiAgIDEzN1x0ICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIHVzaW5nIGEgc2ltcGxlciBhcHByb2FjaFxuICAgMTM4XHQgICAgICAgIHRyeSAoSW5wdXRTdHJlYW0gaW5wdXQgPSBmaWxlUGFydC5nZXRJbnB1dFN0cmVhbSgpO1xuICAgMTM5XHQgICAgICAgICAgICAgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtIG91dHB1dCA9IG5ldyBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW0oZnVsbEZpbGVQYXRoKSkge1xuICAgMTQwXHRcbiAgIDE0MVx0ICAgICAgICAgICAgLy8gQ29weSB0aGUgZmlsZSBjb250ZW50XG4gICAxNDJcdCAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVs4MTkyXTtcbiAgIDE0M1x0ICAgICAgICAgICAgaW50IGJ5dGVzUmVhZDtcbiAgIDE0NFx0ICAgICAgICAgICAgd2hpbGUgKChieXRlc1JlYWQgPSBpbnB1dC5yZWFkKGJ1ZmZlcikpICE9IC0xKSB7XG4gICAxNDVcdCAgICAgICAgICAgICAgICBvdXRwdXQud3JpdGUoYnVmZmVyLCAwLCBieXRlc1JlYWQpO1xuICAgMTQ2XHQgICAgICAgICAgICB9XG4gICAxNDdcdFxuICAgMTQ4XHQgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgd2FzIGNyZWF0ZWRcbiAgIDE0OVx0ICAgICAgICAgICAgRmlsZSBzYXZlZEZpbGUgPSBuZXcgRmlsZShmdWxsRmlsZVBhdGgpO1xuICAgMTUwXHQgICAgICAgICAgICBpZiAoc2F2ZWRGaWxlLmV4aXN0cygpKSB7XG4gICAxNTFcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHNhdmVkIHN1Y2Nlc3NmdWxseTogXCIgKyBzYXZlZEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpO1xuICAgMTUyXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBzaXplOiBcIiArIHNhdmVkRmlsZS5sZW5ndGgoKSArIFwiIGJ5dGVzXCIpO1xuICAgMTUzXHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMTU0XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IEZpbGUgd2FzIG5vdCBjcmVhdGVkIVwiKTtcbiAgIDE1NVx0ICAgICAgICAgICAgfVxuICAgMTU2XHRcbiAgIDE1N1x0ICAgICAgICAgICAgLy8gTGlzdCBhbGwgZmlsZXMgaW4gdGhlIGRpcmVjdG9yeVxuICAgMTU4XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlcyBpbiB1cGxvYWQgZGlyZWN0b3J5OlwiKTtcbiAgIDE1OVx0ICAgICAgICAgICAgRmlsZVtdIGZpbGVzID0gdXBsb2FkRGlyRmlsZS5saXN0RmlsZXMoKTtcbiAgIDE2MFx0ICAgICAgICAgICAgaWYgKGZpbGVzICE9IG51bGwpIHtcbiAgIDE2MVx0ICAgICAgICAgICAgICAgIGZvciAoRmlsZSBmaWxlIDogZmlsZXMpIHtcbiAgIDE2Mlx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFwiICsgZmlsZS5nZXROYW1lKCkgKyBcIiAoXCIgKyBmaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXMpXCIpO1xuICAgMTYzXHQgICAgICAgICAgICAgICAgfVxuICAgMTY0XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMTY1XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBObyBmaWxlcyBmb3VuZCBvciBkaXJlY3RvcnkgY2Fubm90IGJlIHJlYWRcIik7XG4gICAxNjZcdCAgICAgICAgICAgIH1cbiAgIDE2N1x0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTY4XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBzYXZpbmcgZmlsZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAxNjlcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxNzBcdCAgICAgICAgICAgIHRocm93IGU7XG4gICAxNzFcdCAgICAgICAgfVxuICAgMTcyXHRcbiAgIDE3M1x0ICAgICAgICAvLyBSZXR1cm4gdGhlIHJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIHRoZSBkYXRhYmFzZVxuICAgMTc0XHQgICAgICAgIC8vIFVzZSBhIHBhdGggdGhhdCB3aWxsIGJlIGFjY2Vzc2libGUgZnJvbSB0aGUgd2ViIGFwcGxpY2F0aW9uXG4gICAxNzVcdCAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL1wiICsgdW5pcXVlRmlsZU5hbWU7XG4gICAxNzZcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVsYXRpdmUgcGF0aCB0byBiZSBzdG9yZWQgaW4gZGF0YWJhc2U6IFwiICsgcmVsYXRpdmVQYXRoKTtcbiAgIDE3N1x0XG4gICAxNzhcdCAgICAgICAgLy8gQWxzbyBwcmludCB3aGF0IHRoZSBmdWxsIFVSTCB3b3VsZCBiZVxuICAgMTc5XHQgICAgICAgIFN0cmluZyBmdWxsVXJsID0gZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyByZWxhdGl2ZVBhdGg7XG4gICAxODBcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBVUkwgd291bGQgYmU6IFwiICsgZnVsbFVybCk7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA1ODVcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVF2MVZlb3h4OE16VFFOU1hZRFhCVm8ifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2MCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgY2hlY2sgdGhlIGluaXQgbWV0aG9kIHRvIHNlZSBob3cgdGhlIGltYWdlcyBkaXJlY3RvcnkgaXMgYmVpbmcgY3JlYXRlZDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJjMDgwNjZkNi05MzE5LTRhOTUtODYyMC0xMDUzMTdhNjM0NzgiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFUa3M5TlVxSkt3QnpCa3dmeXhxVG9hIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwXCIsIFwidmlld19yYW5nZVwiOiBbMSwgNTBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIGNoZWNrIGhvdyB0aGUgaW1hZ2VzIGFyZSBkaXNwbGF5ZWQgaW4gdGhlIEpTUCBmaWxlczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmE6XG4gICAgMzBcdCAgICAgICAgICAgICAgICAgbWF4UmVxdWVzdFNpemU9MTAyNCoxMDI0KjUwKSAgIC8vIDUwTUJcbiAgICAzMVx0cHVibGljIGNsYXNzIEFkbWluQm9va3NTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIDMyXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgMzNcdCAgICBwcml2YXRlIEJvb2tEQU8gYm9va0RBTztcbiAgICAzNFx0XG4gICAgMzVcdCAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgIDM2XHQgICAgICAgIGJvb2tEQU8gPSBuZXcgQm9va0RBTygpO1xuICAgIDM3XHRcbiAgICAzOFx0ICAgICAgICAvLyBDcmVhdGUgaW1hZ2VzIGRpcmVjdG9yeSBhdCBzdGFydHVwXG4gICAgMzlcdCAgICAgICAgdHJ5IHtcbiAgICA0MFx0ICAgICAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIHdlYiBhcHBsaWNhdGlvbiByb290XG4gICAgNDFcdCAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgIDQyXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBcHBsaWNhdGlvbiByZWFsIHBhdGg6IFwiICsgYXBwbGljYXRpb25QYXRoKTtcbiAgICA0M1x0XG4gICAgNDRcdCAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgaW1hZ2VzIGRpcmVjdG9yeSBpbiBhIHdlYi1hY2Nlc3NpYmxlIGxvY2F0aW9uXG4gICAgNDVcdCAgICAgICAgICAgIFN0cmluZyBpbWFnZXNQYXRoID0gYXBwbGljYXRpb25QYXRoICsgXCJpbWFnZXNcIjtcbiAgICA0Nlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBwYXRoOiBcIiArIGltYWdlc1BhdGgpO1xuICAgIDQ3XHRcbiAgICA0OFx0ICAgICAgICAgICAgLy8gQWxzbyBwcmludCB0aGUgY29udGV4dCBwYXRoIGFuZCByZWFsIHBhdGhzIGZvciBkZWJ1Z2dpbmdcbiAgICA0OVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udGV4dCBwYXRoOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSk7XG4gICAgNTBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpKTtcbiAgICA1MVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVhbCBwYXRoIG9mIC9pbWFnZXM6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9pbWFnZXNcIikpO1xuICAgIDUyXHRcbiAgICA1M1x0ICAgICAgICAgICAgRmlsZSBpbWFnZXNEaXIgPSBuZXcgRmlsZShpbWFnZXNQYXRoKTtcbiAgICA1NFx0ICAgICAgICAgICAgaWYgKCFpbWFnZXNEaXIuZXhpc3RzKCkpIHtcbiAgICA1NVx0ICAgICAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IGltYWdlc0Rpci5ta2RpcnMoKTtcbiAgICA1Nlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgY3JlYXRlZCBhdCBzdGFydHVwOiBcIiArIGNyZWF0ZWQpO1xuICAgIDU3XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgIDU4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgICA1OVx0ICAgICAgICAgICAgfVxuICAgIDYwXHRcbiAgICA2MVx0ICAgICAgICAgICAgLy8gQ2hlY2sgZGlyZWN0b3J5IHBlcm1pc3Npb25zXG4gICAgNjJcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgZXhpc3RzOiBcIiArIGltYWdlc0Rpci5leGlzdHMoKSk7XG4gICAgNjNcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgaXMgZGlyZWN0b3J5OiBcIiArIGltYWdlc0Rpci5pc0RpcmVjdG9yeSgpKTtcbiAgICA2NFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBjYW4gcmVhZDogXCIgKyBpbWFnZXNEaXIuY2FuUmVhZCgpKTtcbiAgICA2NVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBjYW4gd3JpdGU6IFwiICsgaW1hZ2VzRGlyLmNhbldyaXRlKCkpO1xuICAgIDY2XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGFic29sdXRlIHBhdGg6IFwiICsgaW1hZ2VzRGlyLmdldEFic29sdXRlUGF0aCgpKTtcbiAgICA2N1x0XG4gICAgNjhcdCAgICAgICAgICAgIC8vIFRyeSB0byBjcmVhdGUgYSB0ZXN0IGZpbGUgdG8gdmVyaWZ5IHdyaXRlIHBlcm1pc3Npb25zXG4gICAgNjlcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNzBcdCAgICAgICAgICAgICAgICBGaWxlIHRlc3RGaWxlID0gbmV3IEZpbGUoaW1hZ2VzUGF0aCArIEZpbGUuc2VwYXJhdG9yICsgXCJ0ZXN0LnR4dFwiKTtcbiAgICA3MVx0ICAgICAgICAgICAgICAgIGlmICh0ZXN0RmlsZS5jcmVhdGVOZXdGaWxlKCkpIHtcbiAgICA3Mlx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJUZXN0IGZpbGUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgNzNcdCAgICAgICAgICAgICAgICAgICAgdGVzdEZpbGUuZGVsZXRlKCk7IC8vIENsZWFuIHVwXG4gICAgNzRcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIDc1XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZhaWxlZCB0byBjcmVhdGUgdGVzdCBmaWxlXCIpO1xuICAgIDc2XHQgICAgICAgICAgICAgICAgfVxuICAgIDc3XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDc4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgY3JlYXRpbmcgdGVzdCBmaWxlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICA3OVx0ICAgICAgICAgICAgfVxuICAgIDgwXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgODFcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGNyZWF0aW5nIGltYWdlcyBkaXJlY3Rvcnk6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDgyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDgzXHQgICAgICAgIH1cbiAgICA4NFx0ICAgIH1cbiAgICA4NVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA1ODVcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTI4SHFRWTFrM3Y2QTlyWXVmdlcxNGsifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2MCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIGNoZWNrIGhvdyB0aGUgaW1hZ2VzIGFyZSBkaXNwbGF5ZWQgaW4gdGhlIEpTUCBmaWxlczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2NzhlMWFjZi1mOWZmLTRkYzktOTI4My1iNmUzM2I0M2I3YjciLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFXeFlZMzNEZ2RVZ1Z3djVGWU5TbWhQIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwXCIsIFwidmlld19yYW5nZVwiOiBbMTAwLCAxNTBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0J3MgY2hlY2sgdGhlIGltYWdlIGRpc3BsYXkgaW4gdGhlIGJvb2stZm9ybS5qc3AgZmlsZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3A6XG4gICAgIDFcdDwlQCBwYWdlIGxhbmd1YWdlPVwiamF2YVwiIGNvbnRlbnRUeXBlPVwidGV4dC9odG1sOyBjaGFyc2V0PVVURi04XCIgcGFnZUVuY29kaW5nPVwiVVRGLThcIiU+XG4gICAgIDJcdDwlQCBwYWdlIGltcG9ydD1cIm1vZGVsLkJvb2tcIiAlPlxuICAgICAzXHQ8JUAgcGFnZSBpbXBvcnQ9XCJqYXZhLmlvLkZpbGVcIiAlPlxuICAgICA0XHQ8IURPQ1RZUEUgaHRtbD5cbiAgICAgNVx0PGh0bWw+XG4gICAgIDZcdDxoZWFkPlxuICAgICA3XHQgICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgIDhcdCAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxuICAgICA5XHQgICAgPHRpdGxlPkJvb2sgRm9ybSAtIEUtQm9vayBTdG9yZTwvdGl0bGU+XG4gICAgMTBcdCAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIjwlPXJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSU+L2Nzcy9zdHlsZS5jc3NcIj5cbiAgICAxMVx0PC9oZWFkPlxuICAgIDEyXHQ8Ym9keT5cbiAgICAxM1x0ICAgIDxqc3A6aW5jbHVkZSBwYWdlPVwiLi4vaGVhZGVyLmpzcFwiIC8+XG4gICAgMTRcdFxuICAgIDE1XHQgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgIDE2XHQgICAgICAgIDxkaXYgY2xhc3M9XCJkYXNoYm9hcmRcIj5cbiAgICAxN1x0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhc2hib2FyZC1oZWFkZXJcIj5cbiAgICAxOFx0ICAgICAgICAgICAgICAgIDwlXG4gICAgMTlcdCAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSAoQm9vaykgcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJib29rXCIpO1xuICAgIDIwXHQgICAgICAgICAgICAgICAgYm9vbGVhbiB2aWV3T25seSA9IChyZXF1ZXN0LmdldEF0dHJpYnV0ZShcInZpZXdPbmx5XCIpICE9IG51bGwgJiYgKEJvb2xlYW4pcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJ2aWV3T25seVwiKSk7XG4gICAgMjFcdFxuICAgIDIyXHQgICAgICAgICAgICAgICAgaWYgKHZpZXdPbmx5KSB7XG4gICAgMjNcdCAgICAgICAgICAgICAgICAlPlxuICAgIDI0XHQgICAgICAgICAgICAgICAgPGgxPlZpZXcgQm9vazwvaDE+XG4gICAgMjVcdCAgICAgICAgICAgICAgICA8JSB9IGVsc2UgaWYgKGJvb2sgIT0gbnVsbCkgeyAlPlxuICAgIDI2XHQgICAgICAgICAgICAgICAgPGgxPkVkaXQgQm9vazwvaDE+XG4gICAgMjdcdCAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyAlPlxuICAgIDI4XHQgICAgICAgICAgICAgICAgPGgxPkFkZCBOZXcgQm9vazwvaDE+XG4gICAgMjlcdCAgICAgICAgICAgICAgICA8JSB9ICU+XG4gICAgMzBcdCAgICAgICAgICAgIDwvZGl2PlxuICAgIDMxXHRcbiAgICAzMlx0ICAgICAgICAgICAgPCEtLSBEYXNoYm9hcmQgbWVudSBtb3ZlZCB0byBoZWFkZXIgLS0+XG4gICAgMzNcdFxuICAgIDM0XHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLWNvbnRlbnRcIj5cbiAgICAzNVx0ICAgICAgICAgICAgICAgIDwlIGlmIChyZXF1ZXN0LmdldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiKSAhPSBudWxsKSB7ICU+XG4gICAgMzZcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZXJyb3JcIj5cbiAgICAzN1x0ICAgICAgICAgICAgICAgICAgICA8JT0gcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJlcnJvck1lc3NhZ2VcIikgJT5cbiAgICAzOFx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgIDM5XHQgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgIDQwXHRcbiAgICA0MVx0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRhaW5lclwiPlxuICAgIDQyXHQgICAgICAgICAgICAgICAgICAgIDwlIGlmICh2aWV3T25seSkgeyAlPlxuICAgIDQzXHQgICAgICAgICAgICAgICAgICAgIDwhLS0gVmlldy1vbmx5IG1vZGUgLS0+XG4gICAgNDRcdCAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZpZXctYm9vay1kZXRhaWxzXCI+XG4gICAgNDVcdCAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImJvb2stZGV0YWlscy1saXN0XCI+XG4gICAgNDZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgNDdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPkltYWdlOjwvZGl2PlxuICAgIDQ4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtdmFsdWVcIj5cbiAgICA0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGJvb2suZ2V0SW1hZ2VVcmwoKSAhPSBudWxsICYmICFib29rLmdldEltYWdlVXJsKCkuaXNFbXB0eSgpKSB7ICU+XG4gICAgNTBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgYm9vay5nZXRJbWFnZVVybCgpICU+XCIgYWx0PVwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlwiPlxuVG90YWwgbGluZXMgaW4gZmlsZTogMjE2XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFUa3M5TlVxSkt3QnpCa3dmeXhxVG9hIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjAsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGNoZWNrIHRoZSBpbWFnZSBkaXNwbGF5IGluIHRoZSBib29rLWZvcm0uanNwIGZpbGU6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiY2U3ZTgyZjgtMmNmZi00N2MxLWI5NmMtZjUxOTYxNWZhN2NlIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNFZ1alRhNU1xNERGVDRrTEcxbzc3dSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvYWRtaW4vYm9vay1mb3JtLmpzcFwiLCBcInZpZXdfcmFuZ2VcIjogWzE1MCwgMTgwXX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3A6XG4gICAxMDBcdFxuICAgMTAxXHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgMTAyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRpdGxlXCI+VGl0bGU8L2xhYmVsPlxuICAgMTAzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ0aXRsZVwiIG5hbWU9XCJ0aXRsZVwiIHZhbHVlPVwiPCU9IGJvb2sgIT0gbnVsbCA/IGJvb2suZ2V0VGl0bGUoKSA6IFwiXCIgJT5cIiByZXF1aXJlZD5cbiAgIDEwNFx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxMDVcdFxuICAgMTA2XHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgMTA3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImF1dGhvclwiPkF1dGhvcjwvbGFiZWw+XG4gICAxMDhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cImF1dGhvclwiIG5hbWU9XCJhdXRob3JcIiB2YWx1ZT1cIjwlPSBib29rICE9IG51bGwgPyBib29rLmdldEF1dGhvcigpIDogXCJcIiAlPlwiIHJlcXVpcmVkPlxuICAgMTA5XHQgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDExMFx0XG4gICAxMTFcdCAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAxMTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGVzY3JpcHRpb25cIj5EZXNjcmlwdGlvbjwvbGFiZWw+XG4gICAxMTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9XCJkZXNjcmlwdGlvblwiIG5hbWU9XCJkZXNjcmlwdGlvblwiIHJvd3M9XCI1XCIgcmVxdWlyZWQ+PCU9IGJvb2sgIT0gbnVsbCA/IGJvb2suZ2V0RGVzY3JpcHRpb24oKSA6IFwiXCIgJT48L3RleHRhcmVhPlxuICAgMTE0XHQgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDExNVx0XG4gICAxMTZcdCAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLXJvd1wiPlxuICAgMTE3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgIDExOFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2F0ZWdvcnlcIj5DYXRlZ29yeTwvbGFiZWw+XG4gICAxMTlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cImNhdGVnb3J5XCIgbmFtZT1cImNhdGVnb3J5XCIgcmVxdWlyZWQ+XG4gICAxMjBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj5TZWxlY3QgQ2F0ZWdvcnk8L29wdGlvbj5cbiAgIDEyMVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkZpY3Rpb25cIiA8JT0gYm9vayAhPSBudWxsICYmIFwiRmljdGlvblwiLmVxdWFscyhib29rLmdldENhdGVnb3J5KCkpID8gXCJzZWxlY3RlZFwiIDogXCJcIiAlPj5GaWN0aW9uPC9vcHRpb24+XG4gICAxMjJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJOb24tRmljdGlvblwiIDwlPSBib29rICE9IG51bGwgJiYgXCJOb24tRmljdGlvblwiLmVxdWFscyhib29rLmdldENhdGVnb3J5KCkpID8gXCJzZWxlY3RlZFwiIDogXCJcIiAlPj5Ob24tRmljdGlvbjwvb3B0aW9uPlxuICAgMTIzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiU2NpZW5jZVwiIDwlPSBib29rICE9IG51bGwgJiYgXCJTY2llbmNlXCIuZXF1YWxzKGJvb2suZ2V0Q2F0ZWdvcnkoKSkgPyBcInNlbGVjdGVkXCIgOiBcIlwiICU+PlNjaWVuY2U8L29wdGlvbj5cbiAgIDEyNFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlRlY2hub2xvZ3lcIiA8JT0gYm9vayAhPSBudWxsICYmIFwiVGVjaG5vbG9neVwiLmVxdWFscyhib29rLmdldENhdGVnb3J5KCkpID8gXCJzZWxlY3RlZFwiIDogXCJcIiAlPj5UZWNobm9sb2d5PC9vcHRpb24+XG4gICAxMjVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAxMjZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDEyN1x0XG4gICAxMjhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgMTI5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJnZW5yZVwiPkdlbnJlPC9sYWJlbD5cbiAgIDEzMFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cImdlbnJlXCIgbmFtZT1cImdlbnJlXCIgdmFsdWU9XCI8JT0gYm9vayAhPSBudWxsID8gYm9vay5nZXRHZW5yZSgpIDogXCJcIiAlPlwiIHJlcXVpcmVkPlxuICAgMTMxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxMzJcdCAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTMzXHRcbiAgIDEzNFx0ICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tcm93XCI+XG4gICAxMzVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgMTM2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJwcmljZVwiPlByaWNlPC9sYWJlbD5cbiAgIDEzN1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIGlkPVwicHJpY2VcIiBuYW1lPVwicHJpY2VcIiBzdGVwPVwiMC4wMVwiIG1pbj1cIjBcIiB2YWx1ZT1cIjwlPSBib29rICE9IG51bGwgPyBib29rLmdldFByaWNlKCkgOiBcIlwiICU+XCIgcmVxdWlyZWQ+XG4gICAxMzhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDEzOVx0XG4gICAxNDBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgMTQxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJzdG9ja1wiPlN0b2NrPC9sYWJlbD5cbiAgIDE0Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIGlkPVwic3RvY2tcIiBuYW1lPVwic3RvY2tcIiBtaW49XCIwXCIgdmFsdWU9XCI8JT0gYm9vayAhPSBudWxsID8gYm9vay5nZXRTdG9jaygpIDogXCJcIiAlPlwiIHJlcXVpcmVkPlxuICAgMTQzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNDRcdCAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTQ1XHRcbiAgIDE0Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJib29rSW1hZ2VcIj5Cb29rIEltYWdlPC9sYWJlbD5cbiAgIDE0OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiYm9va0ltYWdlXCIgbmFtZT1cImJvb2tJbWFnZVwiIGFjY2VwdD1cImltYWdlLypcIiBvbmNoYW5nZT1cImNvbnNvbGUubG9nKCdGaWxlIHNlbGVjdGVkOiAnICsgdGhpcy5maWxlc1swXS5uYW1lKTtcIj5cbiAgIDE0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LWltYWdlXCI+XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyMTZcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVd4WVkzM0RnZFVnVnd2NUZZTlNtaFAifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2MCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjQzNzQyZjI0LTUyMGItNDM0Yy05NmQyLWYyYzJlOTkzZGZlMCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVA4NzFOZVBHVFgxUVlkckZTUmFHNHUiLCJ0b29sX25hbWUiOiJsYXVuY2gtcHJvY2VzcyIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwiZmluZCBzcmMvbWFpbi93ZWJhcHAgLXR5cGUgZCB8IHNvcnRcIiwgXCJ3YWl0XCI6IHRydWUsIFwibWF4X3dhaXRfc2Vjb25kc1wiOiAzMH0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBJJ2xsIGNoZWNrIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIHdlYmFwcCBkaXJlY3Rvcnk6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwOlxuICAgMTUwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN1cnJlbnQtaW1hZ2VcIj5cbiAgIDE1MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJyZW50IGltYWdlOjwvcD5cbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JVxuICAgMTUzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWdQYXRoID0gYm9vay5nZXRJbWFnZVVybCgpO1xuICAgMTU0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWdQYXRoO1xuICAgMTU1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIHBhdGggaW4gSlNQOiBcIiArIGltZ1BhdGgpO1xuICAgMTU2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgaW1hZ2UgVVJMOiBcIiArIGZ1bGxJbWFnZVBhdGgpO1xuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XG4gICAxNThcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBUcnkgZGlmZmVyZW50IHdheXMgdG8gcmVmZXJlbmNlIHRoZSBpbWFnZSAtLT5cbiAgIDE1OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIjwlPSBmdWxsSW1hZ2VQYXRoICU+XCIgYWx0PVwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlwiIHN0eWxlPVwibWF4LXdpZHRoOiAxMDBweDsgbWF4LWhlaWdodDogMTUwcHg7XCI+XG4gICAxNjBcdFxuICAgMTYxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gQWxzbyB0cnkgd2l0aCBqdXN0IHRoZSByZWxhdGl2ZSBwYXRoIC0tPlxuICAgMTYyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkFsdGVybmF0aXZlIGltYWdlIGRpc3BsYXk6PC9wPlxuICAgMTYzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLzwlPSBpbWdQYXRoICU+XCIgYWx0PVwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlwiIHN0eWxlPVwibWF4LXdpZHRoOiAxMDBweDsgbWF4LWhlaWdodDogMTUwcHg7XCI+XG4gICAxNjRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+SW1hZ2UgcGF0aDogPCU9IGltZ1BhdGggJT48L3A+XG4gICAxNjVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+RnVsbCBVUkw6IDwlPSBmdWxsSW1hZ2VQYXRoICU+PC9wPlxuICAgMTY2XHRcbiAgIDE2N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JVxuICAgMTY4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBpbWFnZSBmaWxlIGV4aXN0c1xuICAgMTY5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyByZWFsUGF0aCA9IGFwcGxpY2F0aW9uLmdldFJlYWxQYXRoKFwiL1wiICsgaW1nUGF0aCk7XG4gICAxNzBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmlsZSBpbWFnZUZpbGUgPSBuZXcgRmlsZShyZWFsUGF0aCk7XG4gICAxNzFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJT5cbiAgIDE3Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbWFnZSBmaWxlIGV4aXN0czogPCU9IGltYWdlRmlsZS5leGlzdHMoKSAlPjwvcD5cbiAgIDE3M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5SZWFsIHBhdGg6IDwlPSByZWFsUGF0aCAlPjwvcD5cbiAgIDE3NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjdXJyZW50SW1hZ2VVcmxcIiB2YWx1ZT1cIjwlPSBib29rLmdldEltYWdlVXJsKCkgJT5cIj5cbiAgIDE3NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTc2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgMTc3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb3JtLWhpbnRcIj5TZWxlY3QgYW4gaW1hZ2UgZmlsZSB0byB1cGxvYWQuIFN1cHBvcnRlZCBmb3JtYXRzOiBKUEcsIFBORywgR0lGLjwvcD5cbiAgIDE3OFx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNzlcdFxuICAgMTgwXHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1hY3Rpb25zXCI+XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyMTZcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTRWdWpUYTVNcTRERlQ0a0xHMW83N3UifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2MCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTm93IEknbGwgY2hlY2sgdGhlIHN0cnVjdHVyZSBvZiB0aGUgd2ViYXBwIGRpcmVjdG9yeTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmMDFlZGNhZi0zZDc2LTRmNzMtOGMwNi1iYjA4NDhhNjEzY2YiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFBSkVLTVZKZVJudW9hdUdZYURveXN5IiwidG9vbF9uYW1lIjoibGF1bmNoLXByb2Nlc3MiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcImxzIC1sYSBzcmMvbWFpbi93ZWJhcHAvaW1hZ2VzXCIsIFwid2FpdFwiOiB0cnVlLCBcIm1heF93YWl0X3NlY29uZHNcIjogMzB9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQncyBjaGVjayBpZiB0aGUgaW1hZ2VzIGRpcmVjdG9yeSBleGlzdHMgYW5kIGhhcyBhbnkgZmlsZXM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlIGFyZSB0aGUgcmVzdWx0cyBmcm9tIGV4ZWN1dGluZyB0aGUgY29tbWFuZC5cbiAgICAgICAgPHJldHVybi1jb2RlPlxuICAgICAgICAwXG4gICAgICAgIDwvcmV0dXJuLWNvZGU+XG4gICAgICAgIDxzdGRvdXQ+XG4gICAgICAgIHNyYy9tYWluL3dlYmFwcFxuc3JjL21haW4vd2ViYXBwL01FVEEtSU5GXG5zcmMvbWFpbi93ZWJhcHAvV0VCLUlORlxuc3JjL21haW4vd2ViYXBwL1dFQi1JTkYvbGliXG5zcmMvbWFpbi93ZWJhcHAvYWRtaW5cbnNyYy9tYWluL3dlYmFwcC9jc3NcbnNyYy9tYWluL3dlYmFwcC9pbWFnZXNcbnNyYy9tYWluL3dlYmFwcC9qc1xuc3JjL21haW4vd2ViYXBwL3VzZXJcblxuICAgICAgICA8L3N0ZG91dD5cbiAgICAgICAgPHN0ZGVycj5cbiAgICAgICAgXG4gICAgICAgIDwvc3RkZXJyPiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVA4NzFOZVBHVFgxUVlkckZTUmFHNHUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2MSwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgY2hlY2sgaWYgdGhlIGltYWdlcyBkaXJlY3RvcnkgZXhpc3RzIGFuZCBoYXMgYW55IGZpbGVzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijk3NDllZmE0LTk3ZTEtNGJhMS1iZDUxLTFjYmUwYjUzNGYyMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMURrMWJVUDRFem41Q3U5OFBuVDVVV1giLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAvLyBIZWxwZXIgbWV0aG9kIHRvIGhhbmRsZSBmaWxlIHVwbG9hZFxcbiAgICBwcml2YXRlIFN0cmluZyBzYXZlRmlsZShQYXJ0IGZpbGVQYXJ0LCBTdHJpbmcgYXBwbGljYXRpb25QYXRoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xcbiAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHBhcnQgaXMgdmFsaWRcXG4gICAgICAgIGlmIChmaWxlUGFydCA9PSBudWxsKSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFUlJPUjogZmlsZVBhcnQgaXMgbnVsbCFcXFwiKTtcXG4gICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXFxcIkZpbGUgcGFydCBpcyBudWxsXFxcIik7XFxuICAgICAgICB9XFxuXFxuICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U2l6ZSgpIDw9IDApIHtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkVSUk9SOiBmaWxlUGFydCBzaXplIGlzIDAhXFxcIik7XFxuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFxcXCJGaWxlIHBhcnQgc2l6ZSBpcyAwXFxcIik7XFxuICAgICAgICB9XFxuXFxuICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSA9PSBudWxsIHx8IGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkuaXNFbXB0eSgpKSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFUlJPUjogTm8gZmlsZW5hbWUgc3VibWl0dGVkIVxcXCIpO1xcbiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcXFwiTm8gZmlsZW5hbWUgc3VibWl0dGVkXFxcIik7XFxuICAgICAgICB9XFxuICAgICAgICAvLyBEZWZpbmUgYSBmaXhlZCB1cGxvYWQgZGlyZWN0b3J5IHBhdGggcmVsYXRpdmUgdG8gdGhlIHdlYiBhcHBsaWNhdGlvblxcbiAgICAgICAgLy8gV2UnbGwgdXNlIGEgZGlyZWN0IHBhdGggd2l0aG91dCBGaWxlLnNlcGFyYXRvciB0byBlbnN1cmUgd2ViIGFjY2Vzc2liaWxpdHlcXG4gICAgICAgIFN0cmluZyB1cGxvYWREaXIgPSBcXFwiaW1hZ2VzXFxcIjtcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiU3RhcnRpbmcgZmlsZSB1cGxvYWQgcHJvY2Vzcy4uLlxcXCIpO1xcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJGaWxlIHBhcnQ6IFxcXCIgKyBmaWxlUGFydC5nZXROYW1lKCkgKyBcXFwiLCBTaXplOiBcXFwiICsgZmlsZVBhcnQuZ2V0U2l6ZSgpKTtcXG5cXG4gICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IFBhdGhzLmdldChmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKS5nZXRGaWxlTmFtZSgpLnRvU3RyaW5nKCk7XFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIk9yaWdpbmFsIGZpbGVuYW1lOiBcXFwiICsgZmlsZU5hbWUpO1xcblxcbiAgICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgZmlsZW5hbWUgdG8gcHJldmVudCBvdmVyd3JpdGluZ1xcbiAgICAgICAgU3RyaW5nIHVuaXF1ZUZpbGVOYW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgKyBcXFwiX1xcXCIgKyBmaWxlTmFtZTtcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiR2VuZXJhdGVkIHVuaXF1ZSBmaWxlbmFtZTogXFxcIiArIHVuaXF1ZUZpbGVOYW1lKTtcXG5cXG4gICAgICAgIC8vIEdldCB0aGUgcmVhbCBwYXRoIHRvIHRoZSBpbWFnZXMgZGlyZWN0b3J5XFxuICAgICAgICAvLyBNYWtlIHN1cmUgd2UncmUgdXNpbmcgYSB3ZWItYWNjZXNzaWJsZSBwYXRoXFxuICAgICAgICBTdHJpbmcgdXBsb2FkUGF0aCA9IGFwcGxpY2F0aW9uUGF0aCArIFxcXCJpbWFnZXNcXFwiO1xcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJVcGxvYWQgZGlyZWN0b3J5IHBhdGg6IFxcXCIgKyB1cGxvYWRQYXRoKTtcXG5cXG4gICAgICAgIC8vIEFsc28gcHJpbnQgdGhlIGNvbnRleHQgcGF0aCBmb3IgZGVidWdnaW5nXFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkNvbnRleHQgcGF0aCB3b3VsZCBiZTogXFxcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSk7XFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIlJlYWwgcGF0aCBvZiAvOiBcXFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcXFwiL1xcXCIpKTtcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiUmVhbCBwYXRoIG9mIC9pbWFnZXM6IFxcXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFxcXCIvaW1hZ2VzXFxcIikpO1xcblxcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxcbiAgICAgICAgRmlsZSB1cGxvYWREaXJGaWxlID0gbmV3IEZpbGUodXBsb2FkUGF0aCk7XFxuICAgICAgICBpZiAoIXVwbG9hZERpckZpbGUuZXhpc3RzKCkpIHtcXG4gICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSB1cGxvYWREaXJGaWxlLm1rZGlycygpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiQ3JlYXRlZCB1cGxvYWQgZGlyZWN0b3J5OiBcXFwiICsgY3JlYXRlZCk7XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvLyBDcmVhdGUgdGhlIGZ1bGwgZmlsZSBwYXRoXFxuICAgICAgICBTdHJpbmcgZnVsbEZpbGVQYXRoID0gdXBsb2FkUGF0aCArIEZpbGUuc2VwYXJhdG9yICsgdW5pcXVlRmlsZU5hbWU7XFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkZ1bGwgZmlsZSBwYXRoOiBcXFwiICsgZnVsbEZpbGVQYXRoKTtcXG5cXG4gICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgdXNpbmcgYSBzaW1wbGVyIGFwcHJvYWNoXFxuICAgICAgICB0cnkgKElucHV0U3RyZWFtIGlucHV0ID0gZmlsZVBhcnQuZ2V0SW5wdXRTdHJlYW0oKTtcXG4gICAgICAgICAgICAgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtIG91dHB1dCA9IG5ldyBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW0oZnVsbEZpbGVQYXRoKSkge1xcblxcbiAgICAgICAgICAgIC8vIENvcHkgdGhlIGZpbGUgY29udGVudFxcbiAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVs4MTkyXTtcXG4gICAgICAgICAgICBpbnQgYnl0ZXNSZWFkO1xcbiAgICAgICAgICAgIHdoaWxlICgoYnl0ZXNSZWFkID0gaW5wdXQucmVhZChidWZmZXIpKSAhPSAtMSkge1xcbiAgICAgICAgICAgICAgICBvdXRwdXQud3JpdGUoYnVmZmVyLCAwLCBieXRlc1JlYWQpO1xcbiAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgd2FzIGNyZWF0ZWRcXG4gICAgICAgICAgICBGaWxlIHNhdmVkRmlsZSA9IG5ldyBGaWxlKGZ1bGxGaWxlUGF0aCk7XFxuICAgICAgICAgICAgaWYgKHNhdmVkRmlsZS5leGlzdHMoKSkge1xcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkZpbGUgc2F2ZWQgc3VjY2Vzc2Z1bGx5OiBcXFwiICsgc2F2ZWRGaWxlLmdldEFic29sdXRlUGF0aCgpKTtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJGaWxlIHNpemU6IFxcXCIgKyBzYXZlZEZpbGUubGVuZ3RoKCkgKyBcXFwiIGJ5dGVzXFxcIik7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFUlJPUjogRmlsZSB3YXMgbm90IGNyZWF0ZWQhXFxcIik7XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgIC8vIExpc3QgYWxsIGZpbGVzIGluIHRoZSBkaXJlY3RvcnlcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkZpbGVzIGluIHVwbG9hZCBkaXJlY3Rvcnk6XFxcIik7XFxuICAgICAgICAgICAgRmlsZVtdIGZpbGVzID0gdXBsb2FkRGlyRmlsZS5saXN0RmlsZXMoKTtcXG4gICAgICAgICAgICBpZiAoZmlsZXMgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICBmb3IgKEZpbGUgZmlsZSA6IGZpbGVzKSB7XFxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIiAgXFxcIiArIGZpbGUuZ2V0TmFtZSgpICsgXFxcIiAoXFxcIiArIGZpbGUubGVuZ3RoKCkgKyBcXFwiIGJ5dGVzKVxcXCIpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCIgIE5vIGZpbGVzIGZvdW5kIG9yIGRpcmVjdG9yeSBjYW5ub3QgYmUgcmVhZFxcXCIpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFcnJvciBzYXZpbmcgZmlsZTogXFxcIiArIGUuZ2V0TWVzc2FnZSgpKTtcXG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIHRocm93IGU7XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvLyBSZXR1cm4gdGhlIHJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIHRoZSBkYXRhYmFzZVxcbiAgICAgICAgLy8gVXNlIGEgcGF0aCB0aGF0IHdpbGwgYmUgYWNjZXNzaWJsZSBmcm9tIHRoZSB3ZWIgYXBwbGljYXRpb25cXG4gICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcXFwiaW1hZ2VzL1xcXCIgKyB1bmlxdWVGaWxlTmFtZTtcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiUmVsYXRpdmUgcGF0aCB0byBiZSBzdG9yZWQgaW4gZGF0YWJhc2U6IFxcXCIgKyByZWxhdGl2ZVBhdGgpO1xcblxcbiAgICAgICAgLy8gQWxzbyBwcmludCB3aGF0IHRoZSBmdWxsIFVSTCB3b3VsZCBiZVxcbiAgICAgICAgU3RyaW5nIGZ1bGxVcmwgPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldENvbnRleHRQYXRoKCkgKyBcXFwiL1xcXCIgKyByZWxhdGl2ZVBhdGg7XFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkZ1bGwgVVJMIHdvdWxkIGJlOiBcXFwiICsgZnVsbFVybCk7XFxuXFxuICAgICAgICByZXR1cm4gcmVsYXRpdmVQYXRoO1xcbiAgICB9XCIsIFwibmV3X3N0clwiOiBcIiAgICAvLyBIZWxwZXIgbWV0aG9kIHRvIGhhbmRsZSBmaWxlIHVwbG9hZFxcbiAgICBwcml2YXRlIFN0cmluZyBzYXZlRmlsZShQYXJ0IGZpbGVQYXJ0LCBTdHJpbmcgYXBwbGljYXRpb25QYXRoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xcbiAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHBhcnQgaXMgdmFsaWRcXG4gICAgICAgIGlmIChmaWxlUGFydCA9PSBudWxsKSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFUlJPUjogZmlsZVBhcnQgaXMgbnVsbCFcXFwiKTtcXG4gICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXFxcIkZpbGUgcGFydCBpcyBudWxsXFxcIik7XFxuICAgICAgICB9XFxuXFxuICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U2l6ZSgpIDw9IDApIHtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkVSUk9SOiBmaWxlUGFydCBzaXplIGlzIDAhXFxcIik7XFxuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFxcXCJGaWxlIHBhcnQgc2l6ZSBpcyAwXFxcIik7XFxuICAgICAgICB9XFxuXFxuICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSA9PSBudWxsIHx8IGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkuaXNFbXB0eSgpKSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFUlJPUjogTm8gZmlsZW5hbWUgc3VibWl0dGVkIVxcXCIpO1xcbiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcXFwiTm8gZmlsZW5hbWUgc3VibWl0dGVkXFxcIik7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiU3RhcnRpbmcgZmlsZSB1cGxvYWQgcHJvY2Vzcy4uLlxcXCIpO1xcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJGaWxlIHBhcnQ6IFxcXCIgKyBmaWxlUGFydC5nZXROYW1lKCkgKyBcXFwiLCBTaXplOiBcXFwiICsgZmlsZVBhcnQuZ2V0U2l6ZSgpKTtcXG5cXG4gICAgICAgIC8vIEdldCB0aGUgb3JpZ2luYWwgZmlsZW5hbWUgYW5kIHNhbml0aXplIGl0XFxuICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBQYXRocy5nZXQoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSkuZ2V0RmlsZU5hbWUoKS50b1N0cmluZygpO1xcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBzcGVjaWFsIGNoYXJhY3RlcnMgdGhhdCBtaWdodCBjYXVzZSBpc3N1ZXNcXG4gICAgICAgIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZUFsbChcXFwiW15hLXpBLVowLTlcXFxcXFxcXC5cXFxcXFxcXC1dXFxcIiwgXFxcIl9cXFwiKTtcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiU2FuaXRpemVkIGZpbGVuYW1lOiBcXFwiICsgZmlsZU5hbWUpO1xcblxcbiAgICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgZmlsZW5hbWUgdG8gcHJldmVudCBvdmVyd3JpdGluZ1xcbiAgICAgICAgU3RyaW5nIHVuaXF1ZUZpbGVOYW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgKyBcXFwiX1xcXCIgKyBmaWxlTmFtZTtcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiR2VuZXJhdGVkIHVuaXF1ZSBmaWxlbmFtZTogXFxcIiArIHVuaXF1ZUZpbGVOYW1lKTtcXG5cXG4gICAgICAgIC8vIEdldCB0aGUgcmVhbCBwYXRoIHRvIHRoZSBpbWFnZXMgZGlyZWN0b3J5IHVzaW5nIGdldFJlYWxQYXRoXFxuICAgICAgICBTdHJpbmcgaW1hZ2VzUGF0aCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXFxcIi9pbWFnZXNcXFwiKTtcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiSW1hZ2VzIGRpcmVjdG9yeSByZWFsIHBhdGg6IFxcXCIgKyBpbWFnZXNQYXRoKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxcbiAgICAgICAgRmlsZSBpbWFnZXNEaXIgPSBuZXcgRmlsZShpbWFnZXNQYXRoKTtcXG4gICAgICAgIGlmICghaW1hZ2VzRGlyLmV4aXN0cygpKSB7XFxuICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gaW1hZ2VzRGlyLm1rZGlycygpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiQ3JlYXRlZCBpbWFnZXMgZGlyZWN0b3J5OiBcXFwiICsgY3JlYXRlZCk7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIC8vIFZlcmlmeSBkaXJlY3RvcnkgZXhpc3RzIGFuZCBpcyB3cml0YWJsZVxcbiAgICAgICAgaWYgKCFpbWFnZXNEaXIuZXhpc3RzKCkgfHwgIWltYWdlc0Rpci5jYW5Xcml0ZSgpKSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFUlJPUjogSW1hZ2VzIGRpcmVjdG9yeSBkb2Vzbid0IGV4aXN0IG9yIGlzIG5vdCB3cml0YWJsZSFcXFwiKTtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkRpcmVjdG9yeSBleGlzdHM6IFxcXCIgKyBpbWFnZXNEaXIuZXhpc3RzKCkpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiRGlyZWN0b3J5IGNhbiB3cml0ZTogXFxcIiArIGltYWdlc0Rpci5jYW5Xcml0ZSgpKTtcXG4gICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXFxcIkNhbm5vdCB3cml0ZSB0byBpbWFnZXMgZGlyZWN0b3J5XFxcIik7XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvLyBDcmVhdGUgdGhlIGZ1bGwgZmlsZSBwYXRoXFxuICAgICAgICBTdHJpbmcgZnVsbEZpbGVQYXRoID0gaW1hZ2VzUGF0aCArIEZpbGUuc2VwYXJhdG9yICsgdW5pcXVlRmlsZU5hbWU7XFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkZ1bGwgZmlsZSBwYXRoOiBcXFwiICsgZnVsbEZpbGVQYXRoKTtcXG5cXG4gICAgICAgIC8vIFNhdmUgdGhlIGZpbGVcXG4gICAgICAgIHRyeSAoSW5wdXRTdHJlYW0gaW5wdXQgPSBmaWxlUGFydC5nZXRJbnB1dFN0cmVhbSgpO1xcbiAgICAgICAgICAgICBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW0gb3V0cHV0ID0gbmV3IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbShmdWxsRmlsZVBhdGgpKSB7XFxuXFxuICAgICAgICAgICAgLy8gQ29weSB0aGUgZmlsZSBjb250ZW50XFxuICAgICAgICAgICAgYnl0ZVtdIGJ1ZmZlciA9IG5ldyBieXRlWzgxOTJdO1xcbiAgICAgICAgICAgIGludCBieXRlc1JlYWQ7XFxuICAgICAgICAgICAgd2hpbGUgKChieXRlc1JlYWQgPSBpbnB1dC5yZWFkKGJ1ZmZlcikpICE9IC0xKSB7XFxuICAgICAgICAgICAgICAgIG91dHB1dC53cml0ZShidWZmZXIsIDAsIGJ5dGVzUmVhZCk7XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgZmlsZSB3YXMgY3JlYXRlZFxcbiAgICAgICAgICAgIEZpbGUgc2F2ZWRGaWxlID0gbmV3IEZpbGUoZnVsbEZpbGVQYXRoKTtcXG4gICAgICAgICAgICBpZiAoc2F2ZWRGaWxlLmV4aXN0cygpKSB7XFxuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiRmlsZSBzYXZlZCBzdWNjZXNzZnVsbHk6IFxcXCIgKyBzYXZlZEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpO1xcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkZpbGUgc2l6ZTogXFxcIiArIHNhdmVkRmlsZS5sZW5ndGgoKSArIFxcXCIgYnl0ZXNcXFwiKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkVSUk9SOiBGaWxlIHdhcyBub3QgY3JlYXRlZCFcXFwiKTtcXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFxcXCJGaWxlIHdhcyBub3QgY3JlYXRlZFxcXCIpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFcnJvciBzYXZpbmcgZmlsZTogXFxcIiArIGUuZ2V0TWVzc2FnZSgpKTtcXG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xcbiAgICAgICAgICAgIHRocm93IGU7XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvLyBSZXR1cm4gdGhlIHJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIHRoZSBkYXRhYmFzZVxcbiAgICAgICAgLy8gVGhpcyBwYXRoIHdpbGwgYmUgdXNlZCBpbiBIVE1MIHRvIHJlZmVyZW5jZSB0aGUgaW1hZ2VcXG4gICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcXFwiaW1hZ2VzL1xcXCIgKyB1bmlxdWVGaWxlTmFtZTtcXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiUmVsYXRpdmUgcGF0aCB0byBiZSBzdG9yZWQgaW4gZGF0YWJhc2U6IFxcXCIgKyByZWxhdGl2ZVBhdGgpO1xcblxcbiAgICAgICAgcmV0dXJuIHJlbGF0aXZlUGF0aDtcXG4gICAgfVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogODYsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTgxfV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJCYXNlZCBvbiBteSBhbmFseXNpcywgSSd2ZSBpZGVudGlmaWVkIHRoZSBmb2xsb3dpbmcgaXNzdWVzIHdpdGggdGhlIGltYWdlIHVwbG9hZCBmdW5jdGlvbmFsaXR5OlxuXG4xLiBUaGUgcGF0aCBoYW5kbGluZyBpbiB0aGUgYHNhdmVGaWxlYCBtZXRob2QgaXMgaW5jb25zaXN0ZW50IC0gaXQncyBtaXNzaW5nIGEgc2VwYXJhdG9yIGJldHdlZW4gdGhlIGFwcGxpY2F0aW9uIHBhdGggYW5kIHRoZSBcImltYWdlc1wiIGRpcmVjdG9yeVxuMi4gVGhlIEpTUCBmaWxlIGlzIHRyeWluZyBtdWx0aXBsZSB3YXlzIHRvIGRpc3BsYXkgdGhlIGltYWdlLCB3aGljaCBpcyBjb25mdXNpbmdcbjMuIFRoZSBpbWFnZSBVUkwgc3RvcmVkIGluIHRoZSBkYXRhYmFzZSBtaWdodCBub3QgYmUgY29ycmVjdGx5IGZvcm1hdHRlZCBmb3Igd2ViIGFjY2Vzc1xuXG5MZXQncyBmaXggdGhlc2UgaXNzdWVzOlxuXG4jIyMgMS4gRmlyc3QsIGxldCdzIGZpeCB0aGUgc2F2ZUZpbGUgbWV0aG9kIGluIEFkbWluQm9va3NTZXJ2bGV0LmphdmE6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlIGFyZSB0aGUgcmVzdWx0cyBmcm9tIGV4ZWN1dGluZyB0aGUgY29tbWFuZC5cbiAgICAgICAgPHJldHVybi1jb2RlPlxuICAgICAgICAwXG4gICAgICAgIDwvcmV0dXJuLWNvZGU+XG4gICAgICAgIDxzdGRvdXQ+XG4gICAgICAgIHRvdGFsIDE0OTZcbmRyd3hyLXhyLXhAIDIyIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAgIDcwNCBNYXkgIDggMTI6MzkgLlxuZHJ3eHIteHIteEAgMjQgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgICAgNzY4IE1heSAgOCAxMjozOSAuLlxuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgIDExMTIwIEFwciAxNyAyMDozNSAxOTg0LmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgIDM4MzA3IEFwciAxNyAyMTo0NiBhYm91dC1pbWFnZS5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAgOTA2MyBBcHIgMTcgMjE6NDYgY2xlYW5jb2RlLmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgIDEyMDUyIEFwciAxNyAyMTo0MyBkZWZhdWx0LWJvb2suanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgNTA0NzcgQXByIDE3IDIyOjIzIGVib29rLWJhY2tncm91bmQuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgNTg4MDcgQXByIDE3IDIyOjI2IGVib29rLXJlYWRlci5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAxNDE4NyBBcHIgMTcgMjA6MzMgZ2F0c2J5LmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgIDE3NDc0IEFwciAxNyAyMjoxOSBoZXJvLWJvb2tzLnBuZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgIDc4NzIzIEFwciAxNyAyMTo1MSBob2JiaXQuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgIDc4NjAgQXByIDE3IDIxOjU4IGtudXRoLmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgMzAyNjk3IEFwciAxNyAyMjoyMCBsaWJyYXJ5LWJhY2tncm91bmQuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgMzUwMjIgQXByIDE3IDIyOjQ5IGxvZ2luLWltYWdlLmpwZ1xuLXJ3LXItLXItLSAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgICAgIDk4IE1heSAgOCAxMjozOSBtYXAtcGxhY2Vob2xkZXIuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgIDY3NTYgQXByIDE3IDIwOjM0IG1vY2tpbmdiaXJkLmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgIDQ0Mzc0IEFwciAxNyAyMjo0OSByZWdpc3Rlci1pbWFnZS5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAgODU0OCBBcHIgMTcgMjE6NTYgc2FwaWVucy5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAgNDk4NSBBcHIgMTcgMjI6MDAgdGVhbS1tZW1iZXIxLmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgICA0OTg1IEFwciAxNyAyMjowMCB0ZWFtLW1lbWJlcjIuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgIDQ5ODUgQXByIDE3IDIyOjAwIHRlYW0tbWVtYmVyMy5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAxMDg4MSBBcHIgMTcgMjE6NTkgdGltZS5qcGdcblxuICAgICAgICA8L3N0ZG91dD5cbiAgICAgICAgPHN0ZGVycj5cbiAgICAgICAgXG4gICAgICAgIDwvc3RkZXJyPiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUFKRUtNVkplUm51b2F1R1lhRG95c3kifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2MiwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiQmFzZWQgb24gbXkgYW5hbHlzaXMsIEkndmUgaWRlbnRpZmllZCB0aGUgZm9sbG93aW5nIGlzc3VlcyB3aXRoIHRoZSBpbWFnZSB1cGxvYWQgZnVuY3Rpb25hbGl0eTpcblxuMS4gVGhlIHBhdGggaGFuZGxpbmcgaW4gdGhlIGBzYXZlRmlsZWAgbWV0aG9kIGlzIGluY29uc2lzdGVudCAtIGl0J3MgbWlzc2luZyBhIHNlcGFyYXRvciBiZXR3ZWVuIHRoZSBhcHBsaWNhdGlvbiBwYXRoIGFuZCB0aGUgXCJpbWFnZXNcIiBkaXJlY3RvcnlcbjIuIFRoZSBKU1AgZmlsZSBpcyB0cnlpbmcgbXVsdGlwbGUgd2F5cyB0byBkaXNwbGF5IHRoZSBpbWFnZSwgd2hpY2ggaXMgY29uZnVzaW5nXG4zLiBUaGUgaW1hZ2UgVVJMIHN0b3JlZCBpbiB0aGUgZGF0YWJhc2UgbWlnaHQgbm90IGJlIGNvcnJlY3RseSBmb3JtYXR0ZWQgZm9yIHdlYiBhY2Nlc3NcblxuTGV0J3MgZml4IHRoZXNlIGlzc3VlczpcblxuIyMjIDEuIEZpcnN0LCBsZXQncyBmaXggdGhlIHNhdmVGaWxlIG1ldGhvZCBpbiBBZG1pbkJvb2tzU2VydmxldC5qYXZhOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImE5OWU0NWI2LTkzMDQtNDVkYi1iMjVlLWM3OTIwYzBlZmY5NSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVRwTkJNZDJuemp0TXJob05MdG9jTmsiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xcbiAgICAgICAgYm9va0RBTyA9IG5ldyBCb29rREFPKCk7XFxuXFxuICAgICAgICAvLyBDcmVhdGUgaW1hZ2VzIGRpcmVjdG9yeSBhdCBzdGFydHVwXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIC8vIEdldCB0aGUgcmVhbCBwYXRoIHRvIHRoZSB3ZWIgYXBwbGljYXRpb24gcm9vdFxcbiAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFxcXCJcXFwiKTtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkFwcGxpY2F0aW9uIHJlYWwgcGF0aDogXFxcIiArIGFwcGxpY2F0aW9uUGF0aCk7XFxuXFxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbWFnZXMgZGlyZWN0b3J5IGluIGEgd2ViLWFjY2Vzc2libGUgbG9jYXRpb25cXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VzUGF0aCA9IGFwcGxpY2F0aW9uUGF0aCArIFxcXCJpbWFnZXNcXFwiO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiSW1hZ2VzIGRpcmVjdG9yeSBwYXRoOiBcXFwiICsgaW1hZ2VzUGF0aCk7XFxuXFxuICAgICAgICAgICAgLy8gQWxzbyBwcmludCB0aGUgY29udGV4dCBwYXRoIGFuZCByZWFsIHBhdGhzIGZvciBkZWJ1Z2dpbmdcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkNvbnRleHQgcGF0aDogXFxcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSk7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJSZWFsIHBhdGggb2YgLzogXFxcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXFxcIi9cXFwiKSk7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJSZWFsIHBhdGggb2YgL2ltYWdlczogXFxcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXFxcIi9pbWFnZXNcXFwiKSk7XFxuXFxuICAgICAgICAgICAgRmlsZSBpbWFnZXNEaXIgPSBuZXcgRmlsZShpbWFnZXNQYXRoKTtcXG4gICAgICAgICAgICBpZiAoIWltYWdlc0Rpci5leGlzdHMoKSkge1xcbiAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBpbWFnZXNEaXIubWtkaXJzKCk7XFxuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiSW1hZ2VzIGRpcmVjdG9yeSBjcmVhdGVkIGF0IHN0YXJ0dXA6IFxcXCIgKyBjcmVhdGVkKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkltYWdlcyBkaXJlY3RvcnkgYWxyZWFkeSBleGlzdHNcXFwiKTtcXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgLy8gQ2hlY2sgZGlyZWN0b3J5IHBlcm1pc3Npb25zXFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJJbWFnZXMgZGlyZWN0b3J5IGV4aXN0czogXFxcIiArIGltYWdlc0Rpci5leGlzdHMoKSk7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJJbWFnZXMgZGlyZWN0b3J5IGlzIGRpcmVjdG9yeTogXFxcIiArIGltYWdlc0Rpci5pc0RpcmVjdG9yeSgpKTtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkltYWdlcyBkaXJlY3RvcnkgY2FuIHJlYWQ6IFxcXCIgKyBpbWFnZXNEaXIuY2FuUmVhZCgpKTtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkltYWdlcyBkaXJlY3RvcnkgY2FuIHdyaXRlOiBcXFwiICsgaW1hZ2VzRGlyLmNhbldyaXRlKCkpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiSW1hZ2VzIGRpcmVjdG9yeSBhYnNvbHV0ZSBwYXRoOiBcXFwiICsgaW1hZ2VzRGlyLmdldEFic29sdXRlUGF0aCgpKTtcXG5cXG4gICAgICAgICAgICAvLyBUcnkgdG8gY3JlYXRlIGEgdGVzdCBmaWxlIHRvIHZlcmlmeSB3cml0ZSBwZXJtaXNzaW9uc1xcbiAgICAgICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgICAgIEZpbGUgdGVzdEZpbGUgPSBuZXcgRmlsZShpbWFnZXNQYXRoICsgRmlsZS5zZXBhcmF0b3IgKyBcXFwidGVzdC50eHRcXFwiKTtcXG4gICAgICAgICAgICAgICAgaWYgKHRlc3RGaWxlLmNyZWF0ZU5ld0ZpbGUoKSkge1xcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJUZXN0IGZpbGUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIHRlc3RGaWxlLmRlbGV0ZSgpOyAvLyBDbGVhbiB1cFxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJGYWlsZWQgdG8gY3JlYXRlIHRlc3QgZmlsZVxcXCIpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFcnJvciBjcmVhdGluZyB0ZXN0IGZpbGU6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkVycm9yIGNyZWF0aW5nIGltYWdlcyBkaXJlY3Rvcnk6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgIH1cXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgcHVibGljIHZvaWQgaW5pdCgpIHtcXG4gICAgICAgIGJvb2tEQU8gPSBuZXcgQm9va0RBTygpO1xcblxcbiAgICAgICAgLy8gQ3JlYXRlIGltYWdlcyBkaXJlY3RvcnkgYXQgc3RhcnR1cFxcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgaW1hZ2VzIGRpcmVjdG9yeVxcbiAgICAgICAgICAgIFN0cmluZyBpbWFnZXNQYXRoID0gZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcXFwiL2ltYWdlc1xcXCIpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiSW1hZ2VzIGRpcmVjdG9yeSByZWFsIHBhdGg6IFxcXCIgKyBpbWFnZXNQYXRoKTtcXG5cXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XFxuICAgICAgICAgICAgRmlsZSBpbWFnZXNEaXIgPSBuZXcgRmlsZShpbWFnZXNQYXRoKTtcXG4gICAgICAgICAgICBpZiAoIWltYWdlc0Rpci5leGlzdHMoKSkge1xcbiAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBpbWFnZXNEaXIubWtkaXJzKCk7XFxuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiSW1hZ2VzIGRpcmVjdG9yeSBjcmVhdGVkIGF0IHN0YXJ0dXA6IFxcXCIgKyBjcmVhdGVkKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkltYWdlcyBkaXJlY3RvcnkgYWxyZWFkeSBleGlzdHNcXFwiKTtcXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgLy8gQ2hlY2sgZGlyZWN0b3J5IHBlcm1pc3Npb25zXFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJJbWFnZXMgZGlyZWN0b3J5IGV4aXN0czogXFxcIiArIGltYWdlc0Rpci5leGlzdHMoKSk7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJJbWFnZXMgZGlyZWN0b3J5IGlzIGRpcmVjdG9yeTogXFxcIiArIGltYWdlc0Rpci5pc0RpcmVjdG9yeSgpKTtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkltYWdlcyBkaXJlY3RvcnkgY2FuIHJlYWQ6IFxcXCIgKyBpbWFnZXNEaXIuY2FuUmVhZCgpKTtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkltYWdlcyBkaXJlY3RvcnkgY2FuIHdyaXRlOiBcXFwiICsgaW1hZ2VzRGlyLmNhbldyaXRlKCkpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiSW1hZ2VzIGRpcmVjdG9yeSBhYnNvbHV0ZSBwYXRoOiBcXFwiICsgaW1hZ2VzRGlyLmdldEFic29sdXRlUGF0aCgpKTtcXG5cXG4gICAgICAgICAgICAvLyBUcnkgdG8gY3JlYXRlIGEgdGVzdCBmaWxlIHRvIHZlcmlmeSB3cml0ZSBwZXJtaXNzaW9uc1xcbiAgICAgICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgICAgIEZpbGUgdGVzdEZpbGUgPSBuZXcgRmlsZShpbWFnZXNQYXRoICsgRmlsZS5zZXBhcmF0b3IgKyBcXFwidGVzdC50eHRcXFwiKTtcXG4gICAgICAgICAgICAgICAgaWYgKHRlc3RGaWxlLmNyZWF0ZU5ld0ZpbGUoKSkge1xcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJUZXN0IGZpbGUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIHRlc3RGaWxlLmRlbGV0ZSgpOyAvLyBDbGVhbiB1cFxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJGYWlsZWQgdG8gY3JlYXRlIHRlc3QgZmlsZVxcXCIpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJFcnJvciBjcmVhdGluZyB0ZXN0IGZpbGU6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkVycm9yIGNyZWF0aW5nIGltYWdlcyBkaXJlY3Rvcnk6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcXG4gICAgICAgIH1cXG4gICAgfVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMzUsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogODR9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiMjIyAyLiBOb3csIGxldCdzIGZpeCB0aGUgaW5pdCBtZXRob2QgdG8gZW5zdXJlIHRoZSBpbWFnZXMgZGlyZWN0b3J5IGlzIHByb3Blcmx5IGNyZWF0ZWQ6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgODJcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgODNcdCAgICAgICAgfVxuICAgIDg0XHQgICAgfVxuICAgIDg1XHRcbiAgICA4Nlx0ICAgIC8vIEhlbHBlciBtZXRob2QgdG8gaGFuZGxlIGZpbGUgdXBsb2FkXG4gICAgODdcdCAgICBwcml2YXRlIFN0cmluZyBzYXZlRmlsZShQYXJ0IGZpbGVQYXJ0LCBTdHJpbmcgYXBwbGljYXRpb25QYXRoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgIDg4XHQgICAgICAgIC8vIFZlcmlmeSB0aGUgZmlsZSBwYXJ0IGlzIHZhbGlkXG4gICAgODlcdCAgICAgICAgaWYgKGZpbGVQYXJ0ID09IG51bGwpIHtcbiAgICA5MFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IGlzIG51bGwhXCIpO1xuICAgIDkxXHQgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJGaWxlIHBhcnQgaXMgbnVsbFwiKTtcbiAgICA5Mlx0ICAgICAgICB9XG4gICAgOTNcdFxuICAgIDk0XHQgICAgICAgIGlmIChmaWxlUGFydC5nZXRTaXplKCkgPD0gMCkge1xuICAgIDk1XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogZmlsZVBhcnQgc2l6ZSBpcyAwIVwiKTtcbiAgICA5Nlx0ICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IHNpemUgaXMgMFwiKTtcbiAgICA5N1x0ICAgICAgICB9XG4gICAgOThcdFxuICAgIDk5XHQgICAgICAgIGlmIChmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpID09IG51bGwgfHwgZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKS5pc0VtcHR5KCkpIHtcbiAgIDEwMFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IE5vIGZpbGVuYW1lIHN1Ym1pdHRlZCFcIik7XG4gICAxMDFcdCAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk5vIGZpbGVuYW1lIHN1Ym1pdHRlZFwiKTtcbiAgIDEwMlx0ICAgICAgICB9XG4gICAxMDNcdFxuICAgMTA0XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlN0YXJ0aW5nIGZpbGUgdXBsb2FkIHByb2Nlc3MuLi5cIik7XG4gICAxMDVcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0OiBcIiArIGZpbGVQYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIGZpbGVQYXJ0LmdldFNpemUoKSk7XG4gICAxMDZcdFxuICAgMTA3XHQgICAgICAgIC8vIEdldCB0aGUgb3JpZ2luYWwgZmlsZW5hbWUgYW5kIHNhbml0aXplIGl0XG4gICAxMDhcdCAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gUGF0aHMuZ2V0KGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkpLmdldEZpbGVOYW1lKCkudG9TdHJpbmcoKTtcbiAgIDEwOVx0ICAgICAgICAvLyBSZW1vdmUgYW55IHNwZWNpYWwgY2hhcmFjdGVycyB0aGF0IG1pZ2h0IGNhdXNlIGlzc3Vlc1xuICAgMTEwXHQgICAgICAgIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZUFsbChcIlteYS16QS1aMC05XFxcXC5cXFxcLV1cIiwgXCJfXCIpO1xuICAgMTExXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlNhbml0aXplZCBmaWxlbmFtZTogXCIgKyBmaWxlTmFtZSk7XG4gICAxMTJcdFxuICAgMTEzXHQgICAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGZpbGVuYW1lIHRvIHByZXZlbnQgb3ZlcndyaXRpbmdcbiAgIDExNFx0ICAgICAgICBTdHJpbmcgdW5pcXVlRmlsZU5hbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSArIFwiX1wiICsgZmlsZU5hbWU7XG4gICAxMTVcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiR2VuZXJhdGVkIHVuaXF1ZSBmaWxlbmFtZTogXCIgKyB1bmlxdWVGaWxlTmFtZSk7XG4gICAxMTZcdFxuICAgMTE3XHQgICAgICAgIC8vIEdldCB0aGUgcmVhbCBwYXRoIHRvIHRoZSBpbWFnZXMgZGlyZWN0b3J5IHVzaW5nIGdldFJlYWxQYXRoXG4gICAxMThcdCAgICAgICAgU3RyaW5nIGltYWdlc1BhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlc1wiKTtcbiAgIDExOVx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IHJlYWwgcGF0aDogXCIgKyBpbWFnZXNQYXRoKTtcbiAgIDEyMFx0XG4gICAxMjFcdCAgICAgICAgLy8gQ3JlYXRlIHRoZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgMTIyXHQgICAgICAgIEZpbGUgaW1hZ2VzRGlyID0gbmV3IEZpbGUoaW1hZ2VzUGF0aCk7XG4gICAxMjNcdCAgICAgICAgaWYgKCFpbWFnZXNEaXIuZXhpc3RzKCkpIHtcbiAgIDEyNFx0ICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gaW1hZ2VzRGlyLm1rZGlycygpO1xuICAgMTI1XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDcmVhdGVkIGltYWdlcyBkaXJlY3Rvcnk6IFwiICsgY3JlYXRlZCk7XG4gICAxMjZcdCAgICAgICAgfVxuICAgMTI3XHRcbiAgIDEyOFx0ICAgICAgICAvLyBWZXJpZnkgZGlyZWN0b3J5IGV4aXN0cyBhbmQgaXMgd3JpdGFibGVcbiAgIDEyOVx0ICAgICAgICBpZiAoIWltYWdlc0Rpci5leGlzdHMoKSB8fCAhaW1hZ2VzRGlyLmNhbldyaXRlKCkpIHtcbiAgIDEzMFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IEltYWdlcyBkaXJlY3RvcnkgZG9lc24ndCBleGlzdCBvciBpcyBub3Qgd3JpdGFibGUhXCIpO1xuICAgMTMxXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEaXJlY3RvcnkgZXhpc3RzOiBcIiArIGltYWdlc0Rpci5leGlzdHMoKSk7XG4gICAxMzJcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRpcmVjdG9yeSBjYW4gd3JpdGU6IFwiICsgaW1hZ2VzRGlyLmNhbldyaXRlKCkpO1xuICAgMTMzXHQgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJDYW5ub3Qgd3JpdGUgdG8gaW1hZ2VzIGRpcmVjdG9yeVwiKTtcbiAgIDEzNFx0ICAgICAgICB9XG4gICAxMzVcdFxuICAgMTM2XHQgICAgICAgIC8vIENyZWF0ZSB0aGUgZnVsbCBmaWxlIHBhdGhcbiAgIDEzN1x0ICAgICAgICBTdHJpbmcgZnVsbEZpbGVQYXRoID0gaW1hZ2VzUGF0aCArIEZpbGUuc2VwYXJhdG9yICsgdW5pcXVlRmlsZU5hbWU7XG4gICAxMzhcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBmaWxlIHBhdGg6IFwiICsgZnVsbEZpbGVQYXRoKTtcbiAgIDEzOVx0XG4gICAxNDBcdCAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZVxuICAgMTQxXHQgICAgICAgIHRyeSAoSW5wdXRTdHJlYW0gaW5wdXQgPSBmaWxlUGFydC5nZXRJbnB1dFN0cmVhbSgpO1xuICAgMTQyXHQgICAgICAgICAgICAgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtIG91dHB1dCA9IG5ldyBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW0oZnVsbEZpbGVQYXRoKSkge1xuICAgMTQzXHRcbiAgIDE0NFx0ICAgICAgICAgICAgLy8gQ29weSB0aGUgZmlsZSBjb250ZW50XG4gICAxNDVcdCAgICAgICAgICAgIGJ5dGVbXSBidWZmZXIgPSBuZXcgYnl0ZVs4MTkyXTtcbiAgIDE0Nlx0ICAgICAgICAgICAgaW50IGJ5dGVzUmVhZDtcbiAgIDE0N1x0ICAgICAgICAgICAgd2hpbGUgKChieXRlc1JlYWQgPSBpbnB1dC5yZWFkKGJ1ZmZlcikpICE9IC0xKSB7XG4gICAxNDhcdCAgICAgICAgICAgICAgICBvdXRwdXQud3JpdGUoYnVmZmVyLCAwLCBieXRlc1JlYWQpO1xuICAgMTQ5XHQgICAgICAgICAgICB9XG4gICAxNTBcdFxuICAgMTUxXHQgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgd2FzIGNyZWF0ZWRcbiAgIDE1Mlx0ICAgICAgICAgICAgRmlsZSBzYXZlZEZpbGUgPSBuZXcgRmlsZShmdWxsRmlsZVBhdGgpO1xuICAgMTUzXHQgICAgICAgICAgICBpZiAoc2F2ZWRGaWxlLmV4aXN0cygpKSB7XG4gICAxNTRcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHNhdmVkIHN1Y2Nlc3NmdWxseTogXCIgKyBzYXZlZEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpO1xuICAgMTU1XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBzaXplOiBcIiArIHNhdmVkRmlsZS5sZW5ndGgoKSArIFwiIGJ5dGVzXCIpO1xuICAgMTU2XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMTU3XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IEZpbGUgd2FzIG5vdCBjcmVhdGVkIVwiKTtcbiAgIDE1OFx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkZpbGUgd2FzIG5vdCBjcmVhdGVkXCIpO1xuICAgMTU5XHQgICAgICAgICAgICB9XG4gICAxNjBcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDE2MVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3Igc2F2aW5nIGZpbGU6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTYyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMTYzXHQgICAgICAgICAgICB0aHJvdyBlO1xuICAgMTY0XHQgICAgICAgIH1cbiAgIDE2NVx0XG4gICAxNjZcdCAgICAgICAgLy8gUmV0dXJuIHRoZSByZWxhdGl2ZSBwYXRoIHRvIGJlIHN0b3JlZCBpbiB0aGUgZGF0YWJhc2VcbiAgIDE2N1x0ICAgICAgICAvLyBUaGlzIHBhdGggd2lsbCBiZSB1c2VkIGluIEhUTUwgdG8gcmVmZXJlbmNlIHRoZSBpbWFnZVxuICAgMTY4XHQgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9cIiArIHVuaXF1ZUZpbGVOYW1lO1xuICAgMTY5XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIGRhdGFiYXNlOiBcIiArIHJlbGF0aXZlUGF0aCk7XG4gICAxNzBcdFxuICAgMTcxXHQgICAgICAgIHJldHVybiByZWxhdGl2ZVBhdGg7XG4gICAxNzJcdCAgICB9XG4gICAxNzNcdFxuICAgMTc0XHQgICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAxNzVcdCAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IHJlcXVlc3QuZ2V0U2Vzc2lvbigpO1xuICAgMTc2XHQgICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMURrMWJVUDRFem41Q3U5OFBuVDVVV1gifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2MiwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiIyMjIDIuIE5vdywgbGV0J3MgZml4IHRoZSBpbml0IG1ldGhvZCB0byBlbnN1cmUgdGhlIGltYWdlcyBkaXJlY3RvcnkgaXMgcHJvcGVybHkgY3JlYXRlZDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmZjQ3MDc4YS00MjlkLTQwY2MtODExYy04MTQwMzhkY2ZkZTYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFTajJvWUoxenVyaW5aRm1FM1lZTEcxIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvYWRtaW4vYm9vay1mb3JtLmpzcFwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY3VycmVudC1pbWFnZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJyZW50IGltYWdlOjwvcD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1nUGF0aCA9IGJvb2suZ2V0SW1hZ2VVcmwoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXFxcIi9cXFwiICsgaW1nUGF0aDtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiSW1hZ2UgcGF0aCBpbiBKU1A6IFxcXCIgKyBpbWdQYXRoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiRnVsbCBpbWFnZSBVUkw6IFxcXCIgKyBmdWxsSW1hZ2VQYXRoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFRyeSBkaWZmZXJlbnQgd2F5cyB0byByZWZlcmVuY2UgdGhlIGltYWdlIC0tPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XFxcIjwlPSBmdWxsSW1hZ2VQYXRoICU+XFxcIiBhbHQ9XFxcIjwlPSBib29rLmdldFRpdGxlKCkgJT5cXFwiIHN0eWxlPVxcXCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcXFwiPlxcblxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBBbHNvIHRyeSB3aXRoIGp1c3QgdGhlIHJlbGF0aXZlIHBhdGggLS0+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5BbHRlcm5hdGl2ZSBpbWFnZSBkaXNwbGF5OjwvcD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVxcXCIvPCU9IGltZ1BhdGggJT5cXFwiIGFsdD1cXFwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlxcXCIgc3R5bGU9XFxcIm1heC13aWR0aDogMTAwcHg7IG1heC1oZWlnaHQ6IDE1MHB4O1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbWFnZSBwYXRoOiA8JT0gaW1nUGF0aCAlPjwvcD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkZ1bGwgVVJMOiA8JT0gZnVsbEltYWdlUGF0aCAlPjwvcD5cXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgaW1hZ2UgZmlsZSBleGlzdHNcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyByZWFsUGF0aCA9IGFwcGxpY2F0aW9uLmdldFJlYWxQYXRoKFxcXCIvXFxcIiArIGltZ1BhdGgpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmlsZSBpbWFnZUZpbGUgPSBuZXcgRmlsZShyZWFsUGF0aCk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+SW1hZ2UgZmlsZSBleGlzdHM6IDwlPSBpbWFnZUZpbGUuZXhpc3RzKCkgJT48L3A+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5SZWFsIHBhdGg6IDwlPSByZWFsUGF0aCAlPjwvcD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJoaWRkZW5cXFwiIG5hbWU9XFxcImN1cnJlbnRJbWFnZVVybFxcXCIgdmFsdWU9XFxcIjwlPSBib29rLmdldEltYWdlVXJsKCkgJT5cXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cIiwgXCJuZXdfc3RyXCI6IFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImN1cnJlbnQtaW1hZ2VcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+Q3VycmVudCBpbWFnZTo8L3A+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltZ1BhdGggPSBib29rLmdldEltYWdlVXJsKCk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgZnVsbEltYWdlUGF0aCA9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFxcXCIvXFxcIiArIGltZ1BhdGg7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XFxcIjwlPSBmdWxsSW1hZ2VQYXRoICU+XFxcIiBhbHQ9XFxcIjwlPSBib29rLmdldFRpdGxlKCkgJT5cXFwiIHN0eWxlPVxcXCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiY3VycmVudEltYWdlVXJsXFxcIiB2YWx1ZT1cXFwiPCU9IGJvb2suZ2V0SW1hZ2VVcmwoKSAlPlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTUwLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDE3NX1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIDMuIE5vdywgbGV0J3Mgc2ltcGxpZnkgdGhlIGltYWdlIGRpc3BsYXkgaW4gdGhlIGJvb2stZm9ybS5qc3AgZmlsZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAzMVx0cHVibGljIGNsYXNzIEFkbWluQm9va3NTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIDMyXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgMzNcdCAgICBwcml2YXRlIEJvb2tEQU8gYm9va0RBTztcbiAgICAzNFx0XG4gICAgMzVcdCAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgIDM2XHQgICAgICAgIGJvb2tEQU8gPSBuZXcgQm9va0RBTygpO1xuICAgIDM3XHRcbiAgICAzOFx0ICAgICAgICAvLyBDcmVhdGUgaW1hZ2VzIGRpcmVjdG9yeSBhdCBzdGFydHVwXG4gICAgMzlcdCAgICAgICAgdHJ5IHtcbiAgICA0MFx0ICAgICAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIGltYWdlcyBkaXJlY3RvcnlcbiAgICA0MVx0ICAgICAgICAgICAgU3RyaW5nIGltYWdlc1BhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlc1wiKTtcbiAgICA0Mlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSByZWFsIHBhdGg6IFwiICsgaW1hZ2VzUGF0aCk7XG4gICAgNDNcdFxuICAgIDQ0XHQgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgNDVcdCAgICAgICAgICAgIEZpbGUgaW1hZ2VzRGlyID0gbmV3IEZpbGUoaW1hZ2VzUGF0aCk7XG4gICAgNDZcdCAgICAgICAgICAgIGlmICghaW1hZ2VzRGlyLmV4aXN0cygpKSB7XG4gICAgNDdcdCAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBpbWFnZXNEaXIubWtkaXJzKCk7XG4gICAgNDhcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGNyZWF0ZWQgYXQgc3RhcnR1cDogXCIgKyBjcmVhdGVkKTtcbiAgICA0OVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgICA1MFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgNTFcdCAgICAgICAgICAgIH1cbiAgICA1Mlx0XG4gICAgNTNcdCAgICAgICAgICAgIC8vIENoZWNrIGRpcmVjdG9yeSBwZXJtaXNzaW9uc1xuICAgIDU0XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGV4aXN0czogXCIgKyBpbWFnZXNEaXIuZXhpc3RzKCkpO1xuICAgIDU1XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGlzIGRpcmVjdG9yeTogXCIgKyBpbWFnZXNEaXIuaXNEaXJlY3RvcnkoKSk7XG4gICAgNTZcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgY2FuIHJlYWQ6IFwiICsgaW1hZ2VzRGlyLmNhblJlYWQoKSk7XG4gICAgNTdcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgY2FuIHdyaXRlOiBcIiArIGltYWdlc0Rpci5jYW5Xcml0ZSgpKTtcbiAgICA1OFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBhYnNvbHV0ZSBwYXRoOiBcIiArIGltYWdlc0Rpci5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAgNTlcdFxuICAgIDYwXHQgICAgICAgICAgICAvLyBUcnkgdG8gY3JlYXRlIGEgdGVzdCBmaWxlIHRvIHZlcmlmeSB3cml0ZSBwZXJtaXNzaW9uc1xuICAgIDYxXHQgICAgICAgICAgICB0cnkge1xuICAgIDYyXHQgICAgICAgICAgICAgICAgRmlsZSB0ZXN0RmlsZSA9IG5ldyBGaWxlKGltYWdlc1BhdGggKyBGaWxlLnNlcGFyYXRvciArIFwidGVzdC50eHRcIik7XG4gICAgNjNcdCAgICAgICAgICAgICAgICBpZiAodGVzdEZpbGUuY3JlYXRlTmV3RmlsZSgpKSB7XG4gICAgNjRcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVGVzdCBmaWxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgIDY1XHQgICAgICAgICAgICAgICAgICAgIHRlc3RGaWxlLmRlbGV0ZSgpOyAvLyBDbGVhbiB1cFxuICAgIDY2XHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICA2N1x0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGYWlsZWQgdG8gY3JlYXRlIHRlc3QgZmlsZVwiKTtcbiAgICA2OFx0ICAgICAgICAgICAgICAgIH1cbiAgICA2OVx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA3MFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGNyZWF0aW5nIHRlc3QgZmlsZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgNzFcdCAgICAgICAgICAgIH1cbiAgICA3Mlx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDczXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBjcmVhdGluZyBpbWFnZXMgZGlyZWN0b3J5OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICA3NFx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICA3NVx0ICAgICAgICB9XG4gICAgNzZcdCAgICB9XG4gICAgNzdcdFxuICAgIDc4XHQgICAgLy8gSGVscGVyIG1ldGhvZCB0byBoYW5kbGUgZmlsZSB1cGxvYWRcbiAgICA3OVx0ICAgIHByaXZhdGUgU3RyaW5nIHNhdmVGaWxlKFBhcnQgZmlsZVBhcnQsIFN0cmluZyBhcHBsaWNhdGlvblBhdGgpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgODBcdCAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHBhcnQgaXMgdmFsaWRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxVHBOQk1kMm56anRNcmhvTkx0b2NOayJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjYyLCJjdXJyZW50V29ya2luZ0RpcmVjdG9yeSI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn19fV0sInJlc3BvbnNlX3RleHQiOiIjIyMgMy4gTm93LCBsZXQncyBzaW1wbGlmeSB0aGUgaW1hZ2UgZGlzcGxheSBpbiB0aGUgYm9vay1mb3JtLmpzcCBmaWxlOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjliNTE0NGUyLTRhYmUtNDMyYi04NjA5LTRmY2MyNzIzOTBkNyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUxlcGI2WU5tR1hkYkFTUHR4NFFSOEoiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3NcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxLCA1MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgNC4gTGV0J3MgYWRkIGEgQ1NTIGNsYXNzIHRvIG1ha2UgdGhlIGltYWdlIGRpc3BsYXkgYmV0dGVyIGluIHRoZSBhZG1pbiBwYW5lbDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3AuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDE0Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJib29rSW1hZ2VcIj5Cb29rIEltYWdlPC9sYWJlbD5cbiAgIDE0OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiYm9va0ltYWdlXCIgbmFtZT1cImJvb2tJbWFnZVwiIGFjY2VwdD1cImltYWdlLypcIiBvbmNoYW5nZT1cImNvbnNvbGUubG9nKCdGaWxlIHNlbGVjdGVkOiAnICsgdGhpcy5maWxlc1swXS5uYW1lKTtcIj5cbiAgIDE0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LWltYWdlXCI+XG4gICAxNTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+Q3VycmVudCBpbWFnZTo8L3A+XG4gICAxNTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgIDE1M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1nUGF0aCA9IGJvb2suZ2V0SW1hZ2VVcmwoKTtcbiAgIDE1NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgZnVsbEltYWdlUGF0aCA9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1nUGF0aDtcbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlPlxuICAgMTU2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cbiAgIDE1N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjdXJyZW50SW1hZ2VVcmxcIiB2YWx1ZT1cIjwlPSBib29rLmdldEltYWdlVXJsKCkgJT5cIj5cbiAgIDE1OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTU5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgMTYwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb3JtLWhpbnRcIj5TZWxlY3QgYW4gaW1hZ2UgZmlsZSB0byB1cGxvYWQuIFN1cHBvcnRlZCBmb3JtYXRzOiBKUEcsIFBORywgR0lGLjwvcD5cbiAgIDE2MVx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNjJcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFTajJvWUoxenVyaW5aRm1FM1lZTEcxIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjIsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IiMjIyA0LiBMZXQncyBhZGQgYSBDU1MgY2xhc3MgdG8gbWFrZSB0aGUgaW1hZ2UgZGlzcGxheSBiZXR0ZXIgaW4gdGhlIGFkbWluIHBhbmVsOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjBiZGY5NTg3LTVhZWQtNGYzNS05NzU1LWE4Nzk4ZDFhM2EwMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUd3bkx1UU11aUYzajVZQzlVVjF2WE0iLCJ0b29sX25hbWUiOiJsYXVuY2gtcHJvY2VzcyIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwiZ3JlcCAtbiBcXFwiYWRtaW5cXFwiIHNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzIHwgaGVhZCAtMjBcIiwgXCJ3YWl0XCI6IHRydWUsIFwibWF4X3dhaXRfc2Vjb25kc1wiOiAzMH0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGZpbmQgdGhlIGFkbWluIHBhbmVsIHN0eWxlczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3M6XG4gICAgIDFcdC8qIEdsb2JhbCBTdHlsZXMgKi9cbiAgICAgMlx0KiB7XG4gICAgIDNcdCAgbWFyZ2luOiAwO1xuICAgICA0XHQgIHBhZGRpbmc6IDA7XG4gICAgIDVcdCAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgNlx0fVxuICAgICA3XHRcbiAgICAgOFx0Ym9keSB7XG4gICAgIDlcdCAgZm9udC1mYW1pbHk6IFwiU2Vnb2UgVUlcIiwgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7XG4gICAgMTBcdCAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAxMVx0ICBjb2xvcjogIzMzMztcbiAgICAxMlx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO1xuICAgIDEzXHQgIHBhZGRpbmctdG9wOiA4MHB4OyAvKiBBZGQgcGFkZGluZyB0byBhY2NvdW50IGZvciBmaXhlZCBoZWFkZXIgKi9cbiAgICAxNFx0fVxuICAgIDE1XHRcbiAgICAxNlx0LmJhY2tncm91bmQtd3JhcHBlciB7XG4gICAgMTdcdCAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi9pbWFnZXMvZWJvb2stYmFja2dyb3VuZC5qcGcnKTtcbiAgICAxOFx0ICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAgIDE5XHQgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcbiAgICAyMFx0ICBiYWNrZ3JvdW5kLWF0dGFjaG1lbnQ6IGZpeGVkO1xuICAgIDIxXHQgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAyMlx0fVxuICAgIDIzXHRcbiAgICAyNFx0LmJhY2tncm91bmQtd3JhcHBlcjo6YmVmb3JlIHtcbiAgICAyNVx0ICBjb250ZW50OiAnJztcbiAgICAyNlx0ICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgMjdcdCAgdG9wOiAwO1xuICAgIDI4XHQgIGxlZnQ6IDA7XG4gICAgMjlcdCAgd2lkdGg6IDEwMCU7XG4gICAgMzBcdCAgaGVpZ2h0OiAxMDAlO1xuICAgIDMxXHQgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44NSk7XG4gICAgMzJcdCAgei1pbmRleDogLTE7XG4gICAgMzNcdH1cbiAgICAzNFx0XG4gICAgMzVcdC5jb250YWluZXIge1xuICAgIDM2XHQgIHdpZHRoOiAxMDAlO1xuICAgIDM3XHQgIG1heC13aWR0aDogMTIwMHB4O1xuICAgIDM4XHQgIG1hcmdpbjogMCBhdXRvO1xuICAgIDM5XHQgIHBhZGRpbmc6IDIwcHg7XG4gICAgNDBcdH1cbiAgICA0MVx0XG4gICAgNDJcdGEge1xuICAgIDQzXHQgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICA0NFx0ICBjb2xvcjogIzAwN2JmZjtcbiAgICA0NVx0fVxuICAgIDQ2XHRcbiAgICA0N1x0YTpob3ZlciB7XG4gICAgNDhcdCAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgNDlcdH1cbiAgICA1MFx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyMDA3XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFMZXBiNllObUdYZGJBU1B0eDRRUjhKIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjIsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGZpbmQgdGhlIGFkbWluIHBhbmVsIHN0eWxlczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIwODRiMDg2Zi0wMTZiLTQwMmEtYWYwZC00MjAwZjMyZDBjMmUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFBVjlNWnFSSG9RNFlSb3FoeVZDeVBnIiwidG9vbF9uYW1lIjoibGF1bmNoLXByb2Nlc3MiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcImdyZXAgLW4gXFxcImZvcm1cXFwiIHNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzIHwgaGVhZCAtMjBcIiwgXCJ3YWl0XCI6IHRydWUsIFwibWF4X3dhaXRfc2Vjb25kc1wiOiAzMH0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIHNlYXJjaCBmb3IgZm9ybSBzdHlsZXM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlIGFyZSB0aGUgcmVzdWx0cyBmcm9tIGV4ZWN1dGluZyB0aGUgY29tbWFuZC5cbiAgICAgICAgPHJldHVybi1jb2RlPlxuICAgICAgICAwXG4gICAgICAgIDwvcmV0dXJuLWNvZGU+XG4gICAgICAgIDxzdGRvdXQ+XG4gICAgICAgIDM0NDoubWFpbi1uYXYgLmFkbWluLWxpbmsge1xuMzUyOi5tYWluLW5hdiAuYWRtaW4tbGluazpob3ZlciB7XG4zNTk6Lm1haW4tbmF2IC5hZG1pbi1saW5rLmFjdGl2ZSB7XG5cbiAgICAgICAgPC9zdGRvdXQ+XG4gICAgICAgIDxzdGRlcnI+XG4gICAgICAgIFxuICAgICAgICA8L3N0ZGVycj4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFHd25MdVFNdWlGM2o1WUM5VVYxdlhNIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjMsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIHNlYXJjaCBmb3IgZm9ybSBzdHlsZXM6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNDcxZWE4OWQtZDhlNS00ZGMyLWI3MjEtOGY0Zjk4ZjdlZjliIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxQ1VXUG9zR0FTNGE3WGtIUmV0R0pmcSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3NcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiLyogRm9ybSBTdHlsZXMgKi9cXG4uZm9ybS1ncm91cCB7XFxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xcbn1cXG5cXG4uZm9ybS10ZXh0IHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgcGFkZGluZzogMTBweDtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XFxuICBib3JkZXItcmFkaXVzOiA0cHg7XFxufVxcblxcbi5mb3JtLXJvdyB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgZ2FwOiAyMHB4O1xcbn1cXG5cXG4uZm9ybS1yb3cgLmZvcm0tZ3JvdXAge1xcbiAgZmxleDogMTtcXG59XCIsIFwibmV3X3N0clwiOiBcIi8qIEZvcm0gU3R5bGVzICovXFxuLmZvcm0tZ3JvdXAge1xcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcXG59XFxuXFxuLmZvcm0tdGV4dCB7XFxuICB3aWR0aDogMTAwJTtcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbn1cXG5cXG4uZm9ybS1yb3cge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcXG4gIGdhcDogMjBweDtcXG59XFxuXFxuLmZvcm0tcm93IC5mb3JtLWdyb3VwIHtcXG4gIGZsZXg6IDE7XFxufVxcblxcbi8qIEJvb2sgaW1hZ2UgdXBsb2FkIHN0eWxlcyAqL1xcbi5jdXJyZW50LWltYWdlIHtcXG4gIG1hcmdpbi10b3A6IDEwcHg7XFxuICBwYWRkaW5nOiAxMHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxufVxcblxcbi5jdXJyZW50LWltYWdlIGltZyB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIG1hcmdpbjogNXB4IDA7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcXG59XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxMzgsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTU3fV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQncyBhZGQgc3R5bGVzIGZvciB0aGUgY3VycmVudC1pbWFnZSBjbGFzczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUgYXJlIHRoZSByZXN1bHRzIGZyb20gZXhlY3V0aW5nIHRoZSBjb21tYW5kLlxuICAgICAgICA8cmV0dXJuLWNvZGU+XG4gICAgICAgIDBcbiAgICAgICAgPC9yZXR1cm4tY29kZT5cbiAgICAgICAgPHN0ZG91dD5cbiAgICAgICAgOTA6ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG45NTogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbjEzODouZm9ybS1ncm91cCB7XG4xNDI6LmZvcm0tdGV4dCB7XG4xNDk6LmZvcm0tcm93IHtcbjE1NTouZm9ybS1yb3cgLmZvcm0tZ3JvdXAge1xuMjAxOiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuMjM2Oi5mb3JtLWFjdGlvbnMge1xuMjUxOiAgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTBweCk7IH1cbjI1MjogIHRvIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9XG4zMDg6LnNlYXJjaC1iYXIgZm9ybSB7XG41MTA6ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG42MDc6ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG42Mzg6ICB0cmFuc2Zvcm06IG5vbmU7XG42Njg6ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpO1xuNjk4OiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuNXMgZWFzZTtcbjcwMjogIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7XG43Nzc6ICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpO1xuNzgwOi5ib29rLWluZm8gZm9ybSB7XG44MTI6ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG5cbiAgICAgICAgPC9zdGRvdXQ+XG4gICAgICAgIDxzdGRlcnI+XG4gICAgICAgIFxuICAgICAgICA8L3N0ZGVycj4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFBVjlNWnFSSG9RNFlSb3FoeVZDeVBnIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjQsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGFkZCBzdHlsZXMgZm9yIHRoZSBjdXJyZW50LWltYWdlIGNsYXNzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjYzYTBkODE2LTQ4MjEtNGEyZC1hYWIyLTI0NTkyMmZiOThhMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMU5YVDJLc1RlNGM1bVFockQxaHpLNkoiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3NcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxMzAsIDE4MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQncyB2aWV3IG1vcmUgb2YgdGhlIENTUyBmaWxlIHRvIGZpbmQgdGhlIHJpZ2h0IHBsYWNlIHRvIGFkZCBvdXIgc3R5bGVzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmFpbGVkIHRvIGVkaXQgdGhlIGZpbGUgc3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3MuIFNlZSBiZWxvdyBmb3IgZGV0YWlscy5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcbk5vIHJlcGxhY2VtZW50IHdhcyBwZXJmb3JtZWQsIG9sZFN0ciBkaWQgbm90IGFwcGVhciB2ZXJiYXRpbSBpbiBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzcy5cblRoZSBjb250ZW50IGluIHRoZSBzcGVjaWZpZWQgcmVnaW9uIGlzOlxuICAgMTM0XHQgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAxMzVcdH1cbiAgIDEzNlx0XG4gICAxMzdcdC8qIEZvcm1zICovXG4gICAxMzhcdC5mb3JtLWdyb3VwIHtcbiAgIDEzOVx0ICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgMTQwXHR9XG4gICAxNDFcdFxuICAgMTQyXHQuZm9ybS10ZXh0IHtcbiAgIDE0M1x0ICBkaXNwbGF5OiBibG9jaztcbiAgIDE0NFx0ICBtYXJnaW4tdG9wOiA1cHg7XG4gICAxNDVcdCAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAxNDZcdCAgY29sb3I6ICM2Yzc1N2Q7XG4gICAxNDdcdH1cbiAgIDE0OFx0XG4gICAxNDlcdC5mb3JtLXJvdyB7XG4gICAxNTBcdCAgZGlzcGxheTogZmxleDtcbiAgIDE1MVx0ICBnYXA6IDIwcHg7XG4gICAxNTJcdCAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgIDE1M1x0fVxuICAgMTU0XHRcbiAgIDE1NVx0LmZvcm0tcm93IC5mb3JtLWdyb3VwIHtcbiAgIDE1Nlx0ICBmbGV4OiAxO1xuICAgMTU3XHQgIG1hcmdpbi1ib3R0b206IDA7XG4gICAxNThcdH1cbiAgIDE1OVx0XG4gICAxNjBcdGxhYmVsIHtcbiAgIDE2MVx0ICBkaXNwbGF5OiBibG9jaztcblxuRGlmZiBiZXR3ZWVuIG9sZFN0ciBhbmQgdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4tLS0gb2xkU3RyXG4rKysgcmVnaW9uQ29udGVudFxuQEAgLTEsMjEgKzEsMjAgQEBcbi0vKiBGb3JtIFN0eWxlcyAqL1xuIC5mb3JtLWdyb3VwIHtcbiAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gfVxuIFxuIC5mb3JtLXRleHQge1xuLSAgd2lkdGg6IDEwMCU7XG4tICBwYWRkaW5nOiAxMHB4O1xuLSAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbi0gIGJvcmRlci1yYWRpdXM6IDRweDtcbisgIGRpc3BsYXk6IGJsb2NrO1xuKyAgbWFyZ2luLXRvcDogNXB4O1xuKyAgZm9udC1zaXplOiAwLjg1ZW07XG4rICBjb2xvcjogIzZjNzU3ZDtcbiB9XG4gXG4gLmZvcm0tcm93IHtcbiAgIGRpc3BsYXk6IGZsZXg7XG4tICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICBnYXA6IDIwcHg7XG4rICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuIH1cbiBcbiAuZm9ybS1yb3cgLmZvcm0tZ3JvdXAge1xuICAgZmxleDogMTtcbi19XG4rICBtYXJnaW4tYm90dG9tOiAwO1xuXG5cbkZpeCBmYWlsZWQgc3RyX3JlcGxhY2VfZW50cmllcyBhY2NvcmRpbmdseSBhbmQgdHJ5IGFnYWluLlxuIiwiaXNfZXJyb3IiOnRydWUsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFDVVdQb3NHQVM0YTdYa0hSZXRHSmZxIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjQsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIHZpZXcgbW9yZSBvZiB0aGUgQ1NTIGZpbGUgdG8gZmluZCB0aGUgcmlnaHQgcGxhY2UgdG8gYWRkIG91ciBzdHlsZXM6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZjE0MTFlMDItYTNlYy00MGNlLTk4NzUtNDY2MzYyY2EzMWIyIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxQVFnVUNjQzlDSE5NU2d0Z1NjbUVpeiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzc1wiLCBcInZpZXdfcmFuZ2VcIjogWzIzMCwgMjUwXX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFkZCBvdXIgc3R5bGVzIGF0IHRoZSBlbmQgb2YgdGhlIGZvcm0gc2VjdGlvbjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3M6XG4gICAxMzBcdCAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAxMzFcdCAgZm9udC1zaXplOiAwLjllbTtcbiAgIDEzMlx0ICBtYXJnaW46IDJweDtcbiAgIDEzM1x0ICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAxMzRcdCAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgIDEzNVx0fVxuICAgMTM2XHRcbiAgIDEzN1x0LyogRm9ybXMgKi9cbiAgIDEzOFx0LmZvcm0tZ3JvdXAge1xuICAgMTM5XHQgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAxNDBcdH1cbiAgIDE0MVx0XG4gICAxNDJcdC5mb3JtLXRleHQge1xuICAgMTQzXHQgIGRpc3BsYXk6IGJsb2NrO1xuICAgMTQ0XHQgIG1hcmdpbi10b3A6IDVweDtcbiAgIDE0NVx0ICBmb250LXNpemU6IDAuODVlbTtcbiAgIDE0Nlx0ICBjb2xvcjogIzZjNzU3ZDtcbiAgIDE0N1x0fVxuICAgMTQ4XHRcbiAgIDE0OVx0LmZvcm0tcm93IHtcbiAgIDE1MFx0ICBkaXNwbGF5OiBmbGV4O1xuICAgMTUxXHQgIGdhcDogMjBweDtcbiAgIDE1Mlx0ICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgMTUzXHR9XG4gICAxNTRcdFxuICAgMTU1XHQuZm9ybS1yb3cgLmZvcm0tZ3JvdXAge1xuICAgMTU2XHQgIGZsZXg6IDE7XG4gICAxNTdcdCAgbWFyZ2luLWJvdHRvbTogMDtcbiAgIDE1OFx0fVxuICAgMTU5XHRcbiAgIDE2MFx0bGFiZWwge1xuICAgMTYxXHQgIGRpc3BsYXk6IGJsb2NrO1xuICAgMTYyXHQgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgIDE2M1x0ICBmb250LXdlaWdodDogNjAwO1xuICAgMTY0XHR9XG4gICAxNjVcdFxuICAgMTY2XHRpbnB1dFt0eXBlPVwidGV4dFwiXSxcbiAgIDE2N1x0aW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdLFxuICAgMTY4XHRpbnB1dFt0eXBlPVwiZW1haWxcIl0sXG4gICAxNjlcdGlucHV0W3R5cGU9XCJudW1iZXJcIl0sXG4gICAxNzBcdHNlbGVjdCxcbiAgIDE3MVx0dGV4dGFyZWEge1xuICAgMTcyXHQgIHdpZHRoOiAxMDAlO1xuICAgMTczXHQgIHBhZGRpbmc6IDEycHggMTVweDtcbiAgIDE3NFx0ICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgMTc1XHQgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgIDE3Nlx0ICBmb250LXNpemU6IDFlbTtcbiAgIDE3N1x0ICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xuICAgMTc4XHQgIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICAgMTc5XHR9XG4gICAxODBcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMjAwN1xuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxTlhUMktzVGU0YzVtUWhyRDFoeks2SiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjY0LCJjdXJyZW50V29ya2luZ0RpcmVjdG9yeSI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn19fV0sInJlc3BvbnNlX3RleHQiOiJMZXQncyBhZGQgb3VyIHN0eWxlcyBhdCB0aGUgZW5kIG9mIHRoZSBmb3JtIHNlY3Rpb246XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiM2UxYTQ5OGUtOTI4Yy00MDE0LWFmYmQtMTNlMTJjOTUyODM5IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxSmU0cDVlWEdFdThWWExQalVNMUU5MyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3NcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiLmZvcm0tYWN0aW9ucyB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZ2FwOiAxMHB4O1xcbiAgbWFyZ2luLXRvcDogMjBweDtcXG59XFxuXFxuLyogQWxlcnRzICovXCIsIFwibmV3X3N0clwiOiBcIi5mb3JtLWFjdGlvbnMge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGdhcDogMTBweDtcXG4gIG1hcmdpbi10b3A6IDIwcHg7XFxufVxcblxcbi8qIEJvb2sgaW1hZ2UgdXBsb2FkIHN0eWxlcyAqL1xcbi5jdXJyZW50LWltYWdlIHtcXG4gIG1hcmdpbi10b3A6IDEwcHg7XFxuICBwYWRkaW5nOiAxMHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxufVxcblxcbi5jdXJyZW50LWltYWdlIGltZyB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIG1hcmdpbjogNXB4IDA7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcXG59XFxuXFxuLyogQWxlcnRzICovXCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAyMzYsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMjQyfV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgbGV0J3MgYWRkIG91ciBzdHlsZXM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzOlxuICAgMjMwXHRcbiAgIDIzMVx0dGV4dGFyZWEge1xuICAgMjMyXHQgIHJlc2l6ZTogdmVydGljYWw7XG4gICAyMzNcdCAgbWluLWhlaWdodDogMTAwcHg7XG4gICAyMzRcdH1cbiAgIDIzNVx0XG4gICAyMzZcdC5mb3JtLWFjdGlvbnMge1xuICAgMjM3XHQgIGRpc3BsYXk6IGZsZXg7XG4gICAyMzhcdCAgZ2FwOiAxMHB4O1xuICAgMjM5XHQgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAyNDBcdH1cbiAgIDI0MVx0XG4gICAyNDJcdC8qIEFsZXJ0cyAqL1xuICAgMjQzXHQuYWxlcnQge1xuICAgMjQ0XHQgIHBhZGRpbmc6IDE1cHg7XG4gICAyNDVcdCAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgIDI0Nlx0ICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAyNDdcdCAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgIDI0OFx0fVxuICAgMjQ5XHRcbiAgIDI1MFx0QGtleWZyYW1lcyBmYWRlSW4ge1xuVG90YWwgbGluZXMgaW4gZmlsZTogMjAwN1xuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxQVFnVUNjQzlDSE5NU2d0Z1NjbUVpeiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjY0LCJjdXJyZW50V29ya2luZ0RpcmVjdG9yeSI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn19fV0sInJlc3BvbnNlX3RleHQiOiJOb3cgbGV0J3MgYWRkIG91ciBzdHlsZXM6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZGYzODE3MWQtNTMwMC00YmM3LWJjMjAtNjc3Yzc0MTRiYjgyIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMgU3VtbWFyeSBvZiBDaGFuZ2VzXG5cbkkndmUgbWFkZSBzZXZlcmFsIGltcHJvdmVtZW50cyB0byBmaXggdGhlIGltYWdlIHVwbG9hZCBmdW5jdGlvbmFsaXR5IGZvciB0aGUgYWRtaW4gd2hlbiBhZGRpbmcgYm9va3M6XG5cbjEuICoqRml4ZWQgdGhlIHNhdmVGaWxlIG1ldGhvZCBpbiBBZG1pbkJvb2tzU2VydmxldC5qYXZhKio6XG4gICAtIE5vdyB1c2VzIGBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlc1wiKWAgdG8gZ2V0IHRoZSBjb3JyZWN0IHBhdGhcbiAgIC0gQWRkZWQgZmlsZW5hbWUgc2FuaXRpemF0aW9uIHRvIHByZXZlbnQgaXNzdWVzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzXG4gICAtIEltcHJvdmVkIGVycm9yIGhhbmRsaW5nIGFuZCB2YWxpZGF0aW9uXG4gICAtIFNpbXBsaWZpZWQgdGhlIGNvZGUgYW5kIHJlbW92ZWQgcmVkdW5kYW50IG9wZXJhdGlvbnNcblxuMi4gKipJbXByb3ZlZCB0aGUgaW5pdCBtZXRob2QgaW4gQWRtaW5Cb29rc1NlcnZsZXQuamF2YSoqOlxuICAgLSBTaW1wbGlmaWVkIHRoZSBkaXJlY3RvcnkgY3JlYXRpb24gcHJvY2Vzc1xuICAgLSBVc2VkIHRoZSBjb3JyZWN0IHBhdGggdG8gdGhlIGltYWdlcyBkaXJlY3RvcnlcblxuMy4gKipTaW1wbGlmaWVkIHRoZSBpbWFnZSBkaXNwbGF5IGluIGJvb2stZm9ybS5qc3AqKjpcbiAgIC0gUmVtb3ZlZCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb24gYW5kIG11bHRpcGxlIGltYWdlIGRpc3BsYXkgYXR0ZW1wdHNcbiAgIC0gS2VwdCBvbmx5IHRoZSBlc3NlbnRpYWwgY29kZSBmb3IgZGlzcGxheWluZyB0aGUgY3VycmVudCBpbWFnZVxuXG40LiAqKkFkZGVkIENTUyBzdHlsZXMgZm9yIGJldHRlciBpbWFnZSBkaXNwbGF5Kio6XG4gICAtIEFkZGVkIHN0eWxlcyBmb3IgdGhlIGN1cnJlbnQtaW1hZ2UgY2xhc3NcbiAgIC0gSW1wcm92ZWQgdGhlIHZpc3VhbCBhcHBlYXJhbmNlIG9mIHRoZSBpbWFnZSBwcmV2aWV3XG5cblRoZXNlIGNoYW5nZXMgc2hvdWxkIGZpeCB0aGUgaXNzdWVzIHdpdGggaW1hZ2UgdXBsb2FkcyB3aGVuIGFuIGFkbWluIGFkZHMgYSBib29rLiBUaGUgaW1hZ2VzIHdpbGwgbm93IGJlIHByb3Blcmx5IHNhdmVkIHRvIHRoZSBjb3JyZWN0IGRpcmVjdG9yeSBhbmQgZGlzcGxheWVkIGNvcnJlY3RseSBpbiB0aGUgYWRtaW4gaW50ZXJmYWNlLlxuXG5UaGUga2V5IGltcHJvdmVtZW50cyBhcmU6XG4xLiBQcm9wZXIgcGF0aCBoYW5kbGluZyBmb3IgaW1hZ2Ugc3RvcmFnZVxuMi4gQmV0dGVyIGVycm9yIGhhbmRsaW5nIGFuZCB2YWxpZGF0aW9uXG4zLiBDbGVhbmVyIFVJIGZvciBpbWFnZSBkaXNwbGF5XG40LiBDb25zaXN0ZW50IGFwcHJvYWNoIHRvIGltYWdlIFVSTHMgYWNyb3NzIHRoZSBhcHBsaWNhdGlvblxuXG5Xb3VsZCB5b3UgbGlrZSBtZSB0byBleHBsYWluIGFueSBwYXJ0IG9mIHRoZSBpbXBsZW1lbnRhdGlvbiBpbiBtb3JlIGRldGFpbD9cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3MuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIzMlx0ICByZXNpemU6IHZlcnRpY2FsO1xuICAgMjMzXHQgIG1pbi1oZWlnaHQ6IDEwMHB4O1xuICAgMjM0XHR9XG4gICAyMzVcdFxuICAgMjM2XHQuZm9ybS1hY3Rpb25zIHtcbiAgIDIzN1x0ICBkaXNwbGF5OiBmbGV4O1xuICAgMjM4XHQgIGdhcDogMTBweDtcbiAgIDIzOVx0ICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgMjQwXHR9XG4gICAyNDFcdFxuICAgMjQyXHQvKiBCb29rIGltYWdlIHVwbG9hZCBzdHlsZXMgKi9cbiAgIDI0M1x0LmN1cnJlbnQtaW1hZ2Uge1xuICAgMjQ0XHQgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAyNDVcdCAgcGFkZGluZzogMTBweDtcbiAgIDI0Nlx0ICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgMjQ3XHQgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgIDI0OFx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1xuICAgMjQ5XHQgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgIDI1MFx0fVxuICAgMjUxXHRcbiAgIDI1Mlx0LmN1cnJlbnQtaW1hZ2UgaW1nIHtcbiAgIDI1M1x0ICBkaXNwbGF5OiBibG9jaztcbiAgIDI1NFx0ICBtYXJnaW46IDVweCAwO1xuICAgMjU1XHQgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAyNTZcdCAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgIDI1N1x0fVxuICAgMjU4XHRcbiAgIDI1OVx0LyogQWxlcnRzICovXG4gICAyNjBcdC5hbGVydCB7XG4gICAyNjFcdCAgcGFkZGluZzogMTVweDtcbiAgIDI2Mlx0ICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgMjYzXHQgIGJvcmRlci1yYWRpdXM6IDRweDtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxSmU0cDVlWEdFdThWWExQalVNMUU5MyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIiwiZm9sZGVyUm9vdCI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZSwiY3VycmVudFRlcm1pbmFsIjp7InRlcm1pbmFsSWQiOjY0LCJjdXJyZW50V29ya2luZ0RpcmVjdG9yeSI6Ii9Vc2Vycy9zYW5kaHlhc2hyZXN0aGEvZWNsaXBzZS13b3Jrc3BhY2UvRWJvb2stYXBwIn19fV0sInJlc3BvbnNlX3RleHQiOiIjIyBTdW1tYXJ5IG9mIENoYW5nZXNcblxuSSd2ZSBtYWRlIHNldmVyYWwgaW1wcm92ZW1lbnRzIHRvIGZpeCB0aGUgaW1hZ2UgdXBsb2FkIGZ1bmN0aW9uYWxpdHkgZm9yIHRoZSBhZG1pbiB3aGVuIGFkZGluZyBib29rczpcblxuMS4gKipGaXhlZCB0aGUgc2F2ZUZpbGUgbWV0aG9kIGluIEFkbWluQm9va3NTZXJ2bGV0LmphdmEqKjpcbiAgIC0gTm93IHVzZXMgYGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzXCIpYCB0byBnZXQgdGhlIGNvcnJlY3QgcGF0aFxuICAgLSBBZGRlZCBmaWxlbmFtZSBzYW5pdGl6YXRpb24gdG8gcHJldmVudCBpc3N1ZXMgd2l0aCBzcGVjaWFsIGNoYXJhY3RlcnNcbiAgIC0gSW1wcm92ZWQgZXJyb3IgaGFuZGxpbmcgYW5kIHZhbGlkYXRpb25cbiAgIC0gU2ltcGxpZmllZCB0aGUgY29kZSBhbmQgcmVtb3ZlZCByZWR1bmRhbnQgb3BlcmF0aW9uc1xuXG4yLiAqKkltcHJvdmVkIHRoZSBpbml0IG1ldGhvZCBpbiBBZG1pbkJvb2tzU2VydmxldC5qYXZhKio6XG4gICAtIFNpbXBsaWZpZWQgdGhlIGRpcmVjdG9yeSBjcmVhdGlvbiBwcm9jZXNzXG4gICAtIFVzZWQgdGhlIGNvcnJlY3QgcGF0aCB0byB0aGUgaW1hZ2VzIGRpcmVjdG9yeVxuXG4zLiAqKlNpbXBsaWZpZWQgdGhlIGltYWdlIGRpc3BsYXkgaW4gYm9vay1mb3JtLmpzcCoqOlxuICAgLSBSZW1vdmVkIGRlYnVnZ2luZyBpbmZvcm1hdGlvbiBhbmQgbXVsdGlwbGUgaW1hZ2UgZGlzcGxheSBhdHRlbXB0c1xuICAgLSBLZXB0IG9ubHkgdGhlIGVzc2VudGlhbCBjb2RlIGZvciBkaXNwbGF5aW5nIHRoZSBjdXJyZW50IGltYWdlXG5cbjQuICoqQWRkZWQgQ1NTIHN0eWxlcyBmb3IgYmV0dGVyIGltYWdlIGRpc3BsYXkqKjpcbiAgIC0gQWRkZWQgc3R5bGVzIGZvciB0aGUgY3VycmVudC1pbWFnZSBjbGFzc1xuICAgLSBJbXByb3ZlZCB0aGUgdmlzdWFsIGFwcGVhcmFuY2Ugb2YgdGhlIGltYWdlIHByZXZpZXdcblxuVGhlc2UgY2hhbmdlcyBzaG91bGQgZml4IHRoZSBpc3N1ZXMgd2l0aCBpbWFnZSB1cGxvYWRzIHdoZW4gYW4gYWRtaW4gYWRkcyBhIGJvb2suIFRoZSBpbWFnZXMgd2lsbCBub3cgYmUgcHJvcGVybHkgc2F2ZWQgdG8gdGhlIGNvcnJlY3QgZGlyZWN0b3J5IGFuZCBkaXNwbGF5ZWQgY29ycmVjdGx5IGluIHRoZSBhZG1pbiBpbnRlcmZhY2UuXG5cblRoZSBrZXkgaW1wcm92ZW1lbnRzIGFyZTpcbjEuIFByb3BlciBwYXRoIGhhbmRsaW5nIGZvciBpbWFnZSBzdG9yYWdlXG4yLiBCZXR0ZXIgZXJyb3IgaGFuZGxpbmcgYW5kIHZhbGlkYXRpb25cbjMuIENsZWFuZXIgVUkgZm9yIGltYWdlIGRpc3BsYXlcbjQuIENvbnNpc3RlbnQgYXBwcm9hY2ggdG8gaW1hZ2UgVVJMcyBhY3Jvc3MgdGhlIGFwcGxpY2F0aW9uXG5cbldvdWxkIHlvdSBsaWtlIG1lIHRvIGV4cGxhaW4gYW55IHBhcnQgb2YgdGhlIGltcGxlbWVudGF0aW9uIGluIG1vcmUgZGV0YWlsP1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiZmE3ZTA2ZTYtYjgxZi00YzNlLWFlZTAtNDk5MjFjYmU3ZGFiIiwidXVpZCI6IjRiYmQ4MDFiLTM0ODEtNGMyOC05ZTVhLWFlODIyYjZhZWI2OCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0NzczNjkzMjQ5OCwidG9UaW1lc3RhbXAiOjE3NDc3Mzc2MDU0MTcsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJyZXF1ZXN0X2lkIjoiNzA2ZDI3MDktMzkyYi00N2U3LWE1MTItN2FhMTkyZWIyOTNjIiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2ODg2NjY2ZS05NWYzLTQ1NTYtOWEyNS02NjUyNjcyY2UzZWIiLCJyZXF1ZXN0X21lc3NhZ2UiOiJ3aGlsZSBhZGRpbmcgdGhlIGJvb2sgaW1hZ2UgdGhhdCBjaG9vc2UgZmlsZSBidXR0b24gaSB3bmF0IG1vcmUgYXR0cmFjdGl2ZSBhbmQgYWZ0ZXIgY2hvb3NpbmcgdGhlIGltYWdlIHRoZSBjaG9vc2VuIGltYWdlIGFsc28gZGlzcGxheSBwcm9wZXJseSBkb25vdCBhZGQgYW55IG5ldyBmaWxlIGRvIGl0IGluIGV4aXRzdGluZyIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJ3aGlsZSBhZGRpbmcgdGhlIGJvb2sgaW1hZ2UgdGhhdCBjaG9vc2UgZmlsZSBidXR0b24gaSB3bmF0IG1vcmUgYXR0cmFjdGl2ZSBhbmQgYWZ0ZXIgY2hvb3NpbmcgdGhlIGltYWdlIHRoZSBjaG9vc2VuIGltYWdlIGFsc28gZGlzcGxheSBwcm9wZXJseSBkb25vdCBhZGQgYW55IG5ldyBmaWxlIGRvIGl0IGluIGV4aXRzdGluZyJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxTkNvWWp5dkZuTENRb0ZtNVViTVdKeSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvYWRtaW4vYm9vay1mb3JtLmpzcFwiLCBcInZpZXdfcmFuZ2VcIjogWzE0NSwgMTY1XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkkgdW5kZXJzdGFuZCB5b3Ugd2FudCB0byBtYWtlIHRoZSBcIkNob29zZSBGaWxlXCIgYnV0dG9uIG1vcmUgYXR0cmFjdGl2ZSBhbmQgZGlzcGxheSB0aGUgY2hvc2VuIGltYWdlIHByb3Blcmx5IGJlZm9yZSB1cGxvYWRpbmcsIHdpdGhvdXQgYWRkaW5nIGFueSBuZXcgZmlsZXMuIExldCdzIGVuaGFuY2UgdGhlIGV4aXN0aW5nIGZpbGUgaW5wdXQgYW5kIGFkZCBKYXZhU2NyaXB0IHRvIHByZXZpZXcgdGhlIHNlbGVjdGVkIGltYWdlLlxuXG5MZXQncyBtb2RpZnkgdGhlIGJvb2stZm9ybS5qc3AgZmlsZSB0byBpbXByb3ZlIHRoZSBmaWxlIGlucHV0IHN0eWxpbmcgYW5kIGFkZCBpbWFnZSBwcmV2aWV3IGZ1bmN0aW9uYWxpdHk6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6IndoaWxlIGFkZGluZyB0aGUgYm9vayBpbWFnZSB0aGF0IGNob29zZSBmaWxlIGJ1dHRvbiBpIHduYXQgbW9yZSBhdHRyYWN0aXZlIGFuZCBhZnRlciBjaG9vc2luZyB0aGUgaW1hZ2UgdGhlIGNob29zZW4gaW1hZ2UgYWxzbyBkaXNwbGF5IHByb3Blcmx5IGRvbm90IGFkZCBhbnkgbmV3IGZpbGUgZG8gaXQgaW4gZXhpdHN0aW5nIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjQsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IkkgdW5kZXJzdGFuZCB5b3Ugd2FudCB0byBtYWtlIHRoZSBcIkNob29zZSBGaWxlXCIgYnV0dG9uIG1vcmUgYXR0cmFjdGl2ZSBhbmQgZGlzcGxheSB0aGUgY2hvc2VuIGltYWdlIHByb3Blcmx5IGJlZm9yZSB1cGxvYWRpbmcsIHdpdGhvdXQgYWRkaW5nIGFueSBuZXcgZmlsZXMuIExldCdzIGVuaGFuY2UgdGhlIGV4aXN0aW5nIGZpbGUgaW5wdXQgYW5kIGFkZCBKYXZhU2NyaXB0IHRvIHByZXZpZXcgdGhlIHNlbGVjdGVkIGltYWdlLlxuXG5MZXQncyBtb2RpZnkgdGhlIGJvb2stZm9ybS5qc3AgZmlsZSB0byBpbXByb3ZlIHRoZSBmaWxlIGlucHV0IHN0eWxpbmcgYW5kIGFkZCBpbWFnZSBwcmV2aWV3IGZ1bmN0aW9uYWxpdHk6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMTFhZDZmNzEtOGJiYS00YmNiLWFmOTgtYmEzY2M5ZWI2YmUwIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxMkVDcHNQakVSZENZVzlvNlBxdzNmbiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvYWRtaW4vYm9vay1mb3JtLmpzcFwiLCBcInZpZXdfcmFuZ2VcIjogWzE5MCwgMTk5XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBsZXQncyBjaGVjayBpZiB0aGVyZSdzIGFueSBKYXZhU2NyaXB0IGFscmVhZHkgaW5jbHVkZWQgaW4gdGhlIGZpbGU6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwOlxuICAgMTQ1XHRcbiAgIDE0Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJib29rSW1hZ2VcIj5Cb29rIEltYWdlPC9sYWJlbD5cbiAgIDE0OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiYm9va0ltYWdlXCIgbmFtZT1cImJvb2tJbWFnZVwiIGFjY2VwdD1cImltYWdlLypcIiBvbmNoYW5nZT1cImNvbnNvbGUubG9nKCdGaWxlIHNlbGVjdGVkOiAnICsgdGhpcy5maWxlc1swXS5uYW1lKTtcIj5cbiAgIDE0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LWltYWdlXCI+XG4gICAxNTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+Q3VycmVudCBpbWFnZTo8L3A+XG4gICAxNTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgIDE1M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1nUGF0aCA9IGJvb2suZ2V0SW1hZ2VVcmwoKTtcbiAgIDE1NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgZnVsbEltYWdlUGF0aCA9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1nUGF0aDtcbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlPlxuICAgMTU2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cbiAgIDE1N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjdXJyZW50SW1hZ2VVcmxcIiB2YWx1ZT1cIjwlPSBib29rLmdldEltYWdlVXJsKCkgJT5cIj5cbiAgIDE1OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTU5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgMTYwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb3JtLWhpbnRcIj5TZWxlY3QgYW4gaW1hZ2UgZmlsZSB0byB1cGxvYWQuIFN1cHBvcnRlZCBmb3JtYXRzOiBKUEcsIFBORywgR0lGLjwvcD5cbiAgIDE2MVx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNjJcdFxuICAgMTYzXHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1hY3Rpb25zXCI+XG4gICAxNjRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIGlkPVwic2F2ZUJ1dHRvblwiPlNhdmU8L2J1dHRvbj5cbiAgIDE2NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT1yZXF1ZXN0LmdldENvbnRleHRQYXRoKCklPi9hZG1pbi9ib29rc1wiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIj5DYW5jZWw8L2E+XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxOTlcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMU5Db1lqeXZGbkxDUW9GbTVVYk1XSnkifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2NCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIGNoZWNrIGlmIHRoZXJlJ3MgYW55IEphdmFTY3JpcHQgYWxyZWFkeSBpbmNsdWRlZCBpbiB0aGUgZmlsZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJjZTBjNjBjNS0yMGJkLTRiZGYtYjUxMy0wMjU0YjViZWMzYTMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFBU3BWMjFtc25odkZzYm9Xd1o2TFhyIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvYWRtaW4vYm9vay1mb3JtLmpzcFwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiYm9va0ltYWdlXFxcIj5Cb29rIEltYWdlPC9sYWJlbD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImZpbGVcXFwiIGlkPVxcXCJib29rSW1hZ2VcXFwiIG5hbWU9XFxcImJvb2tJbWFnZVxcXCIgYWNjZXB0PVxcXCJpbWFnZS8qXFxcIiBvbmNoYW5nZT1cXFwiY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0ZWQ6ICcgKyB0aGlzLmZpbGVzWzBdLm5hbWUpO1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY3VycmVudC1pbWFnZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJyZW50IGltYWdlOjwvcD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1nUGF0aCA9IGJvb2suZ2V0SW1hZ2VVcmwoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXFxcIi9cXFwiICsgaW1nUGF0aDtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cXFwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cXFwiIGFsdD1cXFwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlxcXCIgc3R5bGU9XFxcIm1heC13aWR0aDogMTAwcHg7IG1heC1oZWlnaHQ6IDE1MHB4O1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiaGlkZGVuXFxcIiBuYW1lPVxcXCJjdXJyZW50SW1hZ2VVcmxcXFwiIHZhbHVlPVxcXCI8JT0gYm9vay5nZXRJbWFnZVVybCgpICU+XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XFxcImZvcm0taGludFxcXCI+U2VsZWN0IGFuIGltYWdlIGZpbGUgdG8gdXBsb2FkLiBTdXBwb3J0ZWQgZm9ybWF0czogSlBHLCBQTkcsIEdJRi48L3A+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XCIsIFwibmV3X3N0clwiOiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJib29rSW1hZ2VcXFwiPkJvb2sgSW1hZ2U8L2xhYmVsPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjdXN0b20tZmlsZS11cGxvYWRcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImZpbGVcXFwiIGlkPVxcXCJib29rSW1hZ2VcXFwiIG5hbWU9XFxcImJvb2tJbWFnZVxcXCIgYWNjZXB0PVxcXCJpbWFnZS8qXFxcIiBvbmNoYW5nZT1cXFwicHJldmlld0ltYWdlKHRoaXMpO1xcXCIgY2xhc3M9XFxcImZpbGUtaW5wdXRcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiYm9va0ltYWdlXFxcIiBjbGFzcz1cXFwiZmlsZS1sYWJlbFxcXCI+Q2hvb3NlIGEgZmlsZTwvbGFiZWw+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cXFwiZmlsZS1uYW1lXFxcIj5ObyBmaWxlIGNob3Nlbjwvc3Bhbj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVxcXCJpbWFnZS1wcmV2aWV3LWNvbnRhaW5lclxcXCIgY2xhc3M9XFxcIjwlPSAoYm9vayAhPSBudWxsICYmIGJvb2suZ2V0SW1hZ2VVcmwoKSAhPSBudWxsICYmICFib29rLmdldEltYWdlVXJsKCkuaXNFbXB0eSgpKSA/IFxcXCJcXFwiIDogXFxcImhpZGRlblxcXCIgJT5cXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY3VycmVudC1pbWFnZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgaWQ9XFxcInByZXZpZXctbGFiZWxcXFwiPjwlPSAoYm9vayAhPSBudWxsICYmIGJvb2suZ2V0SW1hZ2VVcmwoKSAhPSBudWxsICYmICFib29rLmdldEltYWdlVXJsKCkuaXNFbXB0eSgpKSA/IFxcXCJDdXJyZW50IGltYWdlOlxcXCIgOiBcXFwiUHJldmlldzpcXFwiICU+PC9wPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltZ1BhdGggPSAoYm9vayAhPSBudWxsICYmIGJvb2suZ2V0SW1hZ2VVcmwoKSAhPSBudWxsKSA/IGJvb2suZ2V0SW1hZ2VVcmwoKSA6IFxcXCJcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gaW1nUGF0aC5pc0VtcHR5KCkgPyBcXFwiXFxcIiA6IChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcXFwiL1xcXCIgKyBpbWdQYXRoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYWx0VGV4dCA9IChib29rICE9IG51bGwpID8gYm9vay5nZXRUaXRsZSgpIDogXFxcIlByZXZpZXdcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBpZD1cXFwiaW1hZ2UtcHJldmlld1xcXCIgc3JjPVxcXCI8JT0gZnVsbEltYWdlUGF0aCAlPlxcXCIgYWx0PVxcXCI8JT0gYWx0VGV4dCAlPlxcXCIgc3R5bGU9XFxcIm1heC13aWR0aDogMTUwcHg7IG1heC1oZWlnaHQ6IDIwMHB4O1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGJvb2sgIT0gbnVsbCAmJiBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCAmJiAhYm9vay5nZXRJbWFnZVVybCgpLmlzRW1wdHkoKSkgeyAlPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJoaWRkZW5cXFwiIG5hbWU9XFxcImN1cnJlbnRJbWFnZVVybFxcXCIgdmFsdWU9XFxcIjwlPSBib29rLmdldEltYWdlVXJsKCkgJT5cXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XFxcImZvcm0taGludFxcXCI+U2VsZWN0IGFuIGltYWdlIGZpbGUgdG8gdXBsb2FkLiBTdXBwb3J0ZWQgZm9ybWF0czogSlBHLCBQTkcsIEdJRi48L3A+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNjcmlwdD5cXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcmV2aWV3SW1hZ2UoaW5wdXQpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlLW5hbWUnKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2UtcHJldmlldy1jb250YWluZXInKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3Jyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3TGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlldy1sYWJlbCcpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBpbnB1dC5maWxlc1swXS5uYW1lO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWVTcGFuLnRleHRDb250ZW50ID0gZmlsZU5hbWU7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3JjID0gZS50YXJnZXQucmVzdWx0O1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdMYWJlbC50ZXh0Q29udGVudCA9ICdQcmV2aWV3Oic7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbnB1dC5maWxlc1swXSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZVNwYW4udGV4dENvbnRlbnQgPSAnTm8gZmlsZSBjaG9zZW4nO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2NyaXB0PlwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTQ2LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDE2MX1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0J3MgbW9kaWZ5IHRoZSBmaWxlIGlucHV0IGFuZCBhZGQgSmF2YVNjcmlwdCBmb3IgaW1hZ2UgcHJldmlldzpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3A6XG4gICAxOTBcdCAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgMTkxXHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxOTJcdCAgICAgICAgICAgIDwvZGl2PlxuICAgMTkzXHQgICAgICAgIDwvZGl2PlxuICAgMTk0XHQgICAgPC9kaXY+XG4gICAxOTVcdFxuICAgMTk2XHQgICAgPGpzcDppbmNsdWRlIHBhZ2U9XCIuLi9mb290ZXIuanNwXCIgLz5cbiAgIDE5N1x0PC9ib2R5PlxuICAgMTk4XHQ8L2h0bWw+XG4gICAxOTlcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTk5XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDEyRUNwc1BqRVJkQ1lXOW82UHF3M2ZuIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjQsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIG1vZGlmeSB0aGUgZmlsZSBpbnB1dCBhbmQgYWRkIEphdmFTY3JpcHQgZm9yIGltYWdlIHByZXZpZXc6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYzFiNmJjMGYtYTMxYi00Mzk3LTkwZjQtNGQ2ZTM3ZWFiZWZlIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxMTdoUmFoWkhDVWhCRjlRZXFLTHFndCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3NcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiLyogQm9vayBpbWFnZSB1cGxvYWQgc3R5bGVzICovXFxuLmN1cnJlbnQtaW1hZ2Uge1xcbiAgbWFyZ2luLXRvcDogMTBweDtcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG59XFxuXFxuLmN1cnJlbnQtaW1hZ2UgaW1nIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgbWFyZ2luOiA1cHggMDtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XFxuICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpO1xcbn1cIiwgXCJuZXdfc3RyXCI6IFwiLyogQm9vayBpbWFnZSB1cGxvYWQgc3R5bGVzICovXFxuLmN1cnJlbnQtaW1hZ2Uge1xcbiAgbWFyZ2luLXRvcDogMTBweDtcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG59XFxuXFxuLmN1cnJlbnQtaW1hZ2UgaW1nIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgbWFyZ2luOiA1cHggMDtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XFxuICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpO1xcbn1cXG5cXG4vKiBDdXN0b20gZmlsZSB1cGxvYWQgYnV0dG9uICovXFxuLmN1c3RvbS1maWxlLXVwbG9hZCB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XFxufVxcblxcbi5maWxlLWlucHV0IHtcXG4gIHdpZHRoOiAwLjFweDtcXG4gIGhlaWdodDogMC4xcHg7XFxuICBvcGFjaXR5OiAwO1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHotaW5kZXg6IC0xO1xcbn1cXG5cXG4uZmlsZS1sYWJlbCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBwYWRkaW5nOiAxMHB4IDE1cHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzO1xcbiAgZm9udC13ZWlnaHQ6IDUwMDtcXG59XFxuXFxuLmZpbGUtbGFiZWw6aG92ZXIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNjlkOTtcXG59XFxuXFxuLmZpbGUtbGFiZWw6YWN0aXZlIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDYyY2M7XFxufVxcblxcbiNmaWxlLW5hbWUge1xcbiAgZm9udC1zaXplOiAwLjllbTtcXG4gIGNvbG9yOiAjNjY2O1xcbn1cXG5cXG4uaGlkZGVuIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMjQyLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDI1N31dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIGFkZCB0aGUgQ1NTIHN0eWxlcyBmb3IgdGhlIGN1c3RvbSBmaWxlIHVwbG9hZCBidXR0b246XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAxNDJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBpZD1cInN0b2NrXCIgbmFtZT1cInN0b2NrXCIgbWluPVwiMFwiIHZhbHVlPVwiPCU9IGJvb2sgIT0gbnVsbCA/IGJvb2suZ2V0U3RvY2soKSA6IFwiXCIgJT5cIiByZXF1aXJlZD5cbiAgIDE0M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTQ0XHQgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE0NVx0XG4gICAxNDZcdCAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAxNDdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYm9va0ltYWdlXCI+Qm9vayBJbWFnZTwvbGFiZWw+XG4gICAxNDhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VzdG9tLWZpbGUtdXBsb2FkXCI+XG4gICAxNDlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJib29rSW1hZ2VcIiBuYW1lPVwiYm9va0ltYWdlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG9uY2hhbmdlPVwicHJldmlld0ltYWdlKHRoaXMpO1wiIGNsYXNzPVwiZmlsZS1pbnB1dFwiPlxuICAgMTUwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJib29rSW1hZ2VcIiBjbGFzcz1cImZpbGUtbGFiZWxcIj5DaG9vc2UgYSBmaWxlPC9sYWJlbD5cbiAgIDE1MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cImZpbGUtbmFtZVwiPk5vIGZpbGUgY2hvc2VuPC9zcGFuPlxuICAgMTUyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNTNcdFxuICAgMTU0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImltYWdlLXByZXZpZXctY29udGFpbmVyXCIgY2xhc3M9XCI8JT0gKGJvb2sgIT0gbnVsbCAmJiBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCAmJiAhYm9vay5nZXRJbWFnZVVybCgpLmlzRW1wdHkoKSkgPyBcIlwiIDogXCJoaWRkZW5cIiAlPlwiPlxuICAgMTU1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LWltYWdlXCI+XG4gICAxNTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPVwicHJldmlldy1sYWJlbFwiPjwlPSAoYm9vayAhPSBudWxsICYmIGJvb2suZ2V0SW1hZ2VVcmwoKSAhPSBudWxsICYmICFib29rLmdldEltYWdlVXJsKCkuaXNFbXB0eSgpKSA/IFwiQ3VycmVudCBpbWFnZTpcIiA6IFwiUHJldmlldzpcIiAlPjwvcD5cbiAgIDE1N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgIDE1OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltZ1BhdGggPSAoYm9vayAhPSBudWxsICYmIGJvb2suZ2V0SW1hZ2VVcmwoKSAhPSBudWxsKSA/IGJvb2suZ2V0SW1hZ2VVcmwoKSA6IFwiXCI7XG4gICAxNTlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gaW1nUGF0aC5pc0VtcHR5KCkgPyBcIlwiIDogKHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1nUGF0aCk7XG4gICAxNjBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBhbHRUZXh0ID0gKGJvb2sgIT0gbnVsbCkgPyBib29rLmdldFRpdGxlKCkgOiBcIlByZXZpZXdcIjtcbiAgIDE2MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJT5cbiAgIDE2Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBpZD1cImltYWdlLXByZXZpZXdcIiBzcmM9XCI8JT0gZnVsbEltYWdlUGF0aCAlPlwiIGFsdD1cIjwlPSBhbHRUZXh0ICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDE1MHB4OyBtYXgtaGVpZ2h0OiAyMDBweDtcIj5cbiAgIDE2M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGJvb2sgIT0gbnVsbCAmJiBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCAmJiAhYm9vay5nZXRJbWFnZVVybCgpLmlzRW1wdHkoKSkgeyAlPlxuICAgMTY0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjdXJyZW50SW1hZ2VVcmxcIiB2YWx1ZT1cIjwlPSBib29rLmdldEltYWdlVXJsKCkgJT5cIj5cbiAgIDE2NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgMTY2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTY3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNjhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZvcm0taGludFwiPlNlbGVjdCBhbiBpbWFnZSBmaWxlIHRvIHVwbG9hZC4gU3VwcG9ydGVkIGZvcm1hdHM6IEpQRywgUE5HLCBHSUYuPC9wPlxuICAgMTY5XHQgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE3MFx0XG4gICAxNzFcdCAgICAgICAgICAgICAgICAgICAgICAgIDxzY3JpcHQ+XG4gICAxNzJcdCAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByZXZpZXdJbWFnZShpbnB1dCkge1xuICAgMTczXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlLW5hbWUnKTtcbiAgIDE3NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlLXByZXZpZXctY29udGFpbmVyJyk7XG4gICAxNzVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0ltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlLXByZXZpZXcnKTtcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3TGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlldy1sYWJlbCcpO1xuICAgMTc3XHRcbiAgIDE3OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkge1xuICAgMTc5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9IGlucHV0LmZpbGVzWzBdLm5hbWU7XG4gICAxODBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWVTcGFuLnRleHRDb250ZW50ID0gZmlsZU5hbWU7XG4gICAxODFcdFxuICAgMTgyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgMTgzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XG4gICAxODRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdJbWFnZS5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAxODVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdMYWJlbC50ZXh0Q29udGVudCA9ICdQcmV2aWV3Oic7XG4gICAxODZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAxODdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgIDE4OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbnB1dC5maWxlc1swXSk7XG4gICAxODlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgMTkwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lU3Bhbi50ZXh0Q29udGVudCA9ICdObyBmaWxlIGNob3Nlbic7XG4gICAxOTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAxOTJcdCAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDE5M1x0ICAgICAgICAgICAgICAgICAgICAgICAgPC9zY3JpcHQ+XG4gICAxOTRcdFxuICAgMTk1XHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1hY3Rpb25zXCI+XG4gICAxOTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIGlkPVwic2F2ZUJ1dHRvblwiPlNhdmU8L2J1dHRvbj5cbiAgIDE5N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT1yZXF1ZXN0LmdldENvbnRleHRQYXRoKCklPi9hZG1pbi9ib29rc1wiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIj5DYW5jZWw8L2E+XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUFTcFYyMW1zbmh2RnNib1d3WjZMWHIifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2NCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIGFkZCB0aGUgQ1NTIHN0eWxlcyBmb3IgdGhlIGN1c3RvbSBmaWxlIHVwbG9hZCBidXR0b246XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNTQyMWI0MTMtMGQwOS00M2E4LTg2OWMtN2Y2ZmI0MGVhZDI4IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSd2ZSBlbmhhbmNlZCB0aGUgZmlsZSB1cGxvYWQgZnVuY3Rpb25hbGl0eSBpbiB0aGUgYm9vayBmb3JtIHdpdGggdGhlIGZvbGxvd2luZyBpbXByb3ZlbWVudHM6XG5cbjEuICoqU3R5bGVkIHRoZSBmaWxlIGlucHV0IGJ1dHRvbioqOlxuICAgLSBDcmVhdGVkIGEgY3VzdG9tLCBhdHRyYWN0aXZlIFwiQ2hvb3NlIGEgZmlsZVwiIGJ1dHRvblxuICAgLSBBZGRlZCBhIHRleHQgZGlzcGxheSB0aGF0IHNob3dzIHRoZSBuYW1lIG9mIHRoZSBzZWxlY3RlZCBmaWxlXG4gICAtIFVzZWQgbW9kZXJuIENTUyB0byBoaWRlIHRoZSBkZWZhdWx0IGZpbGUgaW5wdXQgYW5kIHJlcGxhY2UgaXQgd2l0aCBhIHN0eWxlZCBidXR0b25cblxuMi4gKipBZGRlZCBpbWFnZSBwcmV2aWV3IGZ1bmN0aW9uYWxpdHkqKjpcbiAgIC0gV2hlbiBhIHVzZXIgc2VsZWN0cyBhbiBpbWFnZSwgaXQncyBpbW1lZGlhdGVseSBkaXNwbGF5ZWQgYXMgYSBwcmV2aWV3XG4gICAtIFRoZSBwcmV2aWV3IHVzZXMgdGhlIHNhbWUgc3R5bGluZyBhcyB0aGUgY3VycmVudCBpbWFnZSBkaXNwbGF5XG4gICAtIFRoZSBwcmV2aWV3IGNvbnRhaW5lciBpcyBoaWRkZW4gdW50aWwgYSBmaWxlIGlzIHNlbGVjdGVkXG5cbjMuICoqSW1wcm92ZWQgdGhlIHVzZXIgZXhwZXJpZW5jZSoqOlxuICAgLSBDbGVhciB2aXN1YWwgZmVlZGJhY2sgd2hlbiBhIGZpbGUgaXMgc2VsZWN0ZWRcbiAgIC0gQ29uc2lzdGVudCBzdHlsaW5nIHdpdGggdGhlIHJlc3Qgb2YgdGhlIGFwcGxpY2F0aW9uXG4gICAtIFNtb290aCB0cmFuc2l0aW9ucyBhbmQgaG92ZXIgZWZmZWN0c1xuXG40LiAqKk1haW50YWluZWQgYmFja3dhcmQgY29tcGF0aWJpbGl0eSoqOlxuICAgLSBUaGUgZm9ybSBzdGlsbCB3b3JrcyB0aGUgc2FtZSB3YXkgaW4gdGhlIGJhY2tlbmRcbiAgIC0gTm8gbmV3IGZpbGVzIHdlcmUgYWRkZWQsIG9ubHkgZXhpc3RpbmcgZmlsZXMgd2VyZSBtb2RpZmllZFxuXG5UaGVzZSBjaGFuZ2VzIG1ha2UgdGhlIGltYWdlIHVwbG9hZCBwcm9jZXNzIG1vcmUgaW50dWl0aXZlIGFuZCB2aXN1YWxseSBhcHBlYWxpbmcuIFVzZXJzIGNhbiBub3cgc2VlIGEgcHJldmlldyBvZiB0aGVpciBzZWxlY3RlZCBpbWFnZSBiZWZvcmUgc3VibWl0dGluZyB0aGUgZm9ybSwgd2hpY2ggaGVscHMgcHJldmVudCBlcnJvcnMgYW5kIGltcHJvdmVzIHRoZSBvdmVyYWxsIHVzZXIgZXhwZXJpZW5jZS5cblxuVGhlIGltcGxlbWVudGF0aW9uIHVzZXMgc3RhbmRhcmQgSFRNTCwgQ1NTLCBhbmQgSmF2YVNjcmlwdCB0ZWNobmlxdWVzOlxuLSBDU1MgdG8gc3R5bGUgdGhlIGN1c3RvbSBmaWxlIGlucHV0IGJ1dHRvblxuLSBKYXZhU2NyaXB0IHRvIGhhbmRsZSB0aGUgZmlsZSBzZWxlY3Rpb24gYW5kIHByZXZpZXdcbi0gSFRNTCBzdHJ1Y3R1cmUgdG8gb3JnYW5pemUgdGhlIGVsZW1lbnRzXG5cbldvdWxkIHlvdSBsaWtlIG1lIHRvIGV4cGxhaW4gYW55IHBhcnQgb2YgdGhlIGltcGxlbWVudGF0aW9uIGluIG1vcmUgZGV0YWlsP1xuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzcy5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjM4XHQgIGdhcDogMTBweDtcbiAgIDIzOVx0ICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgMjQwXHR9XG4gICAyNDFcdFxuICAgMjQyXHQvKiBCb29rIGltYWdlIHVwbG9hZCBzdHlsZXMgKi9cbiAgIDI0M1x0LmN1cnJlbnQtaW1hZ2Uge1xuICAgMjQ0XHQgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAyNDVcdCAgcGFkZGluZzogMTBweDtcbiAgIDI0Nlx0ICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgMjQ3XHQgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgIDI0OFx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1xuICAgMjQ5XHQgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgIDI1MFx0fVxuICAgMjUxXHRcbiAgIDI1Mlx0LmN1cnJlbnQtaW1hZ2UgaW1nIHtcbiAgIDI1M1x0ICBkaXNwbGF5OiBibG9jaztcbiAgIDI1NFx0ICBtYXJnaW46IDVweCAwO1xuICAgMjU1XHQgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAyNTZcdCAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgIDI1N1x0fVxuICAgMjU4XHRcbiAgIDI1OVx0LyogQ3VzdG9tIGZpbGUgdXBsb2FkIGJ1dHRvbiAqL1xuICAgMjYwXHQuY3VzdG9tLWZpbGUtdXBsb2FkIHtcbiAgIDI2MVx0ICBkaXNwbGF5OiBmbGV4O1xuICAgMjYyXHQgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAyNjNcdCAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgIDI2NFx0fVxuICAgMjY1XHRcbiAgIDI2Nlx0LmZpbGUtaW5wdXQge1xuICAgMjY3XHQgIHdpZHRoOiAwLjFweDtcbiAgIDI2OFx0ICBoZWlnaHQ6IDAuMXB4O1xuICAgMjY5XHQgIG9wYWNpdHk6IDA7XG4gICAyNzBcdCAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgIDI3MVx0ICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAyNzJcdCAgei1pbmRleDogLTE7XG4gICAyNzNcdH1cbiAgIDI3NFx0XG4gICAyNzVcdC5maWxlLWxhYmVsIHtcbiAgIDI3Nlx0ICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAyNzdcdCAgcGFkZGluZzogMTBweCAxNXB4O1xuICAgMjc4XHQgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XG4gICAyNzlcdCAgY29sb3I6IHdoaXRlO1xuICAgMjgwXHQgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgIDI4MVx0ICBjdXJzb3I6IHBvaW50ZXI7XG4gICAyODJcdCAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgMjgzXHQgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcztcbiAgIDI4NFx0ICBmb250LXdlaWdodDogNTAwO1xuICAgMjg1XHR9XG4gICAyODZcdFxuICAgMjg3XHQuZmlsZS1sYWJlbDpob3ZlciB7XG4gICAyODhcdCAgYmFja2dyb3VuZC1jb2xvcjogIzAwNjlkOTtcbiAgIDI4OVx0fVxuICAgMjkwXHRcbiAgIDI5MVx0LmZpbGUtbGFiZWw6YWN0aXZlIHtcbiAgIDI5Mlx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2MmNjO1xuICAgMjkzXHR9XG4gICAyOTRcdFxuICAgMjk1XHQjZmlsZS1uYW1lIHtcbiAgIDI5Nlx0ICBmb250LXNpemU6IDAuOWVtO1xuICAgMjk3XHQgIGNvbG9yOiAjNjY2O1xuICAgMjk4XHR9XG4gICAyOTlcdFxuICAgMzAwXHQuaGlkZGVuIHtcbiAgIDMwMVx0ICBkaXNwbGF5OiBub25lO1xuICAgMzAyXHR9XG4gICAzMDNcdFxuICAgMzA0XHQvKiBBbGVydHMgKi9cbiAgIDMwNVx0LmFsZXJ0IHtcbiAgIDMwNlx0ICBwYWRkaW5nOiAxNXB4O1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDExN2hSYWhaSENVaEJGOVFlcUtMcWd0In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjQsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IkkndmUgZW5oYW5jZWQgdGhlIGZpbGUgdXBsb2FkIGZ1bmN0aW9uYWxpdHkgaW4gdGhlIGJvb2sgZm9ybSB3aXRoIHRoZSBmb2xsb3dpbmcgaW1wcm92ZW1lbnRzOlxuXG4xLiAqKlN0eWxlZCB0aGUgZmlsZSBpbnB1dCBidXR0b24qKjpcbiAgIC0gQ3JlYXRlZCBhIGN1c3RvbSwgYXR0cmFjdGl2ZSBcIkNob29zZSBhIGZpbGVcIiBidXR0b25cbiAgIC0gQWRkZWQgYSB0ZXh0IGRpc3BsYXkgdGhhdCBzaG93cyB0aGUgbmFtZSBvZiB0aGUgc2VsZWN0ZWQgZmlsZVxuICAgLSBVc2VkIG1vZGVybiBDU1MgdG8gaGlkZSB0aGUgZGVmYXVsdCBmaWxlIGlucHV0IGFuZCByZXBsYWNlIGl0IHdpdGggYSBzdHlsZWQgYnV0dG9uXG5cbjIuICoqQWRkZWQgaW1hZ2UgcHJldmlldyBmdW5jdGlvbmFsaXR5Kio6XG4gICAtIFdoZW4gYSB1c2VyIHNlbGVjdHMgYW4gaW1hZ2UsIGl0J3MgaW1tZWRpYXRlbHkgZGlzcGxheWVkIGFzIGEgcHJldmlld1xuICAgLSBUaGUgcHJldmlldyB1c2VzIHRoZSBzYW1lIHN0eWxpbmcgYXMgdGhlIGN1cnJlbnQgaW1hZ2UgZGlzcGxheVxuICAgLSBUaGUgcHJldmlldyBjb250YWluZXIgaXMgaGlkZGVuIHVudGlsIGEgZmlsZSBpcyBzZWxlY3RlZFxuXG4zLiAqKkltcHJvdmVkIHRoZSB1c2VyIGV4cGVyaWVuY2UqKjpcbiAgIC0gQ2xlYXIgdmlzdWFsIGZlZWRiYWNrIHdoZW4gYSBmaWxlIGlzIHNlbGVjdGVkXG4gICAtIENvbnNpc3RlbnQgc3R5bGluZyB3aXRoIHRoZSByZXN0IG9mIHRoZSBhcHBsaWNhdGlvblxuICAgLSBTbW9vdGggdHJhbnNpdGlvbnMgYW5kIGhvdmVyIGVmZmVjdHNcblxuNC4gKipNYWludGFpbmVkIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkqKjpcbiAgIC0gVGhlIGZvcm0gc3RpbGwgd29ya3MgdGhlIHNhbWUgd2F5IGluIHRoZSBiYWNrZW5kXG4gICAtIE5vIG5ldyBmaWxlcyB3ZXJlIGFkZGVkLCBvbmx5IGV4aXN0aW5nIGZpbGVzIHdlcmUgbW9kaWZpZWRcblxuVGhlc2UgY2hhbmdlcyBtYWtlIHRoZSBpbWFnZSB1cGxvYWQgcHJvY2VzcyBtb3JlIGludHVpdGl2ZSBhbmQgdmlzdWFsbHkgYXBwZWFsaW5nLiBVc2VycyBjYW4gbm93IHNlZSBhIHByZXZpZXcgb2YgdGhlaXIgc2VsZWN0ZWQgaW1hZ2UgYmVmb3JlIHN1Ym1pdHRpbmcgdGhlIGZvcm0sIHdoaWNoIGhlbHBzIHByZXZlbnQgZXJyb3JzIGFuZCBpbXByb3ZlcyB0aGUgb3ZlcmFsbCB1c2VyIGV4cGVyaWVuY2UuXG5cblRoZSBpbXBsZW1lbnRhdGlvbiB1c2VzIHN0YW5kYXJkIEhUTUwsIENTUywgYW5kIEphdmFTY3JpcHQgdGVjaG5pcXVlczpcbi0gQ1NTIHRvIHN0eWxlIHRoZSBjdXN0b20gZmlsZSBpbnB1dCBidXR0b25cbi0gSmF2YVNjcmlwdCB0byBoYW5kbGUgdGhlIGZpbGUgc2VsZWN0aW9uIGFuZCBwcmV2aWV3XG4tIEhUTUwgc3RydWN0dXJlIHRvIG9yZ2FuaXplIHRoZSBlbGVtZW50c1xuXG5Xb3VsZCB5b3UgbGlrZSBtZSB0byBleHBsYWluIGFueSBwYXJ0IG9mIHRoZSBpbXBsZW1lbnRhdGlvbiBpbiBtb3JlIGRldGFpbD9cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsicmVxdWVzdF9pZCI6IjkwODhiODJhLTEwMzgtNDI2OC1iNTY4LTVlMDg3MzAzOTg3ZiIsInV1aWQiOiIzYzM4MDVjNC1hYTY4LTRkZWQtYmMxNS1iMGMzNzU2YzJiNTAiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjE3NDc3Mzc2MDU0MTcsInRvVGltZXN0YW1wIjoxNzQ3NzM3ODA3MjA1LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsicmVxdWVzdF9pZCI6Ijk2YTFkMmRlLTkwYjEtNGJhZS1hYzY0LTM3MGVhMTE1MmM3NyIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZmRlNWQwNzItMzhhMC00ZDgzLThlNzgtNjhhNjg5ZjYwYTNkIiwicmVxdWVzdF9tZXNzYWdlIjoiaSB3bmF0IHRoYXQgY2hvc2UgZmlsZSBhYml0IGF0dHJhY3RpdmUgYSBiaXQgYmJpZyIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJpIHduYXQgdGhhdCBjaG9zZSBmaWxlIGFiaXQgYXR0cmFjdGl2ZSBhIGJpdCBiYmlnIn1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFEc2V1VXVBa2NnZFBUQWVMVk13Sm54IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzc1wiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIuZmlsZS1sYWJlbCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBwYWRkaW5nOiAxMHB4IDE1cHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzO1xcbiAgZm9udC13ZWlnaHQ6IDUwMDtcXG59XFxuXFxuLmZpbGUtbGFiZWw6aG92ZXIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNjlkOTtcXG59XFxuXFxuLmZpbGUtbGFiZWw6YWN0aXZlIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDYyY2M7XFxufVwiLCBcIm5ld19zdHJcIjogXCIuZmlsZS1sYWJlbCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBwYWRkaW5nOiAxMnB4IDIwcHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XFxuICBmb250LXNpemU6IDEuMDVlbTtcXG4gIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMik7XFxuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xcbiAgbGV0dGVyLXNwYWNpbmc6IDAuNXB4O1xcbn1cXG5cXG4uZmlsZS1sYWJlbDpob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2OWQ5O1xcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcXG59XFxuXFxuLmZpbGUtbGFiZWw6YWN0aXZlIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDYyY2M7XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XFxuICBib3gtc2hhZG93OiAwIDJweCAzcHggcmdiYSgwLCAwLCAwLCAwLjIpO1xcbn1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDI3NSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyOTN9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkknbGwgbWFrZSB0aGUgXCJDaG9vc2UgYSBmaWxlXCIgYnV0dG9uIG1vcmUgYXR0cmFjdGl2ZSBhbmQgYmlnZ2VyLiBMZXQncyB1cGRhdGUgdGhlIENTUyBzdHlsZXMgZm9yIHRoZSBmaWxlIHVwbG9hZCBidXR0b246XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6Imkgd25hdCB0aGF0IGNob3NlIGZpbGUgYWJpdCBhdHRyYWN0aXZlIGEgYml0IGJiaWcifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2NCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiSSdsbCBtYWtlIHRoZSBcIkNob29zZSBhIGZpbGVcIiBidXR0b24gbW9yZSBhdHRyYWN0aXZlIGFuZCBiaWdnZXIuIExldCdzIHVwZGF0ZSB0aGUgQ1NTIHN0eWxlcyBmb3IgdGhlIGZpbGUgdXBsb2FkIGJ1dHRvbjpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI1YWM3NTFhYS03NDAyLTQ3N2YtYWNhZC0zYTEyNDE0ZGQxMmMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFSM2dCZjJid1M5V0hiS1VUa1RWTkU5IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzc1wiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIjZmlsZS1uYW1lIHtcXG4gIGZvbnQtc2l6ZTogMC45ZW07XFxuICBjb2xvcjogIzY2NjtcXG59XCIsIFwibmV3X3N0clwiOiBcIiNmaWxlLW5hbWUge1xcbiAgZm9udC1zaXplOiAwLjk1ZW07XFxuICBjb2xvcjogIzU1NTtcXG4gIHBhZGRpbmc6IDhweCAxMnB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcXG4gIGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzAwN2JmZjtcXG4gIG1heC13aWR0aDogMjUwcHg7XFxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xcbn1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDI5NSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyOTh9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFsc28gdXBkYXRlIHRoZSBmaWxlIG5hbWUgZGlzcGxheSB0byBtYWtlIGl0IG1vcmUgYXR0cmFjdGl2ZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3MuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDI3MVx0ICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAyNzJcdCAgei1pbmRleDogLTE7XG4gICAyNzNcdH1cbiAgIDI3NFx0XG4gICAyNzVcdC5maWxlLWxhYmVsIHtcbiAgIDI3Nlx0ICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAyNzdcdCAgcGFkZGluZzogMTJweCAyMHB4O1xuICAgMjc4XHQgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XG4gICAyNzlcdCAgY29sb3I6IHdoaXRlO1xuICAgMjgwXHQgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgIDI4MVx0ICBjdXJzb3I6IHBvaW50ZXI7XG4gICAyODJcdCAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICAgMjgzXHQgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XG4gICAyODRcdCAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgIDI4NVx0ICBmb250LXNpemU6IDEuMDVlbTtcbiAgIDI4Nlx0ICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgMjg3XHQgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAyODhcdCAgbGV0dGVyLXNwYWNpbmc6IDAuNXB4O1xuICAgMjg5XHR9XG4gICAyOTBcdFxuICAgMjkxXHQuZmlsZS1sYWJlbDpob3ZlciB7XG4gICAyOTJcdCAgYmFja2dyb3VuZC1jb2xvcjogIzAwNjlkOTtcbiAgIDI5M1x0ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAyOTRcdCAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgIDI5NVx0fVxuICAgMjk2XHRcbiAgIDI5N1x0LmZpbGUtbGFiZWw6YWN0aXZlIHtcbiAgIDI5OFx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2MmNjO1xuICAgMjk5XHQgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgIDMwMFx0ICBib3gtc2hhZG93OiAwIDJweCAzcHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgMzAxXHR9XG4gICAzMDJcdFxuICAgMzAzXHQjZmlsZS1uYW1lIHtcbiAgIDMwNFx0ICBmb250LXNpemU6IDAuOWVtO1xuICAgMzA1XHQgIGNvbG9yOiAjNjY2O1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFEc2V1VXVBa2NnZFBUQWVMVk13Sm54In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAiLCJmb2xkZXJSb290IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6NjQsImN1cnJlbnRXb3JraW5nRGlyZWN0b3J5IjoiL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAifX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGFsc28gdXBkYXRlIHRoZSBmaWxlIG5hbWUgZGlzcGxheSB0byBtYWtlIGl0IG1vcmUgYXR0cmFjdGl2ZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIzM2UwZjRmYi0yMWUzLTQ0ODgtYjE2OC0wN2UzZTViZTkyOTUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFKemZzYUtMSEtSV2tBaEZxVEg2MTZmIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzc1wiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIuY3VzdG9tLWZpbGUtdXBsb2FkIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcXG59XCIsIFwibmV3X3N0clwiOiBcIi5jdXN0b20tZmlsZS11cGxvYWQge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xcbiAgcGFkZGluZzogMTBweCAwO1xcbn1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDI1OSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyNjN9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFsc28gdXBkYXRlIHRoZSBjdXN0b20tZmlsZS11cGxvYWQgY29udGFpbmVyIHRvIGdpdmUgbW9yZSBzcGFjZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3MuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDI5OVx0ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gICAzMDBcdCAgYm94LXNoYWRvdzogMCAycHggM3B4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgIDMwMVx0fVxuICAgMzAyXHRcbiAgIDMwM1x0I2ZpbGUtbmFtZSB7XG4gICAzMDRcdCAgZm9udC1zaXplOiAwLjk1ZW07XG4gICAzMDVcdCAgY29sb3I6ICM1NTU7XG4gICAzMDZcdCAgcGFkZGluZzogOHB4IDEycHg7XG4gICAzMDdcdCAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcbiAgIDMwOFx0ICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAzMDlcdCAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjMDA3YmZmO1xuICAgMzEwXHQgIG1heC13aWR0aDogMjUwcHg7XG4gICAzMTFcdCAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgIDMxMlx0ICBvdmVyZmxvdzogaGlkZGVuO1xuICAgMzEzXHQgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgMzE0XHR9XG4gICAzMTVcdFxuICAgMzE2XHQuaGlkZGVuIHtcbiAgIDMxN1x0ICBkaXNwbGF5OiBub25lO1xuICAgMzE4XHR9XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVIzZ0JmMmJ3UzlXSGJLVVRrVFZORTkifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2NCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgYWxzbyB1cGRhdGUgdGhlIGN1c3RvbS1maWxlLXVwbG9hZCBjb250YWluZXIgdG8gZ2l2ZSBtb3JlIHNwYWNlOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjVhMjA2ZWI3LTk4N2ItNDI0Yy05ZDVhLWM3ZjMyOTdiZDU4NyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMU1NaG5TSHJGSlZXOE03VzJqeUNpWngiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIi5jdXJyZW50LWltYWdlIHtcXG4gIG1hcmdpbi10b3A6IDEwcHg7XFxuICBwYWRkaW5nOiAxMHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxufVxcblxcbi5jdXJyZW50LWltYWdlIGltZyB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIG1hcmdpbjogNXB4IDA7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcXG59XCIsIFwibmV3X3N0clwiOiBcIi5jdXJyZW50LWltYWdlIHtcXG4gIG1hcmdpbi10b3A6IDE1cHg7XFxuICBwYWRkaW5nOiAxNXB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBib3gtc2hhZG93OiAwIDNweCA2cHggcmdiYSgwLDAsMCwwLjEpO1xcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcXG59XFxuXFxuLmN1cnJlbnQtaW1hZ2U6aG92ZXIge1xcbiAgYm94LXNoYWRvdzogMCA1cHggMTBweCByZ2JhKDAsMCwwLDAuMTUpO1xcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xcbn1cXG5cXG4uY3VycmVudC1pbWFnZSBwIHtcXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XFxuICBjb2xvcjogIzQ0NDtcXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XFxufVxcblxcbi5jdXJyZW50LWltYWdlIGltZyB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIG1hcmdpbjogNXB4IDA7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcXG4gIG1heC13aWR0aDogMjAwcHg7XFxuICBtYXgtaGVpZ2h0OiAyNTBweDtcXG4gIG9iamVjdC1maXQ6IGNvbnRhaW47XFxufVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMjQyLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDI1N31dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0J3MgYWxzbyB1cGRhdGUgdGhlIGltYWdlIHByZXZpZXcgY29udGFpbmVyIHRvIG1ha2UgaXQgbW9yZSBhdHRyYWN0aXZlOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzcy5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjU2XHQgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7XG4gICAyNTdcdH1cbiAgIDI1OFx0XG4gICAyNTlcdC8qIEN1c3RvbSBmaWxlIHVwbG9hZCBidXR0b24gKi9cbiAgIDI2MFx0LmN1c3RvbS1maWxlLXVwbG9hZCB7XG4gICAyNjFcdCAgZGlzcGxheTogZmxleDtcbiAgIDI2Mlx0ICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgMjYzXHQgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAyNjRcdCAgcGFkZGluZzogMTBweCAwO1xuICAgMjY1XHR9XG4gICAyNjZcdFxuICAgMjY3XHQuZmlsZS1pbnB1dCB7XG4gICAyNjhcdCAgd2lkdGg6IDAuMXB4O1xuICAgMjY5XHQgIGhlaWdodDogMC4xcHg7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUp6ZnNhS0xIS1JXa0FoRnFUSDYxNmYifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2NCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgYWxzbyB1cGRhdGUgdGhlIGltYWdlIHByZXZpZXcgY29udGFpbmVyIHRvIG1ha2UgaXQgbW9yZSBhdHRyYWN0aXZlOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjIxZTEyYTNhLWMwNTYtNDk0My1iODAzLTg1ZmNhZWYxYWJmMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMURyN3c2Qk5VNnV0RWFHYmNwcWVKc2giLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxzY3JpcHQ+XFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcHJldmlld0ltYWdlKGlucHV0KSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTmFtZVNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1uYW1lJyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlLXByZXZpZXctY29udGFpbmVyJyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2UtcHJldmlldycpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0xhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctbGFiZWwnKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gaW5wdXQuZmlsZXNbMF0ubmFtZTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lU3Bhbi50ZXh0Q29udGVudCA9IGZpbGVOYW1lO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0ltYWdlLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3TGFiZWwudGV4dENvbnRlbnQgPSAnUHJldmlldzonO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWVTcGFuLnRleHRDb250ZW50ID0gJ05vIGZpbGUgY2hvc2VuJztcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NjcmlwdD5cIiwgXCJuZXdfc3RyXCI6IFwiICAgICAgICAgICAgICAgICAgICAgICAgPHNjcmlwdD5cXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcmV2aWV3SW1hZ2UoaW5wdXQpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlLW5hbWUnKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2UtcHJldmlldy1jb250YWluZXInKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3Jyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3TGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlldy1sYWJlbCcpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBpbnB1dC5maWxlc1swXS5uYW1lO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWVTcGFuLnRleHRDb250ZW50ID0gZmlsZU5hbWU7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZVNwYW4uc3R5bGUuYm9yZGVyTGVmdENvbG9yID0gJyMyOGE3NDUnOyAvLyBHcmVlbiBib3JkZXIgZm9yIHN1Y2Nlc3NcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBhIGZhZGUtaW4gZWZmZWN0XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0ltYWdlLnN0eWxlLm9wYWNpdHkgPSAnMCc7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0ltYWdlLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3TGFiZWwudGV4dENvbnRlbnQgPSAnUHJldmlldzonO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFkZSBpbiB0aGUgaW1hZ2VcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5IDAuNXMgZWFzZSc7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdJbWFnZS5zdHlsZS5vcGFjaXR5ID0gJzEnO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbnB1dC5maWxlc1swXSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZVNwYW4udGV4dENvbnRlbnQgPSAnTm8gZmlsZSBjaG9zZW4nO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWVTcGFuLnN0eWxlLmJvcmRlckxlZnRDb2xvciA9ICcjMDA3YmZmJzsgLy8gUmVzZXQgYm9yZGVyIGNvbG9yXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGFuaW1hdGlvbiB0byB0aGUgQ2hvb3NlIGZpbGUgYnV0dG9uIHdoZW4gdGhlIHBhZ2UgbG9hZHNcXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsZS1sYWJlbCcpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTGFiZWwuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMC41cyBlYXNlJztcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUxhYmVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUxhYmVsLnN0eWxlLm9wYWNpdHkgPSAnMSc7XFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zY3JpcHQ+XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxNzEsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTkzfV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQncyB1cGRhdGUgdGhlIEphdmFTY3JpcHQgaW4gdGhlIGJvb2stZm9ybS5qc3AgdG8gZW5oYW5jZSB0aGUgaW1hZ2UgcHJldmlldyBmdW5jdGlvbmFsaXR5OlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzcy5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjM5XHQgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAyNDBcdH1cbiAgIDI0MVx0XG4gICAyNDJcdC8qIEJvb2sgaW1hZ2UgdXBsb2FkIHN0eWxlcyAqL1xuICAgMjQzXHQuY3VycmVudC1pbWFnZSB7XG4gICAyNDRcdCAgbWFyZ2luLXRvcDogMTVweDtcbiAgIDI0NVx0ICBwYWRkaW5nOiAxNXB4O1xuICAgMjQ2XHQgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAyNDdcdCAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgMjQ4XHQgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XG4gICAyNDlcdCAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgMjUwXHQgIGJveC1zaGFkb3c6IDAgM3B4IDZweCByZ2JhKDAsMCwwLDAuMSk7XG4gICAyNTFcdCAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcbiAgIDI1Mlx0fVxuICAgMjUzXHRcbiAgIDI1NFx0LmN1cnJlbnQtaW1hZ2U6aG92ZXIge1xuICAgMjU1XHQgIGJveC1zaGFkb3c6IDAgNXB4IDEwcHggcmdiYSgwLDAsMCwwLjE1KTtcbiAgIDI1Nlx0ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAyNTdcdH1cbiAgIDI1OFx0XG4gICAyNTlcdC5jdXJyZW50LWltYWdlIHAge1xuICAgMjYwXHQgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAyNjFcdCAgY29sb3I6ICM0NDQ7XG4gICAyNjJcdCAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgIDI2M1x0fVxuICAgMjY0XHRcbiAgIDI2NVx0LmN1cnJlbnQtaW1hZ2UgaW1nIHtcbiAgIDI2Nlx0ICBkaXNwbGF5OiBibG9jaztcbiAgIDI2N1x0ICBtYXJnaW46IDVweCAwO1xuICAgMjY4XHQgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAyNjlcdCAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgMjcwXHQgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7XG4gICAyNzFcdCAgbWF4LXdpZHRoOiAyMDBweDtcbiAgIDI3Mlx0ICBtYXgtaGVpZ2h0OiAyNTBweDtcbiAgIDI3M1x0ICBvYmplY3QtZml0OiBjb250YWluO1xuICAgMjc0XHR9XG4gICAyNzVcdFxuICAgMjc2XHQvKiBDdXN0b20gZmlsZSB1cGxvYWQgYnV0dG9uICovXG4gICAyNzdcdC5jdXN0b20tZmlsZS11cGxvYWQge1xuICAgMjc4XHQgIGRpc3BsYXk6IGZsZXg7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMU1NaG5TSHJGSlZXOE03VzJqeUNpWngifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2NCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgdXBkYXRlIHRoZSBKYXZhU2NyaXB0IGluIHRoZSBib29rLWZvcm0uanNwIHRvIGVuaGFuY2UgdGhlIGltYWdlIHByZXZpZXcgZnVuY3Rpb25hbGl0eTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3YTg0ZTc5NC03YjkwLTRiZmMtYmI2Yy0wM2U1OWZjNjg2ZjEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFOOExrZENCSHJxUkw1RVFxb1M2TENxIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzc1wiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIuZmlsZS1sYWJlbCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBwYWRkaW5nOiAxMnB4IDIwcHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XFxuICBmb250LXNpemU6IDEuMDVlbTtcXG4gIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMik7XFxuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xcbiAgbGV0dGVyLXNwYWNpbmc6IDAuNXB4O1xcbn1cIiwgXCJuZXdfc3RyXCI6IFwiLmZpbGUtbGFiZWwge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgcGFkZGluZzogMTJweCAyMHB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjtcXG4gIGNvbG9yOiB3aGl0ZTtcXG4gIGJvcmRlci1yYWRpdXM6IDZweDtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIG1hcmdpbi1yaWdodDogMTVweDtcXG4gIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XFxuICBmb250LXdlaWdodDogNjAwO1xcbiAgZm9udC1zaXplOiAxLjA1ZW07XFxuICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcXG4gIGxldHRlci1zcGFjaW5nOiAwLjVweDtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxufVxcblxcbi5maWxlLWxhYmVsOjphZnRlciB7XFxuICBjb250ZW50OiAnJztcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IC0xMDAlO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHRyYW5zcGFyZW50LCByZ2JhKDI1NSwyNTUsMjU1LDAuMiksIHRyYW5zcGFyZW50KTtcXG4gIHRyYW5zaXRpb246IDAuNXM7XFxufVxcblxcbi5maWxlLWxhYmVsOmhvdmVyOjphZnRlciB7XFxuICBsZWZ0OiAxMDAlO1xcbn1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDI3NSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyODl9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFkZCBvbmUgbW9yZSBzdHlsZSB0byBtYWtlIHRoZSBmaWxlIGxhYmVsIGluaXRpYWxseSBoYXZlIGEgc3VidGxlIGFuaW1hdGlvbjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3AuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDE2N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTY4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb3JtLWhpbnRcIj5TZWxlY3QgYW4gaW1hZ2UgZmlsZSB0byB1cGxvYWQuIFN1cHBvcnRlZCBmb3JtYXRzOiBKUEcsIFBORywgR0lGLjwvcD5cbiAgIDE2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNzBcdFxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICA8c2NyaXB0PlxuICAgMTcyXHQgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcmV2aWV3SW1hZ2UoaW5wdXQpIHtcbiAgIDE3M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTmFtZVNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1uYW1lJyk7XG4gICAxNzRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3LWNvbnRhaW5lcicpO1xuICAgMTc1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3Jyk7XG4gICAxNzZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0xhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctbGFiZWwnKTtcbiAgIDE3N1x0XG4gICAxNzhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgIDE3OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBpbnB1dC5maWxlc1swXS5uYW1lO1xuICAgMTgwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lU3Bhbi50ZXh0Q29udGVudCA9IGZpbGVOYW1lO1xuICAgMTgxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lU3Bhbi5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSAnIzI4YTc0NSc7IC8vIEdyZWVuIGJvcmRlciBmb3Igc3VjY2Vzc1xuICAgMTgyXHRcbiAgIDE4M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgIDE4NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkge1xuICAgMTg1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBmYWRlLWluIGVmZmVjdFxuICAgMTg2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgIDE4N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0ltYWdlLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgIDE4OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0xhYmVsLnRleHRDb250ZW50ID0gJ1ByZXZpZXc6JztcbiAgIDE4OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgIDE5MFx0XG4gICAxOTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhZGUgaW4gdGhlIGltYWdlXG4gICAxOTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAxOTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5IDAuNXMgZWFzZSc7XG4gICAxOTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgIDE5NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTApO1xuICAgMTk2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAxOTdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xuICAgMTk4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE5OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZVNwYW4udGV4dENvbnRlbnQgPSAnTm8gZmlsZSBjaG9zZW4nO1xuICAgMjAwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lU3Bhbi5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSAnIzAwN2JmZic7IC8vIFJlc2V0IGJvcmRlciBjb2xvclxuICAgMjAxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgMjAyXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAyMDNcdFxuICAgMjA0XHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYW5pbWF0aW9uIHRvIHRoZSBDaG9vc2UgZmlsZSBidXR0b24gd2hlbiB0aGUgcGFnZSBsb2Fkc1xuICAgMjA1XHQgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gICAyMDZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbGUtbGFiZWwnKTtcbiAgIDIwN1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMYWJlbC5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwLjVzIGVhc2UnO1xuICAgMjA4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUxhYmVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcbiAgIDIwOVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMYWJlbC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgMjEwXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgIDIxMVx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9zY3JpcHQ+XG4gICAyMTJcdFxuICAgMjEzXHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1hY3Rpb25zXCI+XG4gICAyMTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIGlkPVwic2F2ZUJ1dHRvblwiPlNhdmU8L2J1dHRvbj5cbiAgIDIxNVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT1yZXF1ZXN0LmdldENvbnRleHRQYXRoKCklPi9hZG1pbi9ib29rc1wiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIj5DYW5jZWw8L2E+XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMURyN3c2Qk5VNnV0RWFHYmNwcWVKc2gifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2NCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgYWRkIG9uZSBtb3JlIHN0eWxlIHRvIG1ha2UgdGhlIGZpbGUgbGFiZWwgaW5pdGlhbGx5IGhhdmUgYSBzdWJ0bGUgYW5pbWF0aW9uOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjMxYjM0YzM1LThjNGEtNGU4Yi05ZDA5LTAyODNmMzYzMjFlMSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkkndmUgbWFkZSBzZXZlcmFsIGVuaGFuY2VtZW50cyB0byBtYWtlIHRoZSBcIkNob29zZSBmaWxlXCIgYnV0dG9uIG1vcmUgYXR0cmFjdGl2ZSBhbmQgYmlnZ2VyOlxuXG4jIyMgMS4gRW5oYW5jZWQgXCJDaG9vc2UgZmlsZVwiIEJ1dHRvbjpcbi0gKipJbmNyZWFzZWQgc2l6ZSoqOiBNYWRlIHRoZSBidXR0b24gYmlnZ2VyIHdpdGggbGFyZ2VyIHBhZGRpbmcgKDEycHggMjBweClcbi0gKipJbXByb3ZlZCBzdHlsaW5nKio6IEFkZGVkIHVwcGVyY2FzZSB0ZXh0LCBsZXR0ZXIgc3BhY2luZywgYW5kIGEgbGFyZ2VyIGZvbnQgc2l6ZVxuLSAqKkFkZGVkIHZpc3VhbCBlZmZlY3RzKio6XG4gIC0gQm94IHNoYWRvdyBmb3IgYSAzRCBlZmZlY3RcbiAgLSBIb3ZlciBhbmltYXRpb24gdGhhdCBsaWZ0cyB0aGUgYnV0dG9uIHNsaWdodGx5XG4gIC0gU2hpbW1lcmluZyBlZmZlY3Qgd2l0aCBhIGdyYWRpZW50IHRoYXQgbW92ZXMgYWNyb3NzIHRoZSBidXR0b24gb24gaG92ZXJcbiAgLSBBY3RpdmUgc3RhdGUgdGhhdCBnaXZlcyBmZWVkYmFjayB3aGVuIGNsaWNrZWRcblxuIyMjIDIuIEltcHJvdmVkIEZpbGUgTmFtZSBEaXNwbGF5OlxuLSAqKlN0eWxlZCBjb250YWluZXIqKjogQWRkZWQgcGFkZGluZywgYmFja2dyb3VuZCBjb2xvciwgYW5kIGEgbGVmdCBib3JkZXJcbi0gKipCZXR0ZXIgdGV4dCBmb3JtYXR0aW5nKio6IEltcHJvdmVkIGZvbnQgc2l6ZSBhbmQgY29sb3Jcbi0gKipWaXN1YWwgZmVlZGJhY2sqKjogQ2hhbmdlcyBib3JkZXIgY29sb3IgdG8gZ3JlZW4gd2hlbiBhIGZpbGUgaXMgc2VsZWN0ZWRcbi0gKipPdmVyZmxvdyBoYW5kbGluZyoqOiBBZGRlZCB0ZXh0IGVsbGlwc2lzIGZvciBsb25nIGZpbGVuYW1lc1xuXG4jIyMgMy4gRW5oYW5jZWQgSW1hZ2UgUHJldmlldzpcbi0gKipMYXJnZXIgcHJldmlldyBhcmVhKio6IEluY3JlYXNlZCB0aGUgc2l6ZSBvZiB0aGUgcHJldmlldyBjb250YWluZXJcbi0gKipTbW9vdGggYW5pbWF0aW9ucyoqOiBBZGRlZCBmYWRlLWluIGVmZmVjdCB3aGVuIGFuIGltYWdlIGlzIHNlbGVjdGVkXG4tICoqSW1wcm92ZWQgc3R5bGluZyoqOiBBZGRlZCByb3VuZGVkIGNvcm5lcnMsIGJldHRlciBzaGFkb3dzLCBhbmQgaG92ZXIgZWZmZWN0c1xuLSAqKlJlc3BvbnNpdmUgc2l6aW5nKio6IFNldCBhcHByb3ByaWF0ZSBtYXgtd2lkdGggYW5kIG1heC1oZWlnaHQgd2l0aCBvYmplY3QtZml0XG5cbiMjIyA0LiBBZGRpdGlvbmFsIEltcHJvdmVtZW50czpcbi0gKipTcGFjaW5nKio6IEFkZGVkIG1vcmUgcGFkZGluZyBhbmQgbWFyZ2lucyBmb3IgYmV0dGVyIHZpc3VhbCBzZXBhcmF0aW9uXG4tICoqVHJhbnNpdGlvbnMqKjogQWxsIGludGVyYWN0aXZlIGVsZW1lbnRzIG5vdyBoYXZlIHNtb290aCB0cmFuc2l0aW9uc1xuLSAqKkNvbnNpc3RlbnQgc3R5bGluZyoqOiBNYWludGFpbmVkIHRoZSBzYW1lIGNvbG9yIHNjaGVtZSBhbmQgZGVzaWduIGxhbmd1YWdlXG5cblRoZXNlIGNoYW5nZXMgbWFrZSB0aGUgZmlsZSB1cGxvYWQgZXhwZXJpZW5jZSBtdWNoIG1vcmUgYXR0cmFjdGl2ZSBhbmQgdXNlci1mcmllbmRseS4gVGhlIGxhcmdlciwgbW9yZSBwcm9taW5lbnQgXCJDaG9vc2UgZmlsZVwiIGJ1dHRvbiBkcmF3cyBhdHRlbnRpb24sIGFuZCB0aGUgdmlzdWFsIGZlZWRiYWNrIHdoZW4gc2VsZWN0aW5nIGEgZmlsZSBoZWxwcyB1c2VycyB1bmRlcnN0YW5kIHdoYXQncyBoYXBwZW5pbmcuXG5cblRoZSBpbWFnZSBwcmV2aWV3IG5vdyBkaXNwbGF5cyBhdCBhIGdvb2Qgc2l6ZSBhbmQgd2l0aCBzbW9vdGggYW5pbWF0aW9ucywgbWFraW5nIGl0IGNsZWFyIHdoYXQgaW1hZ2Ugd2lsbCBiZSB1cGxvYWRlZCB3aXRoIHRoZSBmb3JtLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzcy5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjg5XHQgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgIDI5MFx0ICB6LWluZGV4OiAtMTtcbiAgIDI5MVx0fVxuICAgMjkyXHRcbiAgIDI5M1x0LmZpbGUtbGFiZWwge1xuICAgMjk0XHQgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgIDI5NVx0ICBwYWRkaW5nOiAxMnB4IDIwcHg7XG4gICAyOTZcdCAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjtcbiAgIDI5N1x0ICBjb2xvcjogd2hpdGU7XG4gICAyOThcdCAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgMjk5XHQgIGN1cnNvcjogcG9pbnRlcjtcbiAgIDMwMFx0ICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gICAzMDFcdCAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcbiAgIDMwMlx0ICBmb250LXdlaWdodDogNjAwO1xuICAgMzAzXHQgIGZvbnQtc2l6ZTogMS4wNWVtO1xuICAgMzA0XHQgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAzMDVcdCAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgIDMwNlx0ICBsZXR0ZXItc3BhY2luZzogMC41cHg7XG4gICAzMDdcdCAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgMzA4XHQgIG92ZXJmbG93OiBoaWRkZW47XG4gICAzMDlcdH1cbiAgIDMxMFx0XG4gICAzMTFcdC5maWxlLWxhYmVsOjphZnRlciB7XG4gICAzMTJcdCAgY29udGVudDogJyc7XG4gICAzMTNcdCAgcG9zaXRpb246IGFic29sdXRlO1xuICAgMzE0XHQgIHRvcDogMDtcbiAgIDMxNVx0ICBsZWZ0OiAtMTAwJTtcbiAgIDMxNlx0ICB3aWR0aDogMTAwJTtcbiAgIDMxN1x0ICBoZWlnaHQ6IDEwMCU7XG4gICAzMThcdCAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCB0cmFuc3BhcmVudCwgcmdiYSgyNTUsMjU1LDI1NSwwLjIpLCB0cmFuc3BhcmVudCk7XG4gICAzMTlcdCAgdHJhbnNpdGlvbjogMC41cztcbiAgIDMyMFx0fVxuICAgMzIxXHRcbiAgIDMyMlx0LmZpbGUtbGFiZWw6aG92ZXI6OmFmdGVyIHtcbiAgIDMyM1x0ICBsZWZ0OiAxMDAlO1xuICAgMzI0XHR9XG4gICAzMjVcdFxuICAgMzI2XHQuZmlsZS1sYWJlbDpob3ZlciB7XG4gICAzMjdcdCAgYmFja2dyb3VuZC1jb2xvcjogIzAwNjlkOTtcbiAgIDMyOFx0ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMU44TGtkQ0JIcnFSTDVFUXFvUzZMQ3EifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCIsImZvbGRlclJvb3QiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2UsImN1cnJlbnRUZXJtaW5hbCI6eyJ0ZXJtaW5hbElkIjo2NCwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiIvVXNlcnMvc2FuZGh5YXNocmVzdGhhL2VjbGlwc2Utd29ya3NwYWNlL0Vib29rLWFwcCJ9fX1dLCJyZXNwb25zZV90ZXh0IjoiSSd2ZSBtYWRlIHNldmVyYWwgZW5oYW5jZW1lbnRzIHRvIG1ha2UgdGhlIFwiQ2hvb3NlIGZpbGVcIiBidXR0b24gbW9yZSBhdHRyYWN0aXZlIGFuZCBiaWdnZXI6XG5cbiMjIyAxLiBFbmhhbmNlZCBcIkNob29zZSBmaWxlXCIgQnV0dG9uOlxuLSAqKkluY3JlYXNlZCBzaXplKio6IE1hZGUgdGhlIGJ1dHRvbiBiaWdnZXIgd2l0aCBsYXJnZXIgcGFkZGluZyAoMTJweCAyMHB4KVxuLSAqKkltcHJvdmVkIHN0eWxpbmcqKjogQWRkZWQgdXBwZXJjYXNlIHRleHQsIGxldHRlciBzcGFjaW5nLCBhbmQgYSBsYXJnZXIgZm9udCBzaXplXG4tICoqQWRkZWQgdmlzdWFsIGVmZmVjdHMqKjpcbiAgLSBCb3ggc2hhZG93IGZvciBhIDNEIGVmZmVjdFxuICAtIEhvdmVyIGFuaW1hdGlvbiB0aGF0IGxpZnRzIHRoZSBidXR0b24gc2xpZ2h0bHlcbiAgLSBTaGltbWVyaW5nIGVmZmVjdCB3aXRoIGEgZ3JhZGllbnQgdGhhdCBtb3ZlcyBhY3Jvc3MgdGhlIGJ1dHRvbiBvbiBob3ZlclxuICAtIEFjdGl2ZSBzdGF0ZSB0aGF0IGdpdmVzIGZlZWRiYWNrIHdoZW4gY2xpY2tlZFxuXG4jIyMgMi4gSW1wcm92ZWQgRmlsZSBOYW1lIERpc3BsYXk6XG4tICoqU3R5bGVkIGNvbnRhaW5lcioqOiBBZGRlZCBwYWRkaW5nLCBiYWNrZ3JvdW5kIGNvbG9yLCBhbmQgYSBsZWZ0IGJvcmRlclxuLSAqKkJldHRlciB0ZXh0IGZvcm1hdHRpbmcqKjogSW1wcm92ZWQgZm9udCBzaXplIGFuZCBjb2xvclxuLSAqKlZpc3VhbCBmZWVkYmFjayoqOiBDaGFuZ2VzIGJvcmRlciBjb2xvciB0byBncmVlbiB3aGVuIGEgZmlsZSBpcyBzZWxlY3RlZFxuLSAqKk92ZXJmbG93IGhhbmRsaW5nKio6IEFkZGVkIHRleHQgZWxsaXBzaXMgZm9yIGxvbmcgZmlsZW5hbWVzXG5cbiMjIyAzLiBFbmhhbmNlZCBJbWFnZSBQcmV2aWV3OlxuLSAqKkxhcmdlciBwcmV2aWV3IGFyZWEqKjogSW5jcmVhc2VkIHRoZSBzaXplIG9mIHRoZSBwcmV2aWV3IGNvbnRhaW5lclxuLSAqKlNtb290aCBhbmltYXRpb25zKio6IEFkZGVkIGZhZGUtaW4gZWZmZWN0IHdoZW4gYW4gaW1hZ2UgaXMgc2VsZWN0ZWRcbi0gKipJbXByb3ZlZCBzdHlsaW5nKio6IEFkZGVkIHJvdW5kZWQgY29ybmVycywgYmV0dGVyIHNoYWRvd3MsIGFuZCBob3ZlciBlZmZlY3RzXG4tICoqUmVzcG9uc2l2ZSBzaXppbmcqKjogU2V0IGFwcHJvcHJpYXRlIG1heC13aWR0aCBhbmQgbWF4LWhlaWdodCB3aXRoIG9iamVjdC1maXRcblxuIyMjIDQuIEFkZGl0aW9uYWwgSW1wcm92ZW1lbnRzOlxuLSAqKlNwYWNpbmcqKjogQWRkZWQgbW9yZSBwYWRkaW5nIGFuZCBtYXJnaW5zIGZvciBiZXR0ZXIgdmlzdWFsIHNlcGFyYXRpb25cbi0gKipUcmFuc2l0aW9ucyoqOiBBbGwgaW50ZXJhY3RpdmUgZWxlbWVudHMgbm93IGhhdmUgc21vb3RoIHRyYW5zaXRpb25zXG4tICoqQ29uc2lzdGVudCBzdHlsaW5nKio6IE1haW50YWluZWQgdGhlIHNhbWUgY29sb3Igc2NoZW1lIGFuZCBkZXNpZ24gbGFuZ3VhZ2VcblxuVGhlc2UgY2hhbmdlcyBtYWtlIHRoZSBmaWxlIHVwbG9hZCBleHBlcmllbmNlIG11Y2ggbW9yZSBhdHRyYWN0aXZlIGFuZCB1c2VyLWZyaWVuZGx5LiBUaGUgbGFyZ2VyLCBtb3JlIHByb21pbmVudCBcIkNob29zZSBmaWxlXCIgYnV0dG9uIGRyYXdzIGF0dGVudGlvbiwgYW5kIHRoZSB2aXN1YWwgZmVlZGJhY2sgd2hlbiBzZWxlY3RpbmcgYSBmaWxlIGhlbHBzIHVzZXJzIHVuZGVyc3RhbmQgd2hhdCdzIGhhcHBlbmluZy5cblxuVGhlIGltYWdlIHByZXZpZXcgbm93IGRpc3BsYXlzIGF0IGEgZ29vZCBzaXplIGFuZCB3aXRoIHNtb290aCBhbmltYXRpb25zLCBtYWtpbmcgaXQgY2xlYXIgd2hhdCBpbWFnZSB3aWxsIGJlIHVwbG9hZGVkIHdpdGggdGhlIGZvcm0uXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiI1ZDgyZDA1My0zYzVhLTRhY2ItYjc0Yi1kY2ZmODllZDU0MDQiLCJ1dWlkIjoiNjY1NTk3OGEtNzRkZS00ZGIxLWFjNDgtMWMwYmYwNDIxNDkzIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ3NzM3ODA3MjA1LCJ0b1RpbWVzdGFtcCI6MTc0NzczODA0MDA0MSwic2Vlbl9zdGF0ZSI6InNlZW4ifV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtNzk3ZjY3NmItMTc0NS00MGY5LTkyNDMtZjBiYWJjOWQ2OGMyIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03NzkwOWQ2Ny03NDY1LTRiYzEtOGY1Ni00OWZiOTA3MzgxZTUiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTlmZDZhNmZhLWVkODAtNDZhZS04YjVlLTY2NDhkMDZhOWY2YiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMDQ1N2VjYTMtYjczYi00YzA0LThjYzMtYzkxNTk4NmZmMzcyIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0yZWZiZGQ2OS02ZTY2LTQyYzQtYjU3Yi1iYWY2MDYwOGU2MzEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTc5NTVhYmJhLTNhYzktNDRmYS05M2Y3LTNkYmJlOWI4MDM1YiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMjA5MDVmZGQtNTZmMS00NWZjLWJjMDMtMzYxZDM3MTM3ZTNhIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0xOThhMzc4Ny00ZTIxLTQwZDktYWYzZi0yMjU0MmQyNGMwMDMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTFhZDkyYmFkLTFjZTYtNDNhZC1iZjJiLTRlZmE4YTk5ZjQ5MiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZjhiNTBkNDgtYmQzYS00YmQ4LWEyZjQtOWI1YWNjMmRmMjAxIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lODQwMmJmYi01N2NkLTQwMGItODE4ZC1jMmRmMmMwMDZmY2MiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTQ5MDI2OTdkLWRmODQtNDcwMy1hYTBlLTFmYWJjZTg4OTA4NSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNTk3MWU4Y2UtYzY2YS00ZDZlLWFkYWItNzRhOGIyMzUyYmQyIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS00ODFkNTExMy1jYmZmLTRjM2QtOTQyMS0xY2E0Njk5NGJlZmMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWE3ZjdhN2FmLWRiZmMtNGJmMS04ZDcyLTNhZDNmZGQ0MWI1MSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYTczNTI3MTEtNTNkOS00OWMwLTg2YzgtZmE1NjZhY2Q2MmVkIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS00YTliODFiZC1hMDU4LTRjOTgtOGNiYy0xZGJiZDYyM2ZiODQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTdkYmM3ZWJjLTg4ZTctNDM0YS05Y2M0LWU2M2FkODc2MTgzMSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYWYwNDEwNmEtZTk2MS00MzI3LWI0YTYtZTY2ZTc2MWU5MWEzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1jYzVhNjUzNC0zMTlmLTRjMWEtYjg1NS04Y2U2YWI5ODRhOWYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTk5NDQ3N2M0LTQ5NjYtNDFmOS05ODlhLTljZDc3YjNkNTc1ZCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNmJjNmM3OWQtZjFlNC00ZmQwLWI3MDEtYWNmMTVjNmFiMWZhIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0wZTE4MzYxNS1jOTA2LTQ1M2YtYWI1Ny1kMGJhZWM1MTllOTciOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWQ0ZjJiZGQxLWVlZDEtNDcxMS05NzlmLTg0OWNhODI2ZTk5YyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYzRlZTM1Y2MtZmI1ZS00OTY5LTg0MGItNmY4YzhlNzMyY2MxIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0zZDhmMWUzOS1mMTljLTQyODItOGZlNC1kNTNlYmE2MmI1ZWMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTRiYjk5NDlkLWE2ZTktNGNlZS04M2M1LTc0ZWE1NDRmZTRjOCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMjVlYzYzOWMtZDNiNS00MjhhLTg1N2MtNDhiMzNmZDEyNDQ4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1hNDkxNWVlZi1lOTNjLTQ2ZWMtOGJjMy03MTQ0MzBmZDMxZTgiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTBkM2YwMGI2LTJmNzEtNGQ5OC05Zjg3LWI4NTJjNGEzZDY1YiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYmYxZDQ5NzctOGZhMC00NjQyLTk1NTctZjRhYzFhMDJjY2M4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lZDVlNDExZC04MTBlLTQ3OTAtOTYwNi0yNzNmNjZkNGM4ZjMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWVlMGY5M2QyLWIyYzctNGQzYi05ZTM4LWFmY2I4YTY2Mzg5MSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNGU0NjNiZDMtOTA5Zi00MGVlLTllYTMtMTM4NDE4YTk1MTRlIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03YTgxZWE4OS1jMzM3LTQ0YjEtOTVhZi05MjdlOTZmZGQxMzIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTA4ZDA1Yjc3LWUyNDEtNDJmNC05YTRjLWM4ZmYxMjBmYzlkZCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMDBiZWIxYzQtMjM5OC00ZTIzLTkxYTQtNWEyZmIxZTcyMjY3Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1iYWNhNmUxNy1jYWRjLTRkMTYtOTQ1Zi1hOGEyMjZmYTU4YzIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWNkZmRhZTkzLTdkMjUtNGMyYS1hMzQ0LTNmNGE3OTdjNDEyOCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYTM2ZjlhZGItODJjNy00ZjllLWJlOWItNTg5MjRlNDBkYzY3Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lMTQ4YTA0Ny1hMzA2LTRiYmMtYWUzNC0xZGI0OTM4YzJiNDAiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWYyMjM1NmIzLTIyM2YtNGI0OS1iNWJiLTk5MTNhMWRiY2M3ZiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZWVkYWNlNTEtY2E4My00OTRlLWFkZjYtYmYzNDUwZGI3OGVlIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0wYjYxYzg3Zi03ZjNjLTQxZWMtYWU5Ny01NDgzOWE2NDdhMTEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTAyNzI5MjA1LTg5NmMtNDA0MS04OTdjLWI5MjM1Yzg5NjliMiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYWFjYzY5YWItNzkzYy00Mzk2LTgwOWItZGViMTljNjM1NGUxIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1jNWU1NjBmMi1jMTczLTQ3ZDMtOTg1Ny0wMzUzMDM4MzMzZDkiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLThjOTdjMzc0LTMxYzEtNDQ1OC04ZmI2LTZiOTg0YjA1YjE5NiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYmQ2YTI2ZjAtZGNjMi00NGJhLTgzNmEtMzg1ODlmMzFmNDIyIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03NDlhMDU5MC1lYzZkLTQxMWQtOGI3MC1iYzFhY2E3YTVhY2EiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTQ3YjRlNTk2LWRmNjEtNDA1NC04Y2ZhLWNkYjMwMmM0ZDU1NCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNzM0YzllYWMtNzliNi00MmM1LWIwZWQtYjM3NTQzOTkyYTRlIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifX0sInRvb2xVc2VTdGF0ZXMiOnsiYjU5Nzc0NGEtZmI3OC00NDZiLTgwZjctOWZjOWY2MWZlMWQ1O3Rvb2x1X3ZydHhfMDFOVjhvb3FFa3N3WldGWDEyNE1UWFBnIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2RhdGFiYXNlLnNxbFxuLS0gQ3JlYXRlIGRhdGFiYXNlXG5DUkVBVEUgREFUQUJBU0UgSUYgTk9UIEVYSVNUUyBlYm9va2phdmE7XG5VU0UgZWJvb2tzdG9yZTtcblxuLS0gQ3JlYXRlIHRhYmxlc1xuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB1c2VybmFtZSBWQVJDSEFSKDUwKSBOT1QgTlVMTCBVTklRVUUsXG4gICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgIGVtYWlsIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBmdWxsX25hbWUgVkFSQ0hBUigxMDApIE5PVCBOVUxMLFxuICAgIHJvbGUgVkFSQ0hBUigyMCkgTk9UIE5VTEwgREVGQVVMVCAndXNlcicsXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcblxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYm9va3MgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB0aXRsZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgYXV0aG9yIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgIGNhdGVnb3J5IFZBUkNIQVIoNTApLFxuICAgIGdlbnJlIFZBUkNIQVIoNTApLFxuICAgIHByaWNlIERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIGltYWdlX3VybCBWQVJDSEFSKDI1NSksXG4gICAgc3RvY2sgSU5UIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4pO1xuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjYXJ0X2l0ZW1zIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgdXNlcl9pZCBJTlQgTk9UIE5VTEwsXG4gICAgYm9va19pZCBJTlQgTk9UIE5VTEwsXG4gICAgcXVhbnRpdHkgSU5UIE5PVCBOVUxMIERFRkFVTFQgMSxcbiAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIHVzZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoYm9va19pZCkgUkVGRVJFTkNFUyBib29rcyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIHVzZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIG9yZGVyX2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgdG90YWxfYW1vdW50IERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVyX2l0ZW1zIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgb3JkZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIGJvb2tfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHF1YW50aXR5IElOVCBOT1QgTlVMTCxcbiAgICBwcmljZSBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCxcbiAgICBGT1JFSUdOIEtFWSAob3JkZXJfaWQpIFJFRkVSRU5DRVMgb3JkZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoYm9va19pZCkgUkVGRVJFTkNFUyBib29rcyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbi0tIEluc2VydCBzYW1wbGUgZGF0YVxuLS0gQWRtaW4gdXNlciAocGFzc3dvcmQ6IGFkbWluMTIzKVxuSU5TRVJUIElOVE8gdXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgZW1haWwsIGZ1bGxfbmFtZSwgcm9sZSkgVkFMVUVTXG4oJ2FkbWluJywgJ2FkbWluMTIzJywgJ2FkbWluQGVib29rc3RvcmUuY29tJywgJ0FkbWluIFVzZXInLCAnYWRtaW4nKTtcblxuLS0gUmVndWxhciB1c2VycyAocGFzc3dvcmQ6IHVzZXIxMjMpXG5JTlNFUlQgSU5UTyB1c2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgZnVsbF9uYW1lLCByb2xlKSBWQUxVRVNcbignam9obicsICd1c2VyMTIzJywgJ2pvaG5AZXhhbXBsZS5jb20nLCAnSm9obiBEb2UnLCAndXNlcicpLFxuKCdqYW5lJywgJ3VzZXIxMjMnLCAnamFuZUBleGFtcGxlLmNvbScsICdKYW5lIFNtaXRoJywgJ3VzZXInKTtcblxuLS0gU2FtcGxlIGJvb2tzXG5JTlNFUlQgSU5UTyBib29rcyAodGl0bGUsIGF1dGhvciwgZGVzY3JpcHRpb24sIGNhdGVnb3J5LCBnZW5yZSwgcHJpY2UsIGltYWdlX3VybCwgc3RvY2spIFZBTFVFU1xuKCdUaGUgR3JlYXQgR2F0c2J5JywgJ0YuIFNjb3R0IEZpdHpnZXJhbGQnLCAnQSBub3ZlbCBhYm91dCB0aGUgbXlzdGVyaW91cyBKYXkgR2F0c2J5IGFuZCBoaXMgbG92ZSBmb3IgRGFpc3kgQnVjaGFuYW4uJywgJ0ZpY3Rpb24nLCAnQ2xhc3NpYycsIDkuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9nYXRzYnkuanBnJywgMTAwKSxcbignVG8gS2lsbCBhIE1vY2tpbmdiaXJkJywgJ0hhcnBlciBMZWUnLCAnQSBub3ZlbCBhYm91dCByYWNpYWwgaW5lcXVhbGl0eSB0aHJvdWdoIHRoZSBleWVzIG9mIGEgeW91bmcgZ2lybCBpbiBBbGFiYW1hLicsICdGaWN0aW9uJywgJ0NsYXNzaWMnLCA4Ljk5LCAnaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZXMvbW9ja2luZ2JpcmQuanBnJywgNzUpLFxuKCcxOTg0JywgJ0dlb3JnZSBPcndlbGwnLCAnQSBkeXN0b3BpYW4gbm92ZWwgc2V0IGluIGEgdG90YWxpdGFyaWFuIHNvY2lldHkuJywgJ0ZpY3Rpb24nLCAnRHlzdG9waWFuJywgNy45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzLzE5ODQuanBnJywgNTApLFxuKCdUaGUgSG9iYml0JywgJ0ouUi5SLiBUb2xraWVuJywgJ0EgZmFudGFzeSBub3ZlbCBhYm91dCB0aGUgYWR2ZW50dXJlcyBvZiBCaWxibyBCYWdnaW5zLicsICdGaWN0aW9uJywgJ0ZhbnRhc3knLCAxMi45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL2hvYmJpdC5qcGcnLCA2MCksXG4oJ0EgQnJpZWYgSGlzdG9yeSBvZiBUaW1lJywgJ1N0ZXBoZW4gSGF3a2luZycsICdBIGJvb2sgYWJvdXQgdGhlIG5hdHVyZSBvZiB0aW1lIGFuZCB0aGUgdW5pdmVyc2UuJywgJ05vbi1GaWN0aW9uJywgJ1NjaWVuY2UnLCAxNC45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL3RpbWUuanBnJywgNDApLFxuKCdTYXBpZW5zOiBBIEJyaWVmIEhpc3Rvcnkgb2YgSHVtYW5raW5kJywgJ1l1dmFsIE5vYWggSGFyYXJpJywgJ0EgYm9vayBhYm91dCB0aGUgaGlzdG9yeSBvZiBodW1hbiBldm9sdXRpb24uJywgJ05vbi1GaWN0aW9uJywgJ0hpc3RvcnknLCAxNS45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL3NhcGllbnMuanBnJywgMzApLFxuKCdDbGVhbiBDb2RlJywgJ1JvYmVydCBDLiBNYXJ0aW4nLCAnQSBoYW5kYm9vayBvZiBhZ2lsZSBzb2Z0d2FyZSBjcmFmdHNtYW5zaGlwLicsICdUZWNobm9sb2d5JywgJ1Byb2dyYW1taW5nJywgMjkuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9jbGVhbmNvZGUuanBnJywgMjUpLFxuKCdUaGUgQXJ0IG9mIENvbXB1dGVyIFByb2dyYW1taW5nJywgJ0RvbmFsZCBLbnV0aCcsICdBIGNvbXByZWhlbnNpdmUgbW9ub2dyYXBoIG9uIGNvbXB1dGVyIHByb2dyYW1taW5nLicsICdUZWNobm9sb2d5JywgJ1Byb2dyYW1taW5nJywgNDkuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9rbnV0aC5qcGcnLCAxNSk7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2FkZF9wYXltZW50X3RhYmxlLnNxbFxuLS0gQ29ubmVjdCB0byB0aGUgZWJvb2tqYXZhIGRhdGFiYXNlXG5VU0UgZWJvb2tqYXZhO1xuXG4tLSBDcmVhdGUgcGF5bWVudCB0YWJsZVxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcGF5bWVudHMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICBvcmRlcl9pZCBJTlQgTk9UIE5VTEwsXG4gICAgcGF5bWVudF9tZXRob2QgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgY2FyZF9udW1iZXIgVkFSQ0hBUigyNTUpLFxuICAgIGNhcmRfaG9sZGVyX25hbWUgVkFSQ0hBUigxMDApLFxuICAgIGV4cGlyeV9kYXRlIFZBUkNIQVIoMTApLFxuICAgIGN2diBWQVJDSEFSKDEwKSxcbiAgICBhbW91bnQgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgc3RhdHVzIFZBUkNIQVIoMjApIE5PVCBOVUxMIERFRkFVTFQgJ3BlbmRpbmcnLFxuICAgIHRyYW5zYWN0aW9uX2lkIFZBUkNIQVIoMTAwKSxcbiAgICBwYXltZW50X2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgRk9SRUlHTiBLRVkgKG9yZGVyX2lkKSBSRUZFUkVOQ0VTIG9yZGVycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbi0tIERpc3BsYXkgdGhlIHRhYmxlIHN0cnVjdHVyZVxuREVTQ1JJQkUgcGF5bWVudHM7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2Vuc3VyZV9wYXltZW50c190YWJsZS5zcWxcbi0tIENvbm5lY3QgdG8gdGhlIGVib29ramF2YSBkYXRhYmFzZVxuVVNFIGVib29ramF2YTtcblxuLS0gQ3JlYXRlIHBheW1lbnQgdGFibGUgaWYgaXQgZG9lc24ndCBleGlzdFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcGF5bWVudHMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICBvcmRlcl9pZCBJTlQgTk9UIE5VTEwsXG4gICAgcGF5bWVudF9tZXRob2QgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgY2FyZF9udW1iZXIgVkFSQ0hBUigyNTUpLFxuICAgIGNhcmRfaG9sZGVyX25hbWUgVkFSQ0hBUigxMDApLFxuICAgIGV4cGlyeV9kYXRlIFZBUkNIQVIoMTApLFxuICAgIGN2diBWQVJDSEFSKDEwKSxcbiAgICBhbW91bnQgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgc3RhdHVzIFZBUkNIQVIoMjApIE5PVCBOVUxMIERFRkFVTFQgJ3BlbmRpbmcnLFxuICAgIHRyYW5zYWN0aW9uX2lkIFZBUkNIQVIoMTAwKSxcbiAgICBwYXltZW50X2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgRk9SRUlHTiBLRVkgKG9yZGVyX2lkKSBSRUZFUkVOQ0VTIG9yZGVycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbi0tIERpc3BsYXkgdGhlIHRhYmxlIHN0cnVjdHVyZVxuREVTQ1JJQkUgcGF5bWVudHM7XG4uLi5cblBhdGg6IGFkbWluX3VwZGF0ZS5zcWxcbi0tIENvbm5lY3QgdG8gdGhlIGVib29rc3RvcmUgZGF0YWJhc2VcblVTRSBlYm9va3N0b3JlO1xuXG4tLSBVcGRhdGUgdGhlIGFkbWluIHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGNyZWRlbnRpYWxzXG5VUERBVEUgdXNlcnMgU0VUIFxuICAgIGVtYWlsID0gJ2FkbWluQGdtYWlsLmNvbScsXG4gICAgcGFzc3dvcmQgPSAnYWRtaW4xMjMnXG5XSEVSRSB1c2VybmFtZSA9ICdhZG1pbic7XG5cbi0tIEVuc3VyZSBhbGwgb3RoZXIgdXNlcnMgaGF2ZSB0aGUgJ3VzZXInIHJvbGVcblVQREFURSB1c2VycyBTRVQgXG4gICAgcm9sZSA9ICd1c2VyJ1xuV0hFUkUgdXNlcm5hbWUgIT0gJ2FkbWluJztcblxuLS0gRGlzcGxheSBhbGwgdXNlcnMgdG8gdmVyaWZ5IHRoZSBjaGFuZ2VzXG5TRUxFQ1QgaWQsIHVzZXJuYW1lLCBlbWFpbCwgcm9sZSBGUk9NIHVzZXJzO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2Rhby9Cb29rREFPLmphdmFcbnBhY2thZ2UgZGFvO1xuXG5pbXBvcnQgbW9kZWwuQm9vaztcbmltcG9ydCBqYXZhLnNxbC5Ecml2ZXJNYW5hZ2VyO1xuXG5pbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7XG5pbXBvcnQgamF2YS5zcWwuKjtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5wdWJsaWMgY2xhc3MgQm9va0RBTyB7XG5cbiAgICBzdGF0aWMge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclwiKTtcbiAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGF0YWJhc2UgY29ubmVjdGlvbiBwYXJhbWV0ZXJzXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVJMID0gXCJqZGJjOm15c3FsOi8vbG9jYWxob3N0OjMzMDYvZWJvb2tqYXZhXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVNFUiA9IFwicm9vdFwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1BBU1NXT1JEID0gXCJvcmFjbGVcIjtcbi4uLlxuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgQm9vayBib29rID0gbmV3IEJvb2soKTtcbiAgICAgICAgICAgICAgICBib29rLnNldElkKHJzLmdldEludChcImlkXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFRpdGxlKHJzLmdldFN0cmluZyhcInRpdGxlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEF1dGhvcihycy5nZXRTdHJpbmcoXCJhdXRob3JcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0RGVzY3JpcHRpb24ocnMuZ2V0U3RyaW5nKFwiZGVzY3JpcHRpb25cIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0Q2F0ZWdvcnkocnMuZ2V0U3RyaW5nKFwiY2F0ZWdvcnlcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0R2VucmUocnMuZ2V0U3RyaW5nKFwiZ2VucmVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0UHJpY2UocnMuZ2V0QmlnRGVjaW1hbChcInByaWNlXCIpKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk9yaWdpbmFsIGltYWdlIFVSTCBmb3IgXCIgKyBib29rLmdldFRpdGxlKCkgKyBcIjogXCIgKyBpbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VOYW1lID0gaW1hZ2VVcmwuc3Vic3RyaW5nKGltYWdlVXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb252ZXJ0ZWQgdG86IFwiICsgaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS91dGlsL0Vuc3VyZVBheW1lbnRzVGFibGUuamF2YVxucGFja2FnZSB1dGlsO1xuXG5pbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbmltcG9ydCBqYXZhLnNxbC5Ecml2ZXJNYW5hZ2VyO1xuaW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcbmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247XG5pbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50O1xuXG4vKipcbiAqIFV0aWxpdHkgY2xhc3MgdG8gZW5zdXJlIHRoZSBwYXltZW50cyB0YWJsZSBleGlzdHMgaW4gdGhlIGRhdGFiYXNlLlxuICovXG5wdWJsaWMgY2xhc3MgRW5zdXJlUGF5bWVudHNUYWJsZSB7XG5cbiAgICAvLyBEYXRhYmFzZSBjb25uZWN0aW9uIHBhcmFtZXRlcnNcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19VUkwgPSBcImpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9lYm9va2phdmFcIjtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19VU0VSID0gXCJyb290XCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfUEFTU1dPUkQgPSBcIm9yYWNsZVwiO1xuXG4gICAgc3RhdGljIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENsYXNzLmZvck5hbWUoXCJjb20ubXlzcWwuY2ouamRiYy5Ecml2ZXJcIik7XG4gICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBEaXJlY3QgZGF0YWJhc2UgY29ubmVjdGlvblxuICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBheW1lbnRzIHRhYmxlIGFscmVhZHkgZXhpc3RzXG4gICAgICAgICAgICBycyA9IGNvbm4uZ2V0TWV0YURhdGEoKS5nZXRUYWJsZXMobnVsbCwgbnVsbCwgXCJwYXltZW50c1wiLCBudWxsKTtcbiAgICAgICAgICAgIGlmICghcnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGFibGUgZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ3JlYXRpbmcgcGF5bWVudHMgdGFibGUuLi5cIik7XG4gICAgICAgICAgICAgICAgc3RtdCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7XG5cbiAgICAgICAgICAgICAgICBTdHJpbmcgY3JlYXRlVGFibGVTUUwgPSBcIkNSRUFURSBUQUJMRSBwYXltZW50cyAoXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIm9yZGVyX2lkIElOVCBOT1QgTlVMTCwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInBheW1lbnRfbWV0aG9kIFZBUkNIQVIoNTApIE5PVCBOVUxMLCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZF9udW1iZXIgVkFSQ0hBUigyNTUpLCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiY2FyZF9ob2xkZXJfbmFtZSBWQVJDSEFSKDEwMCksIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJleHBpcnlfZGF0ZSBWQVJDSEFSKDEwKSwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImN2diBWQVJDSEFSKDEwKSwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImFtb3VudCBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJywgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInRyYW5zYWN0aW9uX2lkIFZBUkNIQVIoMTAwKSwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInBheW1lbnRfZGF0ZSBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkZPUkVJR04gS0VZIChvcmRlcl9pZCkgUkVGRVJFTkNFUyBvcmRlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFXCIgK1xuICAgICAgICAgICAgICAgIFwiKVwiO1xuXG4gICAgICAgICAgICAgICAgc3RtdC5leGVjdXRlVXBkYXRlKGNyZWF0ZVRhYmxlU1FMKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQYXltZW50cyB0YWJsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseS5cIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlBheW1lbnRzIHRhYmxlIGFscmVhZHkgZXhpc3RzLlwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRG9uZSFcIik7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2NyZWF0ZV9hZG1pbi5zcWxcbi0tIEFkZCBhZG1pbiB1c2VyIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbklOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQsIGVtYWlsLCBmdWxsX25hbWUsIHJvbGUpXG5TRUxFQ1QgJ2FkbWluJywgJ2FkbWluMTIzJywgJ2FkbWluQGdtYWlsLmNvbScsICdBZG1pbiBVc2VyJywgJ2FkbWluJ1xuRlJPTSBkdWFsXG5XSEVSRSBOT1QgRVhJU1RTIChcbiAgICBTRUxFQ1QgMSBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gJ2FkbWluJ1xuKTtcblxuLS0gRGlzcGxheSB1c2Vyc1xuU0VMRUNUIGlkLCB1c2VybmFtZSwgZW1haWwsIHJvbGUgRlJPTSB1c2Vycztcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS91dGlsL0RhdGFiYXNlVXRpbC5qYXZhXG5wYWNrYWdlIHV0aWw7XG5cbmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xuaW1wb3J0IGphdmEuc3FsLkRyaXZlck1hbmFnZXI7XG5pbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uO1xuXG5wdWJsaWMgY2xhc3MgRGF0YWJhc2VVdGlsIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19VUkwgPSBcImpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9lYm9va2phdmFcIjtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSkRCQ19VU0VSID0gXCJyb290XCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfUEFTU1dPUkQgPSBcIm9yYWNsZVwiO1xuICAgIFxuICAgIHN0YXRpYyB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDbGFzcy5mb3JOYW1lKFwiY29tLm15c3FsLmNqLmpkYmMuRHJpdmVyXCIpO1xuICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHVibGljIHN0YXRpYyBDb25uZWN0aW9uIGdldENvbm5lY3Rpb24oKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHtcbiAgICAgICAgcmV0dXJuIERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIGNsb3NlQ29ubmVjdGlvbihDb25uZWN0aW9uIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgaWYgKGNvbm5lY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvVXNlci5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIFVzZXIge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJuYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIHBhc3N3b3JkO1xuICAgIHByaXZhdGUgU3RyaW5nIGVtYWlsO1xuICAgIHByaXZhdGUgU3RyaW5nIGZ1bGxOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIHJvbGU7IC8vIFwiYWRtaW5cIiBvciBcInVzZXJcIlxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVkQXQ7IC8vIFJlZ2lzdHJhdGlvbiBkYXRlXG5cbiAgICBwdWJsaWMgVXNlcigpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXNlcihpbnQgaWQsIFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkLCBTdHJpbmcgZW1haWwsIFN0cmluZyBmdWxsTmFtZSwgU3RyaW5nIHJvbGUpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsO1xuICAgICAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gbmV3IERhdGUoKTsgLy8gU2V0IHRvIGN1cnJlbnQgZGF0ZSBieSBkZWZhdWx0XG4gICAgfVxuXG4gICAgLy8gR2V0dGVycyBhbmQgU2V0dGVyc1xuICAgIHB1YmxpYyBpbnQgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJZChpbnQgaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VXNlcm5hbWUoKSB7XG4gICAgICAgIHJldHVybiB1c2VybmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9tb2RlbC9PcmRlckl0ZW0uamF2YVxucGFja2FnZSBtb2RlbDtcblxuaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuXG5wdWJsaWMgY2xhc3MgT3JkZXJJdGVtIHtcbiAgICBwcml2YXRlIGludCBpZDtcbiAgICBwcml2YXRlIGludCBvcmRlcklkO1xuICAgIHByaXZhdGUgaW50IGJvb2tJZDtcbiAgICBwcml2YXRlIGludCBxdWFudGl0eTtcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgcHJpY2U7XG4gICAgcHJpdmF0ZSBCb29rIGJvb2s7XG4gICAgXG4gICAgcHVibGljIE9yZGVySXRlbSgpIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIE9yZGVySXRlbShpbnQgaWQsIGludCBvcmRlcklkLCBpbnQgYm9va0lkLCBpbnQgcXVhbnRpdHksIEJpZ0RlY2ltYWwgcHJpY2UpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuICAgICAgICB0aGlzLmJvb2tJZCA9IGJvb2tJZDtcbiAgICAgICAgdGhpcy5xdWFudGl0eSA9IHF1YW50aXR5O1xuICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0T3JkZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldE9yZGVySWQoaW50IG9yZGVySWQpIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGludCBnZXRCb29rSWQoKSB7XG4gICAgICAgIHJldHVybiBib29rSWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEJvb2tJZChpbnQgYm9va0lkKSB7XG4gICAgICAgIHRoaXMuYm9va0lkID0gYm9va0lkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldFF1YW50aXR5KCkge1xuICAgICAgICByZXR1cm4gcXVhbnRpdHk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFF1YW50aXR5KGludCBxdWFudGl0eSkge1xuICAgICAgICB0aGlzLnF1YW50aXR5ID0gcXVhbnRpdHk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBCaWdEZWNpbWFsIGdldFByaWNlKCkge1xuICAgICAgICByZXR1cm4gcHJpY2U7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFByaWNlKEJpZ0RlY2ltYWwgcHJpY2UpIHtcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgQm9vayBnZXRCb29rKCkge1xuICAgICAgICByZXR1cm4gYm9vaztcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0Qm9vayhCb29rIGJvb2spIHtcbiAgICAgICAgdGhpcy5ib29rID0gYm9vaztcbiAgICB9XG4gICAgXG4gICAgcHVibGljIEJpZ0RlY2ltYWwgZ2V0U3VidG90YWwoKSB7XG4gICAgICAgIHJldHVybiBwcmljZS5tdWx0aXBseShuZXcgQmlnRGVjaW1hbChxdWFudGl0eSkpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9tb2RlbC9Cb29rLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgQm9vayB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdGl0bGU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgYXV0aG9yO1xuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuICAgIHByaXZhdGUgU3RyaW5nIGNhdGVnb3J5O1xuICAgIHByaXZhdGUgU3RyaW5nIGdlbnJlO1xuICAgIHByaXZhdGUgQmlnRGVjaW1hbCBwcmljZTtcbiAgICBwcml2YXRlIFN0cmluZyBpbWFnZVVybDtcbiAgICBwcml2YXRlIGludCBzdG9jaztcbiAgICBcbiAgICBwdWJsaWMgQm9vaygpIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIEJvb2soaW50IGlkLCBTdHJpbmcgdGl0bGUsIFN0cmluZyBhdXRob3IsIFN0cmluZyBkZXNjcmlwdGlvbiwgU3RyaW5nIGNhdGVnb3J5LCBcbiAgICAgICAgICAgICAgICBTdHJpbmcgZ2VucmUsIEJpZ0RlY2ltYWwgcHJpY2UsIFN0cmluZyBpbWFnZVVybCwgaW50IHN0b2NrKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmF1dGhvciA9IGF1dGhvcjtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIHRoaXMuZ2VucmUgPSBnZW5yZTtcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgICAgIHRoaXMuc3RvY2sgPSBzdG9jaztcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0dGVycyBhbmQgU2V0dGVyc1xuICAgIHB1YmxpYyBpbnQgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0SWQoaW50IGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9tb2RlbC9PcmRlci5qYXZhXG5wYWNrYWdlIG1vZGVsO1xuXG5pbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbnB1YmxpYyBjbGFzcyBPcmRlciB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBpbnQgdXNlcklkO1xuICAgIHByaXZhdGUgRGF0ZSBvcmRlckRhdGU7XG4gICAgcHJpdmF0ZSBCaWdEZWNpbWFsIHRvdGFsQW1vdW50O1xuICAgIHByaXZhdGUgU3RyaW5nIHN0YXR1czsgLy8gXCJwZW5kaW5nXCIsIFwicHJvY2Vzc2luZ1wiLCBcInNoaXBwZWRcIiwgXCJkZWxpdmVyZWRcIiwgXCJjYW5jZWxsZWRcIlxuICAgIHByaXZhdGUgTGlzdDxPcmRlckl0ZW0+IG9yZGVySXRlbXM7XG4gICAgXG4gICAgcHVibGljIE9yZGVyKCkge1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgT3JkZXIoaW50IGlkLCBpbnQgdXNlcklkLCBEYXRlIG9yZGVyRGF0ZSwgQmlnRGVjaW1hbCB0b3RhbEFtb3VudCwgU3RyaW5nIHN0YXR1cykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xuICAgICAgICB0aGlzLm9yZGVyRGF0ZSA9IG9yZGVyRGF0ZTtcbiAgICAgICAgdGhpcy50b3RhbEFtb3VudCA9IHRvdGFsQW1vdW50O1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0dGVycyBhbmQgU2V0dGVyc1xuICAgIHB1YmxpYyBpbnQgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0SWQoaW50IGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGludCBnZXRVc2VySWQoKSB7XG4gICAgICAgIHJldHVybiB1c2VySWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFVzZXJJZChpbnQgdXNlcklkKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgRGF0ZSBnZXRPcmRlckRhdGUoKSB7XG4gICAgICAgIHJldHVybiBvcmRlckRhdGU7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2Rhby9Vc2VyREFPLmphdmFcbnBhY2thZ2UgZGFvO1xuXG5pbXBvcnQgbW9kZWwuVXNlcjtcbmltcG9ydCBqYXZhLnNxbC5Ecml2ZXJNYW5hZ2VyO1xuaW1wb3J0IHV0aWwuUGFzc3dvcmRVdGlsO1xuXG5pbXBvcnQgamF2YS5zcWwuKjtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5wdWJsaWMgY2xhc3MgVXNlckRBTyB7XG5cbiAgICBzdGF0aWMge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShcImNvbS5teXNxbC5jai5qZGJjLkRyaXZlclwiKTtcbiAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGF0YWJhc2UgY29ubmVjdGlvbiBwYXJhbWV0ZXJzXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVJMID0gXCJqZGJjOm15c3FsOi8vbG9jYWxob3N0OjMzMDYvZWJvb2tqYXZhXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVNFUiA9IFwicm9vdFwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1BBU1NXT1JEID0gXCJvcmFjbGVcIjtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9tb2RlbC9DYXJ0SXRlbS5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIENhcnRJdGVtIHtcbiAgICBwcml2YXRlIGludCBpZDtcbiAgICBwcml2YXRlIGludCB1c2VySWQ7XG4gICAgcHJpdmF0ZSBpbnQgYm9va0lkO1xuICAgIHByaXZhdGUgaW50IHF1YW50aXR5O1xuICAgIHByaXZhdGUgQm9vayBib29rO1xuICAgIFxuICAgIHB1YmxpYyBDYXJ0SXRlbSgpIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIENhcnRJdGVtKGludCBpZCwgaW50IHVzZXJJZCwgaW50IGJvb2tJZCwgaW50IHF1YW50aXR5KSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XG4gICAgICAgIHRoaXMuYm9va0lkID0gYm9va0lkO1xuICAgICAgICB0aGlzLnF1YW50aXR5ID0gcXVhbnRpdHk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0VXNlcklkKCkge1xuICAgICAgICByZXR1cm4gdXNlcklkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRVc2VySWQoaW50IHVzZXJJZCkge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGludCBnZXRCb29rSWQoKSB7XG4gICAgICAgIHJldHVybiBib29rSWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEJvb2tJZChpbnQgYm9va0lkKSB7XG4gICAgICAgIHRoaXMuYm9va0lkID0gYm9va0lkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldFF1YW50aXR5KCkge1xuICAgICAgICByZXR1cm4gcXVhbnRpdHk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFF1YW50aXR5KGludCBxdWFudGl0eSkge1xuICAgICAgICB0aGlzLnF1YW50aXR5ID0gcXVhbnRpdHk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBCb29rIGdldEJvb2soKSB7XG4gICAgICAgIHJldHVybiBib29rO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9tb2RlbC9QYXltZW50LmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgUGF5bWVudCB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBpbnQgb3JkZXJJZDtcbiAgICBwcml2YXRlIFN0cmluZyBwYXltZW50TWV0aG9kO1xuICAgIHByaXZhdGUgU3RyaW5nIGNhcmROdW1iZXI7XG4gICAgcHJpdmF0ZSBTdHJpbmcgY2FyZEhvbGRlck5hbWU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgZXhwaXJ5RGF0ZTtcbiAgICBwcml2YXRlIFN0cmluZyBjdnY7XG4gICAgcHJpdmF0ZSBCaWdEZWNpbWFsIGFtb3VudDtcbiAgICBwcml2YXRlIFN0cmluZyBzdGF0dXM7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdHJhbnNhY3Rpb25JZDtcbiAgICBwcml2YXRlIERhdGUgcGF5bWVudERhdGU7XG4gICAgXG4gICAgLy8gQ29uc3RydWN0b3JzXG4gICAgcHVibGljIFBheW1lbnQoKSB7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldHRlcnMgYW5kIHNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0T3JkZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldE9yZGVySWQoaW50IG9yZGVySWQpIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRQYXltZW50TWV0aG9kKCkge1xuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0UGF5bWVudE1ldGhvZChTdHJpbmcgcGF5bWVudE1ldGhvZCkge1xuICAgICAgICB0aGlzLnBheW1lbnRNZXRob2QgPSBwYXltZW50TWV0aG9kO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldENhcmROdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiBjYXJkTnVtYmVyO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS91dGlsL0NyZWF0ZUFkbWluVXNlci5qYXZhXG5wYWNrYWdlIHV0aWw7XG5cbmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uO1xuaW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuaW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDtcbmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247XG5cbnB1YmxpYyBjbGFzcyBDcmVhdGVBZG1pblVzZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgY2hlY2tTdG10ID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgaW5zZXJ0U3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEYXRhYmFzZVV0aWwuZ2V0Q29ubmVjdGlvbigpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhZG1pbiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgICAgICAgICBTdHJpbmcgY2hlY2tTcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZjk3YzdlNzQtZGQ2Yy00OWUxLWI4ZWMtMTRiYTdiODczY2ZiO3Rvb2x1X3ZydHhfMDFOdDcyZmJVSDJTQXM2bnk4dTRSZVU2Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXG4uLi5cblxuQFdlYlNlcnZsZXQodmFsdWU9XCIvYWRtaW4vYm9va3MvKlwiKVxuQE11bHRpcGFydENvbmZpZyhmaWxlU2l6ZVRocmVzaG9sZD0xMDI0KjEwMjQqMiwgLy8gMk1CXG4gICAgICAgICAgICAgICAgIG1heEZpbGVTaXplPTEwMjQqMTAyNCoxMCwgICAgICAvLyAxME1CXG4gICAgICAgICAgICAgICAgIG1heFJlcXVlc3RTaXplPTEwMjQqMTAyNCo1MCkgICAvLyA1ME1CXG5wdWJsaWMgY2xhc3MgQWRtaW5Cb29rc1NlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgcHJpdmF0ZSBCb29rREFPIGJvb2tEQU87XG5cbiAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgICAgICBib29rREFPID0gbmV3IEJvb2tEQU8oKTtcbi4uLlxuXG4gICAgLy8gSGVscGVyIG1ldGhvZCB0byBoYW5kbGUgZmlsZSB1cGxvYWRcbiAgICBwcml2YXRlIFN0cmluZyBzYXZlRmlsZShQYXJ0IGZpbGVQYXJ0LCBTdHJpbmcgYXBwbGljYXRpb25QYXRoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgcGFydCBpcyB2YWxpZFxuICAgICAgICBpZiAoZmlsZVBhcnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IGlzIG51bGwhXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IGlzIG51bGxcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U2l6ZSgpIDw9IDApIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBmaWxlUGFydCBzaXplIGlzIDAhXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IHNpemUgaXMgMFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpID09IG51bGwgfHwgZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBObyBmaWxlbmFtZSBzdWJtaXR0ZWQhXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTm8gZmlsZW5hbWUgc3VibWl0dGVkXCIpO1xuICAgICAgICB9XG4uLi5cblxuICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIHVzaW5nIGEgc2ltcGxlciBhcHByb2FjaFxuICAgICAgICB0cnkgKElucHV0U3RyZWFtIGlucHV0ID0gZmlsZVBhcnQuZ2V0SW5wdXRTdHJlYW0oKTtcbiAgICAgICAgICAgICBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW0gb3V0cHV0ID0gbmV3IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbShmdWxsRmlsZVBhdGgpKSB7XG5cbiAgICAgICAgICAgIC8vIENvcHkgdGhlIGZpbGUgY29udGVudFxuICAgICAgICAgICAgYnl0ZVtdIGJ1ZmZlciA9IG5ldyBieXRlWzgxOTJdO1xuICAgICAgICAgICAgaW50IGJ5dGVzUmVhZDtcbiAgICAgICAgICAgIHdoaWxlICgoYnl0ZXNSZWFkID0gaW5wdXQucmVhZChidWZmZXIpKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgIG91dHB1dC53cml0ZShidWZmZXIsIDAsIGJ5dGVzUmVhZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgZmlsZSB3YXMgY3JlYXRlZFxuICAgICAgICAgICAgRmlsZSBzYXZlZEZpbGUgPSBuZXcgRmlsZShmdWxsRmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKHNhdmVkRmlsZS5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgc2F2ZWQgc3VjY2Vzc2Z1bGx5OiBcIiArIHNhdmVkRmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBzaXplOiBcIiArIHNhdmVkRmlsZS5sZW5ndGgoKSArIFwiIGJ5dGVzXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogRmlsZSB3YXMgbm90IGNyZWF0ZWQhXCIpO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSByZWxhdGl2ZSBwYXRoIHRvIGJlIHN0b3JlZCBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgLy8gVXNlIGEgcGF0aCB0aGF0IHdpbGwgYmUgYWNjZXNzaWJsZSBmcm9tIHRoZSB3ZWIgYXBwbGljYXRpb25cbiAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL1wiICsgdW5pcXVlRmlsZU5hbWU7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIGRhdGFiYXNlOiBcIiArIHJlbGF0aXZlUGF0aCk7XG5cbiAgICAgICAgLy8gQWxzbyBwcmludCB3aGF0IHRoZSBmdWxsIFVSTCB3b3VsZCBiZVxuICAgICAgICBTdHJpbmcgZnVsbFVybCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgcmVsYXRpdmVQYXRoO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIFVSTCB3b3VsZCBiZTogXCIgKyBmdWxsVXJsKTtcblxuICAgICAgICByZXR1cm4gcmVsYXRpdmVQYXRoO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKCk7XG4gICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cbiAgICAgICAgaWYgKHVzZXIgPT0gbnVsbCB8fCAhdXNlci5pc0FkbWluKCkpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9sb2dpblwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vYm9va3MtbGlzdC5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocGF0aEluZm8uZXF1YWxzKFwiL2FkZFwiKSkge1xuICAgICAgICAgICAgLy8gU2hvdyBhZGQgYm9vayBmb3JtXG4gICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocGF0aEluZm8uc3RhcnRzV2l0aChcIi92aWV3L1wiKSkge1xuICAgICAgICAgICAgLy8gU2hvdyBib29rIGRldGFpbHMgaW4gdmlldy1vbmx5IG1vZGVcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW50IGJvb2tJZCA9IEludGVnZXIucGFyc2VJbnQocGF0aEluZm8uc3Vic3RyaW5nKDYpKTtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBib29rREFPLmdldEJvb2tCeUlkKGJvb2tJZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYm9vayAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiYm9va1wiLCBib29rKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJ2aWV3T25seVwiLCB0cnVlKTsgLy8gRmxhZyB0byBpbmRpY2F0ZSB2aWV3LW9ubHkgbW9kZVxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzXCIpO1xuICAgICAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgIGlmIChcImFkZFwiLmVxdWFscyhhY3Rpb24pKSB7XG4gICAgICAgICAgICAvLyBBZGQgbmV3IGJvb2tcbiAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICBib29rLnNldFRpdGxlKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhdXRob3JcIikpO1xuICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihyZXF1ZXN0LmdldFBhcmFtZXRlcihcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgIGJvb2suc2V0Q2F0ZWdvcnkocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICBib29rLnNldEdlbnJlKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiZ2VucmVcIikpO1xuICAgICAgICAgICAgYm9vay5zZXRQcmljZShuZXcgQmlnRGVjaW1hbChyZXF1ZXN0LmdldFBhcmFtZXRlcihcInByaWNlXCIpKSk7XG4gICAgICAgICAgICBib29rLnNldFN0b2NrKEludGVnZXIucGFyc2VJbnQocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJzdG9ja1wiKSkpO1xuXG4gICAgICAgICAgICAvLyBIYW5kbGUgaW1hZ2UgdXBsb2FkXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJQcm9jZXNzaW5nIGltYWdlIHVwbG9hZCBmb3IgQUREIG9wZXJhdGlvblwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVHJ5aW5nIHRvIGdldCBmaWxlIHBhcnQgd2l0aCBuYW1lICdib29rSW1hZ2UnLi4uXCIpO1xuICAgICAgICAgICAgICAgIFBhcnQgZmlsZVBhcnQgPSByZXF1ZXN0LmdldFBhcnQoXCJib29rSW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0IHJldHJpZXZlZDogXCIgKyAoZmlsZVBhcnQgIT0gbnVsbCkpO1xuXG4gICAgICAgICAgICAgICAgLy8gUHJpbnQgYWxsIHBhcnRzIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBbGwgcGFydHMgaW4gdGhlIHJlcXVlc3Q6XCIpO1xuICAgICAgICAgICAgICAgIGZvciAoUGFydCBwYXJ0IDogcmVxdWVzdC5nZXRQYXJ0cygpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgUGFydCBuYW1lOiBcIiArIHBhcnQuZ2V0TmFtZSgpICsgXCIsIFNpemU6IFwiICsgcGFydC5nZXRTaXplKCkgKyBcIiwgQ29udGVudCB0eXBlOiBcIiArIHBhcnQuZ2V0Q29udGVudFR5cGUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcImJvb2tJbWFnZVwiLmVxdWFscyhwYXJ0LmdldE5hbWUoKSkgJiYgcGFydC5nZXRTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIEZvdW5kIGJvb2tJbWFnZSBwYXJ0IHdpdGggc2l6ZSA+IDBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFN1Ym1pdHRlZCBmaWxlbmFtZTogXCIgKyBwYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVQYXJ0ICE9IG51bGwgJiYgZmlsZVBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHBhcnQgc2l6ZTogXCIgKyBmaWxlUGFydC5nZXRTaXplKCkpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIG5hbWU6IFwiICsgZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBhcHBsaWNhdGlvbidzIHJlYWwgcGF0aFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYXBwbGljYXRpb25QYXRoID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBcHBsaWNhdGlvbiBwYXRoOiBcIiArIGFwcGxpY2F0aW9uUGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSBhbmQgZ2V0IGl0cyBwYXRoXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVBhdGggPSBzYXZlRmlsZShmaWxlUGFydCwgYXBwbGljYXRpb25QYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2Ugc2F2ZWQsIHBhdGggdG8gc3RvcmUgaW4gREI6IFwiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgaW1hZ2UgVVJMXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIFVSTCBzZXQgaW4gYm9vayBvYmplY3Q6IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkwgd291bGQgYmU6IFwiICsgcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWFnZVBhdGgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vIGZpbGUgdXBsb2FkZWQgb3IgZmlsZSBpcyBlbXB0eSwgdXNpbmcgZGVmYXVsdCBpbWFnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIHByb2Nlc3NpbmcgZmlsZSB1cGxvYWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGggb24gZXJyb3JcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJvb2tEQU8uYWRkQm9vayhib29rKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9ib29rcz9hZGRlZD10cnVlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkZhaWxlZCB0byBhZGQgYm9va1wiKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImJvb2tcIiwgYm9vayk7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICBpZiAoZmlsZVBhcnQgIT0gbnVsbCAmJiBmaWxlUGFydC5nZXRTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCBzaXplOiBcIiArIGZpbGVQYXJ0LmdldFNpemUoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgbmFtZTogXCIgKyBmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGFwcGxpY2F0aW9uJ3MgcmVhbCBwYXRoXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSByZXF1ZXN0LmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFwcGxpY2F0aW9uIHBhdGg6IFwiICsgYXBwbGljYXRpb25QYXRoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIGFuZCBnZXQgaXRzIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlUGF0aCA9IHNhdmVGaWxlKGZpbGVQYXJ0LCBhcHBsaWNhdGlvblBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBzYXZlZCwgcGF0aCB0byBzdG9yZSBpbiBEQjogXCIgKyBpbWFnZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlUGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBpbWFnZSBVUkxcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2UgVVJMIHNldCBpbiBib29rIG9iamVjdDogXCIgKyBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIGltYWdlIFVSTCB3b3VsZCBiZTogXCIgKyByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgY3VycmVudCBpbWFnZSBpZiBubyBuZXcgaW1hZ2UgaXMgdXBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGN1cnJlbnRJbWFnZVVybCA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY3VycmVudEltYWdlVXJsXCIpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBuZXcgZmlsZSB1cGxvYWRlZCwgY3VycmVudCBpbWFnZSBVUkw6IFwiICsgY3VycmVudEltYWdlVXJsKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEltYWdlVXJsICE9IG51bGwgJiYgIWN1cnJlbnRJbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIktlZXBpbmcgY3VycmVudCBpbWFnZSBVUkw6IFwiICsgY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vIGN1cnJlbnQgaW1hZ2UgVVJMLCB1c2luZyBkZWZhdWx0IGltYWdlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgcHJvY2Vzc2luZyBmaWxlIHVwbG9hZDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcblxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byBrZWVwIGN1cnJlbnQgaW1hZ2Ugb24gZXJyb3JcbiAgICAgICAgICAgICAgICBTdHJpbmcgY3VycmVudEltYWdlVXJsID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjdXJyZW50SW1hZ2VVcmxcIik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbWFnZVVybCAhPSBudWxsICYmICFjdXJyZW50SW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXNpbmcgY3VycmVudCBpbWFnZSBVUkwgYWZ0ZXIgZXJyb3I6IFwiICsgY3VycmVudEltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKFwiaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIik7IC8vIERlZmF1bHQgaW1hZ2UgcGF0aCBvbiBlcnJvclxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2luZyBkZWZhdWx0IGltYWdlIGFmdGVyIGVycm9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vQm9va0RBTy5qYXZhXG4uLi5cblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgQm9vayBib29rID0gbmV3IEJvb2soKTtcbiAgICAgICAgICAgICAgICBib29rLnNldElkKHJzLmdldEludChcImlkXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFRpdGxlKHJzLmdldFN0cmluZyhcInRpdGxlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEF1dGhvcihycy5nZXRTdHJpbmcoXCJhdXRob3JcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0RGVzY3JpcHRpb24ocnMuZ2V0U3RyaW5nKFwiZGVzY3JpcHRpb25cIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0Q2F0ZWdvcnkocnMuZ2V0U3RyaW5nKFwiY2F0ZWdvcnlcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0R2VucmUocnMuZ2V0U3RyaW5nKFwiZ2VucmVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0UHJpY2UocnMuZ2V0QmlnRGVjaW1hbChcInByaWNlXCIpKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIik7XG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VOYW1lID0gaW1hZ2VVcmwuc3Vic3RyaW5nKGltYWdlVXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgICAgICAgICAgICAgICBpZiAoYm9vay5nZXRUaXRsZSgpLmVxdWFscyhcIlRoZSBHcmVhdCBHYXRzYnlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9nYXRzYnkuanBnXCI7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJJTlNFUlQgSU5UTyBib29rcyAodGl0bGUsIGF1dGhvciwgZGVzY3JpcHRpb24sIGNhdGVnb3J5LCBnZW5yZSwgcHJpY2UsIGltYWdlX3VybCwgc3RvY2spIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPylcIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGJvb2suZ2V0VGl0bGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBib29rLmdldEF1dGhvcigpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBib29rLmdldENhdGVnb3J5KCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNSwgYm9vay5nZXRHZW5yZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQm9va0RBTy5hZGRCb29rOiBTZXR0aW5nIGltYWdlIFVSTCB0bzogXCIgKyBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNywgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDgsIGJvb2suZ2V0U3RvY2soKSk7XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlVQREFURSBib29rcyBTRVQgdGl0bGUgPSA/LCBhdXRob3IgPSA/LCBkZXNjcmlwdGlvbiA9ID8sIGNhdGVnb3J5ID0gPywgZ2VucmUgPSA/LCBwcmljZSA9ID8sIGltYWdlX3VybCA9ID8sIHN0b2NrID0gPyBXSEVSRSBpZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGJvb2suZ2V0VGl0bGUoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBib29rLmdldEF1dGhvcigpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg0LCBib29rLmdldENhdGVnb3J5KCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNSwgYm9vay5nZXRHZW5yZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQm9va0RBTy51cGRhdGVCb29rOiBTZXR0aW5nIGltYWdlIFVSTCB0bzogXCIgKyBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNywgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDgsIGJvb2suZ2V0U3RvY2soKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg5LCBib29rLmdldElkKCkpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL21vZGVsL0Jvb2suamF2YVxucGFja2FnZSBtb2RlbDtcblxuaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuXG5wdWJsaWMgY2xhc3MgQm9vayB7XG4gICAgcHJpdmF0ZSBpbnQgaWQ7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdGl0bGU7XG4gICAgcHJpdmF0ZSBTdHJpbmcgYXV0aG9yO1xuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuICAgIHByaXZhdGUgU3RyaW5nIGNhdGVnb3J5O1xuICAgIHByaXZhdGUgU3RyaW5nIGdlbnJlO1xuICAgIHByaXZhdGUgQmlnRGVjaW1hbCBwcmljZTtcbiAgICBwcml2YXRlIFN0cmluZyBpbWFnZVVybDtcbiAgICBwcml2YXRlIGludCBzdG9jaztcbiAgICBcbiAgICBwdWJsaWMgQm9vaygpIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIEJvb2soaW50IGlkLCBTdHJpbmcgdGl0bGUsIFN0cmluZyBhdXRob3IsIFN0cmluZyBkZXNjcmlwdGlvbiwgU3RyaW5nIGNhdGVnb3J5LCBcbiAgICAgICAgICAgICAgICBTdHJpbmcgZ2VucmUsIEJpZ0RlY2ltYWwgcHJpY2UsIFN0cmluZyBpbWFnZVVybCwgaW50IHN0b2NrKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmF1dGhvciA9IGF1dGhvcjtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIHRoaXMuZ2VucmUgPSBnZW5yZTtcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgICAgIHRoaXMuc3RvY2sgPSBzdG9jaztcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0dGVycyBhbmQgU2V0dGVyc1xuICAgIHB1YmxpYyBpbnQgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0SWQoaW50IGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRUaXRsZShTdHJpbmcgdGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldEF1dGhvcigpIHtcbiAgICAgICAgcmV0dXJuIGF1dGhvcjtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0QXV0aG9yKFN0cmluZyBhdXRob3IpIHtcbiAgICAgICAgdGhpcy5hdXRob3IgPSBhdXRob3I7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0RGVzY3JpcHRpb24oU3RyaW5nIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRDYXRlZ29yeSgpIHtcbiAgICAgICAgcmV0dXJuIGNhdGVnb3J5O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRDYXRlZ29yeShTdHJpbmcgY2F0ZWdvcnkpIHtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldEdlbnJlKCkge1xuICAgICAgICByZXR1cm4gZ2VucmU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEdlbnJlKFN0cmluZyBnZW5yZSkge1xuICAgICAgICB0aGlzLmdlbnJlID0gZ2VucmU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBCaWdEZWNpbWFsIGdldFByaWNlKCkge1xuICAgICAgICByZXR1cm4gcHJpY2U7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFByaWNlKEJpZ0RlY2ltYWwgcHJpY2UpIHtcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldEltYWdlVXJsKCkge1xuICAgICAgICByZXR1cm4gaW1hZ2VVcmw7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEltYWdlVXJsKFN0cmluZyBpbWFnZVVybCkge1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBpbnQgZ2V0U3RvY2soKSB7XG4gICAgICAgIHJldHVybiBzdG9jaztcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0U3RvY2soaW50IHN0b2NrKSB7XG4gICAgICAgIHRoaXMuc3RvY2sgPSBzdG9jaztcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwXG4uLi5cblxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRhc2hib2FyZFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhc2hib2FyZC1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICA8JVxuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IChCb29rKSByZXF1ZXN0LmdldEF0dHJpYnV0ZShcImJvb2tcIik7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiB2aWV3T25seSA9IChyZXF1ZXN0LmdldEF0dHJpYnV0ZShcInZpZXdPbmx5XCIpICE9IG51bGwgJiYgKEJvb2xlYW4pcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJ2aWV3T25seVwiKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodmlld09ubHkpIHtcbiAgICAgICAgICAgICAgICAlPlxuICAgICAgICAgICAgICAgIDxoMT5WaWV3IEJvb2s8L2gxPlxuICAgICAgICAgICAgICAgIDwlIH0gZWxzZSBpZiAoYm9vayAhPSBudWxsKSB7ICU+XG4gICAgICAgICAgICAgICAgPGgxPkVkaXQgQm9vazwvaDE+XG4gICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT5cbiAgICAgICAgICAgICAgICA8aDE+QWRkIE5ldyBCb29rPC9oMT5cbiAgICAgICAgICAgICAgICA8JSB9ICU+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBEYXNoYm9hcmQgbWVudSBtb3ZlZCB0byBoZWFkZXIgLS0+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXNoYm9hcmQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgIDwlIGlmIChyZXF1ZXN0LmdldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiKSAhPSBudWxsKSB7ICU+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgIDwlPSByZXF1ZXN0LmdldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiKSAlPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwlIH0gJT5cbi4uLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPXJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSU+L2FkbWluL2Jvb2tzL2VkaXQvPCU9IGJvb2suZ2V0SWQoKSAlPlwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+RWRpdDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9cmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpJT4vYWRtaW4vYm9va3NcIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCI+QmFjazwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgPCEtLSBFZGl0L0FkZCBtb2RlIC0tPlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249XCI8JT1yZXF1ZXN0LmdldENvbnRleHRQYXRoKCklPi9hZG1pbi9ib29rc1wiIG1ldGhvZD1cInBvc3RcIiBlbmN0eXBlPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiIGlkPVwiYm9va0Zvcm1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwpIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImFjdGlvblwiIHZhbHVlPVwidXBkYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJpZFwiIHZhbHVlPVwiPCU9IGJvb2suZ2V0SWQoKSAlPlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImFjdGlvblwiIHZhbHVlPVwiYWRkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU+XG4uLi5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYm9va0ltYWdlXCI+Qm9vayBJbWFnZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJib29rSW1hZ2VcIiBuYW1lPVwiYm9va0ltYWdlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG9uY2hhbmdlPVwiY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0ZWQ6ICcgKyB0aGlzLmZpbGVzWzBdLm5hbWUpO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJyZW50IGltYWdlOjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltZ1BhdGggPSBib29rLmdldEltYWdlVXJsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWdQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBwYXRoIGluIEpTUDogXCIgKyBpbWdQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkw6IFwiICsgZnVsbEltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gVHJ5IGRpZmZlcmVudCB3YXlzIHRvIHJlZmVyZW5jZSB0aGUgaW1hZ2UgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOGExZDZiMDgtOWJhOC00YjY2LTk2N2YtNjE2Y2ExMzNlN2IzO3Rvb2x1X3ZydHhfMDFVRnNUN2MyUzN0WkpFSzUzTHVvSDh0Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2RhdGFiYXNlLnNxbFxuLS0gQ3JlYXRlIGRhdGFiYXNlXG5DUkVBVEUgREFUQUJBU0UgSUYgTk9UIEVYSVNUUyBlYm9va2phdmE7XG5VU0UgZWJvb2tzdG9yZTtcblxuLS0gQ3JlYXRlIHRhYmxlc1xuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB1c2VybmFtZSBWQVJDSEFSKDUwKSBOT1QgTlVMTCBVTklRVUUsXG4gICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgIGVtYWlsIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBmdWxsX25hbWUgVkFSQ0hBUigxMDApIE5PVCBOVUxMLFxuICAgIHJvbGUgVkFSQ0hBUigyMCkgTk9UIE5VTEwgREVGQVVMVCAndXNlcicsXG4gICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuKTtcblxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYm9va3MgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICB0aXRsZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgYXV0aG9yIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgIGNhdGVnb3J5IFZBUkNIQVIoNTApLFxuICAgIGdlbnJlIFZBUkNIQVIoNTApLFxuICAgIHByaWNlIERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIGltYWdlX3VybCBWQVJDSEFSKDI1NSksXG4gICAgc3RvY2sgSU5UIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4pO1xuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjYXJ0X2l0ZW1zIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgdXNlcl9pZCBJTlQgTk9UIE5VTEwsXG4gICAgYm9va19pZCBJTlQgTk9UIE5VTEwsXG4gICAgcXVhbnRpdHkgSU5UIE5PVCBOVUxMIERFRkFVTFQgMSxcbiAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIHVzZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoYm9va19pZCkgUkVGRVJFTkNFUyBib29rcyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoXG4gICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgIHVzZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIG9yZGVyX2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgdG90YWxfYW1vdW50IERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVyX2l0ZW1zIChcbiAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgb3JkZXJfaWQgSU5UIE5PVCBOVUxMLFxuICAgIGJvb2tfaWQgSU5UIE5PVCBOVUxMLFxuICAgIHF1YW50aXR5IElOVCBOT1QgTlVMTCxcbiAgICBwcmljZSBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCxcbiAgICBGT1JFSUdOIEtFWSAob3JkZXJfaWQpIFJFRkVSRU5DRVMgb3JkZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoYm9va19pZCkgUkVGRVJFTkNFUyBib29rcyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbi0tIEluc2VydCBzYW1wbGUgZGF0YVxuLS0gQWRtaW4gdXNlciAocGFzc3dvcmQ6IGFkbWluMTIzKVxuSU5TRVJUIElOVE8gdXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgZW1haWwsIGZ1bGxfbmFtZSwgcm9sZSkgVkFMVUVTXG4oJ2FkbWluJywgJ2FkbWluMTIzJywgJ2FkbWluQGVib29rc3RvcmUuY29tJywgJ0FkbWluIFVzZXInLCAnYWRtaW4nKTtcblxuLS0gUmVndWxhciB1c2VycyAocGFzc3dvcmQ6IHVzZXIxMjMpXG5JTlNFUlQgSU5UTyB1c2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgZnVsbF9uYW1lLCByb2xlKSBWQUxVRVNcbignam9obicsICd1c2VyMTIzJywgJ2pvaG5AZXhhbXBsZS5jb20nLCAnSm9obiBEb2UnLCAndXNlcicpLFxuKCdqYW5lJywgJ3VzZXIxMjMnLCAnamFuZUBleGFtcGxlLmNvbScsICdKYW5lIFNtaXRoJywgJ3VzZXInKTtcblxuLS0gU2FtcGxlIGJvb2tzXG5JTlNFUlQgSU5UTyBib29rcyAodGl0bGUsIGF1dGhvciwgZGVzY3JpcHRpb24sIGNhdGVnb3J5LCBnZW5yZSwgcHJpY2UsIGltYWdlX3VybCwgc3RvY2spIFZBTFVFU1xuKCdUaGUgR3JlYXQgR2F0c2J5JywgJ0YuIFNjb3R0IEZpdHpnZXJhbGQnLCAnQSBub3ZlbCBhYm91dCB0aGUgbXlzdGVyaW91cyBKYXkgR2F0c2J5IGFuZCBoaXMgbG92ZSBmb3IgRGFpc3kgQnVjaGFuYW4uJywgJ0ZpY3Rpb24nLCAnQ2xhc3NpYycsIDkuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9nYXRzYnkuanBnJywgMTAwKSxcbignVG8gS2lsbCBhIE1vY2tpbmdiaXJkJywgJ0hhcnBlciBMZWUnLCAnQSBub3ZlbCBhYm91dCByYWNpYWwgaW5lcXVhbGl0eSB0aHJvdWdoIHRoZSBleWVzIG9mIGEgeW91bmcgZ2lybCBpbiBBbGFiYW1hLicsICdGaWN0aW9uJywgJ0NsYXNzaWMnLCA4Ljk5LCAnaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZXMvbW9ja2luZ2JpcmQuanBnJywgNzUpLFxuKCcxOTg0JywgJ0dlb3JnZSBPcndlbGwnLCAnQSBkeXN0b3BpYW4gbm92ZWwgc2V0IGluIGEgdG90YWxpdGFyaWFuIHNvY2lldHkuJywgJ0ZpY3Rpb24nLCAnRHlzdG9waWFuJywgNy45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzLzE5ODQuanBnJywgNTApLFxuKCdUaGUgSG9iYml0JywgJ0ouUi5SLiBUb2xraWVuJywgJ0EgZmFudGFzeSBub3ZlbCBhYm91dCB0aGUgYWR2ZW50dXJlcyBvZiBCaWxibyBCYWdnaW5zLicsICdGaWN0aW9uJywgJ0ZhbnRhc3knLCAxMi45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL2hvYmJpdC5qcGcnLCA2MCksXG4oJ0EgQnJpZWYgSGlzdG9yeSBvZiBUaW1lJywgJ1N0ZXBoZW4gSGF3a2luZycsICdBIGJvb2sgYWJvdXQgdGhlIG5hdHVyZSBvZiB0aW1lIGFuZCB0aGUgdW5pdmVyc2UuJywgJ05vbi1GaWN0aW9uJywgJ1NjaWVuY2UnLCAxNC45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL3RpbWUuanBnJywgNDApLFxuKCdTYXBpZW5zOiBBIEJyaWVmIEhpc3Rvcnkgb2YgSHVtYW5raW5kJywgJ1l1dmFsIE5vYWggSGFyYXJpJywgJ0EgYm9vayBhYm91dCB0aGUgaGlzdG9yeSBvZiBodW1hbiBldm9sdXRpb24uJywgJ05vbi1GaWN0aW9uJywgJ0hpc3RvcnknLCAxNS45OSwgJ2h0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2VzL3NhcGllbnMuanBnJywgMzApLFxuKCdDbGVhbiBDb2RlJywgJ1JvYmVydCBDLiBNYXJ0aW4nLCAnQSBoYW5kYm9vayBvZiBhZ2lsZSBzb2Z0d2FyZSBjcmFmdHNtYW5zaGlwLicsICdUZWNobm9sb2d5JywgJ1Byb2dyYW1taW5nJywgMjkuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9jbGVhbmNvZGUuanBnJywgMjUpLFxuKCdUaGUgQXJ0IG9mIENvbXB1dGVyIFByb2dyYW1taW5nJywgJ0RvbmFsZCBLbnV0aCcsICdBIGNvbXByZWhlbnNpdmUgbW9ub2dyYXBoIG9uIGNvbXB1dGVyIHByb2dyYW1taW5nLicsICdUZWNobm9sb2d5JywgJ1Byb2dyYW1taW5nJywgNDkuOTksICdodHRwczovL2V4YW1wbGUuY29tL2ltYWdlcy9rbnV0aC5qcGcnLCAxNSk7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2FkZF9wYXltZW50X3RhYmxlLnNxbFxuLS0gQ29ubmVjdCB0byB0aGUgZWJvb2tqYXZhIGRhdGFiYXNlXG5VU0UgZWJvb2tqYXZhO1xuXG4tLSBDcmVhdGUgcGF5bWVudCB0YWJsZVxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcGF5bWVudHMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICBvcmRlcl9pZCBJTlQgTk9UIE5VTEwsXG4gICAgcGF5bWVudF9tZXRob2QgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgY2FyZF9udW1iZXIgVkFSQ0hBUigyNTUpLFxuICAgIGNhcmRfaG9sZGVyX25hbWUgVkFSQ0hBUigxMDApLFxuICAgIGV4cGlyeV9kYXRlIFZBUkNIQVIoMTApLFxuICAgIGN2diBWQVJDSEFSKDEwKSxcbiAgICBhbW91bnQgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgc3RhdHVzIFZBUkNIQVIoMjApIE5PVCBOVUxMIERFRkFVTFQgJ3BlbmRpbmcnLFxuICAgIHRyYW5zYWN0aW9uX2lkIFZBUkNIQVIoMTAwKSxcbiAgICBwYXltZW50X2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgRk9SRUlHTiBLRVkgKG9yZGVyX2lkKSBSRUZFUkVOQ0VTIG9yZGVycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbi0tIERpc3BsYXkgdGhlIHRhYmxlIHN0cnVjdHVyZVxuREVTQ1JJQkUgcGF5bWVudHM7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvcmVzb3VyY2VzL2Vuc3VyZV9wYXltZW50c190YWJsZS5zcWxcbi0tIENvbm5lY3QgdG8gdGhlIGVib29ramF2YSBkYXRhYmFzZVxuVVNFIGVib29ramF2YTtcblxuLS0gQ3JlYXRlIHBheW1lbnQgdGFibGUgaWYgaXQgZG9lc24ndCBleGlzdFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcGF5bWVudHMgKFxuICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICBvcmRlcl9pZCBJTlQgTk9UIE5VTEwsXG4gICAgcGF5bWVudF9tZXRob2QgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgY2FyZF9udW1iZXIgVkFSQ0hBUigyNTUpLFxuICAgIGNhcmRfaG9sZGVyX25hbWUgVkFSQ0hBUigxMDApLFxuICAgIGV4cGlyeV9kYXRlIFZBUkNIQVIoMTApLFxuICAgIGN2diBWQVJDSEFSKDEwKSxcbiAgICBhbW91bnQgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgc3RhdHVzIFZBUkNIQVIoMjApIE5PVCBOVUxMIERFRkFVTFQgJ3BlbmRpbmcnLFxuICAgIHRyYW5zYWN0aW9uX2lkIFZBUkNIQVIoMTAwKSxcbiAgICBwYXltZW50X2RhdGUgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgRk9SRUlHTiBLRVkgKG9yZGVyX2lkKSBSRUZFUkVOQ0VTIG9yZGVycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbi0tIERpc3BsYXkgdGhlIHRhYmxlIHN0cnVjdHVyZVxuREVTQ1JJQkUgcGF5bWVudHM7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGFvL0Jvb2tEQU8uamF2YVxuLi4uXG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcblxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0U3RvY2socnMuZ2V0SW50KFwic3RvY2tcIikpO1xuICAgICAgICAgICAgICAgIGJvb2tzLmFkZChib29rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYm9va3M7XG4gICAgfVxuXG4gICAgcHVibGljIExpc3Q8Qm9vaz4gZ2V0QWxsQm9va3MoKSB7XG4gICAgICAgIExpc3Q8Qm9vaz4gYm9va3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG5cbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQm9va0RBTzogR2V0dGluZyBhbGwgYm9va3NcIik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIGJvb2tzXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFeGVjdXRpbmcgU1FMOiBcIiArIHNxbCk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJPcmlnaW5hbCBpbWFnZSBVUkwgZm9yIFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCI6IFwiICsgaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udmVydGVkIHRvOiBcIiArIGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRTdG9jayhycy5nZXRJbnQoXCJzdG9ja1wiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvb2s7XG4gICAgfVxuXG4gICAgcHVibGljIExpc3Q8Qm9vaz4gZ2V0Qm9va3NCeUNhdGVnb3J5KFN0cmluZyBjYXRlZ29yeSkge1xuICAgICAgICByZXR1cm4gZ2V0Qm9va3NCeUNhdGVnb3J5KGNhdGVnb3J5LCAxLCBJbnRlZ2VyLk1BWF9WQUxVRSk7XG4gICAgfVxuXG4gICAgcHVibGljIExpc3Q8Qm9vaz4gZ2V0Qm9va3NCeUNhdGVnb3J5KFN0cmluZyBjYXRlZ29yeSwgaW50IHBhZ2UsIGludCBib29rc1BlclBhZ2UpIHtcbiAgICAgICAgTGlzdDxCb29rPiBib29rcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcblxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPOiBHZXR0aW5nIGJvb2tzIGJ5IGNhdGVnb3J5OiBcIiArIGNhdGVnb3J5ICsgXCIsIHBhZ2U6IFwiICsgcGFnZSArIFwiLCBib29rc1BlclBhZ2U6IFwiICsgYm9va3NQZXJQYWdlKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gYm9va3MgV0hFUkUgY2F0ZWdvcnkgPSA/IExJTUlUID8gT0ZGU0VUID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGNhdGVnb3J5KTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIGJvb2tzUGVyUGFnZSk7XG4gICAgICAgICAgICBzdG10LnNldEludCgzLCAocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkV4ZWN1dGluZyBTUUw6IFwiICsgc3FsICsgXCIgd2l0aCBwYXJhbWV0ZXJzOiBjYXRlZ29yeT1cIiArIGNhdGVnb3J5ICsgXCIsIGxpbWl0PVwiICsgYm9va3NQZXJQYWdlICsgXCIsIG9mZnNldD1cIiArICgocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKSk7XG4gICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgIHB1YmxpYyBMaXN0PEJvb2s+IHNlYXJjaEJvb2tzKFN0cmluZyBrZXl3b3JkLCBpbnQgcGFnZSwgaW50IGJvb2tzUGVyUGFnZSkge1xuICAgICAgICBMaXN0PEJvb2s+IGJvb2tzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBib29rcyBXSEVSRSB0aXRsZSBMSUtFID8gT1IgYXV0aG9yIExJS0UgPyBPUiBjYXRlZ29yeSBMSUtFID8gTElNSVQgPyBPRkZTRVQgP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgU3RyaW5nIHNlYXJjaEtleXdvcmQgPSBcIiVcIiArIGtleXdvcmQgKyBcIiVcIjtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaEtleXdvcmQpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgc2VhcmNoS2V5d29yZCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBzZWFyY2hLZXl3b3JkKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDQsIGJvb2tzUGVyUGFnZSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg1LCAocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gYm9va3MgKHRpdGxlLCBhdXRob3IsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSwgZ2VucmUsIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBib29rLmdldERlc2NyaXB0aW9uKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJpZ0RlY2ltYWwoNiwgYm9vay5nZXRQcmljZSgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8uYWRkQm9vazogU2V0dGluZyBpbWFnZSBVUkwgdG86IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg4LCBib29rLmdldFN0b2NrKCkpO1xuLi4uXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgYm9va3MgU0VUIHRpdGxlID0gPywgYXV0aG9yID0gPywgZGVzY3JpcHRpb24gPSA/LCBjYXRlZ29yeSA9ID8sIGdlbnJlID0gPywgcHJpY2UgPSA/LCBpbWFnZV91cmwgPSA/LCBzdG9jayA9ID8gV0hFUkUgaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBib29rLmdldERlc2NyaXB0aW9uKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJpZ0RlY2ltYWwoNiwgYm9vay5nZXRQcmljZSgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8udXBkYXRlQm9vazogU2V0dGluZyBpbWFnZSBVUkwgdG86IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg4LCBib29rLmdldFN0b2NrKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoOSwgYm9vay5nZXRJZCgpKTtcbi4uLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBGaXJzdCwgZGVsZXRlIHJlbGF0ZWQgcmVjb3JkcyBpbiBjYXJ0X2l0ZW1zXG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIGRlbGV0ZUNhcnRTcWwgPSBcIkRFTEVURSBGUk9NIGNhcnRfaXRlbXMgV0hFUkUgYm9va19pZCA9ID9cIjtcbiAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoZGVsZXRlQ2FydFNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBpZCk7XG4gICAgICAgICAgICBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbiAgICAgICAgICAgIHN0bXQuY2xvc2UoKTtcblxuICAgICAgICAgICAgLy8gVGhlbiwgZGVsZXRlIHJlbGF0ZWQgcmVjb3JkcyBpbiBvcmRlcl9pdGVtc1xuICAgICAgICAgICAgU3RyaW5nIGRlbGV0ZU9yZGVySXRlbXNTcWwgPSBcIkRFTEVURSBGUk9NIG9yZGVyX2l0ZW1zIFdIRVJFIGJvb2tfaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KGRlbGV0ZU9yZGVySXRlbXNTcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoMSwgaWQpO1xuICAgICAgICAgICAgc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBzdG10LmNsb3NlKCk7XG5cbiAgICAgICAgICAgIC8vIEZpbmFsbHksIGRlbGV0ZSB0aGUgYm9va1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiREVMRVRFIEZST00gYm9va3MgV0hFUkUgaWQgPSA/XCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldEludCgxLCBpZCk7XG4gICAgICAgICAgICBzdG10LmV4ZWN1dGVVcGRhdGUoKTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9tb2RlbC9Cb29rLmphdmFcbnBhY2thZ2UgbW9kZWw7XG5cbmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcblxucHVibGljIGNsYXNzIEJvb2sge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgU3RyaW5nIHRpdGxlO1xuICAgIHByaXZhdGUgU3RyaW5nIGF1dGhvcjtcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcbiAgICBwcml2YXRlIFN0cmluZyBjYXRlZ29yeTtcbiAgICBwcml2YXRlIFN0cmluZyBnZW5yZTtcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgcHJpY2U7XG4gICAgcHJpdmF0ZSBTdHJpbmcgaW1hZ2VVcmw7XG4gICAgcHJpdmF0ZSBpbnQgc3RvY2s7XG4gICAgXG4gICAgcHVibGljIEJvb2soKSB7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBCb29rKGludCBpZCwgU3RyaW5nIHRpdGxlLCBTdHJpbmcgYXV0aG9yLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBjYXRlZ29yeSwgXG4gICAgICAgICAgICAgICAgU3RyaW5nIGdlbnJlLCBCaWdEZWNpbWFsIHByaWNlLCBTdHJpbmcgaW1hZ2VVcmwsIGludCBzdG9jaykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5hdXRob3IgPSBhdXRob3I7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICB0aGlzLmdlbnJlID0gZ2VucmU7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgICAgICB0aGlzLnN0b2NrID0gc3RvY2s7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnNcbiAgICBwdWJsaWMgaW50IGdldElkKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0VGl0bGUoU3RyaW5nIHRpdGxlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRBdXRob3IoKSB7XG4gICAgICAgIHJldHVybiBhdXRob3I7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldEF1dGhvcihTdHJpbmcgYXV0aG9yKSB7XG4gICAgICAgIHRoaXMuYXV0aG9yID0gYXV0aG9yO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gZGVzY3JpcHRpb247XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldERlc2NyaXB0aW9uKFN0cmluZyBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2F0ZWdvcnkoKSB7XG4gICAgICAgIHJldHVybiBjYXRlZ29yeTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRHZW5yZSgpIHtcbiAgICAgICAgcmV0dXJuIGdlbnJlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRHZW5yZShTdHJpbmcgZ2VucmUpIHtcbiAgICAgICAgdGhpcy5nZW5yZSA9IGdlbnJlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgQmlnRGVjaW1hbCBnZXRQcmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHByaWNlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRQcmljZShCaWdEZWNpbWFsIHByaWNlKSB7XG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXRJbWFnZVVybCgpIHtcbiAgICAgICAgcmV0dXJuIGltYWdlVXJsO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRJbWFnZVVybChTdHJpbmcgaW1hZ2VVcmwpIHtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgaW50IGdldFN0b2NrKCkge1xuICAgICAgICByZXR1cm4gc3RvY2s7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFN0b2NrKGludCBzdG9jaykge1xuICAgICAgICB0aGlzLnN0b2NrID0gc3RvY2s7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3Jlc291cmNlcy9jcmVhdGVfYWRtaW4uc3FsXG4tLSBBZGQgYWRtaW4gdXNlciBpZiBpdCBkb2Vzbid0IGV4aXN0XG5JTlNFUlQgSU5UTyB1c2VycyAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgZnVsbF9uYW1lLCByb2xlKVxuU0VMRUNUICdhZG1pbicsICdhZG1pbjEyMycsICdhZG1pbkBnbWFpbC5jb20nLCAnQWRtaW4gVXNlcicsICdhZG1pbidcbkZST00gZHVhbFxuV0hFUkUgTk9UIEVYSVNUUyAoXG4gICAgU0VMRUNUIDEgRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ICdhZG1pbidcbik7XG5cbi0tIERpc3BsYXkgdXNlcnNcblNFTEVDVCBpZCwgdXNlcm5hbWUsIGVtYWlsLCByb2xlIEZST00gdXNlcnM7XG4uLi5cblBhdGg6IGFkbWluX3VwZGF0ZS5zcWxcbi0tIENvbm5lY3QgdG8gdGhlIGVib29rc3RvcmUgZGF0YWJhc2VcblVTRSBlYm9va3N0b3JlO1xuXG4tLSBVcGRhdGUgdGhlIGFkbWluIHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGNyZWRlbnRpYWxzXG5VUERBVEUgdXNlcnMgU0VUIFxuICAgIGVtYWlsID0gJ2FkbWluQGdtYWlsLmNvbScsXG4gICAgcGFzc3dvcmQgPSAnYWRtaW4xMjMnXG5XSEVSRSB1c2VybmFtZSA9ICdhZG1pbic7XG5cbi0tIEVuc3VyZSBhbGwgb3RoZXIgdXNlcnMgaGF2ZSB0aGUgJ3VzZXInIHJvbGVcblVQREFURSB1c2VycyBTRVQgXG4gICAgcm9sZSA9ICd1c2VyJ1xuV0hFUkUgdXNlcm5hbWUgIT0gJ2FkbWluJztcblxuLS0gRGlzcGxheSBhbGwgdXNlcnMgdG8gdmVyaWZ5IHRoZSBjaGFuZ2VzXG5TRUxFQ1QgaWQsIHVzZXJuYW1lLCBlbWFpbCwgcm9sZSBGUk9NIHVzZXJzO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL21vZGVsL09yZGVyLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgT3JkZXIge1xuICAgIHByaXZhdGUgaW50IGlkO1xuICAgIHByaXZhdGUgaW50IHVzZXJJZDtcbiAgICBwcml2YXRlIERhdGUgb3JkZXJEYXRlO1xuICAgIHByaXZhdGUgQmlnRGVjaW1hbCB0b3RhbEFtb3VudDtcbiAgICBwcml2YXRlIFN0cmluZyBzdGF0dXM7IC8vIFwicGVuZGluZ1wiLCBcInByb2Nlc3NpbmdcIiwgXCJzaGlwcGVkXCIsIFwiZGVsaXZlcmVkXCIsIFwiY2FuY2VsbGVkXCJcbiAgICBwcml2YXRlIExpc3Q8T3JkZXJJdGVtPiBvcmRlckl0ZW1zO1xuICAgIFxuICAgIHB1YmxpYyBPcmRlcigpIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIE9yZGVyKGludCBpZCwgaW50IHVzZXJJZCwgRGF0ZSBvcmRlckRhdGUsIEJpZ0RlY2ltYWwgdG90YWxBbW91bnQsIFN0cmluZyBzdGF0dXMpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcbiAgICAgICAgdGhpcy5vcmRlckRhdGUgPSBvcmRlckRhdGU7XG4gICAgICAgIHRoaXMudG90YWxBbW91bnQgPSB0b3RhbEFtb3VudDtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgfVxuICAgIFxuICAgIC8uLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIwMzlkMjY1OS0zNzYzLTQyODUtYjRhZi02NmJlMzAxNzlmMzE7dG9vbHVfdnJ0eF8wMTZMMkdVVmllQWNCQVg3Y1VtRFQ3N3giOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9kYW8vQm9va0RBTy5qYXZhXG4uLi5cblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VOYW1lID0gaW1hZ2VVcmwuc3Vic3RyaW5nKGltYWdlVXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgICAgICAgICAgICAgICBpZiAoYm9vay5nZXRUaXRsZSgpLmVxdWFscyhcIlRoZSBHcmVhdCBHYXRzYnlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9nYXRzYnkuanBnXCI7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJPcmlnaW5hbCBpbWFnZSBVUkwgZm9yIFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCI6IFwiICsgaW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udmVydGVkIHRvOiBcIiArIGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcIik7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaW5hbCBpbWFnZSBVUkw6IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgICAgICAgICAgICAgICBib29rcy5hZGQoYm9vayk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRm91bmQgYm9vazogXCIgKyBib29rLmdldFRpdGxlKCkgKyBcIiB3aXRoIGNhdGVnb3J5OiBcIiArIGJvb2suZ2V0Q2F0ZWdvcnkoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgIH1cbi4uLlxuXG4gICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYm9vaztcbiAgICB9XG5cbiAgICBwdWJsaWMgTGlzdDxCb29rPiBnZXRCb29rc0J5Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgICAgIHJldHVybiBnZXRCb29rc0J5Q2F0ZWdvcnkoY2F0ZWdvcnksIDEsIEludGVnZXIuTUFYX1ZBTFVFKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgTGlzdDxCb29rPiBnZXRCb29rc0J5Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5LCBpbnQgcGFnZSwgaW50IGJvb2tzUGVyUGFnZSkge1xuICAgICAgICBMaXN0PEJvb2s+IGJvb2tzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU86IEdldHRpbmcgYm9va3MgYnkgY2F0ZWdvcnk6IFwiICsgY2F0ZWdvcnkgKyBcIiwgcGFnZTogXCIgKyBwYWdlICsgXCIsIGJvb2tzUGVyUGFnZTogXCIgKyBib29rc1BlclBhZ2UpO1xuLi4uXG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIGJvb2tzIFdIRVJFIHRpdGxlIExJS0UgPyBPUiBhdXRob3IgTElLRSA/IE9SIGNhdGVnb3J5IExJS0UgP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgU3RyaW5nIHNlYXJjaEtleXdvcmQgPSBcIiVcIiArIGtleXdvcmQgKyBcIiVcIjtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaEtleXdvcmQpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgc2VhcmNoS2V5d29yZCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBzZWFyY2hLZXl3b3JkKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIGNvdW50ID0gcnMuZ2V0SW50KDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG5cbiAgICBwdWJsaWMgTGlzdDxCb29rPiBzZWFyY2hCb29rcyhTdHJpbmcga2V5d29yZCkge1xuICAgICAgICByZXR1cm4gc2VhcmNoQm9va3Moa2V5d29yZCwgMSwgSW50ZWdlci5NQVhfVkFMVUUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBMaXN0PEJvb2s+IHNlYXJjaEJvb2tzKFN0cmluZyBrZXl3b3JkLCBpbnQgcGFnZSwgaW50IGJvb2tzUGVyUGFnZSkge1xuICAgICAgICBMaXN0PEJvb2s+IGJvb2tzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBib29rcyBXSEVSRSB0aXRsZSBMSUtFID8gT1IgYXV0aG9yIExJS0UgPyBPUiBjYXRlZ29yeSBMSUtFID8gTElNSVQgPyBPRkZTRVQgP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgU3RyaW5nIHNlYXJjaEtleXdvcmQgPSBcIiVcIiArIGtleXdvcmQgKyBcIiVcIjtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaEtleXdvcmQpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgc2VhcmNoS2V5d29yZCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBzZWFyY2hLZXl3b3JkKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDQsIGJvb2tzUGVyUGFnZSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg1LCAocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKTtcbiAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcblxuICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsICYmIGltYWdlVXJsLmNvbnRhaW5zKFwiZXhhbXBsZS5jb21cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAgICAgICAgICAgICAgaWYgKGJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoXCJUaGUgR3JlYXQgR2F0c2J5XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgICAgICAgICAgICAgICBib29rcy5hZGQoYm9vayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIGFkZEJvb2soQm9vayBib29rKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gYm9va3MgKHRpdGxlLCBhdXRob3IsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSwgZ2VucmUsIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pXCI7XG4gICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZygzLCBib29rLmdldERlc2NyaXB0aW9uKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoNCwgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICAgICAgICAgICBzdG10LnNldEJpZ0RlY2ltYWwoNiwgYm9vay5nZXRQcmljZSgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8uYWRkQm9vazogU2V0dGluZyBpbWFnZSBVUkwgdG86IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldEludCg4LCBib29rLmdldFN0b2NrKCkpO1xuXG4gICAgICAgICAgICBpbnQgcm93c0FmZmVjdGVkID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPLmFkZEJvb2s6IFJvd3MgYWZmZWN0ZWQ6IFwiICsgcm93c0FmZmVjdGVkKTtcbiAgICAgICAgICAgIHJldHVybiByb3dzQWZmZWN0ZWQgPiAwO1xuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIHVwZGF0ZUJvb2soQm9vayBib29rKSB7XG4gICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiVVBEQVRFIGJvb2tzIFNFVCB0aXRsZSA9ID8sIGF1dGhvciA9ID8sIGRlc2NyaXB0aW9uID0gPywgY2F0ZWdvcnkgPSA/LCBnZW5yZSA9ID8sIHByaWNlID0gPywgaW1hZ2VfdXJsID0gPywgc3RvY2sgPSA/IFdIRVJFIGlkID0gP1wiO1xuICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgYm9vay5nZXRUaXRsZSgpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDIsIGJvb2suZ2V0QXV0aG9yKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgYm9vay5nZXREZXNjcmlwdGlvbigpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGJvb2suZ2V0Q2F0ZWdvcnkoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg1LCBib29rLmdldEdlbnJlKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRCaWdEZWNpbWFsKDYsIGJvb2suZ2V0UHJpY2UoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPLnVwZGF0ZUJvb2s6IFNldHRpbmcgaW1hZ2UgVVJMIHRvOiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICBzdG10LnNldFN0cmluZyg3LCBib29rLmdldEltYWdlVXJsKCkpO1xuICAgICAgICAgICAgc3RtdC5zZXRJbnQoOCwgYm9vay5nZXRTdG9jaygpKTtcbiAgICAgICAgICAgIHN0bXQuc2V0SW50KDksIGJvb2suZ2V0SWQoKSk7XG4uLi5cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEFsd2F5cyByZXR1cm4gdHJ1ZSB0byBhdm9pZCBhbnkgZGVsYXlzXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAvLyBTaWxlbnRseSBoYW5kbGUgdGhlIGV4Y2VwdGlvbiB0byBhdm9pZCBkZWxheXNcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBSZXR1cm4gdHJ1ZSBhbnl3YXkgdG8gYXZvaWQgcmVkaXJlY3RzXG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAvLyBIZWxwZXIgbWV0aG9kIHRvIGhhbmRsZSBmaWxlIHVwbG9hZFxuICAgIHByaXZhdGUgU3RyaW5nIHNhdmVGaWxlKFBhcnQgZmlsZVBhcnQsIFN0cmluZyBhcHBsaWNhdGlvblBhdGgpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIC8vIFZlcmlmeSB0aGUgZmlsZSBwYXJ0IGlzIHZhbGlkXG4gICAgICAgIGlmIChmaWxlUGFydCA9PSBudWxsKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogZmlsZVBhcnQgaXMgbnVsbCFcIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJGaWxlIHBhcnQgaXMgbnVsbFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWxlUGFydC5nZXRTaXplKCkgPD0gMCkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IHNpemUgaXMgMCFcIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJGaWxlIHBhcnQgc2l6ZSBpcyAwXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkgPT0gbnVsbCB8fCBmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IE5vIGZpbGVuYW1lIHN1Ym1pdHRlZCFcIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJObyBmaWxlbmFtZSBzdWJtaXR0ZWRcIik7XG4gICAgICAgIH1cbi4uLlxuXG4gICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgdXNpbmcgYSBzaW1wbGVyIGFwcHJvYWNoXG4gICAgICAgIHRyeSAoSW5wdXRTdHJlYW0gaW5wdXQgPSBmaWxlUGFydC5nZXRJbnB1dFN0cmVhbSgpO1xuICAgICAgICAgICAgIGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbSBvdXRwdXQgPSBuZXcgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtKGZ1bGxGaWxlUGF0aCkpIHtcblxuICAgICAgICAgICAgLy8gQ29weSB0aGUgZmlsZSBjb250ZW50XG4gICAgICAgICAgICBieXRlW10gYnVmZmVyID0gbmV3IGJ5dGVbODE5Ml07XG4gICAgICAgICAgICBpbnQgYnl0ZXNSZWFkO1xuICAgICAgICAgICAgd2hpbGUgKChieXRlc1JlYWQgPSBpbnB1dC5yZWFkKGJ1ZmZlcikpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0LndyaXRlKGJ1ZmZlciwgMCwgYnl0ZXNSZWFkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHdhcyBjcmVhdGVkXG4gICAgICAgICAgICBGaWxlIHNhdmVkRmlsZSA9IG5ldyBGaWxlKGZ1bGxGaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoc2F2ZWRGaWxlLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBzYXZlZCBzdWNjZXNzZnVsbHk6IFwiICsgc2F2ZWRGaWxlLmdldEFic29sdXRlUGF0aCgpKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHNpemU6IFwiICsgc2F2ZWRGaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXNcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBGaWxlIHdhcyBub3QgY3JlYXRlZCFcIik7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgLy8gSGFuZGxlIGltYWdlIHVwbG9hZFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvY2Vzc2luZyBpbWFnZSB1cGxvYWQgZm9yIEFERCBvcGVyYXRpb25cIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlRyeWluZyB0byBnZXQgZmlsZSBwYXJ0IHdpdGggbmFtZSAnYm9va0ltYWdlJy4uLlwiKTtcbiAgICAgICAgICAgICAgICBQYXJ0IGZpbGVQYXJ0ID0gcmVxdWVzdC5nZXRQYXJ0KFwiYm9va0ltYWdlXCIpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCByZXRyaWV2ZWQ6IFwiICsgKGZpbGVQYXJ0ICE9IG51bGwpKTtcblxuICAgICAgICAgICAgICAgIC8vIFByaW50IGFsbCBwYXJ0cyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWxsIHBhcnRzIGluIHRoZSByZXF1ZXN0OlwiKTtcbiAgICAgICAgICAgICAgICBmb3IgKFBhcnQgcGFydCA6IHJlcXVlc3QuZ2V0UGFydHMoKSkge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFBhcnQgbmFtZTogXCIgKyBwYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIHBhcnQuZ2V0U2l6ZSgpICsgXCIsIENvbnRlbnQgdHlwZTogXCIgKyBwYXJ0LmdldENvbnRlbnRUeXBlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJib29rSW1hZ2VcIi5lcXVhbHMocGFydC5nZXROYW1lKCkpICYmIHBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBGb3VuZCBib29rSW1hZ2UgcGFydCB3aXRoIHNpemUgPiAwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBTdWJtaXR0ZWQgZmlsZW5hbWU6IFwiICsgcGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmaWxlUGFydCAhPSBudWxsICYmIGZpbGVQYXJ0LmdldFNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0IHNpemU6IFwiICsgZmlsZVBhcnQuZ2V0U2l6ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBuYW1lOiBcIiArIGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgYXBwbGljYXRpb24ncyByZWFsIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXBwbGljYXRpb24gcGF0aDogXCIgKyBhcHBsaWNhdGlvblBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgYW5kIGdldCBpdHMgcGF0aFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VQYXRoID0gc2F2ZUZpbGUoZmlsZVBhcnQsIGFwcGxpY2F0aW9uUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIHNhdmVkLCBwYXRoIHRvIHN0b3JlIGluIERCOiBcIiArIGltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VQYXRoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGltYWdlIFVSTFxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBVUkwgc2V0IGluIGJvb2sgb2JqZWN0OiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgaW1hZ2UgVVJMIHdvdWxkIGJlOiBcIiArIHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBmaWxlIHVwbG9hZGVkIG9yIGZpbGUgaXMgZW1wdHksIHVzaW5nIGRlZmF1bHQgaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgdXBsb2FkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgLy8gSGFuZGxlIGltYWdlIHVwbG9hZFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvY2Vzc2luZyBpbWFnZSB1cGxvYWQgZm9yIFVQREFURSBvcGVyYXRpb25cIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlRyeWluZyB0byBnZXQgZmlsZSBwYXJ0IHdpdGggbmFtZSAnYm9va0ltYWdlJy4uLlwiKTtcbiAgICAgICAgICAgICAgICBQYXJ0IGZpbGVQYXJ0ID0gcmVxdWVzdC5nZXRQYXJ0KFwiYm9va0ltYWdlXCIpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCByZXRyaWV2ZWQ6IFwiICsgKGZpbGVQYXJ0ICE9IG51bGwpKTtcblxuICAgICAgICAgICAgICAgIC8vIFByaW50IGFsbCBwYXJ0cyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWxsIHBhcnRzIGluIHRoZSByZXF1ZXN0OlwiKTtcbiAgICAgICAgICAgICAgICBmb3IgKFBhcnQgcGFydCA6IHJlcXVlc3QuZ2V0UGFydHMoKSkge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFBhcnQgbmFtZTogXCIgKyBwYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIHBhcnQuZ2V0U2l6ZSgpICsgXCIsIENvbnRlbnQgdHlwZTogXCIgKyBwYXJ0LmdldENvbnRlbnRUeXBlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJib29rSW1hZ2VcIi5lcXVhbHMocGFydC5nZXROYW1lKCkpICYmIHBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBGb3VuZCBib29rSW1hZ2UgcGFydCB3aXRoIHNpemUgPiAwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBTdWJtaXR0ZWQgZmlsZW5hbWU6IFwiICsgcGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmaWxlUGFydCAhPSBudWxsICYmIGZpbGVQYXJ0LmdldFNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0IHNpemU6IFwiICsgZmlsZVBhcnQuZ2V0U2l6ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBuYW1lOiBcIiArIGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgYXBwbGljYXRpb24ncyByZWFsIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXBwbGljYXRpb24gcGF0aDogXCIgKyBhcHBsaWNhdGlvblBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgYW5kIGdldCBpdHMgcGF0aFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VQYXRoID0gc2F2ZUZpbGUoZmlsZVBhcnQsIGFwcGxpY2F0aW9uUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIHNhdmVkLCBwYXRoIHRvIHN0b3JlIGluIERCOiBcIiArIGltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VQYXRoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGltYWdlIFVSTFxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBVUkwgc2V0IGluIGJvb2sgb2JqZWN0OiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgaW1hZ2UgVVJMIHdvdWxkIGJlOiBcIiArIHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSBjdXJyZW50IGltYWdlIGlmIG5vIG5ldyBpbWFnZSBpcyB1cGxvYWRlZFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY3VycmVudEltYWdlVXJsID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJjdXJyZW50SW1hZ2VVcmxcIik7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vIG5ldyBmaWxlIHVwbG9hZGVkLCBjdXJyZW50IGltYWdlIFVSTDogXCIgKyBjdXJyZW50SW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SW1hZ2VVcmwgIT0gbnVsbCAmJiAhY3VycmVudEltYWdlVXJsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChjdXJyZW50SW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiS2VlcGluZyBjdXJyZW50IGltYWdlIFVSTDogXCIgKyBjdXJyZW50SW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTm8gY3VycmVudCBpbWFnZSBVUkwsIHVzaW5nIGRlZmF1bHQgaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKFwiaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIik7IC8vIERlZmF1bHQgaW1hZ2UgcGF0aFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgdXBsb2FkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGtlZXAgY3VycmVudCBpbWFnZSBvbiBlcnJvclxuICAgICAgICAgICAgICAgIFN0cmluZyBjdXJyZW50SW1hZ2VVcmwgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImN1cnJlbnRJbWFnZVVybFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEltYWdlVXJsICE9IG51bGwgJiYgIWN1cnJlbnRJbWFnZVVybC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChjdXJyZW50SW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJVc2luZyBjdXJyZW50IGltYWdlIFVSTCBhZnRlciBlcnJvcjogXCIgKyBjdXJyZW50SW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVzaW5nIGRlZmF1bHQgaW1hZ2UgYWZ0ZXIgLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMmZlZWQ2Y2YtM2UzMS00OTQ0LTg1YWEtMWEzN2ZiMTkyYjc1O3Rvb2x1X3ZydHhfMDFQN3Q5ZVpwdW5BTllzWjNIdzlhNHNpIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9kYW8vQm9va0RBTy5qYXZhOlxuICAgICAxXHRwYWNrYWdlIGRhbztcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBtb2RlbC5Cb29rO1xuICAgICA0XHRpbXBvcnQgamF2YS5zcWwuRHJpdmVyTWFuYWdlcjtcbiAgICAgNVx0XG4gICAgIDZcdGltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcbiAgICAgN1x0aW1wb3J0IGphdmEuc3FsLio7XG4gICAgIDhcdGltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuICAgICA5XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMTBcdFxuICAgIDExXHRwdWJsaWMgY2xhc3MgQm9va0RBTyB7XG4gICAgMTJcdFxuICAgIDEzXHQgICAgc3RhdGljIHtcbiAgICAxNFx0ICAgICAgICB0cnkge1xuICAgIDE1XHQgICAgICAgICAgICBDbGFzcy5mb3JOYW1lKFwiY29tLm15c3FsLmNqLmpkYmMuRHJpdmVyXCIpO1xuICAgIDE2XHQgICAgICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkge1xuICAgIDE3XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDE4XHQgICAgICAgIH1cbiAgICAxOVx0ICAgIH1cbiAgICAyMFx0XG4gICAgMjFcdCAgICAvLyBEYXRhYmFzZSBjb25uZWN0aW9uIHBhcmFtZXRlcnNcbiAgICAyMlx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1VSTCA9IFwiamRiYzpteXNxbDovL2xvY2FsaG9zdDozMzA2L2Vib29ramF2YVwiO1xuICAgIDIzXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfVVNFUiA9IFwicm9vdFwiO1xuICAgIDI0XHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfUEFTU1dPUkQgPSBcIm9yYWNsZVwiO1xuICAgIDI1XHRcbiAgICAyNlx0ICAgIC8vIEdldCB0b3RhbCBudW1iZXIgb2YgYm9va3MgZm9yIHBhZ2luYXRpb25cbiAgICAyN1x0ICAgIHB1YmxpYyBpbnQgZ2V0VG90YWxCb29rcygpIHtcbiAgICAyOFx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDI5XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgIDMwXHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgMzFcdCAgICAgICAgaW50IGNvdW50ID0gMDtcbiAgICAzMlx0XG4gICAgMzNcdCAgICAgICAgdHJ5IHtcbiAgICAzNFx0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgICAzNVx0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gYm9va3NcIjtcbiAgICAzNlx0ICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgIDM3XHQgICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICAgMzhcdFxuICAgIDM5XHQgICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICAgNDBcdCAgICAgICAgICAgICAgICBjb3VudCA9IHJzLmdldEludCgxKTtcbiAgICA0MVx0ICAgICAgICAgICAgfVxuICAgIDQyXHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAgNDNcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgNDRcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgICA0NVx0ICAgICAgICAgICAgdHJ5IHtcbiAgICA0Nlx0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgIDQ3XHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgIDQ4XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgIDQ5XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgIDUwXHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICA1MVx0ICAgICAgICAgICAgfVxuICAgIDUyXHQgICAgICAgIH1cbiAgICA1M1x0XG4gICAgNTRcdCAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIDU1XHQgICAgfVxuICAgIDU2XHRcbiAgICA1N1x0ICAgIC8vIEdldCB0b3RhbCBudW1iZXIgb2YgYm9va3MgYnkgY2F0ZWdvcnkgZm9yIHBhZ2luYXRpb25cbiAgICA1OFx0ICAgIHB1YmxpYyBpbnQgZ2V0VG90YWxCb29rc0J5Q2F0ZWdvcnkoU3RyaW5nIGNhdGVnb3J5KSB7XG4gICAgNTlcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgICA2MFx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgICA2MVx0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgIDYyXHQgICAgICAgIGludCBjb3VudCA9IDA7XG4gICAgNjNcdFxuICAgIDY0XHQgICAgICAgIHRyeSB7XG4gICAgNjVcdCAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAgNjZcdCAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIGJvb2tzIFdIRVJFIGNhdGVnb3J5ID0gP1wiO1xuICAgIDY3XHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAgNjhcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGNhdGVnb3J5KTtcbiAgICA2OVx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgIDcwXHRcbiAgICA3MVx0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgIDcyXHQgICAgICAgICAgICAgICAgY291bnQgPSBycy5nZXRJbnQoMSk7XG4gICAgNzNcdCAgICAgICAgICAgIH1cbiAgICA3NFx0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgIDc1XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDc2XHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgNzdcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNzhcdCAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgICA3OVx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgICA4MFx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgICA4MVx0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgICA4Mlx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgODNcdCAgICAgICAgICAgIH1cbiAgICA4NFx0ICAgICAgICB9XG4gICAgODVcdFxuICAgIDg2XHQgICAgICAgIHJldHVybiBjb3VudDtcbiAgICA4N1x0ICAgIH1cbiAgICA4OFx0XG4gICAgODlcdCAgICAvLyBHZXQgcGFnaW5hdGVkIGJvb2tzXG4gICAgOTBcdCAgICBwdWJsaWMgTGlzdDxCb29rPiBnZXRCb29rcyhpbnQgcGFnZSwgaW50IGJvb2tzUGVyUGFnZSkge1xuICAgIDkxXHQgICAgICAgIExpc3Q8Qm9vaz4gYm9va3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICA5Mlx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgIDkzXHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgIDk0XHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAgOTVcdFxuICAgIDk2XHQgICAgICAgIHRyeSB7XG4gICAgOTdcdCAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAgOThcdCAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gYm9va3MgTElNSVQgPyBPRkZTRVQgP1wiO1xuICAgIDk5XHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAxMDBcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGJvb2tzUGVyUGFnZSk7XG4gICAxMDFcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDIsIChwYWdlIC0gMSkgKiBib29rc1BlclBhZ2UpO1xuICAgMTAyXHQgICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICAxMDNcdFxuICAgMTA0XHQgICAgICAgICAgICB3aGlsZSAocnMubmV4dCgpKSB7XG4gICAxMDVcdCAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgMTA2XHQgICAgICAgICAgICAgICAgYm9vay5zZXRJZChycy5nZXRJbnQoXCJpZFwiKSk7XG4gICAxMDdcdCAgICAgICAgICAgICAgICBib29rLnNldFRpdGxlKHJzLmdldFN0cmluZyhcInRpdGxlXCIpKTtcbiAgIDEwOFx0ICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAxMDlcdCAgICAgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJzLmdldFN0cmluZyhcImRlc2NyaXB0aW9uXCIpKTtcbiAgIDExMFx0ICAgICAgICAgICAgICAgIGJvb2suc2V0Q2F0ZWdvcnkocnMuZ2V0U3RyaW5nKFwiY2F0ZWdvcnlcIikpO1xuICAgMTExXHQgICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAxMTJcdCAgICAgICAgICAgICAgICBib29rLnNldFByaWNlKHJzLmdldEJpZ0RlY2ltYWwoXCJwcmljZVwiKSk7XG4gICAxMTNcdCAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIik7XG4gICAxMTRcdFxuICAgMTE1XHQgICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAxMTZcdCAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAxMTdcdCAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgIDExOFx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgMTE5XHQgICAgICAgICAgICAgICAgfVxuICAgMTIwXHRcbiAgIDEyMVx0ICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgIDEyMlx0ICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgMTIzXHQgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgMTI0XHQgICAgICAgICAgICAgICAgfVxuICAgMTI1XHRcbiAgIDEyNlx0ICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VVcmwpO1xuICAgMTI3XHQgICAgICAgICAgICAgICAgYm9vay5zZXRTdG9jayhycy5nZXRJbnQoXCJzdG9ja1wiKSk7XG4gICAxMjhcdCAgICAgICAgICAgICAgICBib29rcy5hZGQoYm9vayk7XG4gICAxMjlcdCAgICAgICAgICAgIH1cbiAgIDEzMFx0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgMTMxXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMTMyXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAxMzNcdCAgICAgICAgICAgIHRyeSB7XG4gICAxMzRcdCAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgIDEzNVx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDEzNlx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgIDEzN1x0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDEzOFx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxMzlcdCAgICAgICAgICAgIH1cbiAgIDE0MFx0ICAgICAgICB9XG4gICAxNDFcdFxuICAgMTQyXHQgICAgICAgIHJldHVybiBib29rcztcbiAgIDE0M1x0ICAgIH1cbiAgIDE0NFx0XG4gICAxNDVcdCAgICBwdWJsaWMgTGlzdDxCb29rPiBnZXRBbGxCb29rcygpIHtcbiAgIDE0Nlx0ICAgICAgICBMaXN0PEJvb2s+IGJvb2tzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAxNDdcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgIDE0OFx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgIDE0OVx0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgMTUwXHRcbiAgIDE1MVx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPOiBHZXR0aW5nIGFsbCBib29rc1wiKTtcbiAgIDE1Mlx0XG4gICAxNTNcdCAgICAgICAgdHJ5IHtcbiAgIDE1NFx0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgIDE1NVx0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBib29rc1wiO1xuICAgMTU2XHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAxNTdcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkV4ZWN1dGluZyBTUUw6IFwiICsgc3FsKTtcbiAgIDE1OFx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgMTU5XHRcbiAgIDE2MFx0ICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgMTYxXHQgICAgICAgICAgICAgICAgQm9vayBib29rID0gbmV3IEJvb2soKTtcbiAgIDE2Mlx0ICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgMTYzXHQgICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAxNjRcdCAgICAgICAgICAgICAgICBib29rLnNldEF1dGhvcihycy5nZXRTdHJpbmcoXCJhdXRob3JcIikpO1xuICAgMTY1XHQgICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAxNjZcdCAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgIDE2N1x0ICAgICAgICAgICAgICAgIGJvb2suc2V0R2VucmUocnMuZ2V0U3RyaW5nKFwiZ2VucmVcIikpO1xuICAgMTY4XHQgICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgMTY5XHQgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgMTcwXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiT3JpZ2luYWwgaW1hZ2UgVVJMIGZvciBcIiArIGJvb2suZ2V0VGl0bGUoKSArIFwiOiBcIiArIGltYWdlVXJsKTtcbiAgIDE3MVx0ICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgMTcyXHQgICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgMTczXHQgICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAxNzRcdCAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgIDE3NVx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb252ZXJ0ZWQgdG86IFwiICsgaW1hZ2VVcmwpO1xuICAgMTc2XHQgICAgICAgICAgICAgICAgfVxuICAgMTc3XHRcbiAgIDE3OFx0ICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgIDE3OVx0ICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgMTgwXHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcIik7XG4gICAxODFcdCAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9nYXRzYnkuanBnXCI7XG4gICAxODJcdCAgICAgICAgICAgICAgICB9XG4gICAxODNcdCAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGltYWdlVXJsKTtcbiAgIDE4NFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbmFsIGltYWdlIFVSTDogXCIgKyBib29rLmdldEltYWdlVXJsKCkpO1xuICAgMTg1XHQgICAgICAgICAgICAgICAgYm9vay5zZXRTdG9jayhycy5nZXRJbnQoXCJzdG9ja1wiKSk7XG4gICAxODZcdCAgICAgICAgICAgICAgICBib29rcy5hZGQoYm9vayk7XG4gICAxODdcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGb3VuZCBib29rOiBcIiArIGJvb2suZ2V0VGl0bGUoKSArIFwiIHdpdGggY2F0ZWdvcnk6IFwiICsgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgIDE4OFx0ICAgICAgICAgICAgfVxuICAgMTg5XHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAxOTBcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxOTFcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDE5Mlx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDE5M1x0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgMTk0XHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgMTk1XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgMTk2XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgMTk3XHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDE5OFx0ICAgICAgICAgICAgfVxuICAgMTk5XHQgICAgICAgIH1cbiAgIDIwMFx0XG4gICAyMDFcdCAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgMjAyXHQgICAgfVxuICAgMjAzXHRcbiAgIDIwNFx0ICAgIHB1YmxpYyBCb29rIGdldEJvb2tCeUlkKGludCBpZCkge1xuICAgMjA1XHQgICAgICAgIEJvb2sgYm9vayA9IG51bGw7XG4gICAyMDZcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgIDIwN1x0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgIDIwOFx0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgMjA5XHRcbiAgIDIxMFx0ICAgICAgICB0cnkge1xuICAgMjExXHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgMjEyXHQgICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIGJvb2tzIFdIRVJFIGlkID0gP1wiO1xuICAgMjEzXHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAyMTRcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGlkKTtcbiAgIDIxNVx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgMjE2XHRcbiAgIDIxN1x0ICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkge1xuICAgMjE4XHQgICAgICAgICAgICAgICAgYm9vayA9IG5ldyBCb29rKCk7XG4gICAyMTlcdCAgICAgICAgICAgICAgICBib29rLnNldElkKHJzLmdldEludChcImlkXCIpKTtcbiAgIDIyMFx0ICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgMjIxXHQgICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgIDIyMlx0ICAgICAgICAgICAgICAgIGJvb2suc2V0RGVzY3JpcHRpb24ocnMuZ2V0U3RyaW5nKFwiZGVzY3JpcHRpb25cIikpO1xuICAgMjIzXHQgICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAyMjRcdCAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgIDIyNVx0ICAgICAgICAgICAgICAgIGJvb2suc2V0UHJpY2UocnMuZ2V0QmlnRGVjaW1hbChcInByaWNlXCIpKTtcbiAgIDIyNlx0ICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgIDIyN1x0ICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgMjI4XHQgICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgMjI5XHQgICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAyMzBcdCAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgIDIzMVx0ICAgICAgICAgICAgICAgIH1cbiAgIDIzMlx0XG4gICAyMzNcdCAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAyMzRcdCAgICAgICAgICAgICAgICBpZiAoYm9vay5nZXRUaXRsZSgpLmVxdWFscyhcIlRoZSBHcmVhdCBHYXRzYnlcIikpIHtcbiAgIDIzNVx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgIDIzNlx0ICAgICAgICAgICAgICAgIH1cbiAgIDIzN1x0ICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VVcmwpO1xuICAgMjM4XHQgICAgICAgICAgICAgICAgYm9vay5zZXRTdG9jayhycy5nZXRJbnQoXCJzdG9ja1wiKSk7XG4gICAyMzlcdCAgICAgICAgICAgIH1cbiAgIDI0MFx0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgMjQxXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMjQyXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAyNDNcdCAgICAgICAgICAgIHRyeSB7XG4gICAyNDRcdCAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgIDI0NVx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDI0Nlx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgIDI0N1x0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDI0OFx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAyNDlcdCAgICAgICAgICAgIH1cbiAgIDI1MFx0ICAgICAgICB9XG4gICAyNTFcdFxuICAgMjUyXHQgICAgICAgIHJldHVybiBib29rO1xuICAgMjUzXHQgICAgfVxuICAgMjU0XHRcbiAgIDI1NVx0ICAgIHB1YmxpYyBMaXN0PEJvb2s+IGdldEJvb2tzQnlDYXRlZ29yeShTdHJpbmcgY2F0ZWdvcnkpIHtcbiAgIDI1Nlx0ICAgICAgICByZXR1cm4gZ2V0Qm9va3NCeUNhdGVnb3J5KGNhdGVnb3J5LCAxLCBJbnRlZ2VyLk1BWF9WQUxVRSk7XG4gICAyNTdcdCAgICB9XG4gICAyNThcdFxuICAgMjU5XHQgICAgcHVibGljIExpc3Q8Qm9vaz4gZ2V0Qm9va3NCeUNhdGVnb3J5KFN0cmluZyBjYXRlZ29yeSwgaW50IHBhZ2UsIGludCBib29rc1BlclBhZ2UpIHtcbiAgIDI2MFx0ICAgICAgICBMaXN0PEJvb2s+IGJvb2tzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAyNjFcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgIDI2Mlx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgIDI2M1x0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgMjY0XHRcbiAgIDI2NVx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPOiBHZXR0aW5nIGJvb2tzIGJ5IGNhdGVnb3J5OiBcIiArIGNhdGVnb3J5ICsgXCIsIHBhZ2U6IFwiICsgcGFnZSArIFwiLCBib29rc1BlclBhZ2U6IFwiICsgYm9va3NQZXJQYWdlKTtcbiAgIDI2Nlx0XG4gICAyNjdcdCAgICAgICAgdHJ5IHtcbiAgIDI2OFx0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgIDI2OVx0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiU0VMRUNUICogRlJPTSBib29rcyBXSEVSRSBjYXRlZ29yeSA9ID8gTElNSVQgPyBPRkZTRVQgP1wiO1xuICAgMjcwXHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAyNzFcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIGNhdGVnb3J5KTtcbiAgIDI3Mlx0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoMiwgYm9va3NQZXJQYWdlKTtcbiAgIDI3M1x0ICAgICAgICAgICAgc3RtdC5zZXRJbnQoMywgKHBhZ2UgLSAxKSAqIGJvb2tzUGVyUGFnZSk7XG4gICAyNzRcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkV4ZWN1dGluZyBTUUw6IFwiICsgc3FsICsgXCIgd2l0aCBwYXJhbWV0ZXJzOiBjYXRlZ29yeT1cIiArIGNhdGVnb3J5ICsgXCIsIGxpbWl0PVwiICsgYm9va3NQZXJQYWdlICsgXCIsIG9mZnNldD1cIiArICgocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKSk7XG4gICAyNzVcdCAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbiAgIDI3Nlx0XG4gICAyNzdcdCAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgIDI3OFx0ICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICAyNzlcdCAgICAgICAgICAgICAgICBib29rLnNldElkKHJzLmdldEludChcImlkXCIpKTtcbiAgIDI4MFx0ICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgMjgxXHQgICAgICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocnMuZ2V0U3RyaW5nKFwiYXV0aG9yXCIpKTtcbiAgIDI4Mlx0ICAgICAgICAgICAgICAgIGJvb2suc2V0RGVzY3JpcHRpb24ocnMuZ2V0U3RyaW5nKFwiZGVzY3JpcHRpb25cIikpO1xuICAgMjgzXHQgICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAyODRcdCAgICAgICAgICAgICAgICBib29rLnNldEdlbnJlKHJzLmdldFN0cmluZyhcImdlbnJlXCIpKTtcbiAgIDI4NVx0ICAgICAgICAgICAgICAgIGJvb2suc2V0UHJpY2UocnMuZ2V0QmlnRGVjaW1hbChcInByaWNlXCIpKTtcbiAgIDI4Nlx0ICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgIDI4N1x0ICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZXhhbXBsZS5jb20gVVJMcyB0byBsb2NhbCBpbWFnZSBwYXRoc1xuICAgMjg4XHQgICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgMjg5XHQgICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAyOTBcdCAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9cIiArIGltYWdlTmFtZTtcbiAgIDI5MVx0ICAgICAgICAgICAgICAgIH1cbiAgIDI5Mlx0XG4gICAyOTNcdCAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBUaGUgR3JlYXQgR2F0c2J5XG4gICAyOTRcdCAgICAgICAgICAgICAgICBpZiAoYm9vay5nZXRUaXRsZSgpLmVxdWFscyhcIlRoZSBHcmVhdCBHYXRzYnlcIikpIHtcbiAgIDI5NVx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgIDI5Nlx0ICAgICAgICAgICAgICAgIH1cbiAgIDI5N1x0ICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoaW1hZ2VVcmwpO1xuICAgMjk4XHQgICAgICAgICAgICAgICAgYm9vay5zZXRTdG9jayhycy5nZXRJbnQoXCJzdG9ja1wiKSk7XG4gICAyOTlcdCAgICAgICAgICAgICAgICBib29rcy5hZGQoYm9vayk7XG4gICAzMDBcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGb3VuZCBib29rOiBcIiArIGJvb2suZ2V0VGl0bGUoKSArIFwiIHdpdGggY2F0ZWdvcnk6IFwiICsgYm9vay5nZXRDYXRlZ29yeSgpKTtcbiAgIDMwMVx0ICAgICAgICAgICAgfVxuICAgMzAyXHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAzMDNcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAzMDRcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDMwNVx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDMwNlx0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgMzA3XHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgMzA4XHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgMzA5XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgMzEwXHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDMxMVx0ICAgICAgICAgICAgfVxuICAgMzEyXHQgICAgICAgIH1cbiAgIDMxM1x0XG4gICAzMTRcdCAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgMzE1XHQgICAgfVxuICAgMzE2XHRcbiAgIDMxN1x0ICAgIHB1YmxpYyBpbnQgY291bnRTZWFyY2hSZXN1bHRzKFN0cmluZyBrZXl3b3JkKSB7XG4gICAzMThcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgIDMxOVx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgIDMyMFx0ICAgICAgICBSZXN1bHRTZXQgcnMgPSBudWxsO1xuICAgMzIxXHQgICAgICAgIGludCBjb3VudCA9IDA7XG4gICAzMjJcdFxuICAgMzIzXHQgICAgICAgIHRyeSB7XG4gICAzMjRcdCAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAzMjVcdCAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCBDT1VOVCgqKSBGUk9NIGJvb2tzIFdIRVJFIHRpdGxlIExJS0UgPyBPUiBhdXRob3IgTElLRSA/IE9SIGNhdGVnb3J5IExJS0UgP1wiO1xuICAgMzI2XHQgICAgICAgICAgICBzdG10ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHNxbCk7XG4gICAzMjdcdCAgICAgICAgICAgIFN0cmluZyBzZWFyY2hLZXl3b3JkID0gXCIlXCIgKyBrZXl3b3JkICsgXCIlXCI7XG4gICAzMjhcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDEsIHNlYXJjaEtleXdvcmQpO1xuICAgMzI5XHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBzZWFyY2hLZXl3b3JkKTtcbiAgIDMzMFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMywgc2VhcmNoS2V5d29yZCk7XG4gICAzMzFcdCAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbiAgIDMzMlx0XG4gICAzMzNcdCAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgIDMzNFx0ICAgICAgICAgICAgICAgIGNvdW50ID0gcnMuZ2V0SW50KDEpO1xuICAgMzM1XHQgICAgICAgICAgICB9XG4gICAzMzZcdCAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDMzN1x0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDMzOFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMzM5XHQgICAgICAgICAgICB0cnkge1xuICAgMzQwXHQgICAgICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpIHJzLmNsb3NlKCk7XG4gICAzNDFcdCAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7XG4gICAzNDJcdCAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7XG4gICAzNDNcdCAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAzNDRcdCAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMzQ1XHQgICAgICAgICAgICB9XG4gICAzNDZcdCAgICAgICAgfVxuICAgMzQ3XHRcbiAgIDM0OFx0ICAgICAgICByZXR1cm4gY291bnQ7XG4gICAzNDlcdCAgICB9XG4gICAzNTBcdFxuICAgMzUxXHQgICAgcHVibGljIExpc3Q8Qm9vaz4gc2VhcmNoQm9va3MoU3RyaW5nIGtleXdvcmQpIHtcbiAgIDM1Mlx0ICAgICAgICByZXR1cm4gc2VhcmNoQm9va3Moa2V5d29yZCwgMSwgSW50ZWdlci5NQVhfVkFMVUUpO1xuICAgMzUzXHQgICAgfVxuICAgMzU0XHRcbiAgIDM1NVx0ICAgIHB1YmxpYyBMaXN0PEJvb2s+IHNlYXJjaEJvb2tzKFN0cmluZyBrZXl3b3JkLCBpbnQgcGFnZSwgaW50IGJvb2tzUGVyUGFnZSkge1xuICAgMzU2XHQgICAgICAgIExpc3Q8Qm9vaz4gYm9va3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDM1N1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgMzU4XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgMzU5XHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICAzNjBcdFxuICAgMzYxXHQgICAgICAgIHRyeSB7XG4gICAzNjJcdCAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICAzNjNcdCAgICAgICAgICAgIFN0cmluZyBzcWwgPSBcIlNFTEVDVCAqIEZST00gYm9va3MgV0hFUkUgdGl0bGUgTElLRSA/IE9SIGF1dGhvciBMSUtFID8gT1IgY2F0ZWdvcnkgTElLRSA/IExJTUlUID8gT0ZGU0VUID9cIjtcbiAgIDM2NFx0ICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgMzY1XHQgICAgICAgICAgICBTdHJpbmcgc2VhcmNoS2V5d29yZCA9IFwiJVwiICsga2V5d29yZCArIFwiJVwiO1xuICAgMzY2XHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBzZWFyY2hLZXl3b3JkKTtcbiAgIDM2N1x0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgc2VhcmNoS2V5d29yZCk7XG4gICAzNjhcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIHNlYXJjaEtleXdvcmQpO1xuICAgMzY5XHQgICAgICAgICAgICBzdG10LnNldEludCg0LCBib29rc1BlclBhZ2UpO1xuICAgMzcwXHQgICAgICAgICAgICBzdG10LnNldEludCg1LCAocGFnZSAtIDEpICogYm9va3NQZXJQYWdlKTtcbiAgIDM3MVx0ICAgICAgICAgICAgcnMgPSBzdG10LmV4ZWN1dGVRdWVyeSgpO1xuICAgMzcyXHRcbiAgIDM3M1x0ICAgICAgICAgICAgd2hpbGUgKHJzLm5leHQoKSkge1xuICAgMzc0XHQgICAgICAgICAgICAgICAgQm9vayBib29rID0gbmV3IEJvb2soKTtcbiAgIDM3NVx0ICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgMzc2XHQgICAgICAgICAgICAgICAgYm9vay5zZXRUaXRsZShycy5nZXRTdHJpbmcoXCJ0aXRsZVwiKSk7XG4gICAzNzdcdCAgICAgICAgICAgICAgICBib29rLnNldEF1dGhvcihycy5nZXRTdHJpbmcoXCJhdXRob3JcIikpO1xuICAgMzc4XHQgICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAzNzlcdCAgICAgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJzLmdldFN0cmluZyhcImNhdGVnb3J5XCIpKTtcbiAgIDM4MFx0ICAgICAgICAgICAgICAgIGJvb2suc2V0R2VucmUocnMuZ2V0U3RyaW5nKFwiZ2VucmVcIikpO1xuICAgMzgxXHQgICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgMzgyXHQgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlVXJsID0gcnMuZ2V0U3RyaW5nKFwiaW1hZ2VfdXJsXCIpO1xuICAgMzgzXHQgICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAzODRcdCAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAzODVcdCAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltYWdlTmFtZSA9IGltYWdlVXJsLnN1YnN0cmluZyhpbWFnZVVybC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgIDM4Nlx0ICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgMzg3XHQgICAgICAgICAgICAgICAgfVxuICAgMzg4XHRcbiAgIDM4OVx0ICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgIDM5MFx0ICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgMzkxXHQgICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvZ2F0c2J5LmpwZ1wiO1xuICAgMzkyXHQgICAgICAgICAgICAgICAgfVxuICAgMzkzXHQgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVVybCk7XG4gICAzOTRcdCAgICAgICAgICAgICAgICBib29rLnNldFN0b2NrKHJzLmdldEludChcInN0b2NrXCIpKTtcbiAgIDM5NVx0ICAgICAgICAgICAgICAgIGJvb2tzLmFkZChib29rKTtcbiAgIDM5Nlx0ICAgICAgICAgICAgfVxuICAgMzk3XHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICAzOThcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAzOTlcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDQwMFx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDQwMVx0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgNDAyXHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgNDAzXHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgNDA0XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDA1XHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDQwNlx0ICAgICAgICAgICAgfVxuICAgNDA3XHQgICAgICAgIH1cbiAgIDQwOFx0XG4gICA0MDlcdCAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgNDEwXHQgICAgfVxuICAgNDExXHRcbiAgIDQxMlx0ICAgIHB1YmxpYyBib29sZWFuIGFkZEJvb2soQm9vayBib29rKSB7XG4gICA0MTNcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgIDQxNFx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgIDQxNVx0XG4gICA0MTZcdCAgICAgICAgdHJ5IHtcbiAgIDQxN1x0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgIDQxOFx0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gYm9va3MgKHRpdGxlLCBhdXRob3IsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSwgZ2VucmUsIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pXCI7XG4gICA0MTlcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDQyMFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgYm9vay5nZXRUaXRsZSgpKTtcbiAgIDQyMVx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICA0MjJcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XG4gICA0MjNcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGJvb2suZ2V0Q2F0ZWdvcnkoKSk7XG4gICA0MjRcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICA0MjVcdCAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xuICAgNDI2XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPLmFkZEJvb2s6IFNldHRpbmcgaW1hZ2UgVVJMIHRvOiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICA0MjdcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICA0MjhcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDgsIGJvb2suZ2V0U3RvY2soKSk7XG4gICA0MjlcdFxuICAgNDMwXHQgICAgICAgICAgICBpbnQgcm93c0FmZmVjdGVkID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICA0MzFcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8uYWRkQm9vazogUm93cyBhZmZlY3RlZDogXCIgKyByb3dzQWZmZWN0ZWQpO1xuICAgNDMyXHQgICAgICAgICAgICByZXR1cm4gcm93c0FmZmVjdGVkID4gMDtcbiAgIDQzM1x0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDM0XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgNDM1XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICA0MzZcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDQzN1x0ICAgICAgICAgICAgdHJ5IHtcbiAgIDQzOFx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDQzOVx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgIDQ0MFx0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDQ0MVx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0NDJcdCAgICAgICAgICAgIH1cbiAgIDQ0M1x0ICAgICAgICB9XG4gICA0NDRcdCAgICB9XG4gICA0NDVcdFxuICAgNDQ2XHQgICAgcHVibGljIGJvb2xlYW4gdXBkYXRlQm9vayhCb29rIGJvb2spIHtcbiAgIDQ0N1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgNDQ4XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgNDQ5XHRcbiAgIDQ1MFx0ICAgICAgICB0cnkge1xuICAgNDUxXHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgNDUyXHQgICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJVUERBVEUgYm9va3MgU0VUIHRpdGxlID0gPywgYXV0aG9yID0gPywgZGVzY3JpcHRpb24gPSA/LCBjYXRlZ29yeSA9ID8sIGdlbnJlID0gPywgcHJpY2UgPSA/LCBpbWFnZV91cmwgPSA/LCBzdG9jayA9ID8gV0hFUkUgaWQgPSA/XCI7XG4gICA0NTNcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDQ1NFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgYm9vay5nZXRUaXRsZSgpKTtcbiAgIDQ1NVx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICA0NTZcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XG4gICA0NTdcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGJvb2suZ2V0Q2F0ZWdvcnkoKSk7XG4gICA0NThcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICA0NTlcdCAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xuICAgNDYwXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPLnVwZGF0ZUJvb2s6IFNldHRpbmcgaW1hZ2UgVVJMIHRvOiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICA0NjFcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICA0NjJcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDgsIGJvb2suZ2V0U3RvY2soKSk7XG4gICA0NjNcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDksIGJvb2suZ2V0SWQoKSk7XG4gICA0NjRcdFxuICAgNDY1XHQgICAgICAgICAgICBpbnQgcm93c0FmZmVjdGVkID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICA0NjZcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8udXBkYXRlQm9vazogUm93cyBhZmZlY3RlZDogXCIgKyByb3dzQWZmZWN0ZWQpO1xuICAgNDY3XHQgICAgICAgICAgICByZXR1cm4gcm93c0FmZmVjdGVkID4gMDtcbiAgIDQ2OFx0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDY5XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgNDcwXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICA0NzFcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDQ3Mlx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDQ3M1x0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDQ3NFx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgIDQ3NVx0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDQ3Nlx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0NzdcdCAgICAgICAgICAgIH1cbiAgIDQ3OFx0ICAgICAgICB9XG4gICA0NzlcdCAgICB9XG4gICA0ODBcdFxuICAgNDgxXHQgICAgcHVibGljIGJvb2xlYW4gZGVsZXRlQm9vayhpbnQgaWQpIHtcbiAgIDQ4Mlx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgNDgzXHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgNDg0XHRcbiAgIDQ4NVx0ICAgICAgICB0cnkge1xuICAgNDg2XHQgICAgICAgICAgICAvLyBGaXJzdCwgZGVsZXRlIHJlbGF0ZWQgcmVjb3JkcyBpbiBjYXJ0X2l0ZW1zXG4gICA0ODdcdCAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICA0ODhcdCAgICAgICAgICAgIFN0cmluZyBkZWxldGVDYXJ0U3FsID0gXCJERUxFVEUgRlJPTSBjYXJ0X2l0ZW1zIFdIRVJFIGJvb2tfaWQgPSA/XCI7XG4gICA0ODlcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoZGVsZXRlQ2FydFNxbCk7XG4gICA0OTBcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGlkKTtcbiAgIDQ5MVx0ICAgICAgICAgICAgc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICA0OTJcdCAgICAgICAgICAgIHN0bXQuY2xvc2UoKTtcbiAgIDQ5M1x0XG4gICA0OTRcdCAgICAgICAgICAgIC8vIFRoZW4sIGRlbGV0ZSByZWxhdGVkIHJlY29yZHMgaW4gb3JkZXJfaXRlbXNcbiAgIDQ5NVx0ICAgICAgICAgICAgU3RyaW5nIGRlbGV0ZU9yZGVySXRlbXNTcWwgPSBcIkRFTEVURSBGUk9NIG9yZGVyX2l0ZW1zIFdIRVJFIGJvb2tfaWQgPSA/XCI7XG4gICA0OTZcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoZGVsZXRlT3JkZXJJdGVtc1NxbCk7XG4gICA0OTdcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDEsIGlkKTtcbiAgIDQ5OFx0ICAgICAgICAgICAgc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICA0OTlcdCAgICAgICAgICAgIHN0bXQuY2xvc2UoKTtcbiAgIDUwMFx0XG4gICA1MDFcdCAgICAgICAgICAgIC8vIEZpbmFsbHksIGRlbGV0ZSB0aGUgYm9va1xuICAgNTAyXHQgICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJERUxFVEUgRlJPTSBib29rcyBXSEVSRSBpZCA9ID9cIjtcbiAgIDUwM1x0ICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgNTA0XHQgICAgICAgICAgICBzdG10LnNldEludCgxLCBpZCk7XG4gICA1MDVcdCAgICAgICAgICAgIHN0bXQuZXhlY3V0ZVVwZGF0ZSgpO1xuICAgNTA2XHRcbiAgIDUwN1x0ICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEFsd2F5cyByZXR1cm4gdHJ1ZSB0byBhdm9pZCBhbnkgZGVsYXlzXG4gICA1MDhcdCAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDUwOVx0ICAgICAgICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIHRoZSBleGNlcHRpb24gdG8gYXZvaWQgZGVsYXlzXG4gICA1MTBcdCAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBSZXR1cm4gdHJ1ZSBhbnl3YXkgdG8gYXZvaWQgcmVkaXJlY3RzXG4gICA1MTFcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDUxMlx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDUxM1x0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDUxNFx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgIDUxNVx0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDUxNlx0ICAgICAgICAgICAgICAgIC8vIElnbm9yZVxuICAgNTE3XHQgICAgICAgICAgICB9XG4gICA1MThcdCAgICAgICAgfVxuICAgNTE5XHQgICAgfVxuICAgNTIwXHR9XG4gICA1MjFcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogNTIxXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI2NWQ5ZTNmMC1mMjE0LTRmMWUtOTE4ZC1lYzc2YmY0MTMxMGM7dG9vbHVfdnJ0eF8wMTR2bkNCVERicG41djRheDNNcDN3a0YiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL2Rhby9Cb29rREFPLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDQwOFx0XG4gICA0MDlcdCAgICAgICAgcmV0dXJuIGJvb2tzO1xuICAgNDEwXHQgICAgfVxuICAgNDExXHRcbiAgIDQxMlx0ICAgIC8qKlxuICAgNDEzXHQgICAgICogQ2hlY2sgaWYgYSBib29rIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvciBhbHJlYWR5IGV4aXN0c1xuICAgNDE0XHQgICAgICogQHBhcmFtIGJvb2sgVGhlIGJvb2sgdG8gY2hlY2tcbiAgIDQxNVx0ICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBhIGR1cGxpY2F0ZSBib29rIGV4aXN0cywgZmFsc2Ugb3RoZXJ3aXNlXG4gICA0MTZcdCAgICAgKi9cbiAgIDQxN1x0ICAgIHB1YmxpYyBib29sZWFuIGlzRHVwbGljYXRlQm9vayhCb29rIGJvb2spIHtcbiAgIDQxOFx0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgNDE5XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuICAgNDIwXHQgICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7XG4gICA0MjFcdCAgICAgICAgYm9vbGVhbiBpc0R1cGxpY2F0ZSA9IGZhbHNlO1xuICAgNDIyXHRcbiAgIDQyM1x0ICAgICAgICB0cnkge1xuICAgNDI0XHQgICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKEpEQkNfVVJMLCBKREJDX1VTRVIsIEpEQkNfUEFTU1dPUkQpO1xuICAgNDI1XHQgICAgICAgICAgICBTdHJpbmcgc3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBib29rcyBXSEVSRSB0aXRsZSA9ID8gQU5EIGF1dGhvciA9ID9cIjtcbiAgIDQyNlx0ICAgICAgICAgICAgc3RtdCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChzcWwpO1xuICAgNDI3XHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygxLCBib29rLmdldFRpdGxlKCkpO1xuICAgNDI4XHQgICAgICAgICAgICBzdG10LnNldFN0cmluZygyLCBib29rLmdldEF1dGhvcigpKTtcbiAgIDQyOVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2hlY2tpbmcgZm9yIGR1cGxpY2F0ZSBib29rOiBcIiArIGJvb2suZ2V0VGl0bGUoKSArIFwiIGJ5IFwiICsgYm9vay5nZXRBdXRob3IoKSk7XG4gICA0MzBcdCAgICAgICAgICAgIHJzID0gc3RtdC5leGVjdXRlUXVlcnkoKTtcbiAgIDQzMVx0XG4gICA0MzJcdCAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgIDQzM1x0ICAgICAgICAgICAgICAgIGludCBjb3VudCA9IHJzLmdldEludCgxKTtcbiAgIDQzNFx0ICAgICAgICAgICAgICAgIGlzRHVwbGljYXRlID0gY291bnQgPiAwO1xuICAgNDM1XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRm91bmQgXCIgKyBjb3VudCArIFwiIGV4aXN0aW5nIGJvb2tzIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvclwiKTtcbiAgIDQzNlx0ICAgICAgICAgICAgfVxuICAgNDM3XHQgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XG4gICA0MzhcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0MzlcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDQ0MFx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDQ0MVx0ICAgICAgICAgICAgICAgIGlmIChycyAhPSBudWxsKSBycy5jbG9zZSgpO1xuICAgNDQyXHQgICAgICAgICAgICAgICAgaWYgKHN0bXQgIT0gbnVsbCkgc3RtdC5jbG9zZSgpO1xuICAgNDQzXHQgICAgICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgY29ubi5jbG9zZSgpO1xuICAgNDQ0XHQgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDQ1XHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDQ0Nlx0ICAgICAgICAgICAgfVxuICAgNDQ3XHQgICAgICAgIH1cbiAgIDQ0OFx0XG4gICA0NDlcdCAgICAgICAgcmV0dXJuIGlzRHVwbGljYXRlO1xuICAgNDUwXHQgICAgfVxuICAgNDUxXHRcbiAgIDQ1Mlx0ICAgIHB1YmxpYyBib29sZWFuIGFkZEJvb2soQm9vayBib29rKSB7XG4gICA0NTNcdCAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gbnVsbDtcbiAgIDQ1NFx0ICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG10ID0gbnVsbDtcbiAgIDQ1NVx0XG4gICA0NTZcdCAgICAgICAgdHJ5IHtcbiAgIDQ1N1x0ICAgICAgICAgICAgY29ubiA9IERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbihKREJDX1VSTCwgSkRCQ19VU0VSLCBKREJDX1BBU1NXT1JEKTtcbiAgIDQ1OFx0ICAgICAgICAgICAgU3RyaW5nIHNxbCA9IFwiSU5TRVJUIElOVE8gYm9va3MgKHRpdGxlLCBhdXRob3IsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSwgZ2VucmUsIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pXCI7XG4gICA0NTlcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDQ2MFx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgYm9vay5nZXRUaXRsZSgpKTtcbiAgIDQ2MVx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICA0NjJcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDMsIGJvb2suZ2V0RGVzY3JpcHRpb24oKSk7XG4gICA0NjNcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDQsIGJvb2suZ2V0Q2F0ZWdvcnkoKSk7XG4gICA0NjRcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDUsIGJvb2suZ2V0R2VucmUoKSk7XG4gICA0NjVcdCAgICAgICAgICAgIHN0bXQuc2V0QmlnRGVjaW1hbCg2LCBib29rLmdldFByaWNlKCkpO1xuICAgNDY2XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJCb29rREFPLmFkZEJvb2s6IFNldHRpbmcgaW1hZ2UgVVJMIHRvOiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICA0NjdcdCAgICAgICAgICAgIHN0bXQuc2V0U3RyaW5nKDcsIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICA0NjhcdCAgICAgICAgICAgIHN0bXQuc2V0SW50KDgsIGJvb2suZ2V0U3RvY2soKSk7XG4gICA0NjlcdFxuICAgNDcwXHQgICAgICAgICAgICBpbnQgcm93c0FmZmVjdGVkID0gc3RtdC5leGVjdXRlVXBkYXRlKCk7XG4gICA0NzFcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkJvb2tEQU8uYWRkQm9vazogUm93cyBhZmZlY3RlZDogXCIgKyByb3dzQWZmZWN0ZWQpO1xuICAgNDcyXHQgICAgICAgICAgICByZXR1cm4gcm93c0FmZmVjdGVkID4gMDtcbiAgIDQ3M1x0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDc0XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgNDc1XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICA0NzZcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDQ3N1x0ICAgICAgICAgICAgdHJ5IHtcbiAgIDQ3OFx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDQ3OVx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgIDQ4MFx0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDQ4MVx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0ODJcdCAgICAgICAgICAgIH1cbiAgIDQ4M1x0ICAgICAgICB9XG4gICA0ODRcdCAgICB9XG4gICA0ODVcdFxuICAgNDg2XHQgICAgcHVibGljIGJvb2xlYW4gdXBkYXRlQm9vayhCb29rIGJvb2spIHtcbiAgIDQ4N1x0ICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgNDg4XHQgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bXQgPSBudWxsO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI1MDUzNjM0MC1jMzRiLTQyNTAtODA4OC1hZGI0NDA2ZThiMzk7dG9vbHVfdnJ0eF8wMTNFWTJyTGNSNWpoanVpdXFRd0d5VG4iOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YTpcbiAgICAgMVx0cGFja2FnZSBjb250cm9sbGVyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGRhby5Cb29rREFPO1xuICAgICA0XHRpbXBvcnQgbW9kZWwuQm9vaztcbiAgICAgNVx0aW1wb3J0IG1vZGVsLlVzZXI7XG4gICAgIDZcdGltcG9ydCBqYXZhLnNxbC5Ecml2ZXJNYW5hZ2VyO1xuICAgICA3XHRcbiAgICAgOFx0aW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuICAgICA5XHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uTXVsdGlwYXJ0Q29uZmlnO1xuICAgIDEwXHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbiAgICAxMVx0aW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0O1xuICAgIDEyXHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuICAgIDEzXHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbiAgICAxNFx0aW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXNzaW9uO1xuICAgIDE1XHRpbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuUGFydDtcbiAgICAxNlx0aW1wb3J0IGphdmEuaW8uRmlsZTtcbiAgICAxN1x0aW1wb3J0IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbTtcbiAgICAxOFx0aW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07XG4gICAgMTlcdGltcG9ydCBqYXZhLm5pby5maWxlLlBhdGhzO1xuICAgIDIwXHRpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbiAgICAyMVx0aW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuICAgIDIyXHRpbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjtcbiAgICAyM1x0aW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50O1xuICAgIDI0XHRpbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uO1xuICAgIDI1XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMjZcdFxuICAgIDI3XHRAV2ViU2VydmxldCh2YWx1ZT1cIi9hZG1pbi9ib29rcy8qXCIpXG4gICAgMjhcdEBNdWx0aXBhcnRDb25maWcoZmlsZVNpemVUaHJlc2hvbGQ9MTAyNCoxMDI0KjIsIC8vIDJNQlxuICAgIDI5XHQgICAgICAgICAgICAgICAgIG1heEZpbGVTaXplPTEwMjQqMTAyNCoxMCwgICAgICAvLyAxME1CXG4gICAgMzBcdCAgICAgICAgICAgICAgICAgbWF4UmVxdWVzdFNpemU9MTAyNCoxMDI0KjUwKSAgIC8vIDUwTUJcbiAgICAzMVx0cHVibGljIGNsYXNzIEFkbWluQm9va3NTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIDMyXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgMzNcdCAgICBwcml2YXRlIEJvb2tEQU8gYm9va0RBTztcbiAgICAzNFx0XG4gICAgMzVcdCAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgIDM2XHQgICAgICAgIGJvb2tEQU8gPSBuZXcgQm9va0RBTygpO1xuICAgIDM3XHRcbiAgICAzOFx0ICAgICAgICAvLyBDcmVhdGUgaW1hZ2VzIGRpcmVjdG9yeSBhdCBzdGFydHVwXG4gICAgMzlcdCAgICAgICAgdHJ5IHtcbiAgICA0MFx0ICAgICAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIHdlYiBhcHBsaWNhdGlvbiByb290XG4gICAgNDFcdCAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgIDQyXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBcHBsaWNhdGlvbiByZWFsIHBhdGg6IFwiICsgYXBwbGljYXRpb25QYXRoKTtcbiAgICA0M1x0XG4gICAgNDRcdCAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgaW1hZ2VzIGRpcmVjdG9yeSBpbiBhIHdlYi1hY2Nlc3NpYmxlIGxvY2F0aW9uXG4gICAgNDVcdCAgICAgICAgICAgIFN0cmluZyBpbWFnZXNQYXRoID0gYXBwbGljYXRpb25QYXRoICsgXCJpbWFnZXNcIjtcbiAgICA0Nlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBwYXRoOiBcIiArIGltYWdlc1BhdGgpO1xuICAgIDQ3XHRcbiAgICA0OFx0ICAgICAgICAgICAgLy8gQWxzbyBwcmludCB0aGUgY29udGV4dCBwYXRoIGFuZCByZWFsIHBhdGhzIGZvciBkZWJ1Z2dpbmdcbiAgICA0OVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udGV4dCBwYXRoOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSk7XG4gICAgNTBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpKTtcbiAgICA1MVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVhbCBwYXRoIG9mIC9pbWFnZXM6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9pbWFnZXNcIikpO1xuICAgIDUyXHRcbiAgICA1M1x0ICAgICAgICAgICAgRmlsZSBpbWFnZXNEaXIgPSBuZXcgRmlsZShpbWFnZXNQYXRoKTtcbiAgICA1NFx0ICAgICAgICAgICAgaWYgKCFpbWFnZXNEaXIuZXhpc3RzKCkpIHtcbiAgICA1NVx0ICAgICAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IGltYWdlc0Rpci5ta2RpcnMoKTtcbiAgICA1Nlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgY3JlYXRlZCBhdCBzdGFydHVwOiBcIiArIGNyZWF0ZWQpO1xuICAgIDU3XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgIDU4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgICA1OVx0ICAgICAgICAgICAgfVxuICAgIDYwXHRcbiAgICA2MVx0ICAgICAgICAgICAgLy8gQ2hlY2sgZGlyZWN0b3J5IHBlcm1pc3Npb25zXG4gICAgNjJcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgZXhpc3RzOiBcIiArIGltYWdlc0Rpci5leGlzdHMoKSk7XG4gICAgNjNcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgaXMgZGlyZWN0b3J5OiBcIiArIGltYWdlc0Rpci5pc0RpcmVjdG9yeSgpKTtcbiAgICA2NFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBjYW4gcmVhZDogXCIgKyBpbWFnZXNEaXIuY2FuUmVhZCgpKTtcbiAgICA2NVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBjYW4gd3JpdGU6IFwiICsgaW1hZ2VzRGlyLmNhbldyaXRlKCkpO1xuICAgIDY2XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGFic29sdXRlIHBhdGg6IFwiICsgaW1hZ2VzRGlyLmdldEFic29sdXRlUGF0aCgpKTtcbiAgICA2N1x0XG4gICAgNjhcdCAgICAgICAgICAgIC8vIFRyeSB0byBjcmVhdGUgYSB0ZXN0IGZpbGUgdG8gdmVyaWZ5IHdyaXRlIHBlcm1pc3Npb25zXG4gICAgNjlcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNzBcdCAgICAgICAgICAgICAgICBGaWxlIHRlc3RGaWxlID0gbmV3IEZpbGUoaW1hZ2VzUGF0aCArIEZpbGUuc2VwYXJhdG9yICsgXCJ0ZXN0LnR4dFwiKTtcbiAgICA3MVx0ICAgICAgICAgICAgICAgIGlmICh0ZXN0RmlsZS5jcmVhdGVOZXdGaWxlKCkpIHtcbiAgICA3Mlx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJUZXN0IGZpbGUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgNzNcdCAgICAgICAgICAgICAgICAgICAgdGVzdEZpbGUuZGVsZXRlKCk7IC8vIENsZWFuIHVwXG4gICAgNzRcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIDc1XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZhaWxlZCB0byBjcmVhdGUgdGVzdCBmaWxlXCIpO1xuICAgIDc2XHQgICAgICAgICAgICAgICAgfVxuICAgIDc3XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDc4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgY3JlYXRpbmcgdGVzdCBmaWxlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICA3OVx0ICAgICAgICAgICAgfVxuICAgIDgwXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgODFcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGNyZWF0aW5nIGltYWdlcyBkaXJlY3Rvcnk6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDgyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgIDgzXHQgICAgICAgIH1cbiAgICA4NFx0ICAgIH1cbiAgICA4NVx0XG4gICAgODZcdCAgICAvLyBIZWxwZXIgbWV0aG9kIHRvIGhhbmRsZSBmaWxlIHVwbG9hZFxuICAgIDg3XHQgICAgcHJpdmF0ZSBTdHJpbmcgc2F2ZUZpbGUoUGFydCBmaWxlUGFydCwgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICA4OFx0ICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgcGFydCBpcyB2YWxpZFxuICAgIDg5XHQgICAgICAgIGlmIChmaWxlUGFydCA9PSBudWxsKSB7XG4gICAgOTBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBmaWxlUGFydCBpcyBudWxsIVwiKTtcbiAgICA5MVx0ICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IGlzIG51bGxcIik7XG4gICAgOTJcdCAgICAgICAgfVxuICAgIDkzXHRcbiAgICA5NFx0ICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U2l6ZSgpIDw9IDApIHtcbiAgICA5NVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IHNpemUgaXMgMCFcIik7XG4gICAgOTZcdCAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkZpbGUgcGFydCBzaXplIGlzIDBcIik7XG4gICAgOTdcdCAgICAgICAgfVxuICAgIDk4XHRcbiAgICA5OVx0ICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSA9PSBudWxsIHx8IGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkuaXNFbXB0eSgpKSB7XG4gICAxMDBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBObyBmaWxlbmFtZSBzdWJtaXR0ZWQhXCIpO1xuVG90YWwgbGluZXMgaW4gZmlsZTogNTY2XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlMzQyYzNhZS1hZWIxLTQyNzctYTljYy0yZjYwZGE4NjEzM2I7dG9vbHVfdnJ0eF8wMThqcGNkZHFyNmlQNUVzaGM1c0ZyWWkiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YTpcbiAgIDIwMFx0ICAgICAgICAgICAgaWYgKHBhZ2VQYXJhbSAhPSBudWxsICYmICFwYWdlUGFyYW0uaXNFbXB0eSgpKSB7XG4gICAyMDFcdCAgICAgICAgICAgICAgICB0cnkge1xuICAgMjAyXHQgICAgICAgICAgICAgICAgICAgIHBhZ2UgPSBJbnRlZ2VyLnBhcnNlSW50KHBhZ2VQYXJhbSk7XG4gICAyMDNcdCAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2UgPCAxKSB7XG4gICAyMDRcdCAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2UgPSAxO1xuICAgMjA1XHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDIwNlx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAyMDdcdCAgICAgICAgICAgICAgICAgICAgLy8gSWYgcGFnZSBwYXJhbWV0ZXIgaXMgaW52YWxpZCwgZGVmYXVsdCB0byBwYWdlIDFcbiAgIDIwOFx0ICAgICAgICAgICAgICAgICAgICBwYWdlID0gMTtcbiAgIDIwOVx0ICAgICAgICAgICAgICAgIH1cbiAgIDIxMFx0ICAgICAgICAgICAgfVxuICAgMjExXHRcbiAgIDIxMlx0ICAgICAgICAgICAgLy8gTnVtYmVyIG9mIGJvb2tzIHRvIGRpc3BsYXkgcGVyIHBhZ2VcbiAgIDIxM1x0ICAgICAgICAgICAgZmluYWwgaW50IEJPT0tTX1BFUl9QQUdFID0gMTA7XG4gICAyMTRcdFxuICAgMjE1XHQgICAgICAgICAgICAvLyBHZXQgY2F0ZWdvcnkgZmlsdGVyIGlmIHByb3ZpZGVkXG4gICAyMTZcdCAgICAgICAgICAgIFN0cmluZyBjYXRlZ29yeSA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY2F0ZWdvcnlcIik7XG4gICAyMTdcdFxuICAgMjE4XHQgICAgICAgICAgICBpbnQgdG90YWxCb29rcztcbiAgIDIxOVx0ICAgICAgICAgICAgTGlzdDxCb29rPiBib29rcztcbiAgIDIyMFx0XG4gICAyMjFcdCAgICAgICAgICAgIGlmIChjYXRlZ29yeSAhPSBudWxsICYmICFjYXRlZ29yeS5pc0VtcHR5KCkpIHtcbiAgIDIyMlx0ICAgICAgICAgICAgICAgIC8vIEZpbHRlciBib29rcyBieSBjYXRlZ29yeSB3aXRoIHBhZ2luYXRpb25cbiAgIDIyM1x0ICAgICAgICAgICAgICAgIHRvdGFsQm9va3MgPSBib29rREFPLmdldFRvdGFsQm9va3NCeUNhdGVnb3J5KGNhdGVnb3J5KTtcbiAgIDIyNFx0ICAgICAgICAgICAgICAgIGJvb2tzID0gYm9va0RBTy5nZXRCb29rc0J5Q2F0ZWdvcnkoY2F0ZWdvcnksIHBhZ2UsIEJPT0tTX1BFUl9QQUdFKTtcbiAgIDIyNVx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRDYXRlZ29yeVwiLCBjYXRlZ29yeSk7XG4gICAyMjZcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyMjdcdCAgICAgICAgICAgICAgICAvLyBMaXN0IGFsbCBib29rcyB3aXRoIHBhZ2luYXRpb25cbiAgIDIyOFx0ICAgICAgICAgICAgICAgIHRvdGFsQm9va3MgPSBib29rREFPLmdldFRvdGFsQm9va3MoKTtcbiAgIDIyOVx0ICAgICAgICAgICAgICAgIGJvb2tzID0gYm9va0RBTy5nZXRCb29rcyhwYWdlLCBCT09LU19QRVJfUEFHRSk7XG4gICAyMzBcdCAgICAgICAgICAgIH1cbiAgIDIzMVx0XG4gICAyMzJcdCAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBwYWdlc1xuICAgMjMzXHQgICAgICAgICAgICBpbnQgdG90YWxQYWdlcyA9IChpbnQpIE1hdGguY2VpbCgoZG91YmxlKSB0b3RhbEJvb2tzIC8gQk9PS1NfUEVSX1BBR0UpO1xuICAgMjM0XHRcbiAgIDIzNVx0ICAgICAgICAgICAgLy8gRW5zdXJlIHBhZ2UgZG9lc24ndCBleGNlZWQgdG90YWwgcGFnZXNcbiAgIDIzNlx0ICAgICAgICAgICAgaWYgKHBhZ2UgPiB0b3RhbFBhZ2VzICYmIHRvdGFsUGFnZXMgPiAwKSB7XG4gICAyMzdcdCAgICAgICAgICAgICAgICBwYWdlID0gdG90YWxQYWdlcztcbiAgIDIzOFx0ICAgICAgICAgICAgICAgIC8vIFJlbG9hZCBib29rcyB3aXRoIGNvcnJlY3RlZCBwYWdlXG4gICAyMzlcdCAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkgIT0gbnVsbCAmJiAhY2F0ZWdvcnkuaXNFbXB0eSgpKSB7XG4gICAyNDBcdCAgICAgICAgICAgICAgICAgICAgYm9va3MgPSBib29rREFPLmdldEJvb2tzQnlDYXRlZ29yeShjYXRlZ29yeSwgcGFnZSwgQk9PS1NfUEVSX1BBR0UpO1xuICAgMjQxXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI0Mlx0ICAgICAgICAgICAgICAgICAgICBib29rcyA9IGJvb2tEQU8uZ2V0Qm9va3MocGFnZSwgQk9PS1NfUEVSX1BBR0UpO1xuICAgMjQzXHQgICAgICAgICAgICAgICAgfVxuICAgMjQ0XHQgICAgICAgICAgICB9XG4gICAyNDVcdFxuICAgMjQ2XHQgICAgICAgICAgICAvLyBTZXQgYXR0cmlidXRlcyBmb3IgSlNQXG4gICAyNDdcdCAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiYm9va3NcIiwgYm9va3MpO1xuICAgMjQ4XHQgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImN1cnJlbnRQYWdlXCIsIHBhZ2UpO1xuICAgMjQ5XHQgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcInRvdGFsUGFnZXNcIiwgdG90YWxQYWdlcyk7XG4gICAyNTBcdCAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiYm9va3NQZXJQYWdlXCIsIEJPT0tTX1BFUl9QQUdFKTtcbiAgIDI1MVx0ICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJ0b3RhbEJvb2tzXCIsIHRvdGFsQm9va3MpO1xuICAgMjUyXHRcbiAgIDI1M1x0ICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rcy1saXN0LmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgIDI1NFx0ICAgICAgICB9IGVsc2UgaWYgKHBhdGhJbmZvLmVxdWFscyhcIi9hZGRcIikpIHtcbiAgIDI1NVx0ICAgICAgICAgICAgLy8gU2hvdyBhZGQgYm9vayBmb3JtXG4gICAyNTZcdCAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vYm9vay1mb3JtLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgIDI1N1x0ICAgICAgICB9IGVsc2UgaWYgKHBhdGhJbmZvLnN0YXJ0c1dpdGgoXCIvdmlldy9cIikpIHtcbiAgIDI1OFx0ICAgICAgICAgICAgLy8gU2hvdyBib29rIGRldGFpbHMgaW4gdmlldy1vbmx5IG1vZGVcbiAgIDI1OVx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDI2MFx0ICAgICAgICAgICAgICAgIGludCBib29rSWQgPSBJbnRlZ2VyLnBhcnNlSW50KHBhdGhJbmZvLnN1YnN0cmluZyg2KSk7XG4gICAyNjFcdCAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBib29rREFPLmdldEJvb2tCeUlkKGJvb2tJZCk7XG4gICAyNjJcdFxuICAgMjYzXHQgICAgICAgICAgICAgICAgaWYgKGJvb2sgIT0gbnVsbCkge1xuICAgMjY0XHQgICAgICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiYm9va1wiLCBib29rKTtcbiAgIDI2NVx0ICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcInZpZXdPbmx5XCIsIHRydWUpOyAvLyBGbGFnIHRvIGluZGljYXRlIHZpZXctb25seSBtb2RlXG4gICAyNjZcdCAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgMjY3XHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDI2OFx0ICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3NcIik7XG4gICAyNjlcdCAgICAgICAgICAgICAgICB9XG4gICAyNzBcdCAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAyNzFcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3NcIik7XG4gICAyNzJcdCAgICAgICAgICAgIH1cbiAgIDI3M1x0ICAgICAgICB9IGVsc2UgaWYgKHBhdGhJbmZvLnN0YXJ0c1dpdGgoXCIvZWRpdC9cIikpIHtcbiAgIDI3NFx0ICAgICAgICAgICAgLy8gU2hvdyBlZGl0IGJvb2sgZm9ybVxuICAgMjc1XHQgICAgICAgICAgICB0cnkge1xuICAgMjc2XHQgICAgICAgICAgICAgICAgaW50IGJvb2tJZCA9IEludGVnZXIucGFyc2VJbnQocGF0aEluZm8uc3Vic3RyaW5nKDYpKTtcbiAgIDI3N1x0ICAgICAgICAgICAgICAgIEJvb2sgYm9vayA9IGJvb2tEQU8uZ2V0Qm9va0J5SWQoYm9va0lkKTtcbiAgIDI3OFx0XG4gICAyNzlcdCAgICAgICAgICAgICAgICBpZiAoYm9vayAhPSBudWxsKSB7XG4gICAyODBcdCAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rXCIsIGJvb2spO1xuICAgMjgxXHQgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vYm9vay1mb3JtLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgIDI4Mlx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAyODNcdCAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzXCIpO1xuICAgMjg0XHQgICAgICAgICAgICAgICAgfVxuICAgMjg1XHQgICAgICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkge1xuICAgMjg2XHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzXCIpO1xuICAgMjg3XHQgICAgICAgICAgICB9XG4gICAyODhcdCAgICAgICAgfSBlbHNlIGlmIChwYXRoSW5mby5zdGFydHNXaXRoKFwiL2RlbGV0ZS9cIikpIHtcbiAgIDI4OVx0ICAgICAgICAgICAgLy8gRGVsZXRlIGJvb2sgLSBkaXJlY3QgaW1wbGVtZW50YXRpb25cbiAgIDI5MFx0ICAgICAgICAgICAgdHJ5IHtcbiAgIDI5MVx0ICAgICAgICAgICAgICAgIGludCBib29rSWQgPSBJbnRlZ2VyLnBhcnNlSW50KHBhdGhJbmZvLnN1YnN0cmluZyg4KSk7XG4gICAyOTJcdFxuICAgMjkzXHQgICAgICAgICAgICAgICAgLy8gRGlyZWN0IGRhdGFiYXNlIGRlbGV0aW9uXG4gICAyOTRcdCAgICAgICAgICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBudWxsO1xuICAgMjk1XHQgICAgICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICAyOTZcdFxuICAgMjk3XHQgICAgICAgICAgICAgICAgdHJ5IHtcbiAgIDI5OFx0ICAgICAgICAgICAgICAgICAgICAvLyBEYXRhYmFzZSBjb25uZWN0aW9uIHBhcmFtZXRlcnNcbiAgIDI5OVx0ICAgICAgICAgICAgICAgICAgICBTdHJpbmcgSkRCQ19VUkwgPSBcImpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9lYm9va2phdmFcIjtcbiAgIDMwMFx0ICAgICAgICAgICAgICAgICAgICBTdHJpbmcgSkRCQ19VU0VSID0gXCJyb290XCI7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA1NjZcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImY3MWFhZDU4LTUyYzUtNDRkOC05ZDFhLTExZWJkOTkxMTRlMTt0b29sdV92cnR4XzAxNW1uMTVwNFR0d3hia2VnakJSS3pFeCI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhOlxuICAgMzUwXHRcbiAgIDM1MVx0ICAgIHByb3RlY3RlZCB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgIDM1Mlx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJcXG49PT09IEFkbWluQm9va3NTZXJ2bGV0IGRvUG9zdCBtZXRob2QgY2FsbGVkID09PT1cIik7XG4gICAzNTNcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udGVudCB0eXBlOiBcIiArIHJlcXVlc3QuZ2V0Q29udGVudFR5cGUoKSk7XG4gICAzNTRcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVxdWVzdCBtZXRob2Q6IFwiICsgcmVxdWVzdC5nZXRNZXRob2QoKSk7XG4gICAzNTVcdFxuICAgMzU2XHQgICAgICAgIC8vIFByaW50IGFsbCBwYXJhbWV0ZXIgbmFtZXMgZm9yIGRlYnVnZ2luZ1xuICAgMzU3XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlcXVlc3QgcGFyYW1ldGVyczpcIik7XG4gICAzNThcdCAgICAgICAgcmVxdWVzdC5nZXRQYXJhbWV0ZXJNYXAoKS5mb3JFYWNoKChrZXksIHZhbHVlKSAtPiB7XG4gICAzNTlcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgXCIgKyBrZXkgKyBcIjogXCIgKyAodmFsdWUubGVuZ3RoID4gMCA/IHZhbHVlWzBdIDogXCJbZW1wdHldXCIpKTtcbiAgIDM2MFx0ICAgICAgICB9KTtcbiAgIDM2MVx0XG4gICAzNjJcdCAgICAgICAgLy8gUHJpbnQgYWxsIHBhcnQgbmFtZXMgZm9yIG11bHRpcGFydCByZXF1ZXN0c1xuICAgMzYzXHQgICAgICAgIGlmIChyZXF1ZXN0LmdldENvbnRlbnRUeXBlKCkgIT0gbnVsbCAmJiByZXF1ZXN0LmdldENvbnRlbnRUeXBlKCkuc3RhcnRzV2l0aChcIm11bHRpcGFydC9mb3JtLWRhdGFcIikpIHtcbiAgIDM2NFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTXVsdGlwYXJ0IGZvcm0gZGF0YSBwYXJ0czpcIik7XG4gICAzNjVcdCAgICAgICAgICAgIHRyeSB7XG4gICAzNjZcdCAgICAgICAgICAgICAgICBmb3IgKFBhcnQgcGFydCA6IHJlcXVlc3QuZ2V0UGFydHMoKSkge1xuICAgMzY3XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgUGFydCBuYW1lOiBcIiArIHBhcnQuZ2V0TmFtZSgpICsgXCIsIFNpemU6IFwiICsgcGFydC5nZXRTaXplKCkgKyBcIiwgQ29udGVudCB0eXBlOiBcIiArIHBhcnQuZ2V0Q29udGVudFR5cGUoKSk7XG4gICAzNjhcdCAgICAgICAgICAgICAgICB9XG4gICAzNjlcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAzNzBcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBnZXR0aW5nIHBhcnRzOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDM3MVx0ICAgICAgICAgICAgfVxuICAgMzcyXHQgICAgICAgIH1cbiAgIDM3M1x0XG4gICAzNzRcdCAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IHJlcXVlc3QuZ2V0U2Vzc2lvbigpO1xuICAgMzc1XHQgICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG4gICAzNzZcdFxuICAgMzc3XHQgICAgICAgIGlmICh1c2VyID09IG51bGwgfHwgIXVzZXIuaXNBZG1pbigpKSB7XG4gICAzNzhcdCAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9sb2dpblwiKTtcbiAgIDM3OVx0ICAgICAgICAgICAgcmV0dXJuO1xuICAgMzgwXHQgICAgICAgIH1cbiAgIDM4MVx0XG4gICAzODJcdCAgICAgICAgU3RyaW5nIHBhdGhJbmZvID0gcmVxdWVzdC5nZXRQYXRoSW5mbygpO1xuICAgMzgzXHQgICAgICAgIFN0cmluZyBhY3Rpb24gPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImFjdGlvblwiKTtcbiAgIDM4NFx0XG4gICAzODVcdCAgICAgICAgLy8gSGFuZGxlIGRlbGV0ZSByZXF1ZXN0cyBmcm9tIHRoZSBVUkwgcGF0dGVyblxuICAgMzg2XHQgICAgICAgIGlmIChwYXRoSW5mbyAhPSBudWxsICYmIHBhdGhJbmZvLnN0YXJ0c1dpdGgoXCIvZGVsZXRlL1wiKSkge1xuICAgMzg3XHQgICAgICAgICAgICAvLyBEZWxldGUgYm9vayB2aWEgUE9TVCByZXF1ZXN0XG4gICAzODhcdCAgICAgICAgICAgIHRyeSB7XG4gICAzODlcdCAgICAgICAgICAgICAgICBpbnQgYm9va0lkID0gSW50ZWdlci5wYXJzZUludChwYXRoSW5mby5zdWJzdHJpbmcoOCkpO1xuICAgMzkwXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWRtaW5Cb29rc1NlcnZsZXQ6IEF0dGVtcHRpbmcgdG8gZGVsZXRlIGJvb2sgd2l0aCBJRDogXCIgKyBib29rSWQgKyBcIiB2aWEgUE9TVFwiKTtcbiAgIDM5MVx0XG4gICAzOTJcdCAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGJvb2sgdG8gdmVyaWZ5IGl0IGV4aXN0c1xuICAgMzkzXHQgICAgICAgICAgICAgICAgQm9vayBib29rVG9EZWxldGUgPSBib29rREFPLmdldEJvb2tCeUlkKGJvb2tJZCk7XG4gICAzOTRcdCAgICAgICAgICAgICAgICBpZiAoYm9va1RvRGVsZXRlID09IG51bGwpIHtcbiAgIDM5NVx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBZG1pbkJvb2tzU2VydmxldDogQm9vayB3aXRoIElEIFwiICsgYm9va0lkICsgXCIgbm90IGZvdW5kXCIpO1xuICAgMzk2XHQgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9ib29rcz9lcnJvcj1ib29rLW5vdC1mb3VuZFwiKTtcbiAgIDM5N1x0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAzOThcdCAgICAgICAgICAgICAgICB9XG4gICAzOTlcdFxuICAgNDAwXHQgICAgICAgICAgICAgICAgYm9vbGVhbiBkZWxldGVkID0gYm9va0RBTy5kZWxldGVCb29rKGJvb2tJZCk7XG4gICA0MDFcdCAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCkge1xuICAgNDAyXHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFkbWluQm9va3NTZXJ2bGV0OiBCb29rIHdpdGggSUQgXCIgKyBib29rSWQgKyBcIiB3YXMgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgdmlhIFBPU1RcIik7XG4gICA0MDNcdCAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzP2RlbGV0ZWQ9dHJ1ZVwiKTtcbiAgIDQwNFx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICA0MDVcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWRtaW5Cb29rc1NlcnZsZXQ6IEZhaWxlZCB0byBkZWxldGUgYm9vayB3aXRoIElEIFwiICsgYm9va0lkKTtcbiAgIDQwNlx0ICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3M/ZXJyb3I9ZGVsZXRlLWZhaWxlZFwiKTtcbiAgIDQwN1x0ICAgICAgICAgICAgICAgIH1cbiAgIDQwOFx0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgIDQwOVx0ICAgICAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgIDQxMFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFkbWluQm9va3NTZXJ2bGV0OiBJbnZhbGlkIGJvb2sgSUQgZm9ybWF0OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDQxMVx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0MTJcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3M/ZXJyb3I9aW52YWxpZC1pZFwiKTtcbiAgIDQxM1x0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgIDQxNFx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDQxNVx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFkbWluQm9va3NTZXJ2bGV0OiBFcnJvciBkZWxldGluZyBib29rOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDQxNlx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0MTdcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3M/ZXJyb3I9ZGVsZXRlLWVycm9yXCIpO1xuICAgNDE4XHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgNDE5XHQgICAgICAgICAgICB9XG4gICA0MjBcdCAgICAgICAgfVxuICAgNDIxXHRcbiAgIDQyMlx0ICAgICAgICBpZiAoXCJhZGRcIi5lcXVhbHMoYWN0aW9uKSkge1xuICAgNDIzXHQgICAgICAgICAgICAvLyBBZGQgbmV3IGJvb2tcbiAgIDQyNFx0ICAgICAgICAgICAgQm9vayBib29rID0gbmV3IEJvb2soKTtcbiAgIDQyNVx0ICAgICAgICAgICAgYm9vay5zZXRUaXRsZShyZXF1ZXN0LmdldFBhcmFtZXRlcihcInRpdGxlXCIpKTtcbiAgIDQyNlx0ICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhdXRob3JcIikpO1xuICAgNDI3XHQgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiZGVzY3JpcHRpb25cIikpO1xuICAgNDI4XHQgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY2F0ZWdvcnlcIikpO1xuICAgNDI5XHQgICAgICAgICAgICBib29rLnNldEdlbnJlKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiZ2VucmVcIikpO1xuICAgNDMwXHQgICAgICAgICAgICBib29rLnNldFByaWNlKG5ldyBCaWdEZWNpbWFsKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwicHJpY2VcIikpKTtcbiAgIDQzMVx0ICAgICAgICAgICAgYm9vay5zZXRTdG9jayhJbnRlZ2VyLnBhcnNlSW50KHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwic3RvY2tcIikpKTtcbiAgIDQzMlx0XG4gICA0MzNcdCAgICAgICAgICAgIC8vIEhhbmRsZSBpbWFnZSB1cGxvYWRcbiAgIDQzNFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvY2Vzc2luZyBpbWFnZSB1cGxvYWQgZm9yIEFERCBvcGVyYXRpb25cIik7XG4gICA0MzVcdCAgICAgICAgICAgIHRyeSB7XG4gICA0MzZcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJUcnlpbmcgdG8gZ2V0IGZpbGUgcGFydCB3aXRoIG5hbWUgJ2Jvb2tJbWFnZScuLi5cIik7XG4gICA0MzdcdCAgICAgICAgICAgICAgICBQYXJ0IGZpbGVQYXJ0ID0gcmVxdWVzdC5nZXRQYXJ0KFwiYm9va0ltYWdlXCIpO1xuICAgNDM4XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0IHJldHJpZXZlZDogXCIgKyAoZmlsZVBhcnQgIT0gbnVsbCkpO1xuICAgNDM5XHRcbiAgIDQ0MFx0ICAgICAgICAgICAgICAgIC8vIFByaW50IGFsbCBwYXJ0cyBmb3IgZGVidWdnaW5nXG4gICA0NDFcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBbGwgcGFydHMgaW4gdGhlIHJlcXVlc3Q6XCIpO1xuICAgNDQyXHQgICAgICAgICAgICAgICAgZm9yIChQYXJ0IHBhcnQgOiByZXF1ZXN0LmdldFBhcnRzKCkpIHtcbiAgIDQ0M1x0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFBhcnQgbmFtZTogXCIgKyBwYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIHBhcnQuZ2V0U2l6ZSgpICsgXCIsIENvbnRlbnQgdHlwZTogXCIgKyBwYXJ0LmdldENvbnRlbnRUeXBlKCkpO1xuICAgNDQ0XHQgICAgICAgICAgICAgICAgICAgIGlmIChcImJvb2tJbWFnZVwiLmVxdWFscyhwYXJ0LmdldE5hbWUoKSkgJiYgcGFydC5nZXRTaXplKCkgPiAwKSB7XG4gICA0NDVcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgRm91bmQgYm9va0ltYWdlIHBhcnQgd2l0aCBzaXplID4gMFwiKTtcbiAgIDQ0Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBTdWJtaXR0ZWQgZmlsZW5hbWU6IFwiICsgcGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcbiAgIDQ0N1x0ICAgICAgICAgICAgICAgICAgICB9XG4gICA0NDhcdCAgICAgICAgICAgICAgICB9XG4gICA0NDlcdFxuICAgNDUwXHQgICAgICAgICAgICAgICAgaWYgKGZpbGVQYXJ0ICE9IG51bGwgJiYgZmlsZVBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuVG90YWwgbGluZXMgaW4gZmlsZTogNTY2XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI3NTVlZWM4MS0xOTgyLTQ1MmEtOGM0Yy1jNjkwY2MwZmE1NmM7dG9vbHVfdnJ0eF8wMTVHODlZQTh4V2F0QnlYdVV5ZUtMalMiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YTpcbiAgIDQ3MFx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDQ3MVx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIHByb2Nlc3NpbmcgZmlsZSB1cGxvYWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgNDcyXHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDQ3M1x0ICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICA0NzRcdCAgICAgICAgICAgIH1cbiAgIDQ3NVx0XG4gICA0NzZcdCAgICAgICAgICAgIGlmIChib29rREFPLmFkZEJvb2soYm9vaykpIHtcbiAgIDQ3N1x0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9ib29rcz9hZGRlZD10cnVlXCIpO1xuICAgNDc4XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgNDc5XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJlcnJvck1lc3NhZ2VcIiwgXCJGYWlsZWQgdG8gYWRkIGJvb2tcIik7XG4gICA0ODBcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImJvb2tcIiwgYm9vayk7XG4gICA0ODFcdCAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICA0ODJcdCAgICAgICAgICAgIH1cbiAgIDQ4M1x0ICAgICAgICB9IGVsc2UgaWYgKFwidXBkYXRlXCIuZXF1YWxzKGFjdGlvbikpIHtcbiAgIDQ4NFx0ICAgICAgICAgICAgLy8gVXBkYXRlIGJvb2tcbiAgIDQ4NVx0ICAgICAgICAgICAgQm9vayBib29rID0gbmV3IEJvb2soKTtcbiAgIDQ4Nlx0ICAgICAgICAgICAgYm9vay5zZXRJZChJbnRlZ2VyLnBhcnNlSW50KHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiaWRcIikpKTtcbiAgIDQ4N1x0ICAgICAgICAgICAgYm9vay5zZXRUaXRsZShyZXF1ZXN0LmdldFBhcmFtZXRlcihcInRpdGxlXCIpKTtcbiAgIDQ4OFx0ICAgICAgICAgICAgYm9vay5zZXRBdXRob3IocmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJhdXRob3JcIikpO1xuICAgNDg5XHQgICAgICAgICAgICBib29rLnNldERlc2NyaXB0aW9uKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiZGVzY3JpcHRpb25cIikpO1xuICAgNDkwXHQgICAgICAgICAgICBib29rLnNldENhdGVnb3J5KHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY2F0ZWdvcnlcIikpO1xuICAgNDkxXHQgICAgICAgICAgICBib29rLnNldEdlbnJlKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiZ2VucmVcIikpO1xuICAgNDkyXHQgICAgICAgICAgICBib29rLnNldFByaWNlKG5ldyBCaWdEZWNpbWFsKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwicHJpY2VcIikpKTtcbiAgIDQ5M1x0ICAgICAgICAgICAgYm9vay5zZXRTdG9jayhJbnRlZ2VyLnBhcnNlSW50KHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwic3RvY2tcIikpKTtcbiAgIDQ5NFx0XG4gICA0OTVcdCAgICAgICAgICAgIC8vIEhhbmRsZSBpbWFnZSB1cGxvYWRcbiAgIDQ5Nlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUHJvY2Vzc2luZyBpbWFnZSB1cGxvYWQgZm9yIFVQREFURSBvcGVyYXRpb25cIik7XG4gICA0OTdcdCAgICAgICAgICAgIHRyeSB7XG4gICA0OThcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJUcnlpbmcgdG8gZ2V0IGZpbGUgcGFydCB3aXRoIG5hbWUgJ2Jvb2tJbWFnZScuLi5cIik7XG4gICA0OTlcdCAgICAgICAgICAgICAgICBQYXJ0IGZpbGVQYXJ0ID0gcmVxdWVzdC5nZXRQYXJ0KFwiYm9va0ltYWdlXCIpO1xuICAgNTAwXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0IHJldHJpZXZlZDogXCIgKyAoZmlsZVBhcnQgIT0gbnVsbCkpO1xuICAgNTAxXHRcbiAgIDUwMlx0ICAgICAgICAgICAgICAgIC8vIFByaW50IGFsbCBwYXJ0cyBmb3IgZGVidWdnaW5nXG4gICA1MDNcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBbGwgcGFydHMgaW4gdGhlIHJlcXVlc3Q6XCIpO1xuICAgNTA0XHQgICAgICAgICAgICAgICAgZm9yIChQYXJ0IHBhcnQgOiByZXF1ZXN0LmdldFBhcnRzKCkpIHtcbiAgIDUwNVx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFBhcnQgbmFtZTogXCIgKyBwYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIHBhcnQuZ2V0U2l6ZSgpICsgXCIsIENvbnRlbnQgdHlwZTogXCIgKyBwYXJ0LmdldENvbnRlbnRUeXBlKCkpO1xuICAgNTA2XHQgICAgICAgICAgICAgICAgICAgIGlmIChcImJvb2tJbWFnZVwiLmVxdWFscyhwYXJ0LmdldE5hbWUoKSkgJiYgcGFydC5nZXRTaXplKCkgPiAwKSB7XG4gICA1MDdcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgRm91bmQgYm9va0ltYWdlIHBhcnQgd2l0aCBzaXplID4gMFwiKTtcbiAgIDUwOFx0ICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBTdWJtaXR0ZWQgZmlsZW5hbWU6IFwiICsgcGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKTtcbiAgIDUwOVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICA1MTBcdCAgICAgICAgICAgICAgICB9XG4gICA1MTFcdFxuICAgNTEyXHQgICAgICAgICAgICAgICAgaWYgKGZpbGVQYXJ0ICE9IG51bGwgJiYgZmlsZVBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgNTEzXHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydCBzaXplOiBcIiArIGZpbGVQYXJ0LmdldFNpemUoKSk7XG4gICA1MTRcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBuYW1lOiBcIiArIGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkpO1xuICAgNTE1XHRcbiAgIDUxNlx0ICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGFwcGxpY2F0aW9uJ3MgcmVhbCBwYXRoXG4gICA1MTdcdCAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCA9IHJlcXVlc3QuZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIlwiKTtcbiAgIDUxOFx0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBcHBsaWNhdGlvbiBwYXRoOiBcIiArIGFwcGxpY2F0aW9uUGF0aCk7XG4gICA1MTlcdFxuICAgNTIwXHQgICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgYW5kIGdldCBpdHMgcGF0aFxuVG90YWwgbGluZXMgaW4gZmlsZTogNTY2XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI4OWE5ZjMxYS03YjdiLTQ1ZjYtYmMxMi05M2MwNDU5MDBlZjE7dG9vbHVfdnJ0eF8wMVdHZVEzR2NHblNpazl5akpKdlppakQiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNDcyXHQgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgIDQ3M1x0ICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICA0NzRcdCAgICAgICAgICAgIH1cbiAgIDQ3NVx0XG4gICA0NzZcdCAgICAgICAgICAgIC8vIENoZWNrIGlmIGJvb2sgYWxyZWFkeSBleGlzdHMgYmVmb3JlIGFkZGluZ1xuICAgNDc3XHQgICAgICAgICAgICBpZiAoYm9va0RBTy5pc0R1cGxpY2F0ZUJvb2soYm9vaykpIHtcbiAgIDQ3OFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkR1cGxpY2F0ZSBib29rIGRldGVjdGVkOiBcIiArIGJvb2suZ2V0VGl0bGUoKSArIFwiIGJ5IFwiICsgYm9vay5nZXRBdXRob3IoKSk7XG4gICA0NzlcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHNcIik7XG4gICA0ODBcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImJvb2tcIiwgYm9vayk7XG4gICA0ODFcdCAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG4gICA0ODJcdCAgICAgICAgICAgIH0gZWxzZSBpZiAoYm9va0RBTy5hZGRCb29rKGJvb2spKSB7XG4gICA0ODNcdCAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vYm9va3M/YWRkZWQ9dHJ1ZVwiKTtcbiAgIDQ4NFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDQ4NVx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiZXJyb3JNZXNzYWdlXCIsIFwiRmFpbGVkIHRvIGFkZCBib29rXCIpO1xuICAgNDg2XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rXCIsIGJvb2spO1xuICAgNDg3XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgNDg4XHQgICAgICAgICAgICB9XG4gICA0ODlcdCAgICAgICAgfSBlbHNlIGlmIChcInVwZGF0ZVwiLmVxdWFscyhhY3Rpb24pKSB7XG4gICA0OTBcdCAgICAgICAgICAgIC8vIFVwZGF0ZSBib29rXG4gICA0OTFcdCAgICAgICAgICAgIEJvb2sgYm9vayA9IG5ldyBCb29rKCk7XG4gICA0OTJcdCAgICAgICAgICAgIGJvb2suc2V0SWQoSW50ZWdlci5wYXJzZUludChyZXF1ZXN0LmdldFBhcmFtZXRlcihcImlkXCIpKSk7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjc0NDkwMmMxLTk2ODAtNDA1MS1iYWZmLWNkNGRlNTU2ZWZlMTt0b29sdV92cnR4XzAxQ3RjbndmaUdEemhGSkc4ZEt6NG9UQiI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhOlxuICAgNTQwXHQgICAgICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGN1cnJlbnRJbWFnZVVybCk7XG4gICA1NDFcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIktlZXBpbmcgY3VycmVudCBpbWFnZSBVUkw6IFwiICsgY3VycmVudEltYWdlVXJsKTtcbiAgIDU0Mlx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgNTQzXHQgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBjdXJyZW50IGltYWdlIFVSTCwgdXNpbmcgZGVmYXVsdCBpbWFnZVwiKTtcbiAgIDU0NFx0ICAgICAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGhcbiAgIDU0NVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICA1NDZcdCAgICAgICAgICAgICAgICB9XG4gICA1NDdcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICA1NDhcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgdXBsb2FkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDU0OVx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA1NTBcdFxuICAgNTUxXHQgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGtlZXAgY3VycmVudCBpbWFnZSBvbiBlcnJvclxuICAgNTUyXHQgICAgICAgICAgICAgICAgU3RyaW5nIGN1cnJlbnRJbWFnZVVybCA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY3VycmVudEltYWdlVXJsXCIpO1xuICAgNTUzXHQgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbWFnZVVybCAhPSBudWxsICYmICFjdXJyZW50SW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICA1NTRcdCAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChjdXJyZW50SW1hZ2VVcmwpO1xuICAgNTU1XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVzaW5nIGN1cnJlbnQgaW1hZ2UgVVJMIGFmdGVyIGVycm9yOiBcIiArIGN1cnJlbnRJbWFnZVVybCk7XG4gICA1NTZcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgNTU3XHQgICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICA1NThcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXNpbmcgZGVmYXVsdCBpbWFnZSBhZnRlciBlcnJvclwiKTtcbiAgIDU1OVx0ICAgICAgICAgICAgICAgIH1cbiAgIDU2MFx0ICAgICAgICAgICAgfVxuICAgNTYxXHRcbiAgIDU2Mlx0ICAgICAgICAgICAgaWYgKGJvb2tEQU8udXBkYXRlQm9vayhib29rKSkge1xuICAgNTYzXHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzP3VwZGF0ZWQ9dHJ1ZVwiKTtcbiAgIDU2NFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDU2NVx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiZXJyb3JNZXNzYWdlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBib29rXCIpO1xuICAgNTY2XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rXCIsIGJvb2spO1xuVG90YWwgbGluZXMgaW4gZmlsZTogNTcyXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI3M2RiZjA1OC00YWE4LTQzMDktOWYyMy1jYWUyNmMxYjM2ZWI7dG9vbHVfdnJ0eF8wMTNQWWI3bkZkMjI2Y1NEdlRxU3Z5NDQiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YTpcbiAgIDU2MFx0ICAgICAgICAgICAgfVxuICAgNTYxXHRcbiAgIDU2Mlx0ICAgICAgICAgICAgaWYgKGJvb2tEQU8udXBkYXRlQm9vayhib29rKSkge1xuICAgNTYzXHQgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2FkbWluL2Jvb2tzP3VwZGF0ZWQ9dHJ1ZVwiKTtcbiAgIDU2NFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDU2NVx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiZXJyb3JNZXNzYWdlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBib29rXCIpO1xuICAgNTY2XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJib29rXCIsIGJvb2spO1xuICAgNTY3XHQgICAgICAgICAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9hZG1pbi9ib29rLWZvcm0uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgNTY4XHQgICAgICAgICAgICB9XG4gICA1NjlcdCAgICAgICAgfVxuICAgNTcwXHQgICAgfVxuICAgNTcxXHR9XG4gICA1NzJcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogNTcyXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI0YjI4Yzc4My1kOTM4LTQxNWQtODc3MC1mM2Y3ZThjNDdmZWE7dG9vbHVfdnJ0eF8wMTE4TmlxaTFERkVkTGFUV3hBS2ZlYVoiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNTU4XHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVzaW5nIGRlZmF1bHQgaW1hZ2UgYWZ0ZXIgZXJyb3JcIik7XG4gICA1NTlcdCAgICAgICAgICAgICAgICB9XG4gICA1NjBcdCAgICAgICAgICAgIH1cbiAgIDU2MVx0XG4gICA1NjJcdCAgICAgICAgICAgIC8vIEdldCB0aGUgb3JpZ2luYWwgYm9vayB0byBjaGVjayBpZiB0aXRsZS9hdXRob3IgY2hhbmdlZFxuICAgNTYzXHQgICAgICAgICAgICBCb29rIG9yaWdpbmFsQm9vayA9IGJvb2tEQU8uZ2V0Qm9va0J5SWQoYm9vay5nZXRJZCgpKTtcbiAgIDU2NFx0XG4gICA1NjVcdCAgICAgICAgICAgIC8vIENoZWNrIGZvciBkdXBsaWNhdGUgb25seSBpZiB0aXRsZSBvciBhdXRob3IgY2hhbmdlZFxuICAgNTY2XHQgICAgICAgICAgICBib29sZWFuIHRpdGxlT3JBdXRob3JDaGFuZ2VkID0gb3JpZ2luYWxCb29rICE9IG51bGwgJiZcbiAgIDU2N1x0ICAgICAgICAgICAgICAgICghb3JpZ2luYWxCb29rLmdldFRpdGxlKCkuZXF1YWxzKGJvb2suZ2V0VGl0bGUoKSkgfHxcbiAgIDU2OFx0ICAgICAgICAgICAgICAgICAhb3JpZ2luYWxCb29rLmdldEF1dGhvcigpLmVxdWFscyhib29rLmdldEF1dGhvcigpKSk7XG4gICA1NjlcdFxuICAgNTcwXHQgICAgICAgICAgICBpZiAodGl0bGVPckF1dGhvckNoYW5nZWQgJiYgYm9va0RBTy5pc0R1cGxpY2F0ZUJvb2soYm9vaykpIHtcbiAgIDU3MVx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkR1cGxpY2F0ZSBib29rIGRldGVjdGVkIGR1cmluZyB1cGRhdGU6IFwiICsgYm9vay5nZXRUaXRsZSgpICsgXCIgYnkgXCIgKyBib29rLmdldEF1dGhvcigpKTtcbiAgIDU3Mlx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiZXJyb3JNZXNzYWdlXCIsIFwiQSBib29rIHdpdGggdGhlIHNhbWUgdGl0bGUgYW5kIGF1dGhvciBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgIDU3M1x0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiYm9va1wiLCBib29rKTtcbiAgIDU3NFx0ICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vYm9vay1mb3JtLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgIDU3NVx0ICAgICAgICAgICAgfSBlbHNlIGlmIChib29rREFPLnVwZGF0ZUJvb2soYm9vaykpIHtcbiAgIDU3Nlx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNlbmRSZWRpcmVjdChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9hZG1pbi9ib29rcz91cGRhdGVkPXRydWVcIik7XG4gICA1NzdcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICA1NzhcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgYm9va1wiKTtcbiAgIDU3OVx0ICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKFwiYm9va1wiLCBib29rKTtcbiAgIDU4MFx0ICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWRtaW4vYm9vay1mb3JtLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgIDU4MVx0ICAgICAgICAgICAgfVxuICAgNTgyXHQgICAgICAgIH1cbiAgIDU4M1x0ICAgIH1cbiAgIDU4NFx0fVxuICAgNTg1XHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMzc4ODE1MDktODU3MS00ZGQ1LTk4ZDgtOTYwYTE4ZDIxNGI2O3Rvb2x1X3ZydHhfMDExdlFmaVdxaXZlTEJtNmZiN2hHOFE1Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9kYW8vQm9va0RBTy5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA0MDhcdFxuICAgNDA5XHQgICAgICAgIHJldHVybiBib29rcztcbiAgIDQxMFx0ICAgIH1cbiAgIDQxMVx0XG4gICA0MTJcdCAgICAvKipcbiAgIDQxM1x0ICAgICAqIENoZWNrIGlmIGEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHNcbiAgIDQxNFx0ICAgICAqIEBwYXJhbSBib29rIFRoZSBib29rIHRvIGNoZWNrXG4gICA0MTVcdCAgICAgKiBAcmV0dXJuIHRydWUgaWYgYSBkdXBsaWNhdGUgYm9vayBleGlzdHMsIGZhbHNlIG90aGVyd2lzZVxuICAgNDE2XHQgICAgICovXG4gICA0MTdcdCAgICBwdWJsaWMgYm9vbGVhbiBpc0R1cGxpY2F0ZUJvb2soQm9vayBib29rKSB7XG4gICA0MThcdCAgICAgICAgcmV0dXJuIGlzRHVwbGljYXRlQm9vayhib29rLCAwKTsgLy8gMCBtZWFucyBubyBib29rIElEIHRvIGV4Y2x1ZGVcbiAgIDQxOVx0ICAgIH1cbiAgIDQyMFx0XG4gICA0MjFcdCAgICAvKipcbiAgIDQyMlx0ICAgICAqIENoZWNrIGlmIGEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHMsIGV4Y2x1ZGluZyBhIHNwZWNpZmljIGJvb2sgSURcbiAgIDQyM1x0ICAgICAqIEBwYXJhbSBib29rIFRoZSBib29rIHRvIGNoZWNrXG4gICA0MjRcdCAgICAgKiBAcGFyYW0gZXhjbHVkZUJvb2tJZCBUaGUgSUQgb2YgdGhlIGJvb2sgdG8gZXhjbHVkZSBmcm9tIHRoZSBjaGVjayAoZm9yIHVwZGF0ZXMpXG4gICA0MjVcdCAgICAgKiBAcmV0dXJuIHRydWUgaWYgYSBkdXBsaWNhdGUgYm9vayBleGlzdHMsIGZhbHNlIG90aGVyd2lzZVxuICAgNDI2XHQgICAgICovXG4gICA0MjdcdCAgICBwdWJsaWMgYm9vbGVhbiBpc0R1cGxpY2F0ZUJvb2soQm9vayBib29rLCBpbnQgZXhjbHVkZUJvb2tJZCkge1xuICAgNDI4XHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICA0MjlcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG4gICA0MzBcdCAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDtcbiAgIDQzMVx0ICAgICAgICBib29sZWFuIGlzRHVwbGljYXRlID0gZmFsc2U7XG4gICA0MzJcdFxuICAgNDMzXHQgICAgICAgIHRyeSB7XG4gICA0MzRcdCAgICAgICAgICAgIGNvbm4gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oSkRCQ19VUkwsIEpEQkNfVVNFUiwgSkRCQ19QQVNTV09SRCk7XG4gICA0MzVcdCAgICAgICAgICAgIFN0cmluZyBzcWw7XG4gICA0MzZcdFxuICAgNDM3XHQgICAgICAgICAgICBpZiAoZXhjbHVkZUJvb2tJZCA+IDApIHtcbiAgIDQzOFx0ICAgICAgICAgICAgICAgIC8vIEV4Y2x1ZGUgdGhlIGJvb2sgd2l0aCB0aGUgZ2l2ZW4gSUQgKGZvciB1cGRhdGVzKVxuICAgNDM5XHQgICAgICAgICAgICAgICAgc3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgRlJPTSBib29rcyBXSEVSRSB0aXRsZSA9ID8gQU5EIGF1dGhvciA9ID8gQU5EIGlkICE9ID9cIjtcbiAgIDQ0MFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDQ0MVx0ICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBhbnkgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3JcbiAgIDQ0Mlx0ICAgICAgICAgICAgICAgIHNxbCA9IFwiU0VMRUNUIENPVU5UKCopIEZST00gYm9va3MgV0hFUkUgdGl0bGUgPSA/IEFORCBhdXRob3IgPSA/XCI7XG4gICA0NDNcdCAgICAgICAgICAgIH1cbiAgIDQ0NFx0XG4gICA0NDVcdCAgICAgICAgICAgIHN0bXQgPSBjb25uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKTtcbiAgIDQ0Nlx0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMSwgYm9vay5nZXRUaXRsZSgpKTtcbiAgIDQ0N1x0ICAgICAgICAgICAgc3RtdC5zZXRTdHJpbmcoMiwgYm9vay5nZXRBdXRob3IoKSk7XG4gICA0NDhcdFxuICAgNDQ5XHQgICAgICAgICAgICBpZiAoZXhjbHVkZUJvb2tJZCA+IDApIHtcbiAgIDQ1MFx0ICAgICAgICAgICAgICAgIHN0bXQuc2V0SW50KDMsIGV4Y2x1ZGVCb29rSWQpO1xuICAgNDUxXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ2hlY2tpbmcgZm9yIGR1cGxpY2F0ZSBib29rOiBcIiArIGJvb2suZ2V0VGl0bGUoKSArIFwiIGJ5IFwiICsgYm9vay5nZXRBdXRob3IoKSArIFwiLCBleGNsdWRpbmcgYm9vayBJRDogXCIgKyBleGNsdWRlQm9va0lkKTtcbiAgIDQ1Mlx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDQ1M1x0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNoZWNraW5nIGZvciBkdXBsaWNhdGUgYm9vazogXCIgKyBib29rLmdldFRpdGxlKCkgKyBcIiBieSBcIiArIGJvb2suZ2V0QXV0aG9yKCkpO1xuICAgNDU0XHQgICAgICAgICAgICB9XG4gICA0NTVcdFxuICAgNDU2XHQgICAgICAgICAgICBycyA9IHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XG4gICA0NTdcdFxuICAgNDU4XHQgICAgICAgICAgICBpZiAocnMubmV4dCgpKSB7XG4gICA0NTlcdCAgICAgICAgICAgICAgICBpbnQgY291bnQgPSBycy5nZXRJbnQoMSk7XG4gICA0NjBcdCAgICAgICAgICAgICAgICBpc0R1cGxpY2F0ZSA9IGNvdW50ID4gMDtcbiAgIDQ2MVx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZvdW5kIFwiICsgY291bnQgKyBcIiBleGlzdGluZyBib29rcyB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3JcIik7XG4gICA0NjJcdCAgICAgICAgICAgIH1cbiAgIDQ2M1x0ICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xuICAgNDY0XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgNDY1XHQgICAgICAgIH0gZmluYWxseSB7XG4gICA0NjZcdCAgICAgICAgICAgIHRyeSB7XG4gICA0NjdcdCAgICAgICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkgcnMuY2xvc2UoKTtcbiAgIDQ2OFx0ICAgICAgICAgICAgICAgIGlmIChzdG10ICE9IG51bGwpIHN0bXQuY2xvc2UoKTtcbiAgIDQ2OVx0ICAgICAgICAgICAgICAgIGlmIChjb25uICE9IG51bGwpIGNvbm4uY2xvc2UoKTtcbiAgIDQ3MFx0ICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHtcbiAgIDQ3MVx0ICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICA0NzJcdCAgICAgICAgICAgIH1cbiAgIDQ3M1x0ICAgICAgICB9XG4gICA0NzRcdFxuICAgNDc1XHQgICAgICAgIHJldHVybiBpc0R1cGxpY2F0ZTtcbiAgIDQ3Nlx0ICAgIH1cbiAgIDQ3N1x0XG4gICA0NzhcdCAgICBwdWJsaWMgYm9vbGVhbiBhZGRCb29rKEJvb2sgYm9vaykge1xuICAgNDc5XHQgICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7XG4gICA0ODBcdCAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtdCA9IG51bGw7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjI1NjU2MjE5LWQwM2ItNDExYi04ODIxLWI0ZTlmMGI1MjY2Yjt0b29sdV92cnR4XzAxUkptTWtpZUR6czYxcTRSaW5VTVIxZiI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA1NThcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXNpbmcgZGVmYXVsdCBpbWFnZSBhZnRlciBlcnJvclwiKTtcbiAgIDU1OVx0ICAgICAgICAgICAgICAgIH1cbiAgIDU2MFx0ICAgICAgICAgICAgfVxuICAgNTYxXHRcbiAgIDU2Mlx0ICAgICAgICAgICAgLy8gR2V0IHRoZSBvcmlnaW5hbCBib29rIHRvIGNoZWNrIGlmIHRpdGxlL2F1dGhvciBjaGFuZ2VkXG4gICA1NjNcdCAgICAgICAgICAgIEJvb2sgb3JpZ2luYWxCb29rID0gYm9va0RBTy5nZXRCb29rQnlJZChib29rLmdldElkKCkpO1xuICAgNTY0XHRcbiAgIDU2NVx0ICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZSBvbmx5IGlmIHRpdGxlIG9yIGF1dGhvciBjaGFuZ2VkXG4gICA1NjZcdCAgICAgICAgICAgIGJvb2xlYW4gdGl0bGVPckF1dGhvckNoYW5nZWQgPSBvcmlnaW5hbEJvb2sgIT0gbnVsbCAmJlxuICAgNTY3XHQgICAgICAgICAgICAgICAgKCFvcmlnaW5hbEJvb2suZ2V0VGl0bGUoKS5lcXVhbHMoYm9vay5nZXRUaXRsZSgpKSB8fFxuICAgNTY4XHQgICAgICAgICAgICAgICAgICFvcmlnaW5hbEJvb2suZ2V0QXV0aG9yKCkuZXF1YWxzKGJvb2suZ2V0QXV0aG9yKCkpKTtcbiAgIDU2OVx0XG4gICA1NzBcdCAgICAgICAgICAgIGlmICh0aXRsZU9yQXV0aG9yQ2hhbmdlZCAmJiBib29rREFPLmlzRHVwbGljYXRlQm9vayhib29rLCBib29rLmdldElkKCkpKSB7XG4gICA1NzFcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJEdXBsaWNhdGUgYm9vayBkZXRlY3RlZCBkdXJpbmcgdXBkYXRlOiBcIiArIGJvb2suZ2V0VGl0bGUoKSArIFwiIGJ5IFwiICsgYm9vay5nZXRBdXRob3IoKSk7XG4gICA1NzJcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkEgYm9vayB3aXRoIHRoZSBzYW1lIHRpdGxlIGFuZCBhdXRob3IgYWxyZWFkeSBleGlzdHNcIik7XG4gICA1NzNcdCAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImJvb2tcIiwgYm9vayk7XG4gICA1NzRcdCAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKFwiL2FkbWluL2Jvb2stZm9ybS5qc3BcIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjhmMjFkMDY3LWUyYWEtNDFiYi05ZmMxLTk5MGRkOThlZGVlODt0b29sdV92cnR4XzAxVHFBa2lYajRCOWYzM0Y0eUVQQktEcyI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YVxuLi4uXG5cbiAgICAgICAgLy8gQ3JlYXRlIGltYWdlcyBkaXJlY3RvcnkgYXQgc3RhcnR1cFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIHdlYiBhcHBsaWNhdGlvbiByb290XG4gICAgICAgICAgICBTdHJpbmcgYXBwbGljYXRpb25QYXRoID0gZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIlwiKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFwcGxpY2F0aW9uIHJlYWwgcGF0aDogXCIgKyBhcHBsaWNhdGlvblBhdGgpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGltYWdlcyBkaXJlY3RvcnkgaW4gYSB3ZWItYWNjZXNzaWJsZSBsb2NhdGlvblxuICAgICAgICAgICAgU3RyaW5nIGltYWdlc1BhdGggPSBhcHBsaWNhdGlvblBhdGggKyBcImltYWdlc1wiO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBwYXRoOiBcIiArIGltYWdlc1BhdGgpO1xuXG4gICAgICAgICAgICAvLyBBbHNvIHByaW50IHRoZSBjb250ZXh0IHBhdGggYW5kIHJlYWwgcGF0aHMgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ29udGV4dCBwYXRoOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWFsIHBhdGggb2YgLzogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWFsIHBhdGggb2YgL2ltYWdlczogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlc1wiKSk7XG4uLi5cblxuICAgIC8vIEhlbHBlciBtZXRob2QgdG8gaGFuZGxlIGZpbGUgdXBsb2FkXG4gICAgcHJpdmF0ZSBTdHJpbmcgc2F2ZUZpbGUoUGFydCBmaWxlUGFydCwgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHBhcnQgaXMgdmFsaWRcbiAgICAgICAgaWYgKGZpbGVQYXJ0ID09IG51bGwpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBmaWxlUGFydCBpcyBudWxsIVwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkZpbGUgcGFydCBpcyBudWxsXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbGVQYXJ0LmdldFNpemUoKSA8PSAwKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogZmlsZVBhcnQgc2l6ZSBpcyAwIVwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkZpbGUgcGFydCBzaXplIGlzIDBcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSA9PSBudWxsIHx8IGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogTm8gZmlsZW5hbWUgc3VibWl0dGVkIVwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIk5vIGZpbGVuYW1lIHN1Ym1pdHRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZWZpbmUgYSBmaXhlZCB1cGxvYWQgZGlyZWN0b3J5IHBhdGggcmVsYXRpdmUgdG8gdGhlIHdlYiBhcHBsaWNhdGlvblxuICAgICAgICAvLyBXZSdsbCB1c2UgYSBkaXJlY3QgcGF0aCB3aXRob3V0IEZpbGUuc2VwYXJhdG9yIHRvIGVuc3VyZSB3ZWIgYWNjZXNzaWJpbGl0eVxuICAgICAgICBTdHJpbmcgdXBsb2FkRGlyID0gXCJpbWFnZXNcIjtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU3RhcnRpbmcgZmlsZSB1cGxvYWQgcHJvY2Vzcy4uLlwiKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBwYXJ0OiBcIiArIGZpbGVQYXJ0LmdldE5hbWUoKSArIFwiLCBTaXplOiBcIiArIGZpbGVQYXJ0LmdldFNpemUoKSk7XG5cbiAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gUGF0aHMuZ2V0KGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkpLmdldEZpbGVOYW1lKCkudG9TdHJpbmcoKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiT3JpZ2luYWwgZmlsZW5hbWU6IFwiICsgZmlsZU5hbWUpO1xuXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGZpbGVuYW1lIHRvIHByZXZlbnQgb3ZlcndyaXRpbmdcbiAgICAgICAgU3RyaW5nIHVuaXF1ZUZpbGVOYW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgKyBcIl9cIiArIGZpbGVOYW1lO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJHZW5lcmF0ZWQgdW5pcXVlIGZpbGVuYW1lOiBcIiArIHVuaXF1ZUZpbGVOYW1lKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgaW1hZ2VzIGRpcmVjdG9yeVxuICAgICAgICAvLyBNYWtlIHN1cmUgd2UncmUgdXNpbmcgYSB3ZWItYWNjZXNzaWJsZSBwYXRoXG4gICAgICAgIFN0cmluZyB1cGxvYWRQYXRoID0gYXBwbGljYXRpb25QYXRoICsgXCJpbWFnZXNcIjtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXBsb2FkIGRpcmVjdG9yeSBwYXRoOiBcIiArIHVwbG9hZFBhdGgpO1xuXG4gICAgICAgIC8vIEFsc28gcHJpbnQgdGhlIGNvbnRleHQgcGF0aCBmb3IgZGVidWdnaW5nXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNvbnRleHQgcGF0aCB3b3VsZCBiZTogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldENvbnRleHRQYXRoKCkpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWFsIHBhdGggb2YgLzogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKSk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvaW1hZ2VzOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzXCIpKTtcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIEZpbGUgdXBsb2FkRGlyRmlsZSA9IG5ldyBGaWxlKHVwbG9hZFBhdGgpO1xuICAgICAgICBpZiAoIXVwbG9hZERpckZpbGUuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IHVwbG9hZERpckZpbGUubWtkaXJzKCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDcmVhdGVkIHVwbG9hZCBkaXJlY3Rvcnk6IFwiICsgY3JlYXRlZCk7XG4gICAgICAgIH1cbi4uLlxuXG4gICAgICAgIC8vIFNhdmUgdGhlIGZpbGUgdXNpbmcgYSBzaW1wbGVyIGFwcHJvYWNoXG4gICAgICAgIHRyeSAoSW5wdXRTdHJlYW0gaW5wdXQgPSBmaWxlUGFydC5nZXRJbnB1dFN0cmVhbSgpO1xuICAgICAgICAgICAgIGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbSBvdXRwdXQgPSBuZXcgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtKGZ1bGxGaWxlUGF0aCkpIHtcblxuICAgICAgICAgICAgLy8gQ29weSB0aGUgZmlsZSBjb250ZW50XG4gICAgICAgICAgICBieXRlW10gYnVmZmVyID0gbmV3IGJ5dGVbODE5Ml07XG4gICAgICAgICAgICBpbnQgYnl0ZXNSZWFkO1xuICAgICAgICAgICAgd2hpbGUgKChieXRlc1JlYWQgPSBpbnB1dC5yZWFkKGJ1ZmZlcikpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0LndyaXRlKGJ1ZmZlciwgMCwgYnl0ZXNSZWFkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHdhcyBjcmVhdGVkXG4gICAgICAgICAgICBGaWxlIHNhdmVkRmlsZSA9IG5ldyBGaWxlKGZ1bGxGaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoc2F2ZWRGaWxlLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBzYXZlZCBzdWNjZXNzZnVsbHk6IFwiICsgc2F2ZWRGaWxlLmdldEFic29sdXRlUGF0aCgpKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHNpemU6IFwiICsgc2F2ZWRGaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXNcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBGaWxlIHdhcyBub3QgY3JlYXRlZCFcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIExpc3QgYWxsIGZpbGVzIGluIHRoZSBkaXJlY3RvcnlcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGVzIGluIHVwbG9hZCBkaXJlY3Rvcnk6XCIpO1xuICAgICAgICAgICAgRmlsZVtdIGZpbGVzID0gdXBsb2FkRGlyRmlsZS5saXN0RmlsZXMoKTtcbiAgICAgICAgICAgIGlmIChmaWxlcyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9yIChGaWxlIGZpbGUgOiBmaWxlcykge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCIgIFwiICsgZmlsZS5nZXROYW1lKCkgKyBcIiAoXCIgKyBmaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXMpXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBObyBmaWxlcyBmb3VuZCBvciBkaXJlY3RvcnkgY2Fubm90IGJlIHJlYWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBzYXZpbmcgZmlsZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiB0aGUgcmVsYXRpdmUgcGF0aCB0byBiZSBzdG9yZWQgaW4gdGhlIGRhdGFiYXNlXG4gICAgICAgIC8vIFVzZSBhIHBhdGggdGhhdCB3aWxsIGJlIGFjY2Vzc2libGUgZnJvbSB0aGUgd2ViIGFwcGxpY2F0aW9uXG4gICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9cIiArIHVuaXF1ZUZpbGVOYW1lO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWxhdGl2ZSBwYXRoIHRvIGJlIHN0b3JlZCBpbiBkYXRhYmFzZTogXCIgKyByZWxhdGl2ZVBhdGgpO1xuXG4gICAgICAgIC8vIEFsc28gcHJpbnQgd2hhdCB0aGUgZnVsbCBVUkwgd291bGQgYmVcbiAgICAgICAgU3RyaW5nIGZ1bGxVcmwgPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIHJlbGF0aXZlUGF0aDtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBVUkwgd291bGQgYmU6IFwiICsgZnVsbFVybCk7XG5cbiAgICAgICAgcmV0dXJuIHJlbGF0aXZlUGF0aDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IHJlcXVlc3QuZ2V0U2Vzc2lvbigpO1xuICAgICAgICBVc2VyIHVzZXIgPSAoVXNlcikgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpO1xuXG4gICAgICAgIGlmICh1c2VyID09IG51bGwgfHwgIXVzZXIuaXNBZG1pbigpKSB7XG4gICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvbG9naW5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVQYXJ0ICE9IG51bGwgJiYgZmlsZVBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHBhcnQgc2l6ZTogXCIgKyBmaWxlUGFydC5nZXRTaXplKCkpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIG5hbWU6IFwiICsgZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBhcHBsaWNhdGlvbidzIHJlYWwgcGF0aFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYXBwbGljYXRpb25QYXRoID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBcHBsaWNhdGlvbiBwYXRoOiBcIiArIGFwcGxpY2F0aW9uUGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSBhbmQgZ2V0IGl0cyBwYXRoXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVBhdGggPSBzYXZlRmlsZShmaWxlUGFydCwgYXBwbGljYXRpb25QYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2Ugc2F2ZWQsIHBhdGggdG8gc3RvcmUgaW4gREI6IFwiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgaW1hZ2UgVVJMXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIFVSTCBzZXQgaW4gYm9vayBvYmplY3Q6IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkwgd291bGQgYmU6IFwiICsgcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWFnZVBhdGgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vIGZpbGUgdXBsb2FkZWQgb3IgZmlsZSBpcyBlbXB0eSwgdXNpbmcgZGVmYXVsdCBpbWFnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIHByb2Nlc3NpbmcgZmlsZSB1cGxvYWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGggb24gZXJyb3JcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVQYXJ0ICE9IG51bGwgJiYgZmlsZVBhcnQuZ2V0U2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHBhcnQgc2l6ZTogXCIgKyBmaWxlUGFydC5nZXRTaXplKCkpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIG5hbWU6IFwiICsgZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBhcHBsaWNhdGlvbidzIHJlYWwgcGF0aFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYXBwbGljYXRpb25QYXRoID0gcmVxdWVzdC5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJBcHBsaWNhdGlvbiBwYXRoOiBcIiArIGFwcGxpY2F0aW9uUGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSBhbmQgZ2V0IGl0cyBwYXRoXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVBhdGggPSBzYXZlRmlsZShmaWxlUGFydCwgYXBwbGljYXRpb25QYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2Ugc2F2ZWQsIHBhdGggdG8gc3RvcmUgaW4gREI6IFwiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChpbWFnZVBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgaW1hZ2UgVVJMXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlIFVSTCBzZXQgaW4gYm9vayBvYmplY3Q6IFwiICsgYm9vay5nZXRJbWFnZVVybCgpKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkwgd291bGQgYmU6IFwiICsgcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWFnZVBhdGgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIGN1cnJlbnQgaW1hZ2UgaWYgbm8gbmV3IGltYWdlIGlzIHVwbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBjdXJyZW50SW1hZ2VVcmwgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcImN1cnJlbnRJbWFnZVVybFwiKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTm8gbmV3IGZpbGUgdXBsb2FkZWQsIGN1cnJlbnQgaW1hZ2UgVVJMOiBcIiArIGN1cnJlbnRJbWFnZVVybCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbWFnZVVybCAhPSBudWxsICYmICFjdXJyZW50SW1hZ2VVcmwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGN1cnJlbnRJbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJLZWVwaW5nIGN1cnJlbnQgaW1hZ2UgVVJMOiBcIiArIGN1cnJlbnRJbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBjdXJyZW50IGltYWdlIFVSTCwgdXNpbmcgZGVmYXVsdCBpbWFnZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIHByb2Nlc3NpbmcgZmlsZSB1cGxvYWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8ga2VlcCBjdXJyZW50IGltYWdlIG9uIGVycm9yXG4gICAgICAgICAgICAgICAgU3RyaW5nIGN1cnJlbnRJbWFnZVVybCA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFwiY3VycmVudEltYWdlVXJsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SW1hZ2VVcmwgIT0gbnVsbCAmJiAhY3VycmVudEltYWdlVXJsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICBib29rLnNldEltYWdlVXJsKGN1cnJlbnRJbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVzaW5nIGN1cnJlbnQgaW1hZ2UgVVJMIGFmdGVyIGVycm9yOiBcIiArIGN1cnJlbnRJbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zZXRJbWFnZVVybChcImltYWdlcy9kZWZhdWx0LWJvb2suanBnXCIpOyAvLyBEZWZhdWx0IGltYWdlIHBhdGggb24gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVXNpbmcgZGVmYXVsdCBpbWFnZSBhZnRlciBlcnJvclwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwXG4uLi5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYm9va0ltYWdlXCI+Qm9vayBJbWFnZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJib29rSW1hZ2VcIiBuYW1lPVwiYm9va0ltYWdlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG9uY2hhbmdlPVwiY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0ZWQ6ICcgKyB0aGlzLmZpbGVzWzBdLm5hbWUpO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJyZW50IGltYWdlOjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltZ1BhdGggPSBib29rLmdldEltYWdlVXJsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWdQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBwYXRoIGluIEpTUDogXCIgKyBpbWdQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkw6IFwiICsgZnVsbEltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gVHJ5IGRpZmZlcmVudCB3YXlzIHRvIHJlZmVyZW5jZSB0aGUgaW1hZ2UgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIEFsc28gdHJ5IHdpdGgganVzdCB0aGUgcmVsYXRpdmUgcGF0aCAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+QWx0ZXJuYXRpdmUgaW1hZ2UgZGlzcGxheTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLzwlPSBpbWdQYXRoICU+XCIgYWx0PVwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlwiIHN0eWxlPVwibWF4LXdpZHRoOiAxMDBweDsgbWF4LWhlaWdodDogMTUwcHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkltYWdlIHBhdGg6IDwlPSBpbWdQYXRoICU+PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5GdWxsIFVSTDogPCU9IGZ1bGxJbWFnZVBhdGggJT48L3A+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGltYWdlIGZpbGUgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyByZWFsUGF0aCA9IGFwcGxpY2F0aW9uLmdldFJlYWxQYXRoKFwiL1wiICsgaW1nUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbGUgaW1hZ2VGaWxlID0gbmV3IEZpbGUocmVhbFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbWFnZSBmaWxlIGV4aXN0czogPCU9IGltYWdlRmlsZS5leGlzdHMoKSAlPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UmVhbCBwYXRoOiA8JT0gcmVhbFBhdGggJT48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImN1cnJlbnRJbWFnZVVybFwiIHZhbHVlPVwiPCU9IGJvb2suZ2V0SW1hZ2VVcmwoKSAlPlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZvcm0taGludFwiPlNlbGVjdCBhbiBpbWFnZSBmaWxlIHRvIHVwbG9hZC4gU3VwcG9ydGVkIGZvcm1hdHM6IEpQRywgUE5HLCBHSUYuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvbW9kZWwvQm9vay5qYXZhXG5wYWNrYWdlIG1vZGVsO1xuXG5pbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7XG5cbnB1YmxpYyBjbGFzcyBCb29rIHtcbiAgICBwcml2YXRlIGludCBpZDtcbiAgICBwcml2YXRlIFN0cmluZyB0aXRsZTtcbiAgICBwcml2YXRlIFN0cmluZyBhdXRob3I7XG4gICAgcHJpdmF0ZSBTdHJpbmcgZGVzY3JpcHRpb247XG4gICAgcHJpdmF0ZSBTdHJpbmcgY2F0ZWdvcnk7XG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2VucmU7XG4gICAgcHJpdmF0ZSBCaWdEZWNpbWFsIHByaWNlO1xuICAgIHByaXZhdGUgU3RyaW5nIGltYWdlVXJsO1xuICAgIHByaXZhdGUgaW50IHN0b2NrO1xuICAgIFxuICAgIHB1YmxpYyBCb29rKCkge1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgQm9vayhpbnQgaWQsIFN0cmluZyB0aXRsZSwgU3RyaW5nIGF1dGhvciwgU3RyaW5nIGRlc2NyaXB0aW9uLCBTdHJpbmcgY2F0ZWdvcnksIFxuICAgICAgICAgICAgICAgIFN0cmluZyBnZW5yZSwgQmlnRGVjaW1hbCBwcmljZSwgU3RyaW5nIGltYWdlVXJsLCBpbnQgc3RvY2spIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuYXV0aG9yID0gYXV0aG9yO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICAgICAgdGhpcy5nZW5yZSA9IGdlbnJlO1xuICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDtcbiAgICAgICAgdGhpcy5zdG9jayA9IHN0b2NrO1xuICAgIH1cbiAgICBcbiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzXG4gICAgcHVibGljIGludCBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRJZChpbnQgaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldFRpdGxlKCkge1xuICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldFRpdGxlKFN0cmluZyB0aXRsZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0QXV0aG9yKCkge1xuICAgICAgICByZXR1cm4gYXV0aG9yO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRBdXRob3IoU3RyaW5nIGF1dGhvcikge1xuICAgICAgICB0aGlzLmF1dGhvciA9IGF1dGhvcjtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIFN0cmluZyBnZXREZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXREZXNjcmlwdGlvbihTdHJpbmcgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgU3RyaW5nIGdldENhdGVnb3J5KCkge1xuICAgICAgICByZXR1cm4gY2F0ZWdvcnk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIHNldENhdGVnb3J5KFN0cmluZyBjYXRlZ29yeSkge1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0R2VucmUoKSB7XG4gICAgICAgIHJldHVybiBnZW5yZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0R2VucmUoU3RyaW5nIGdlbnJlKSB7XG4gICAgICAgIHRoaXMuZ2VucmUgPSBnZW5yZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIEJpZ0RlY2ltYWwgZ2V0UHJpY2UoKSB7XG4gICAgICAgIHJldHVybiBwcmljZTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0UHJpY2UoQmlnRGVjaW1hbCBwcmljZSkge1xuICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0SW1hZ2VVcmwoKSB7XG4gICAgICAgIHJldHVybiBpbWFnZVVybDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgc2V0SW1hZ2VVcmwoU3RyaW5nIGltYWdlVXJsKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGludCBnZXRTdG9jaygpIHtcbiAgICAgICAgcmV0dXJuIHN0b2NrO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgdm9pZCBzZXRTdG9jayhpbnQgc3RvY2spIHtcbiAgICAgICAgdGhpcy5zdG9jayA9IHN0b2NrO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vd2ViYXBwL2Jvb2stZGV0YWlscy5qc3BcbjwlQCBwYWdlIGxhbmd1YWdlPVwiamF2YVwiIGNvbnRlbnRUeXBlPVwidGV4dC9odG1sOyBjaGFyc2V0PVVURi04XCIgcGFnZUVuY29kaW5nPVwiVVRGLThcIiU+XG48JUAgcGFnZSBpbXBvcnQ9XCJtb2RlbC5Cb29rXCIgJT5cbjwhRE9DVFlQRSBodG1sPlxuPGh0bWw+XG48aGVhZD5cbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cbiAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxuICAgIDx0aXRsZT5Cb29rIERldGFpbHMgLSBFLUJvb2sgU3RvcmU8L3RpdGxlPlxuICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiPCU9cmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpJT4vY3NzL3N0eWxlLmNzc1wiPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGpzcDppbmNsdWRlIHBhZ2U9XCJoZWFkZXIuanNwXCIgLz5cblxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgPCVcbiAgICAgICAgQm9vayBib29rID0gKEJvb2spIHJlcXVlc3QuZ2V0QXR0cmlidXRlKFwiYm9va1wiKTtcbiAgICAgICAgaWYgKGJvb2sgIT0gbnVsbCkge1xuICAgICAgICAlPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYm9vay1kZXRhaWxzXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYm9vay1pbWFnZVwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGJvb2suZ2V0SW1hZ2VVcmwoKSAhPSBudWxsID8gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBib29rLmdldEltYWdlVXJsKCkgOiByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9pbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiICU+XCIgYWx0PVwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlwiPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJib29rLWluZm9cIj5cbiAgICAgICAgICAgICAgICA8aDE+PCU9IGJvb2suZ2V0VGl0bGUoKSAlPjwvaDE+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJhdXRob3JcIj5ieSA8JT0gYm9vay5nZXRBdXRob3IoKSAlPjwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNhdGVnb3J5XCI+PHN0cm9uZz5DYXRlZ29yeTo8L3N0cm9uZz4gPCU9IGJvb2suZ2V0Q2F0ZWdvcnkoKSAlPjwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImdlbnJlXCI+PHN0cm9uZz5HZW5yZTo8L3N0cm9uZz4gPCU9IGJvb2suZ2V0R2VucmUoKSAlPjwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInByaWNlXCI+PHN0cm9uZz5QcmljZTo8L3N0cm9uZz4gJDwlPSBib29rLmdldFByaWNlKCkgJT48L3A+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzdG9ja1wiPjxzdHJvbmc+QXZhaWxhYmlsaXR5Ojwvc3Ryb25nPiA8JT0gYm9vay5nZXRTdG9jaygpID4gMCA/IFwiSW4gU3RvY2tcIiA6IFwiT3V0IG9mIFN0b2NrXCIgJT48L3A+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzPkRlc2NyaXB0aW9uPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPHA+PCU9IGJvb2suZ2V0RGVzY3JpcHRpb24oKSAlPjwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDwlIGlmIChib29rLmdldFN0b2NrKCkgPiAwKSB7ICU+XG4gICAgICAgICAgICAgICAgPGZvcm0gYWN0aW9uPVwiPCU9cmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpJT4vY2FydFwiIG1ldGhvZD1cInBvc3RcIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiYWN0aW9uXCIgdmFsdWU9XCJhZGRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiYm9va0lkXCIgdmFsdWU9XCI8JT0gYm9vay5nZXRJZCgpICU+XCI+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJxdWFudGl0eVwiPlF1YW50aXR5OjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIGlkPVwicXVhbnRpdHlcIiBuYW1lPVwicXVhbnRpdHlcIiB2YWx1ZT1cIjFcIiBtaW49XCIxXCIgbWF4PVwiPCU9IGJvb2suZ2V0U3RvY2soKSAlPlwiPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPkFkZCB0byBDYXJ0PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgIDwlIH0gZWxzZSB7ICU+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJvdXQtb2Ytc3RvY2tcIj5UaGlzIGJvb2sgaXMgY3VycmVudGx5IG91dCBvZiBzdG9jay48L3A+XG4gICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8JSB9IGVsc2UgeyAlPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZXJyb3ItbWVzc2FnZVwiPlxuICAgICAgICAgICAgPHA+Qm9vayBub3QgZm91bmQuPC9wPlxuICAgICAgICAgICAgPGEgaHJlZj1cIjwlPXJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSU+L2Jvb2tzXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIj5CYWNrIHRvIEJvb2tzPC9hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPCUgfSAlPlxuICAgIDwvZGl2PlxuXG4gICAgPGpzcDppbmNsdWRlIHBhZ2U9XCJmb290ZXIuanNwXCIgLz5cblxuICAgIDxzY3JpcHQgc3JjPVwiPCU9cmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpJT4vanMvc2NyaXB0LmpzXCI+PC9zY3JpcHQ+XG48L2JvZHk+XG48L2h0bWw+XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGFvL0Jvb2tEQU8uamF2YVxuLi4uXG5cbiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBib29rID0gbmV3IEJvb2soKTtcbiAgICAgICAgICAgICAgICBib29rLnNldElkKHJzLmdldEludChcImlkXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldFRpdGxlKHJzLmdldFN0cmluZyhcInRpdGxlXCIpKTtcbiAgICAgICAgICAgICAgICBib29rLnNldEF1dGhvcihycy5nZXRTdHJpbmcoXCJhdXRob3JcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0RGVzY3JpcHRpb24ocnMuZ2V0U3RyaW5nKFwiZGVzY3JpcHRpb25cIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0Q2F0ZWdvcnkocnMuZ2V0U3RyaW5nKFwiY2F0ZWdvcnlcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0R2VucmUocnMuZ2V0U3RyaW5nKFwiZ2VucmVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0UHJpY2UocnMuZ2V0QmlnRGVjaW1hbChcInByaWNlXCIpKTtcbiAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VVcmwgPSBycy5nZXRTdHJpbmcoXCJpbWFnZV91cmxcIik7XG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBleGFtcGxlLmNvbSBVUkxzIHRvIGxvY2FsIGltYWdlIHBhdGhzXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwgJiYgaW1hZ2VVcmwuY29udGFpbnMoXCJleGFtcGxlLmNvbVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1hZ2VOYW1lID0gaW1hZ2VVcmwuc3Vic3RyaW5nKGltYWdlVXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL1wiICsgaW1hZ2VOYW1lO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFRoZSBHcmVhdCBHYXRzYnlcbiAgICAgICAgICAgICAgICBpZiAoYm9vay5nZXRUaXRsZSgpLmVxdWFscyhcIlRoZSBHcmVhdCBHYXRzYnlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBcImltYWdlcy9nYXRzYnkuanBnXCI7XG4gICAgICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SWQocnMuZ2V0SW50KFwiaWRcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0VGl0bGUocnMuZ2V0U3RyaW5nKFwidGl0bGVcIikpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0QXV0aG9yKHJzLmdldFN0cmluZyhcImF1dGhvclwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXREZXNjcmlwdGlvbihycy5nZXRTdHJpbmcoXCJkZXNjcmlwdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRDYXRlZ29yeShycy5nZXRTdHJpbmcoXCJjYXRlZ29yeVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRHZW5yZShycy5nZXRTdHJpbmcoXCJnZW5yZVwiKSk7XG4gICAgICAgICAgICAgICAgYm9vay5zZXRQcmljZShycy5nZXRCaWdEZWNpbWFsKFwicHJpY2VcIikpO1xuICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZVVybCA9IHJzLmdldFN0cmluZyhcImltYWdlX3VybFwiKTtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4YW1wbGUuY29tIFVSTHMgdG8gbG9jYWwgaW1hZ2UgcGF0aHNcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCAmJiBpbWFnZVVybC5jb250YWlucyhcImV4YW1wbGUuY29tXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWFnZU5hbWUgPSBpbWFnZVVybC5zdWJzdHJpbmcoaW1hZ2VVcmwubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVXJsID0gXCJpbWFnZXMvXCIgKyBpbWFnZU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgVGhlIEdyZWF0IEdhdHNieVxuICAgICAgICAgICAgICAgIGlmIChib29rLmdldFRpdGxlKCkuZXF1YWxzKFwiVGhlIEdyZWF0IEdhdHNieVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybCA9IFwiaW1hZ2VzL2dhdHNieS5qcGdcIjtcbiAgICAgICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9ib29rcy5qc3Bcbi4uLlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJib29rLWdyaWRcIj5cbiAgICAgICAgICAgIDwlXG4gICAgICAgICAgICBMaXN0PEJvb2s+IGJvb2tzID0gKExpc3Q8Qm9vaz4pIHJlcXVlc3QuZ2V0QXR0cmlidXRlKFwiYm9va3NcIik7XG4gICAgICAgICAgICBpZiAoYm9va3MgIT0gbnVsbCAmJiAhYm9va3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChCb29rIGJvb2sgOiBib29rcykge1xuICAgICAgICAgICAgJT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJib29rLWNhcmRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYm9vay1jb3ZlclwiPlxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIjwlPSBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCA/IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgYm9vay5nZXRJbWFnZVVybCgpIDogcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIiAlPlwiIGFsdD1cIjwlPSBib29rLmdldFRpdGxlKCkgJT5cIj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYm9vay1pbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMz48JT0gYm9vay5nZXRUaXRsZSgpICU+PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJhdXRob3JcIj5ieSA8JT0gYm9vay5nZXRBdXRob3IoKSAlPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXRlZ29yeVwiPjwlPSBib29rLmdldENhdGVnb3J5KCkgJT48L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwicHJpY2VcIj4kPCU9IGJvb2suZ2V0UHJpY2UoLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZTlmYzVmMDEtYWQ4Ny00NGJmLThlODUtYmFkYjYxMDNiMDAyO3Rvb2x1X3ZydHhfMDFQYTFKRDRXcUxOcFBGZjl0MmNEVmVHIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL3dlYmFwcC9XRUItSU5GL3dlYi54bWxcbjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxuPHdlYi1hcHAgeG1sbnM9XCJodHRwOi8veG1sbnMuamNwLm9yZy94bWwvbnMvamF2YWVlXCJcbiAgICAgICAgIHhtbG5zOnhzaT1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlXCJcbiAgICAgICAgIHhzaTpzY2hlbWFMb2NhdGlvbj1cImh0dHA6Ly94bWxucy5qY3Aub3JnL3htbC9ucy9qYXZhZWUgaHR0cDovL3htbG5zLmpjcC5vcmcveG1sL25zL2phdmFlZS93ZWItYXBwXzRfMC54c2RcIlxuICAgICAgICAgdmVyc2lvbj1cIjQuMFwiPlxuICAgIFxuICAgIDx3ZWxjb21lLWZpbGUtbGlzdD5cbiAgICAgICAgPHdlbGNvbWUtZmlsZT5yZWRpcmVjdC5qc3A8L3dlbGNvbWUtZmlsZT5cbiAgICA8L3dlbGNvbWUtZmlsZS1saXN0PlxuICAgIFxuPC93ZWItYXBwPlxuLi4uXG5QYXRoOiB3ZWIvV0VCLUlORi93ZWIueG1sXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbjx3ZWItYXBwIHhtbG5zPVwiaHR0cDovL3htbG5zLmpjcC5vcmcveG1sL25zL2phdmFlZVwiXG4gICAgICAgICB4bWxuczp4c2k9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZVwiXG4gICAgICAgICB4c2k6c2NoZW1hTG9jYXRpb249XCJodHRwOi8veG1sbnMuamNwLm9yZy94bWwvbnMvamF2YWVlIGh0dHA6Ly94bWxucy5qY3Aub3JnL3htbC9ucy9qYXZhZWUvd2ViLWFwcF80XzAueHNkXCJcbiAgICAgICAgIHZlcnNpb249XCI0LjBcIj5cbjwvd2ViLWFwcD4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BZG1pbkJvb2tzU2VydmxldC5qYXZhXG4uLi5cblxuQFdlYlNlcnZsZXQodmFsdWU9XCIvYWRtaW4vYm9va3MvKlwiKVxuQE11bHRpcGFydENvbmZpZyhmaWxlU2l6ZVRocmVzaG9sZD0xMDI0KjEwMjQqMiwgLy8gMk1CXG4gICAgICAgICAgICAgICAgIG1heEZpbGVTaXplPTEwMjQqMTAyNCoxMCwgICAgICAvLyAxME1CXG4gICAgICAgICAgICAgICAgIG1heFJlcXVlc3RTaXplPTEwMjQqMTAyNCo1MCkgICAvLyA1ME1CXG5wdWJsaWMgY2xhc3MgQWRtaW5Cb29rc1NlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgcHJpdmF0ZSBCb29rREFPIGJvb2tEQU87XG5cbiAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgICAgICBib29rREFPID0gbmV3IEJvb2tEQU8oKTtcblxuICAgICAgICAvLyBDcmVhdGUgaW1hZ2VzIGRpcmVjdG9yeSBhdCBzdGFydHVwXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHJvb3RcbiAgICAgICAgICAgIFN0cmluZyBhcHBsaWNhdGlvblBhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiXCIpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQXBwbGljYXRpb24gcmVhbCBwYXRoOiBcIiArIGFwcGxpY2F0aW9uUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgaW1hZ2VzIGRpcmVjdG9yeSBpbiBhIHdlYi1hY2Nlc3NpYmxlIGxvY2F0aW9uXG4gICAgICAgICAgICBTdHJpbmcgaW1hZ2VzUGF0aCA9IGFwcGxpY2F0aW9uUGF0aCArIFwiaW1hZ2VzXCI7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IHBhdGg6IFwiICsgaW1hZ2VzUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIEFsc28gcHJpbnQgdGhlIGNvbnRleHQgcGF0aCBhbmQgcmVhbCBwYXRocyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb250ZXh0IHBhdGg6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvXCIpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlYWwgcGF0aCBvZiAvaW1hZ2VzOiBcIiArIGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzXCIpKTtcblxuICAgICAgICAgICAgRmlsZSBpbWFnZXNEaXIgPSBuZXcgRmlsZShpbWFnZXNQYXRoKTtcbiAgICAgICAgICAgIGlmICghaW1hZ2VzRGlyLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gaW1hZ2VzRGlyLm1rZGlycygpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgY3JlYXRlZCBhdCBzdGFydHVwOiBcIiArIGNyZWF0ZWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGFscmVhZHkgZXhpc3RzXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayBkaXJlY3RvcnkgcGVybWlzc2lvbnNcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgZXhpc3RzOiBcIiArIGltYWdlc0Rpci5leGlzdHMoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGlzIGRpcmVjdG9yeTogXCIgKyBpbWFnZXNEaXIuaXNEaXJlY3RvcnkoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGNhbiByZWFkOiBcIiArIGltYWdlc0Rpci5jYW5SZWFkKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBjYW4gd3JpdGU6IFwiICsgaW1hZ2VzRGlyLmNhbldyaXRlKCkpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBhYnNvbHV0ZSBwYXRoOiBcIiArIGltYWdlc0Rpci5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4uLi5cbiAgICAgICAgLy8gRGVmaW5lIGEgZml4ZWQgdXBsb2FkIGRpcmVjdG9yeSBwYXRoIHJlbGF0aXZlIHRvIHRoZSB3ZWIgYXBwbGljYXRpb25cbiAgICAgICAgLy8gV2UnbGwgdXNlIGEgZGlyZWN0IHBhdGggd2l0aG91dCBGaWxlLnNlcGFyYXRvciB0byBlbnN1cmUgd2ViIGFjY2Vzc2liaWxpdHlcbiAgICAgICAgU3RyaW5nIHVwbG9hZERpciA9IFwiaW1hZ2VzXCI7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlN0YXJ0aW5nIGZpbGUgdXBsb2FkIHByb2Nlc3MuLi5cIik7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydDogXCIgKyBmaWxlUGFydC5nZXROYW1lKCkgKyBcIiwgU2l6ZTogXCIgKyBmaWxlUGFydC5nZXRTaXplKCkpO1xuXG4gICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IFBhdGhzLmdldChmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpKS5nZXRGaWxlTmFtZSgpLnRvU3RyaW5nKCk7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk9yaWdpbmFsIGZpbGVuYW1lOiBcIiArIGZpbGVOYW1lKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBmaWxlbmFtZSB0byBwcmV2ZW50IG92ZXJ3cml0aW5nXG4gICAgICAgIFN0cmluZyB1bmlxdWVGaWxlTmFtZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpICsgXCJfXCIgKyBmaWxlTmFtZTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiR2VuZXJhdGVkIHVuaXF1ZSBmaWxlbmFtZTogXCIgKyB1bmlxdWVGaWxlTmFtZSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIGltYWdlcyBkaXJlY3RvcnlcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlJ3JlIHVzaW5nIGEgd2ViLWFjY2Vzc2libGUgcGF0aFxuICAgICAgICBTdHJpbmcgdXBsb2FkUGF0aCA9IGFwcGxpY2F0aW9uUGF0aCArIFwiaW1hZ2VzXCI7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVwbG9hZCBkaXJlY3RvcnkgcGF0aDogXCIgKyB1cGxvYWRQYXRoKTtcblxuICAgICAgICAvLyBBbHNvIHByaW50IHRoZSBjb250ZXh0IHBhdGggZm9yIGRlYnVnZ2luZ1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb250ZXh0IHBhdGggd291bGQgYmU6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpKTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVhbCBwYXRoIG9mIC86IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIikpO1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWFsIHBhdGggb2YgL2ltYWdlczogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlc1wiKSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICBGaWxlIHVwbG9hZERpckZpbGUgPSBuZXcgRmlsZSh1cGxvYWRQYXRoKTtcbiAgICAgICAgaWYgKCF1cGxvYWREaXJGaWxlLmV4aXN0cygpKSB7XG4gICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSB1cGxvYWREaXJGaWxlLm1rZGlycygpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQ3JlYXRlZCB1cGxvYWQgZGlyZWN0b3J5OiBcIiArIGNyZWF0ZWQpO1xuICAgICAgICB9XG4uLi5cblxuICAgICAgICAvLyBSZXR1cm4gdGhlIHJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAvLyBVc2UgYSBwYXRoIHRoYXQgd2lsbCBiZSBhY2Nlc3NpYmxlIGZyb20gdGhlIHdlYiBhcHBsaWNhdGlvblxuICAgICAgICBTdHJpbmcgcmVsYXRpdmVQYXRoID0gXCJpbWFnZXMvXCIgKyB1bmlxdWVGaWxlTmFtZTtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVsYXRpdmUgcGF0aCB0byBiZSBzdG9yZWQgaW4gZGF0YWJhc2U6IFwiICsgcmVsYXRpdmVQYXRoKTtcblxuICAgICAgICAvLyBBbHNvIHByaW50IHdoYXQgdGhlIGZ1bGwgVVJMIHdvdWxkIGJlXG4gICAgICAgIFN0cmluZyBmdWxsVXJsID0gZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyByZWxhdGl2ZVBhdGg7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgVVJMIHdvdWxkIGJlOiBcIiArIGZ1bGxVcmwpO1xuXG4gICAgICAgIHJldHVybiByZWxhdGl2ZVBhdGg7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgICAgICAgVXNlciB1c2VyID0gKFVzZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKTtcblxuICAgICAgICBpZiAodXNlciA9PSBudWxsIHx8ICF1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGltYWdlIFVSTFxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBVUkwgc2V0IGluIGJvb2sgb2JqZWN0OiBcIiArIGJvb2suZ2V0SW1hZ2VVcmwoKSk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgaW1hZ2UgVVJMIHdvdWxkIGJlOiBcIiArIHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1hZ2VQYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJObyBmaWxlIHVwbG9hZGVkIG9yIGZpbGUgaXMgZW1wdHksIHVzaW5nIGRlZmF1bHQgaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgdXBsb2FkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgICAgIGJvb2suc2V0SW1hZ2VVcmwoXCJpbWFnZXMvZGVmYXVsdC1ib29rLmpwZ1wiKTsgLy8gRGVmYXVsdCBpbWFnZSBwYXRoIG9uIGVycm9yXG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9hZG1pbi9ib29rLWZvcm0uanNwXG4uLi5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYm9va0ltYWdlXCI+Qm9vayBJbWFnZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJib29rSW1hZ2VcIiBuYW1lPVwiYm9va0ltYWdlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG9uY2hhbmdlPVwiY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0ZWQ6ICcgKyB0aGlzLmZpbGVzWzBdLm5hbWUpO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJyZW50IGltYWdlOjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltZ1BhdGggPSBib29rLmdldEltYWdlVXJsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWdQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZSBwYXRoIGluIEpTUDogXCIgKyBpbWdQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkw6IFwiICsgZnVsbEltYWdlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gVHJ5IGRpZmZlcmVudCB3YXlzIHRvIHJlZmVyZW5jZSB0aGUgaW1hZ2UgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIEFsc28gdHJ5IHdpdGgganVzdCB0aGUgcmVsYXRpdmUgcGF0aCAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+QWx0ZXJuYXRpdmUgaW1hZ2UgZGlzcGxheTo8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLzwlPSBpbWdQYXRoICU+XCIgYWx0PVwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlwiIHN0eWxlPVwibWF4LXdpZHRoOiAxMDBweDsgbWF4LWhlaWdodDogMTUwcHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkltYWdlIHBhdGg6IDwlPSBpbWdQYXRoICU+PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5GdWxsIFVSTDogPCU9IGZ1bGxJbWFnZVBhdGggJT48L3A+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGltYWdlIGZpbGUgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyByZWFsUGF0aCA9IGFwcGxpY2F0aW9uLmdldFJlYWxQYXRoKFwiL1wiICsgaW1nUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbGUgaW1hZ2VGaWxlID0gbmV3IEZpbGUocmVhbFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbWFnZSBmaWxlIGV4aXN0czogPCU9IGltYWdlRmlsZS5leGlzdHMoKSAlPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UmVhbCBwYXRoOiA8JT0gcmVhbFBhdGggJT48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImN1cnJlbnRJbWFnZVVybFwiIHZhbHVlPVwiPCU9IGJvb2suZ2V0SW1hZ2VVcmwoKSAlPlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZvcm0taGludFwiPlNlbGVjdCBhbiBpbWFnZSBmaWxlIHRvIHVwbG9hZC4gU3VwcG9ydGVkIGZvcm1hdHM6IEpQRywgUE5HLCBHSUYuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4uLi5cblBhdGg6IHNyYy9tYWluL3dlYmFwcC9ib29rLWRldGFpbHMuanNwXG48JUAgcGFnZSBsYW5ndWFnZT1cImphdmFcIiBjb250ZW50VHlwZT1cInRleHQvaHRtbDsgY2hhcnNldD1VVEYtOFwiIHBhZ2VFbmNvZGluZz1cIlVURi04XCIlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuQm9va1wiICU+XG48IURPQ1RZUEUgaHRtbD5cbjxodG1sPlxuPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cbiAgICA8dGl0bGU+Qm9vayBEZXRhaWxzIC0gRS1Cb29rIFN0b3JlPC90aXRsZT5cbiAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIjwlPXJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSU+L2Nzcy9zdHlsZS5jc3NcIj5cbjwvaGVhZD5cbjxib2R5PlxuICAgIDxqc3A6aW5jbHVkZSBwYWdlPVwiaGVhZGVyLmpzcFwiIC8+XG5cbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAgICAgIDwlXG4gICAgICAgIEJvb2sgYm9vayA9IChCb29rKSByZXF1ZXN0LmdldEF0dHJpYnV0ZShcImJvb2tcIik7XG4gICAgICAgIGlmIChib29rICE9IG51bGwpIHtcbiAgICAgICAgJT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJvb2stZGV0YWlsc1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJvb2staW1hZ2VcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIjwlPSBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCA/IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgYm9vay5nZXRJbWFnZVVybCgpIDogcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvaW1hZ2VzL2RlZmF1bHQtYm9vay5qcGdcIiAlPlwiIGFsdD1cIjwlPSBib29rLmdldFRpdGxlKCkgJT5cIj5cbiAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5QYXRoOiBzcmMvbWFpbi93ZWJhcHAvaW5kZXguanNwXG48JUAgcGFnZSBsYW5ndWFnZT1cImphdmFcIiBjb250ZW50VHlwZT1cInRleHQvaHRtbDsgY2hhcnNldD1VVEYtOFwiIHBhZ2VFbmNvZGluZz1cIlVURi04XCIlPlxuPCVAIHBhZ2UgaW1wb3J0PVwiamF2YS51dGlsLkxpc3RcIiAlPlxuPCVAIHBhZ2UgaW1wb3J0PVwibW9kZWwuQm9va1wiICU+XG48IURPQ1RZUEUgaHRtbD5cbjxodG1sPlxuPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cbiAgICA8dGl0bGU+RS1Cb29rIFN0b3JlIC0gSG9tZTwvdGl0bGU+XG4gICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCJjc3Mvc3R5bGUuY3NzXCI+XG4gICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNS4xNS4zL2Nzcy9hbGwubWluLmNzc1wiPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGRpdiBjbGFzcz1cImJhY2tncm91bmQtd3JhcHBlclwiPlxuICAgICAgICA8anNwOmluY2x1ZGUgcGFnZT1cImhlYWRlci5qc3BcIiAvPlxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2ZpbHRlci9BdXRoZW50aWNhdGlvbkZpbHRlci5qYXZhXG5wYWNrYWdlIGZpbHRlcjtcblxuaW1wb3J0IG1vZGVsLlVzZXI7XG5cbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5GaWx0ZXJDaGFpbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyQ29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYkZpbHRlcjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5AV2ViRmlsdGVyKHVybFBhdHRlcm5zID0ge1wiL3VzZXIvKlwiLCBcIi9hZG1pbi8qXCIsIFwiL2NhcnQvKlwiLCBcIi9jaGVja291dC8qXCJ9KVxucHVibGljIGNsYXNzIEF1dGhlbnRpY2F0aW9uRmlsdGVyIGltcGxlbWVudHMgRmlsdGVyIHtcbiAgICBcbiAgICBwdWJsaWMgdm9pZCBpbml0KEZpbHRlckNvbmZpZyBmaWx0ZXJDb25maWcpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgZG9GaWx0ZXIoU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBGaWx0ZXJDaGFpbiBjaGFpbilcbiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCBodHRwUmVxdWVzdCA9IChIdHRwU2VydmxldFJlcXVlc3QpIHJlcXVlc3Q7XG4gICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgaHR0cFJlc3BvbnNlID0gKEh0dHBTZXJ2bGV0UmVzcG9uc2UpIHJlc3BvbnNlO1xuICAgICAgICBcbiAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IGh0dHBSZXF1ZXN0LmdldFNlc3Npb24oZmFsc2UpO1xuICAgICAgICBib29sZWFuIGlzTG9nZ2VkSW4gPSAoc2Vzc2lvbiAhPSBudWxsICYmIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKSAhPSBudWxsKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghaXNMb2dnZWRJbikge1xuICAgICAgICAgICAgaHR0cFJlc3BvbnNlLnNlbmRSZWRpcmVjdChodHRwUmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvbG9naW5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhZG1pbiBpcyB0cnlpbmcgdG8gYWNjZXNzIGFkbWluIHBhZ2VzXG4gICAgICAgICAgICBTdHJpbmcgcmVxdWVzdFVSSSA9IGh0dHBSZXF1ZXN0LmdldFJlcXVlc3RVUkkoKTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0VVJJLmNvbnRhaW5zKFwiL2FkbWluL1wiKSkge1xuICAgICAgICAgICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgICAgICAgICBodHRwUmVzcG9uc2Uuc2VuZFJlZGlyZWN0KGh0dHBSZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi91c2VyL2Rhc2hib2FyZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2hhaW4uZG9GaWx0ZXIocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIGRlc3Ryb3koKSB7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2ZpbHRlci9BZG1pbkFjY2Vzc0ZpbHRlci5qYXZhXG5wYWNrYWdlIGZpbHRlcjtcblxuaW1wb3J0IG1vZGVsLlVzZXI7XG5cbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5GaWx0ZXJDaGFpbjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuRmlsdGVyQ29uZmlnO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuU2VydmxldFJlc3BvbnNlO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYkZpbHRlcjtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5AV2ViRmlsdGVyKHVybFBhdHRlcm5zID0ge1wiL2Jvb2tzLypcIiwgXCIvYm9va3NcIiwgXCIvY2FydC8qXCIsIFwiL2NhcnRcIiwgXCIvY2hlY2tvdXQvKlwiLCBcIi9jaGVja291dFwifSlcbnB1YmxpYyBjbGFzcyBBZG1pbkFjY2Vzc0ZpbHRlciBpbXBsZW1lbnRzIEZpbHRlciB7XG4gICAgXG4gICAgcHVibGljIHZvaWQgaW5pdChGaWx0ZXJDb25maWcgZmlsdGVyQ29uZmlnKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyB2b2lkIGRvRmlsdGVyKFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSwgRmlsdGVyQ2hhaW4gY2hhaW4pXG4gICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24ge1xuICAgICAgICBIdHRwU2VydmxldFJlcXVlc3QgaHR0cFJlcXVlc3QgPSAoSHR0cFNlcnZsZXRSZXF1ZXN0KSByZXF1ZXN0O1xuICAgICAgICBIdHRwU2VydmxldFJlc3BvbnNlIGh0dHBSZXNwb25zZSA9IChIdHRwU2VydmxldFJlc3BvbnNlKSByZXNwb25zZTtcbiAgICAgICAgXG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSBodHRwUmVxdWVzdC5nZXRTZXNzaW9uKGZhbHNlKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZXNzaW9uICE9IG51bGwgJiYgc2Vzc2lvbi5nZXRBdHRyaWJ1dGUoXCJ1c2VyXCIpICE9IG51bGwpIHtcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXMgYWRtaW4sIHJlZGlyZWN0IHRvIGFkbWluIGRhc2hib2FyZFxuICAgICAgICAgICAgaWYgKHVzZXIuaXNBZG1pbigpKSB7XG4gICAgICAgICAgICAgICAgaHR0cFJlc3BvbnNlLnNlbmRSZWRpcmVjdChodHRwUmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vZGFzaGJvYXJkXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29udGludWUgdGhlIGZpbHRlciBjaGFpbiBmb3Igbm9uLWFkbWluIHVzZXJzXG4gICAgICAgIGNoYWluLmRvRmlsdGVyKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIHZvaWQgZGVzdHJveSgpIHtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9Db250YWN0VXNTZXJ2bGV0LmphdmFcbnBhY2thZ2UgY29udHJvbGxlcjtcblxuaW1wb3J0IGpha2FydGEuc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5hbm5vdGF0aW9uLldlYlNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuaW1wb3J0IGpha2FydGEuc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcblxuQFdlYlNlcnZsZXQoe1wiL2NvbnRhY3QtdXNcIiwgXCIvY29udGFjdFwifSlcbnB1YmxpYyBjbGFzcyBDb250YWN0VXNTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xuXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIC8vIEZvcndhcmQgdG8gdGhlIGNvbnRhY3QtdXMuanNwIHBhZ2VcbiAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcihcIi9jb250YWN0LXVzLmpzcFwiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9Mb2dpblNlcnZsZXQuamF2YVxuLi4uXG5cbiAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIHN1Y2Nlc3MgbWVzc2FnZSBpbiB0aGUgc2Vzc2lvblxuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKGZhbHNlKTtcbiAgICAgICAgaWYgKHNlc3Npb24gIT0gbnVsbCAmJiBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIpICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFRyYW5zZmVyIHRoZSBtZXNzYWdlIGZyb20gc2Vzc2lvbiB0byByZXF1ZXN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJzdWNjZXNzTWVzc2FnZVwiLCBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIpKTtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWVzc2FnZSBmcm9tIHRoZSBzZXNzaW9uIHRvIHByZXZlbnQgaXQgZnJvbSBzaG93aW5nIGFnYWluXG4gICAgICAgICAgICBzZXNzaW9uLnJlbW92ZUF0dHJpYnV0ZShcInN1Y2Nlc3NNZXNzYWdlXCIpO1xuICAgICAgICB9XG5cbiAgICBcdHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvbG9naW4uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJ1c2VybmFtZVwiKTtcbiAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJwYXNzd29yZFwiKTtcbiAgICAgICAgU3RyaW5nIHJvbGUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcInJvbGVcIik7XG5cbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTG9naW4gYXR0ZW1wdCAtIFVzZXJuYW1lOiBcIiArIHVzZXJuYW1lICsgXCIsIFJvbGU6IFwiICsgcm9sZSk7XG5cbiAgICAgICAgLy8gU2ltcGxlIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKHVzZXJuYW1lID09IG51bGwgfHwgdXNlcm5hbWUuaXNFbXB0eSgpIHx8IHBhc3N3b3JkID09IG51bGwgfHwgcGFzc3dvcmQuaXNFbXB0eSgpIHx8IHJvbGUgPT0gbnVsbCB8fCByb2xlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoXCJlcnJvck1lc3NhZ2VcIiwgXCJVc2VybmFtZSwgcGFzc3dvcmQsIGFuZCByb2xlIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvbG9naW4uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXV0aGVudGljYXRlIHVzZXJcbiAgICAgICAgaWYgKHVzZXJEQU8udmFsaWRhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkpIHtcbiAgICAgICAgICAgIFVzZXIgdXNlciA9IHVzZXJEQU8uZ2V0VXNlckJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VsZWN0ZWQgcm9sZSBtYXRjaGVzIHRoZSB1c2VyJ3Mgcm9sZVxuICAgICAgICAgICAgaWYgKCFyb2xlLmVxdWFscyh1c2VyLmdldFJvbGUoKSkpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiLCBcIkludmFsaWQgcm9sZSBmb3IgdGhpcyB1c2VyLiBQbGVhc2Ugc2VsZWN0IHRoZSBjb3JyZWN0IHJvbGUuXCIpO1xuICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvbG9naW4uanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgSHR0cFNlc3Npb24gc2Vzc2lvbiA9IHJlcXVlc3QuZ2V0U2Vzc2lvbigpO1xuICAgICAgICAgICAgc2Vzc2lvbi5zZXRBdHRyaWJ1dGUoXCJ1c2VyXCIsIHVzZXIpO1xuXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCBiYXNlZCBvbiByb2xlXG4gICAgICAgICAgICBpZiAodXNlci5pc0FkbWluKCkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvYWRtaW4vZGFzaGJvYXJkXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kUmVkaXJlY3QocmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvdXNlci9kYXNoYm9hcmRcIik7XG4gICAgICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvY29udHJvbGxlci9BYm91dFNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5AV2ViU2VydmxldCh2YWx1ZT1cIi9hYm91dFwiKVxucHVibGljIGNsYXNzIEFib3V0U2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICBcbiAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgLy8gRm9yd2FyZCB0byBhYm91dCBwYWdlXG4gICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoXCIvYWJvdXQuanNwXCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluVXNlcnNTZXJ2bGV0LmphdmFcbi4uLlxuXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgICAgICAgVXNlciBjdXJyZW50VXNlciA9IChVc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyID09IG51bGwgfHwgIWN1cnJlbnRVc2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU3RyaW5nIHBhdGhJbmZvID0gcmVxdWVzdC5nZXRQYXRoSW5mbygpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5PcmRlcnNTZXJ2bGV0LmphdmFcbi4uLlxuXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIEh0dHBTZXNzaW9uIHNlc3Npb24gPSByZXF1ZXN0LmdldFNlc3Npb24oKTtcbiAgICAgICAgVXNlciB1c2VyID0gKFVzZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKTtcblxuICAgICAgICBpZiAodXNlciA9PSBudWxsIHx8ICF1c2VyLmlzQWRtaW4oKSkge1xuICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgU3RyaW5nIHBhdGhJbmZvID0gcmVxdWVzdC5nZXRQYXRoSW5mbygpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQ2FydFNlcnZsZXQuamF2YVxucGFja2FnZSBjb250cm9sbGVyO1xuXG5pbXBvcnQgZGFvLkJvb2tEQU87XG5pbXBvcnQgZGFvLkNhcnREQU87XG5pbXBvcnQgbW9kZWwuQm9vaztcbmltcG9ydCBtb2RlbC5DYXJ0SXRlbTtcbmltcG9ydCBtb2RlbC5Vc2VyO1xuXG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0LmFubm90YXRpb24uV2ViU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldDtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamFrYXJ0YS5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYWthcnRhLnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5AV2ViU2VydmxldCh2YWx1ZT1cIi9jYXJ0LypcIilcbnB1YmxpYyBjbGFzcyBDYXJ0U2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICBwcml2YXRlIENhcnREQU8gY2FydERBTztcbiAgICBwcml2YXRlIEJvb2tEQU8gYm9va0RBTztcbiAgICBcbiAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgICAgICBjYXJ0REFPID0gbmV3IENhcnREQU8oKTtcbiAgICAgICAgYm9va0RBTyA9IG5ldyBCb29rREFPKCk7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvTG9nb3V0U2VydmxldC5qYXZhXG4uLi5cblxuICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKGZhbHNlKTtcbiAgICAgICAgU3RyaW5nIGxvZ291dE1lc3NhZ2UgPSBcIllvdSBoYXZlIGJlZW4gbG9nZ2VkIG91dCBzdWNjZXNzZnVsbHkuXCI7XG5cbiAgICAgICAgaWYgKHNlc3Npb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSB1c2VyIGJlZm9yZSBpbnZhbGlkYXRpbmcgdGhlIHNlc3Npb25cbiAgICAgICAgICAgIG1vZGVsLlVzZXIgdXNlciA9IChtb2RlbC5Vc2VyKSBzZXNzaW9uLmdldEF0dHJpYnV0ZShcInVzZXJcIik7XG5cbiAgICAgICAgICAgIGlmICh1c2VyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBTZXQgYXBwcm9wcmlhdGUgbWVzc2FnZSBiYXNlZCBvbiB1c2VyIHJvbGVcbiAgICAgICAgICAgICAgICBpZiAodXNlci5pc0FkbWluKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nb3V0TWVzc2FnZSA9IFwiQWRtaW4gbG9nZ2VkIG91dCBzdWNjZXNzZnVsbHkuIFRoYW5rIHlvdSBmb3IgbWFuYWdpbmcgdGhlIHN5Li4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiODUxMmYyOTAtNzY5OC00NWMwLTg2ZGYtMmU2ZThhNmY5ZWQ2O3Rvb2x1X3ZydHhfMDE2R0doaWd3ZW81NzJvSHZIUWF2WlVhIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUgYXJlIHRoZSByZXN1bHRzIGZyb20gZXhlY3V0aW5nIHRoZSBjb21tYW5kLlxuICAgICAgICA8cmV0dXJuLWNvZGU+XG4gICAgICAgIDBcbiAgICAgICAgPC9yZXR1cm4tY29kZT5cbiAgICAgICAgPHN0ZG91dD5cbiAgICAgICAgL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAvb3V0L2FydGlmYWN0cy9lYm9va19hcHBfV2ViX2V4cGxvZGVkL2ltYWdlc1xuL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAvc3JjL21haW4vd2ViYXBwL2ltYWdlc1xuL1VzZXJzL3NhbmRoeWFzaHJlc3RoYS9lY2xpcHNlLXdvcmtzcGFjZS9FYm9vay1hcHAvdGFyZ2V0L2Vib29rLWFwcC0xLjAtU05BUFNIT1QvaW1hZ2VzXG5cbiAgICAgICAgPC9zdGRvdXQ+XG4gICAgICAgIDxzdGRlcnI+XG4gICAgICAgIFxuICAgICAgICA8L3N0ZGVycj4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI2MDI1NzVlZC00M2I3LTQ4NDEtYTA3NS02ODRmMzVlYTQxNzQ7dG9vbHVfdnJ0eF8wMVF2MVZlb3h4OE16VFFOU1hZRFhCVm8iOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YTpcbiAgICA4NVx0XG4gICAgODZcdCAgICAvLyBIZWxwZXIgbWV0aG9kIHRvIGhhbmRsZSBmaWxlIHVwbG9hZFxuICAgIDg3XHQgICAgcHJpdmF0ZSBTdHJpbmcgc2F2ZUZpbGUoUGFydCBmaWxlUGFydCwgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICA4OFx0ICAgICAgICAvLyBWZXJpZnkgdGhlIGZpbGUgcGFydCBpcyB2YWxpZFxuICAgIDg5XHQgICAgICAgIGlmIChmaWxlUGFydCA9PSBudWxsKSB7XG4gICAgOTBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBmaWxlUGFydCBpcyBudWxsIVwiKTtcbiAgICA5MVx0ICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSBwYXJ0IGlzIG51bGxcIik7XG4gICAgOTJcdCAgICAgICAgfVxuICAgIDkzXHRcbiAgICA5NFx0ICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U2l6ZSgpIDw9IDApIHtcbiAgICA5NVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRVJST1I6IGZpbGVQYXJ0IHNpemUgaXMgMCFcIik7XG4gICAgOTZcdCAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkZpbGUgcGFydCBzaXplIGlzIDBcIik7XG4gICAgOTdcdCAgICAgICAgfVxuICAgIDk4XHRcbiAgICA5OVx0ICAgICAgICBpZiAoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSA9PSBudWxsIHx8IGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkuaXNFbXB0eSgpKSB7XG4gICAxMDBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBObyBmaWxlbmFtZSBzdWJtaXR0ZWQhXCIpO1xuICAgMTAxXHQgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJObyBmaWxlbmFtZSBzdWJtaXR0ZWRcIik7XG4gICAxMDJcdCAgICAgICAgfVxuICAgMTAzXHQgICAgICAgIC8vIERlZmluZSBhIGZpeGVkIHVwbG9hZCBkaXJlY3RvcnkgcGF0aCByZWxhdGl2ZSB0byB0aGUgd2ViIGFwcGxpY2F0aW9uXG4gICAxMDRcdCAgICAgICAgLy8gV2UnbGwgdXNlIGEgZGlyZWN0IHBhdGggd2l0aG91dCBGaWxlLnNlcGFyYXRvciB0byBlbnN1cmUgd2ViIGFjY2Vzc2liaWxpdHlcbiAgIDEwNVx0ICAgICAgICBTdHJpbmcgdXBsb2FkRGlyID0gXCJpbWFnZXNcIjtcbiAgIDEwNlx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTdGFydGluZyBmaWxlIHVwbG9hZCBwcm9jZXNzLi4uXCIpO1xuICAgMTA3XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgcGFydDogXCIgKyBmaWxlUGFydC5nZXROYW1lKCkgKyBcIiwgU2l6ZTogXCIgKyBmaWxlUGFydC5nZXRTaXplKCkpO1xuICAgMTA4XHRcbiAgIDEwOVx0ICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBQYXRocy5nZXQoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSkuZ2V0RmlsZU5hbWUoKS50b1N0cmluZygpO1xuICAgMTEwXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk9yaWdpbmFsIGZpbGVuYW1lOiBcIiArIGZpbGVOYW1lKTtcbiAgIDExMVx0XG4gICAxMTJcdCAgICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgZmlsZW5hbWUgdG8gcHJldmVudCBvdmVyd3JpdGluZ1xuICAgMTEzXHQgICAgICAgIFN0cmluZyB1bmlxdWVGaWxlTmFtZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpICsgXCJfXCIgKyBmaWxlTmFtZTtcbiAgIDExNFx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJHZW5lcmF0ZWQgdW5pcXVlIGZpbGVuYW1lOiBcIiArIHVuaXF1ZUZpbGVOYW1lKTtcbiAgIDExNVx0XG4gICAxMTZcdCAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIGltYWdlcyBkaXJlY3RvcnlcbiAgIDExN1x0ICAgICAgICAvLyBNYWtlIHN1cmUgd2UncmUgdXNpbmcgYSB3ZWItYWNjZXNzaWJsZSBwYXRoXG4gICAxMThcdCAgICAgICAgU3RyaW5nIHVwbG9hZFBhdGggPSBhcHBsaWNhdGlvblBhdGggKyBcImltYWdlc1wiO1xuICAgMTE5XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlVwbG9hZCBkaXJlY3RvcnkgcGF0aDogXCIgKyB1cGxvYWRQYXRoKTtcbiAgIDEyMFx0XG4gICAxMjFcdCAgICAgICAgLy8gQWxzbyBwcmludCB0aGUgY29udGV4dCBwYXRoIGZvciBkZWJ1Z2dpbmdcbiAgIDEyMlx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb250ZXh0IHBhdGggd291bGQgYmU6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpKTtcbiAgIDEyM1x0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWFsIHBhdGggb2YgLzogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKSk7XG4gICAxMjRcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVhbCBwYXRoIG9mIC9pbWFnZXM6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9pbWFnZXNcIikpO1xuICAgMTI1XHRcbiAgIDEyNlx0ICAgICAgICAvLyBDcmVhdGUgdGhlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAxMjdcdCAgICAgICAgRmlsZSB1cGxvYWREaXJGaWxlID0gbmV3IEZpbGUodXBsb2FkUGF0aCk7XG4gICAxMjhcdCAgICAgICAgaWYgKCF1cGxvYWREaXJGaWxlLmV4aXN0cygpKSB7XG4gICAxMjlcdCAgICAgICAgICAgIGJvb2xlYW4gY3JlYXRlZCA9IHVwbG9hZERpckZpbGUubWtkaXJzKCk7XG4gICAxMzBcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNyZWF0ZWQgdXBsb2FkIGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgIDEzMVx0ICAgICAgICB9XG4gICAxMzJcdFxuICAgMTMzXHQgICAgICAgIC8vIENyZWF0ZSB0aGUgZnVsbCBmaWxlIHBhdGhcbiAgIDEzNFx0ICAgICAgICBTdHJpbmcgZnVsbEZpbGVQYXRoID0gdXBsb2FkUGF0aCArIEZpbGUuc2VwYXJhdG9yICsgdW5pcXVlRmlsZU5hbWU7XG4gICAxMzVcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBmaWxlIHBhdGg6IFwiICsgZnVsbEZpbGVQYXRoKTtcbiAgIDEzNlx0XG4gICAxMzdcdCAgICAgICAgLy8gU2F2ZSB0aGUgZmlsZSB1c2luZyBhIHNpbXBsZXIgYXBwcm9hY2hcbiAgIDEzOFx0ICAgICAgICB0cnkgKElucHV0U3RyZWFtIGlucHV0ID0gZmlsZVBhcnQuZ2V0SW5wdXRTdHJlYW0oKTtcbiAgIDEzOVx0ICAgICAgICAgICAgIGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbSBvdXRwdXQgPSBuZXcgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtKGZ1bGxGaWxlUGF0aCkpIHtcbiAgIDE0MFx0XG4gICAxNDFcdCAgICAgICAgICAgIC8vIENvcHkgdGhlIGZpbGUgY29udGVudFxuICAgMTQyXHQgICAgICAgICAgICBieXRlW10gYnVmZmVyID0gbmV3IGJ5dGVbODE5Ml07XG4gICAxNDNcdCAgICAgICAgICAgIGludCBieXRlc1JlYWQ7XG4gICAxNDRcdCAgICAgICAgICAgIHdoaWxlICgoYnl0ZXNSZWFkID0gaW5wdXQucmVhZChidWZmZXIpKSAhPSAtMSkge1xuICAgMTQ1XHQgICAgICAgICAgICAgICAgb3V0cHV0LndyaXRlKGJ1ZmZlciwgMCwgYnl0ZXNSZWFkKTtcbiAgIDE0Nlx0ICAgICAgICAgICAgfVxuICAgMTQ3XHRcbiAgIDE0OFx0ICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHdhcyBjcmVhdGVkXG4gICAxNDlcdCAgICAgICAgICAgIEZpbGUgc2F2ZWRGaWxlID0gbmV3IEZpbGUoZnVsbEZpbGVQYXRoKTtcbiAgIDE1MFx0ICAgICAgICAgICAgaWYgKHNhdmVkRmlsZS5leGlzdHMoKSkge1xuICAgMTUxXHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZSBzYXZlZCBzdWNjZXNzZnVsbHk6IFwiICsgc2F2ZWRGaWxlLmdldEFic29sdXRlUGF0aCgpKTtcbiAgIDE1Mlx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgc2l6ZTogXCIgKyBzYXZlZEZpbGUubGVuZ3RoKCkgKyBcIiBieXRlc1wiKTtcbiAgIDE1M1x0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE1NFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBGaWxlIHdhcyBub3QgY3JlYXRlZCFcIik7XG4gICAxNTVcdCAgICAgICAgICAgIH1cbiAgIDE1Nlx0XG4gICAxNTdcdCAgICAgICAgICAgIC8vIExpc3QgYWxsIGZpbGVzIGluIHRoZSBkaXJlY3RvcnlcbiAgIDE1OFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmlsZXMgaW4gdXBsb2FkIGRpcmVjdG9yeTpcIik7XG4gICAxNTlcdCAgICAgICAgICAgIEZpbGVbXSBmaWxlcyA9IHVwbG9hZERpckZpbGUubGlzdEZpbGVzKCk7XG4gICAxNjBcdCAgICAgICAgICAgIGlmIChmaWxlcyAhPSBudWxsKSB7XG4gICAxNjFcdCAgICAgICAgICAgICAgICBmb3IgKEZpbGUgZmlsZSA6IGZpbGVzKSB7XG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiICBcIiArIGZpbGUuZ2V0TmFtZSgpICsgXCIgKFwiICsgZmlsZS5sZW5ndGgoKSArIFwiIGJ5dGVzKVwiKTtcbiAgIDE2M1x0ICAgICAgICAgICAgICAgIH1cbiAgIDE2NFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE2NVx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIiAgTm8gZmlsZXMgZm91bmQgb3IgZGlyZWN0b3J5IGNhbm5vdCBiZSByZWFkXCIpO1xuICAgMTY2XHQgICAgICAgICAgICB9XG4gICAxNjdcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDE2OFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3Igc2F2aW5nIGZpbGU6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTY5XHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMTcwXHQgICAgICAgICAgICB0aHJvdyBlO1xuICAgMTcxXHQgICAgICAgIH1cbiAgIDE3Mlx0XG4gICAxNzNcdCAgICAgICAgLy8gUmV0dXJuIHRoZSByZWxhdGl2ZSBwYXRoIHRvIGJlIHN0b3JlZCBpbiB0aGUgZGF0YWJhc2VcbiAgIDE3NFx0ICAgICAgICAvLyBVc2UgYSBwYXRoIHRoYXQgd2lsbCBiZSBhY2Nlc3NpYmxlIGZyb20gdGhlIHdlYiBhcHBsaWNhdGlvblxuICAgMTc1XHQgICAgICAgIFN0cmluZyByZWxhdGl2ZVBhdGggPSBcImltYWdlcy9cIiArIHVuaXF1ZUZpbGVOYW1lO1xuICAgMTc2XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIGRhdGFiYXNlOiBcIiArIHJlbGF0aXZlUGF0aCk7XG4gICAxNzdcdFxuICAgMTc4XHQgICAgICAgIC8vIEFsc28gcHJpbnQgd2hhdCB0aGUgZnVsbCBVUkwgd291bGQgYmVcbiAgIDE3OVx0ICAgICAgICBTdHJpbmcgZnVsbFVybCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgcmVsYXRpdmVQYXRoO1xuICAgMTgwXHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZ1bGwgVVJMIHdvdWxkIGJlOiBcIiArIGZ1bGxVcmwpO1xuVG90YWwgbGluZXMgaW4gZmlsZTogNTg1XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJmMGQ2YTYyZS1jODJkLTQxNTYtOGRkNC1lN2M0ODExYWVhMzQ7dG9vbHVfdnJ0eF8wMTI4SHFRWTFrM3Y2QTlyWXVmdlcxNGsiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2NvbnRyb2xsZXIvQWRtaW5Cb29rc1NlcnZsZXQuamF2YTpcbiAgICAzMFx0ICAgICAgICAgICAgICAgICBtYXhSZXF1ZXN0U2l6ZT0xMDI0KjEwMjQqNTApICAgLy8gNTBNQlxuICAgIDMxXHRwdWJsaWMgY2xhc3MgQWRtaW5Cb29rc1NlcnZsZXQgZXh0ZW5kcyBIdHRwU2VydmxldCB7XG4gICAgMzJcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcbiAgICAzM1x0ICAgIHByaXZhdGUgQm9va0RBTyBib29rREFPO1xuICAgIDM0XHRcbiAgICAzNVx0ICAgIHB1YmxpYyB2b2lkIGluaXQoKSB7XG4gICAgMzZcdCAgICAgICAgYm9va0RBTyA9IG5ldyBCb29rREFPKCk7XG4gICAgMzdcdFxuICAgIDM4XHQgICAgICAgIC8vIENyZWF0ZSBpbWFnZXMgZGlyZWN0b3J5IGF0IHN0YXJ0dXBcbiAgICAzOVx0ICAgICAgICB0cnkge1xuICAgIDQwXHQgICAgICAgICAgICAvLyBHZXQgdGhlIHJlYWwgcGF0aCB0byB0aGUgd2ViIGFwcGxpY2F0aW9uIHJvb3RcbiAgICA0MVx0ICAgICAgICAgICAgU3RyaW5nIGFwcGxpY2F0aW9uUGF0aCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCJcIik7XG4gICAgNDJcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFwcGxpY2F0aW9uIHJlYWwgcGF0aDogXCIgKyBhcHBsaWNhdGlvblBhdGgpO1xuICAgIDQzXHRcbiAgICA0NFx0ICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbWFnZXMgZGlyZWN0b3J5IGluIGEgd2ViLWFjY2Vzc2libGUgbG9jYXRpb25cbiAgICA0NVx0ICAgICAgICAgICAgU3RyaW5nIGltYWdlc1BhdGggPSBhcHBsaWNhdGlvblBhdGggKyBcImltYWdlc1wiO1xuICAgIDQ2XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IHBhdGg6IFwiICsgaW1hZ2VzUGF0aCk7XG4gICAgNDdcdFxuICAgIDQ4XHQgICAgICAgICAgICAvLyBBbHNvIHByaW50IHRoZSBjb250ZXh0IHBhdGggYW5kIHJlYWwgcGF0aHMgZm9yIGRlYnVnZ2luZ1xuICAgIDQ5XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJDb250ZXh0IHBhdGg6IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRDb250ZXh0UGF0aCgpKTtcbiAgICA1MFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVhbCBwYXRoIG9mIC86IFwiICsgZ2V0U2VydmxldENvbnRleHQoKS5nZXRSZWFsUGF0aChcIi9cIikpO1xuICAgIDUxXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWFsIHBhdGggb2YgL2ltYWdlczogXCIgKyBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlc1wiKSk7XG4gICAgNTJcdFxuICAgIDUzXHQgICAgICAgICAgICBGaWxlIGltYWdlc0RpciA9IG5ldyBGaWxlKGltYWdlc1BhdGgpO1xuICAgIDU0XHQgICAgICAgICAgICBpZiAoIWltYWdlc0Rpci5leGlzdHMoKSkge1xuICAgIDU1XHQgICAgICAgICAgICAgICAgYm9vbGVhbiBjcmVhdGVkID0gaW1hZ2VzRGlyLm1rZGlycygpO1xuICAgIDU2XHQgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBjcmVhdGVkIGF0IHN0YXJ0dXA6IFwiICsgY3JlYXRlZCk7XG4gICAgNTdcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgNThcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGFscmVhZHkgZXhpc3RzXCIpO1xuICAgIDU5XHQgICAgICAgICAgICB9XG4gICAgNjBcdFxuICAgIDYxXHQgICAgICAgICAgICAvLyBDaGVjayBkaXJlY3RvcnkgcGVybWlzc2lvbnNcbiAgICA2Mlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBleGlzdHM6IFwiICsgaW1hZ2VzRGlyLmV4aXN0cygpKTtcbiAgICA2M1x0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBpcyBkaXJlY3Rvcnk6IFwiICsgaW1hZ2VzRGlyLmlzRGlyZWN0b3J5KCkpO1xuICAgIDY0XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGNhbiByZWFkOiBcIiArIGltYWdlc0Rpci5jYW5SZWFkKCkpO1xuICAgIDY1XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGNhbiB3cml0ZTogXCIgKyBpbWFnZXNEaXIuY2FuV3JpdGUoKSk7XG4gICAgNjZcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgYWJzb2x1dGUgcGF0aDogXCIgKyBpbWFnZXNEaXIuZ2V0QWJzb2x1dGVQYXRoKCkpO1xuICAgIDY3XHRcbiAgICA2OFx0ICAgICAgICAgICAgLy8gVHJ5IHRvIGNyZWF0ZSBhIHRlc3QgZmlsZSB0byB2ZXJpZnkgd3JpdGUgcGVybWlzc2lvbnNcbiAgICA2OVx0ICAgICAgICAgICAgdHJ5IHtcbiAgICA3MFx0ICAgICAgICAgICAgICAgIEZpbGUgdGVzdEZpbGUgPSBuZXcgRmlsZShpbWFnZXNQYXRoICsgRmlsZS5zZXBhcmF0b3IgKyBcInRlc3QudHh0XCIpO1xuICAgIDcxXHQgICAgICAgICAgICAgICAgaWYgKHRlc3RGaWxlLmNyZWF0ZU5ld0ZpbGUoKSkge1xuICAgIDcyXHQgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlRlc3QgZmlsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICA3M1x0ICAgICAgICAgICAgICAgICAgICB0ZXN0RmlsZS5kZWxldGUoKTsgLy8gQ2xlYW4gdXBcbiAgICA3NFx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgNzVcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRmFpbGVkIHRvIGNyZWF0ZSB0ZXN0IGZpbGVcIik7XG4gICAgNzZcdCAgICAgICAgICAgICAgICB9XG4gICAgNzdcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgNzhcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBjcmVhdGluZyB0ZXN0IGZpbGU6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDc5XHQgICAgICAgICAgICB9XG4gICAgODBcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA4MVx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRXJyb3IgY3JlYXRpbmcgaW1hZ2VzIGRpcmVjdG9yeTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgODJcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgODNcdCAgICAgICAgfVxuICAgIDg0XHQgICAgfVxuICAgIDg1XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDU4NVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYzA4MDY2ZDYtOTMxOS00YTk1LTg2MjAtMTA1MzE3YTYzNDc4O3Rvb2x1X3ZydHhfMDFUa3M5TlVxSkt3QnpCa3dmeXhxVG9hIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3A6XG4gICAgIDFcdDwlQCBwYWdlIGxhbmd1YWdlPVwiamF2YVwiIGNvbnRlbnRUeXBlPVwidGV4dC9odG1sOyBjaGFyc2V0PVVURi04XCIgcGFnZUVuY29kaW5nPVwiVVRGLThcIiU+XG4gICAgIDJcdDwlQCBwYWdlIGltcG9ydD1cIm1vZGVsLkJvb2tcIiAlPlxuICAgICAzXHQ8JUAgcGFnZSBpbXBvcnQ9XCJqYXZhLmlvLkZpbGVcIiAlPlxuICAgICA0XHQ8IURPQ1RZUEUgaHRtbD5cbiAgICAgNVx0PGh0bWw+XG4gICAgIDZcdDxoZWFkPlxuICAgICA3XHQgICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgIDhcdCAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxuICAgICA5XHQgICAgPHRpdGxlPkJvb2sgRm9ybSAtIEUtQm9vayBTdG9yZTwvdGl0bGU+XG4gICAgMTBcdCAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIjwlPXJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSU+L2Nzcy9zdHlsZS5jc3NcIj5cbiAgICAxMVx0PC9oZWFkPlxuICAgIDEyXHQ8Ym9keT5cbiAgICAxM1x0ICAgIDxqc3A6aW5jbHVkZSBwYWdlPVwiLi4vaGVhZGVyLmpzcFwiIC8+XG4gICAgMTRcdFxuICAgIDE1XHQgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgIDE2XHQgICAgICAgIDxkaXYgY2xhc3M9XCJkYXNoYm9hcmRcIj5cbiAgICAxN1x0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhc2hib2FyZC1oZWFkZXJcIj5cbiAgICAxOFx0ICAgICAgICAgICAgICAgIDwlXG4gICAgMTlcdCAgICAgICAgICAgICAgICBCb29rIGJvb2sgPSAoQm9vaykgcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJib29rXCIpO1xuICAgIDIwXHQgICAgICAgICAgICAgICAgYm9vbGVhbiB2aWV3T25seSA9IChyZXF1ZXN0LmdldEF0dHJpYnV0ZShcInZpZXdPbmx5XCIpICE9IG51bGwgJiYgKEJvb2xlYW4pcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJ2aWV3T25seVwiKSk7XG4gICAgMjFcdFxuICAgIDIyXHQgICAgICAgICAgICAgICAgaWYgKHZpZXdPbmx5KSB7XG4gICAgMjNcdCAgICAgICAgICAgICAgICAlPlxuICAgIDI0XHQgICAgICAgICAgICAgICAgPGgxPlZpZXcgQm9vazwvaDE+XG4gICAgMjVcdCAgICAgICAgICAgICAgICA8JSB9IGVsc2UgaWYgKGJvb2sgIT0gbnVsbCkgeyAlPlxuICAgIDI2XHQgICAgICAgICAgICAgICAgPGgxPkVkaXQgQm9vazwvaDE+XG4gICAgMjdcdCAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyAlPlxuICAgIDI4XHQgICAgICAgICAgICAgICAgPGgxPkFkZCBOZXcgQm9vazwvaDE+XG4gICAgMjlcdCAgICAgICAgICAgICAgICA8JSB9ICU+XG4gICAgMzBcdCAgICAgICAgICAgIDwvZGl2PlxuICAgIDMxXHRcbiAgICAzMlx0ICAgICAgICAgICAgPCEtLSBEYXNoYm9hcmQgbWVudSBtb3ZlZCB0byBoZWFkZXIgLS0+XG4gICAgMzNcdFxuICAgIDM0XHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLWNvbnRlbnRcIj5cbiAgICAzNVx0ICAgICAgICAgICAgICAgIDwlIGlmIChyZXF1ZXN0LmdldEF0dHJpYnV0ZShcImVycm9yTWVzc2FnZVwiKSAhPSBudWxsKSB7ICU+XG4gICAgMzZcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZXJyb3JcIj5cbiAgICAzN1x0ICAgICAgICAgICAgICAgICAgICA8JT0gcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJlcnJvck1lc3NhZ2VcIikgJT5cbiAgICAzOFx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgIDM5XHQgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgIDQwXHRcbiAgICA0MVx0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRhaW5lclwiPlxuICAgIDQyXHQgICAgICAgICAgICAgICAgICAgIDwlIGlmICh2aWV3T25seSkgeyAlPlxuICAgIDQzXHQgICAgICAgICAgICAgICAgICAgIDwhLS0gVmlldy1vbmx5IG1vZGUgLS0+XG4gICAgNDRcdCAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZpZXctYm9vay1kZXRhaWxzXCI+XG4gICAgNDVcdCAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImJvb2stZGV0YWlscy1saXN0XCI+XG4gICAgNDZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgNDdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPkltYWdlOjwvZGl2PlxuICAgIDQ4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtdmFsdWVcIj5cbiAgICA0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGJvb2suZ2V0SW1hZ2VVcmwoKSAhPSBudWxsICYmICFib29rLmdldEltYWdlVXJsKCkuaXNFbXB0eSgpKSB7ICU+XG4gICAgNTBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgYm9vay5nZXRJbWFnZVVybCgpICU+XCIgYWx0PVwiPCU9IGJvb2suZ2V0VGl0bGUoKSAlPlwiPlxuVG90YWwgbGluZXMgaW4gZmlsZTogMjE2XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI2NzhlMWFjZi1mOWZmLTRkYzktOTI4My1iNmUzM2I0M2I3Yjc7dG9vbHVfdnJ0eF8wMVd4WVkzM0RnZFVnVnd2NUZZTlNtaFAiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi93ZWJhcHAvYWRtaW4vYm9vay1mb3JtLmpzcDpcbiAgIDEwMFx0XG4gICAxMDFcdCAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAxMDJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidGl0bGVcIj5UaXRsZTwvbGFiZWw+XG4gICAxMDNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInRpdGxlXCIgbmFtZT1cInRpdGxlXCIgdmFsdWU9XCI8JT0gYm9vayAhPSBudWxsID8gYm9vay5nZXRUaXRsZSgpIDogXCJcIiAlPlwiIHJlcXVpcmVkPlxuICAgMTA0XHQgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDEwNVx0XG4gICAxMDZcdCAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAxMDdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYXV0aG9yXCI+QXV0aG9yPC9sYWJlbD5cbiAgIDEwOFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwiYXV0aG9yXCIgbmFtZT1cImF1dGhvclwiIHZhbHVlPVwiPCU9IGJvb2sgIT0gbnVsbCA/IGJvb2suZ2V0QXV0aG9yKCkgOiBcIlwiICU+XCIgcmVxdWlyZWQ+XG4gICAxMDlcdCAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTEwXHRcbiAgIDExMVx0ICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgIDExMlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJkZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uPC9sYWJlbD5cbiAgIDExM1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cImRlc2NyaXB0aW9uXCIgbmFtZT1cImRlc2NyaXB0aW9uXCIgcm93cz1cIjVcIiByZXF1aXJlZD48JT0gYm9vayAhPSBudWxsID8gYm9vay5nZXREZXNjcmlwdGlvbigpIDogXCJcIiAlPjwvdGV4dGFyZWE+XG4gICAxMTRcdCAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTE1XHRcbiAgIDExNlx0ICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tcm93XCI+XG4gICAxMTdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgMTE4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjYXRlZ29yeVwiPkNhdGVnb3J5PC9sYWJlbD5cbiAgIDExOVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwiY2F0ZWdvcnlcIiBuYW1lPVwiY2F0ZWdvcnlcIiByZXF1aXJlZD5cbiAgIDEyMFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPlNlbGVjdCBDYXRlZ29yeTwvb3B0aW9uPlxuICAgMTIxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiRmljdGlvblwiIDwlPSBib29rICE9IG51bGwgJiYgXCJGaWN0aW9uXCIuZXF1YWxzKGJvb2suZ2V0Q2F0ZWdvcnkoKSkgPyBcInNlbGVjdGVkXCIgOiBcIlwiICU+PkZpY3Rpb248L29wdGlvbj5cbiAgIDEyMlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIk5vbi1GaWN0aW9uXCIgPCU9IGJvb2sgIT0gbnVsbCAmJiBcIk5vbi1GaWN0aW9uXCIuZXF1YWxzKGJvb2suZ2V0Q2F0ZWdvcnkoKSkgPyBcInNlbGVjdGVkXCIgOiBcIlwiICU+Pk5vbi1GaWN0aW9uPC9vcHRpb24+XG4gICAxMjNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJTY2llbmNlXCIgPCU9IGJvb2sgIT0gbnVsbCAmJiBcIlNjaWVuY2VcIi5lcXVhbHMoYm9vay5nZXRDYXRlZ29yeSgpKSA/IFwic2VsZWN0ZWRcIiA6IFwiXCIgJT4+U2NpZW5jZTwvb3B0aW9uPlxuICAgMTI0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiVGVjaG5vbG9neVwiIDwlPSBib29rICE9IG51bGwgJiYgXCJUZWNobm9sb2d5XCIuZXF1YWxzKGJvb2suZ2V0Q2F0ZWdvcnkoKSkgPyBcInNlbGVjdGVkXCIgOiBcIlwiICU+PlRlY2hub2xvZ3k8L29wdGlvbj5cbiAgIDEyNVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgIDEyNlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTI3XHRcbiAgIDEyOFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAxMjlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImdlbnJlXCI+R2VucmU8L2xhYmVsPlxuICAgMTMwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwiZ2VucmVcIiBuYW1lPVwiZ2VucmVcIiB2YWx1ZT1cIjwlPSBib29rICE9IG51bGwgPyBib29rLmdldEdlbnJlKCkgOiBcIlwiICU+XCIgcmVxdWlyZWQ+XG4gICAxMzFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDEzMlx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxMzNcdFxuICAgMTM0XHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1yb3dcIj5cbiAgIDEzNVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAxMzZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInByaWNlXCI+UHJpY2U8L2xhYmVsPlxuICAgMTM3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgaWQ9XCJwcmljZVwiIG5hbWU9XCJwcmljZVwiIHN0ZXA9XCIwLjAxXCIgbWluPVwiMFwiIHZhbHVlPVwiPCU9IGJvb2sgIT0gbnVsbCA/IGJvb2suZ2V0UHJpY2UoKSA6IFwiXCIgJT5cIiByZXF1aXJlZD5cbiAgIDEzOFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTM5XHRcbiAgIDE0MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAxNDFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInN0b2NrXCI+U3RvY2s8L2xhYmVsPlxuICAgMTQyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgaWQ9XCJzdG9ja1wiIG5hbWU9XCJzdG9ja1wiIG1pbj1cIjBcIiB2YWx1ZT1cIjwlPSBib29rICE9IG51bGwgPyBib29rLmdldFN0b2NrKCkgOiBcIlwiICU+XCIgcmVxdWlyZWQ+XG4gICAxNDNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE0NFx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNDVcdFxuICAgMTQ2XHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgMTQ3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImJvb2tJbWFnZVwiPkJvb2sgSW1hZ2U8L2xhYmVsPlxuICAgMTQ4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJib29rSW1hZ2VcIiBuYW1lPVwiYm9va0ltYWdlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG9uY2hhbmdlPVwiY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0ZWQ6ICcgKyB0aGlzLmZpbGVzWzBdLm5hbWUpO1wiPlxuICAgMTQ5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGJvb2sgIT0gbnVsbCAmJiBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCAmJiAhYm9vay5nZXRJbWFnZVVybCgpLmlzRW1wdHkoKSkgeyAlPlxuICAgMTUwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN1cnJlbnQtaW1hZ2VcIj5cblRvdGFsIGxpbmVzIGluIGZpbGU6IDIxNlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiY2U3ZTgyZjgtMmNmZi00N2MxLWI5NmMtZjUxOTYxNWZhN2NlO3Rvb2x1X3ZydHhfMDE0VnVqVGE1TXE0REZUNGtMRzFvNzd1Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3A6XG4gICAxNTBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC1pbWFnZVwiPlxuICAgMTUxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkN1cnJlbnQgaW1hZ2U6PC9wPlxuICAgMTUyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlXG4gICAxNTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGltZ1BhdGggPSBib29rLmdldEltYWdlVXJsKCk7XG4gICAxNTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGZ1bGxJbWFnZVBhdGggPSByZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltZ1BhdGg7XG4gICAxNTVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2UgcGF0aCBpbiBKU1A6IFwiICsgaW1nUGF0aCk7XG4gICAxNTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRnVsbCBpbWFnZSBVUkw6IFwiICsgZnVsbEltYWdlUGF0aCk7XG4gICAxNTdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJT5cbiAgIDE1OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFRyeSBkaWZmZXJlbnQgd2F5cyB0byByZWZlcmVuY2UgdGhlIGltYWdlIC0tPlxuICAgMTU5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cbiAgIDE2MFx0XG4gICAxNjFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBBbHNvIHRyeSB3aXRoIGp1c3QgdGhlIHJlbGF0aXZlIHBhdGggLS0+XG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+QWx0ZXJuYXRpdmUgaW1hZ2UgZGlzcGxheTo8L3A+XG4gICAxNjNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvPCU9IGltZ1BhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cbiAgIDE2NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbWFnZSBwYXRoOiA8JT0gaW1nUGF0aCAlPjwvcD5cbiAgIDE2NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5GdWxsIFVSTDogPCU9IGZ1bGxJbWFnZVBhdGggJT48L3A+XG4gICAxNjZcdFxuICAgMTY3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlXG4gICAxNjhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGltYWdlIGZpbGUgZXhpc3RzXG4gICAxNjlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHJlYWxQYXRoID0gYXBwbGljYXRpb24uZ2V0UmVhbFBhdGgoXCIvXCIgKyBpbWdQYXRoKTtcbiAgIDE3MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWxlIGltYWdlRmlsZSA9IG5ldyBGaWxlKHJlYWxQYXRoKTtcbiAgIDE3MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlPlxuICAgMTcyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkltYWdlIGZpbGUgZXhpc3RzOiA8JT0gaW1hZ2VGaWxlLmV4aXN0cygpICU+PC9wPlxuICAgMTczXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlJlYWwgcGF0aDogPCU9IHJlYWxQYXRoICU+PC9wPlxuICAgMTc0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImN1cnJlbnRJbWFnZVVybFwiIHZhbHVlPVwiPCU9IGJvb2suZ2V0SW1hZ2VVcmwoKSAlPlwiPlxuICAgMTc1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNzZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU+XG4gICAxNzdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZvcm0taGludFwiPlNlbGVjdCBhbiBpbWFnZSBmaWxlIHRvIHVwbG9hZC4gU3VwcG9ydGVkIGZvcm1hdHM6IEpQRywgUE5HLCBHSUYuPC9wPlxuICAgMTc4XHQgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE3OVx0XG4gICAxODBcdCAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWFjdGlvbnNcIj5cblRvdGFsIGxpbmVzIGluIGZpbGU6IDIxNlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNDM3NDJmMjQtNTIwYi00MzRjLTk2ZDItZjJjMmU5OTNkZmUwO3Rvb2x1X3ZydHhfMDFQODcxTmVQR1RYMVFZZHJGU1JhRzR1Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUgYXJlIHRoZSByZXN1bHRzIGZyb20gZXhlY3V0aW5nIHRoZSBjb21tYW5kLlxuICAgICAgICA8cmV0dXJuLWNvZGU+XG4gICAgICAgIDBcbiAgICAgICAgPC9yZXR1cm4tY29kZT5cbiAgICAgICAgPHN0ZG91dD5cbiAgICAgICAgc3JjL21haW4vd2ViYXBwXG5zcmMvbWFpbi93ZWJhcHAvTUVUQS1JTkZcbnNyYy9tYWluL3dlYmFwcC9XRUItSU5GXG5zcmMvbWFpbi93ZWJhcHAvV0VCLUlORi9saWJcbnNyYy9tYWluL3dlYmFwcC9hZG1pblxuc3JjL21haW4vd2ViYXBwL2Nzc1xuc3JjL21haW4vd2ViYXBwL2ltYWdlc1xuc3JjL21haW4vd2ViYXBwL2pzXG5zcmMvbWFpbi93ZWJhcHAvdXNlclxuXG4gICAgICAgIDwvc3Rkb3V0PlxuICAgICAgICA8c3RkZXJyPlxuICAgICAgICBcbiAgICAgICAgPC9zdGRlcnI+IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZjAxZWRjYWYtM2Q3Ni00ZjczLThjMDYtYmIwODQ4YTYxM2NmO3Rvb2x1X3ZydHhfMDFBSkVLTVZKZVJudW9hdUdZYURveXN5Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUgYXJlIHRoZSByZXN1bHRzIGZyb20gZXhlY3V0aW5nIHRoZSBjb21tYW5kLlxuICAgICAgICA8cmV0dXJuLWNvZGU+XG4gICAgICAgIDBcbiAgICAgICAgPC9yZXR1cm4tY29kZT5cbiAgICAgICAgPHN0ZG91dD5cbiAgICAgICAgdG90YWwgMTQ5NlxuZHJ3eHIteHIteEAgMjIgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgICAgNzA0IE1heSAgOCAxMjozOSAuXG5kcnd4ci14ci14QCAyNCBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgICA3NjggTWF5ICA4IDEyOjM5IC4uXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgMTExMjAgQXByIDE3IDIwOjM1IDE5ODQuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgMzgzMDcgQXByIDE3IDIxOjQ2IGFib3V0LWltYWdlLmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgICA5MDYzIEFwciAxNyAyMTo0NiBjbGVhbmNvZGUuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgMTIwNTIgQXByIDE3IDIxOjQzIGRlZmF1bHQtYm9vay5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICA1MDQ3NyBBcHIgMTcgMjI6MjMgZWJvb2stYmFja2dyb3VuZC5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICA1ODgwNyBBcHIgMTcgMjI6MjYgZWJvb2stcmVhZGVyLmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgIDE0MTg3IEFwciAxNyAyMDozMyBnYXRzYnkuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgMTc0NzQgQXByIDE3IDIyOjE5IGhlcm8tYm9va3MucG5nXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgNzg3MjMgQXByIDE3IDIxOjUxIGhvYmJpdC5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAgNzg2MCBBcHIgMTcgMjE6NTgga251dGguanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAzMDI2OTcgQXByIDE3IDIyOjIwIGxpYnJhcnktYmFja2dyb3VuZC5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAzNTAyMiBBcHIgMTcgMjI6NDkgbG9naW4taW1hZ2UuanBnXG4tcnctci0tci0tICAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgICAgOTggTWF5ICA4IDEyOjM5IG1hcC1wbGFjZWhvbGRlci5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAgNjc1NiBBcHIgMTcgMjA6MzQgbW9ja2luZ2JpcmQuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgNDQzNzQgQXByIDE3IDIyOjQ5IHJlZ2lzdGVyLWltYWdlLmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgICA4NTQ4IEFwciAxNyAyMTo1NiBzYXBpZW5zLmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgICA0OTg1IEFwciAxNyAyMjowMCB0ZWFtLW1lbWJlcjEuanBnXG4tcnctci0tci0tQCAgMSBzYW5kaHlhc2hyZXN0aGEgIHN0YWZmICAgIDQ5ODUgQXByIDE3IDIyOjAwIHRlYW0tbWVtYmVyMi5qcGdcbi1ydy1yLS1yLS1AICAxIHNhbmRoeWFzaHJlc3RoYSAgc3RhZmYgICAgNDk4NSBBcHIgMTcgMjI6MDAgdGVhbS1tZW1iZXIzLmpwZ1xuLXJ3LXItLXItLUAgIDEgc2FuZGh5YXNocmVzdGhhICBzdGFmZiAgIDEwODgxIEFwciAxNyAyMTo1OSB0aW1lLmpwZ1xuXG4gICAgICAgIDwvc3Rkb3V0PlxuICAgICAgICA8c3RkZXJyPlxuICAgICAgICBcbiAgICAgICAgPC9zdGRlcnI+IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOTc0OWVmYTQtOTdlMS00YmExLWJkNTEtMWNiZTBiNTM0ZjIzO3Rvb2x1X3ZydHhfMDFEazFiVVA0RXpuNUN1OThQblQ1VVdYIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA4Mlx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICA4M1x0ICAgICAgICB9XG4gICAgODRcdCAgICB9XG4gICAgODVcdFxuICAgIDg2XHQgICAgLy8gSGVscGVyIG1ldGhvZCB0byBoYW5kbGUgZmlsZSB1cGxvYWRcbiAgICA4N1x0ICAgIHByaXZhdGUgU3RyaW5nIHNhdmVGaWxlKFBhcnQgZmlsZVBhcnQsIFN0cmluZyBhcHBsaWNhdGlvblBhdGgpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgODhcdCAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHBhcnQgaXMgdmFsaWRcbiAgICA4OVx0ICAgICAgICBpZiAoZmlsZVBhcnQgPT0gbnVsbCkge1xuICAgIDkwXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogZmlsZVBhcnQgaXMgbnVsbCFcIik7XG4gICAgOTFcdCAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkZpbGUgcGFydCBpcyBudWxsXCIpO1xuICAgIDkyXHQgICAgICAgIH1cbiAgICA5M1x0XG4gICAgOTRcdCAgICAgICAgaWYgKGZpbGVQYXJ0LmdldFNpemUoKSA8PSAwKSB7XG4gICAgOTVcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVSUk9SOiBmaWxlUGFydCBzaXplIGlzIDAhXCIpO1xuICAgIDk2XHQgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oXCJGaWxlIHBhcnQgc2l6ZSBpcyAwXCIpO1xuICAgIDk3XHQgICAgICAgIH1cbiAgICA5OFx0XG4gICAgOTlcdCAgICAgICAgaWYgKGZpbGVQYXJ0LmdldFN1Ym1pdHRlZEZpbGVOYW1lKCkgPT0gbnVsbCB8fCBmaWxlUGFydC5nZXRTdWJtaXR0ZWRGaWxlTmFtZSgpLmlzRW1wdHkoKSkge1xuICAgMTAwXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogTm8gZmlsZW5hbWUgc3VibWl0dGVkIVwiKTtcbiAgIDEwMVx0ICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiTm8gZmlsZW5hbWUgc3VibWl0dGVkXCIpO1xuICAgMTAyXHQgICAgICAgIH1cbiAgIDEwM1x0XG4gICAxMDRcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU3RhcnRpbmcgZmlsZSB1cGxvYWQgcHJvY2Vzcy4uLlwiKTtcbiAgIDEwNVx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHBhcnQ6IFwiICsgZmlsZVBhcnQuZ2V0TmFtZSgpICsgXCIsIFNpemU6IFwiICsgZmlsZVBhcnQuZ2V0U2l6ZSgpKTtcbiAgIDEwNlx0XG4gICAxMDdcdCAgICAgICAgLy8gR2V0IHRoZSBvcmlnaW5hbCBmaWxlbmFtZSBhbmQgc2FuaXRpemUgaXRcbiAgIDEwOFx0ICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBQYXRocy5nZXQoZmlsZVBhcnQuZ2V0U3VibWl0dGVkRmlsZU5hbWUoKSkuZ2V0RmlsZU5hbWUoKS50b1N0cmluZygpO1xuICAgMTA5XHQgICAgICAgIC8vIFJlbW92ZSBhbnkgc3BlY2lhbCBjaGFyYWN0ZXJzIHRoYXQgbWlnaHQgY2F1c2UgaXNzdWVzXG4gICAxMTBcdCAgICAgICAgZmlsZU5hbWUgPSBmaWxlTmFtZS5yZXBsYWNlQWxsKFwiW15hLXpBLVowLTlcXFxcLlxcXFwtXVwiLCBcIl9cIik7XG4gICAxMTFcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU2FuaXRpemVkIGZpbGVuYW1lOiBcIiArIGZpbGVOYW1lKTtcbiAgIDExMlx0XG4gICAxMTNcdCAgICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgZmlsZW5hbWUgdG8gcHJldmVudCBvdmVyd3JpdGluZ1xuICAgMTE0XHQgICAgICAgIFN0cmluZyB1bmlxdWVGaWxlTmFtZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpICsgXCJfXCIgKyBmaWxlTmFtZTtcbiAgIDExNVx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJHZW5lcmF0ZWQgdW5pcXVlIGZpbGVuYW1lOiBcIiArIHVuaXF1ZUZpbGVOYW1lKTtcbiAgIDExNlx0XG4gICAxMTdcdCAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIGltYWdlcyBkaXJlY3RvcnkgdXNpbmcgZ2V0UmVhbFBhdGhcbiAgIDExOFx0ICAgICAgICBTdHJpbmcgaW1hZ2VzUGF0aCA9IGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoXCIvaW1hZ2VzXCIpO1xuICAgMTE5XHQgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgcmVhbCBwYXRoOiBcIiArIGltYWdlc1BhdGgpO1xuICAgMTIwXHRcbiAgIDEyMVx0ICAgICAgICAvLyBDcmVhdGUgdGhlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAxMjJcdCAgICAgICAgRmlsZSBpbWFnZXNEaXIgPSBuZXcgRmlsZShpbWFnZXNQYXRoKTtcbiAgIDEyM1x0ICAgICAgICBpZiAoIWltYWdlc0Rpci5leGlzdHMoKSkge1xuICAgMTI0XHQgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBpbWFnZXNEaXIubWtkaXJzKCk7XG4gICAxMjVcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkNyZWF0ZWQgaW1hZ2VzIGRpcmVjdG9yeTogXCIgKyBjcmVhdGVkKTtcbiAgIDEyNlx0ICAgICAgICB9XG4gICAxMjdcdFxuICAgMTI4XHQgICAgICAgIC8vIFZlcmlmeSBkaXJlY3RvcnkgZXhpc3RzIGFuZCBpcyB3cml0YWJsZVxuICAgMTI5XHQgICAgICAgIGlmICghaW1hZ2VzRGlyLmV4aXN0cygpIHx8ICFpbWFnZXNEaXIuY2FuV3JpdGUoKSkge1xuICAgMTMwXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogSW1hZ2VzIGRpcmVjdG9yeSBkb2Vzbid0IGV4aXN0IG9yIGlzIG5vdCB3cml0YWJsZSFcIik7XG4gICAxMzFcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkRpcmVjdG9yeSBleGlzdHM6IFwiICsgaW1hZ2VzRGlyLmV4aXN0cygpKTtcbiAgIDEzMlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiRGlyZWN0b3J5IGNhbiB3cml0ZTogXCIgKyBpbWFnZXNEaXIuY2FuV3JpdGUoKSk7XG4gICAxMzNcdCAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihcIkNhbm5vdCB3cml0ZSB0byBpbWFnZXMgZGlyZWN0b3J5XCIpO1xuICAgMTM0XHQgICAgICAgIH1cbiAgIDEzNVx0XG4gICAxMzZcdCAgICAgICAgLy8gQ3JlYXRlIHRoZSBmdWxsIGZpbGUgcGF0aFxuICAgMTM3XHQgICAgICAgIFN0cmluZyBmdWxsRmlsZVBhdGggPSBpbWFnZXNQYXRoICsgRmlsZS5zZXBhcmF0b3IgKyB1bmlxdWVGaWxlTmFtZTtcbiAgIDEzOFx0ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGdWxsIGZpbGUgcGF0aDogXCIgKyBmdWxsRmlsZVBhdGgpO1xuICAgMTM5XHRcbiAgIDE0MFx0ICAgICAgICAvLyBTYXZlIHRoZSBmaWxlXG4gICAxNDFcdCAgICAgICAgdHJ5IChJbnB1dFN0cmVhbSBpbnB1dCA9IGZpbGVQYXJ0LmdldElucHV0U3RyZWFtKCk7XG4gICAxNDJcdCAgICAgICAgICAgICBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW0gb3V0cHV0ID0gbmV3IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbShmdWxsRmlsZVBhdGgpKSB7XG4gICAxNDNcdFxuICAgMTQ0XHQgICAgICAgICAgICAvLyBDb3B5IHRoZSBmaWxlIGNvbnRlbnRcbiAgIDE0NVx0ICAgICAgICAgICAgYnl0ZVtdIGJ1ZmZlciA9IG5ldyBieXRlWzgxOTJdO1xuICAgMTQ2XHQgICAgICAgICAgICBpbnQgYnl0ZXNSZWFkO1xuICAgMTQ3XHQgICAgICAgICAgICB3aGlsZSAoKGJ5dGVzUmVhZCA9IGlucHV0LnJlYWQoYnVmZmVyKSkgIT0gLTEpIHtcbiAgIDE0OFx0ICAgICAgICAgICAgICAgIG91dHB1dC53cml0ZShidWZmZXIsIDAsIGJ5dGVzUmVhZCk7XG4gICAxNDlcdCAgICAgICAgICAgIH1cbiAgIDE1MFx0XG4gICAxNTFcdCAgICAgICAgICAgIC8vIFZlcmlmeSB0aGUgZmlsZSB3YXMgY3JlYXRlZFxuICAgMTUyXHQgICAgICAgICAgICBGaWxlIHNhdmVkRmlsZSA9IG5ldyBGaWxlKGZ1bGxGaWxlUGF0aCk7XG4gICAxNTNcdCAgICAgICAgICAgIGlmIChzYXZlZEZpbGUuZXhpc3RzKCkpIHtcbiAgIDE1NFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkZpbGUgc2F2ZWQgc3VjY2Vzc2Z1bGx5OiBcIiArIHNhdmVkRmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAxNTVcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGaWxlIHNpemU6IFwiICsgc2F2ZWRGaWxlLmxlbmd0aCgpICsgXCIgYnl0ZXNcIik7XG4gICAxNTZcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAxNTdcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFUlJPUjogRmlsZSB3YXMgbm90IGNyZWF0ZWQhXCIpO1xuICAgMTU4XHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiRmlsZSB3YXMgbm90IGNyZWF0ZWRcIik7XG4gICAxNTlcdCAgICAgICAgICAgIH1cbiAgIDE2MFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTYxXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBzYXZpbmcgZmlsZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAxNjJcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxNjNcdCAgICAgICAgICAgIHRocm93IGU7XG4gICAxNjRcdCAgICAgICAgfVxuICAgMTY1XHRcbiAgIDE2Nlx0ICAgICAgICAvLyBSZXR1cm4gdGhlIHJlbGF0aXZlIHBhdGggdG8gYmUgc3RvcmVkIGluIHRoZSBkYXRhYmFzZVxuICAgMTY3XHQgICAgICAgIC8vIFRoaXMgcGF0aCB3aWxsIGJlIHVzZWQgaW4gSFRNTCB0byByZWZlcmVuY2UgdGhlIGltYWdlXG4gICAxNjhcdCAgICAgICAgU3RyaW5nIHJlbGF0aXZlUGF0aCA9IFwiaW1hZ2VzL1wiICsgdW5pcXVlRmlsZU5hbWU7XG4gICAxNjlcdCAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVsYXRpdmUgcGF0aCB0byBiZSBzdG9yZWQgaW4gZGF0YWJhc2U6IFwiICsgcmVsYXRpdmVQYXRoKTtcbiAgIDE3MFx0XG4gICAxNzFcdCAgICAgICAgcmV0dXJuIHJlbGF0aXZlUGF0aDtcbiAgIDE3Mlx0ICAgIH1cbiAgIDE3M1x0XG4gICAxNzRcdCAgICBwcm90ZWN0ZWQgdm9pZCBkb0dldChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgIDE3NVx0ICAgICAgICBIdHRwU2Vzc2lvbiBzZXNzaW9uID0gcmVxdWVzdC5nZXRTZXNzaW9uKCk7XG4gICAxNzZcdCAgICAgICAgVXNlciB1c2VyID0gKFVzZXIpIHNlc3Npb24uZ2V0QXR0cmlidXRlKFwidXNlclwiKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYTk5ZTQ1YjYtOTMwNC00NWRiLWIyNWUtYzc5MjBjMGVmZjk1O3Rvb2x1X3ZydHhfMDFUcE5CTWQybnpqdE1yaG9OTHRvY05rIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9jb250cm9sbGVyL0FkbWluQm9va3NTZXJ2bGV0LmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAzMVx0cHVibGljIGNsYXNzIEFkbWluQm9va3NTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQge1xuICAgIDMyXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG4gICAgMzNcdCAgICBwcml2YXRlIEJvb2tEQU8gYm9va0RBTztcbiAgICAzNFx0XG4gICAgMzVcdCAgICBwdWJsaWMgdm9pZCBpbml0KCkge1xuICAgIDM2XHQgICAgICAgIGJvb2tEQU8gPSBuZXcgQm9va0RBTygpO1xuICAgIDM3XHRcbiAgICAzOFx0ICAgICAgICAvLyBDcmVhdGUgaW1hZ2VzIGRpcmVjdG9yeSBhdCBzdGFydHVwXG4gICAgMzlcdCAgICAgICAgdHJ5IHtcbiAgICA0MFx0ICAgICAgICAgICAgLy8gR2V0IHRoZSByZWFsIHBhdGggdG8gdGhlIGltYWdlcyBkaXJlY3RvcnlcbiAgICA0MVx0ICAgICAgICAgICAgU3RyaW5nIGltYWdlc1BhdGggPSBnZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL2ltYWdlc1wiKTtcbiAgICA0Mlx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSByZWFsIHBhdGg6IFwiICsgaW1hZ2VzUGF0aCk7XG4gICAgNDNcdFxuICAgIDQ0XHQgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgNDVcdCAgICAgICAgICAgIEZpbGUgaW1hZ2VzRGlyID0gbmV3IEZpbGUoaW1hZ2VzUGF0aCk7XG4gICAgNDZcdCAgICAgICAgICAgIGlmICghaW1hZ2VzRGlyLmV4aXN0cygpKSB7XG4gICAgNDdcdCAgICAgICAgICAgICAgICBib29sZWFuIGNyZWF0ZWQgPSBpbWFnZXNEaXIubWtkaXJzKCk7XG4gICAgNDhcdCAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGNyZWF0ZWQgYXQgc3RhcnR1cDogXCIgKyBjcmVhdGVkKTtcbiAgICA0OVx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgICA1MFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgNTFcdCAgICAgICAgICAgIH1cbiAgICA1Mlx0XG4gICAgNTNcdCAgICAgICAgICAgIC8vIENoZWNrIGRpcmVjdG9yeSBwZXJtaXNzaW9uc1xuICAgIDU0XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGV4aXN0czogXCIgKyBpbWFnZXNEaXIuZXhpc3RzKCkpO1xuICAgIDU1XHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbWFnZXMgZGlyZWN0b3J5IGlzIGRpcmVjdG9yeTogXCIgKyBpbWFnZXNEaXIuaXNEaXJlY3RvcnkoKSk7XG4gICAgNTZcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgY2FuIHJlYWQ6IFwiICsgaW1hZ2VzRGlyLmNhblJlYWQoKSk7XG4gICAgNTdcdCAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkltYWdlcyBkaXJlY3RvcnkgY2FuIHdyaXRlOiBcIiArIGltYWdlc0Rpci5jYW5Xcml0ZSgpKTtcbiAgICA1OFx0ICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiSW1hZ2VzIGRpcmVjdG9yeSBhYnNvbHV0ZSBwYXRoOiBcIiArIGltYWdlc0Rpci5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAgNTlcdFxuICAgIDYwXHQgICAgICAgICAgICAvLyBUcnkgdG8gY3JlYXRlIGEgdGVzdCBmaWxlIHRvIHZlcmlmeSB3cml0ZSBwZXJtaXNzaW9uc1xuICAgIDYxXHQgICAgICAgICAgICB0cnkge1xuICAgIDYyXHQgICAgICAgICAgICAgICAgRmlsZSB0ZXN0RmlsZSA9IG5ldyBGaWxlKGltYWdlc1BhdGggKyBGaWxlLnNlcGFyYXRvciArIFwidGVzdC50eHRcIik7XG4gICAgNjNcdCAgICAgICAgICAgICAgICBpZiAodGVzdEZpbGUuY3JlYXRlTmV3RmlsZSgpKSB7XG4gICAgNjRcdCAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiVGVzdCBmaWxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgIDY1XHQgICAgICAgICAgICAgICAgICAgIHRlc3RGaWxlLmRlbGV0ZSgpOyAvLyBDbGVhbiB1cFxuICAgIDY2XHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICA2N1x0ICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJGYWlsZWQgdG8gY3JlYXRlIHRlc3QgZmlsZVwiKTtcbiAgICA2OFx0ICAgICAgICAgICAgICAgIH1cbiAgICA2OVx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA3MFx0ICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkVycm9yIGNyZWF0aW5nIHRlc3QgZmlsZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgNzFcdCAgICAgICAgICAgIH1cbiAgICA3Mlx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDczXHQgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJFcnJvciBjcmVhdGluZyBpbWFnZXMgZGlyZWN0b3J5OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICA3NFx0ICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiAgICA3NVx0ICAgICAgICB9XG4gICAgNzZcdCAgICB9XG4gICAgNzdcdFxuICAgIDc4XHQgICAgLy8gSGVscGVyIG1ldGhvZCB0byBoYW5kbGUgZmlsZSB1cGxvYWRcbiAgICA3OVx0ICAgIHByaXZhdGUgU3RyaW5nIHNhdmVGaWxlKFBhcnQgZmlsZVBhcnQsIFN0cmluZyBhcHBsaWNhdGlvblBhdGgpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgODBcdCAgICAgICAgLy8gVmVyaWZ5IHRoZSBmaWxlIHBhcnQgaXMgdmFsaWRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZmY0NzA3OGEtNDI5ZC00MGNjLTgxMWMtODE0MDM4ZGNmZGU2O3Rvb2x1X3ZydHhfMDFTajJvWUoxenVyaW5aRm1FM1lZTEcxIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3AuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDE0Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJib29rSW1hZ2VcIj5Cb29rIEltYWdlPC9sYWJlbD5cbiAgIDE0OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiYm9va0ltYWdlXCIgbmFtZT1cImJvb2tJbWFnZVwiIGFjY2VwdD1cImltYWdlLypcIiBvbmNoYW5nZT1cImNvbnNvbGUubG9nKCdGaWxlIHNlbGVjdGVkOiAnICsgdGhpcy5maWxlc1swXS5uYW1lKTtcIj5cbiAgIDE0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LWltYWdlXCI+XG4gICAxNTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+Q3VycmVudCBpbWFnZTo8L3A+XG4gICAxNTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCVcbiAgIDE1M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaW1nUGF0aCA9IGJvb2suZ2V0SW1hZ2VVcmwoKTtcbiAgIDE1NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgZnVsbEltYWdlUGF0aCA9IHJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSArIFwiL1wiICsgaW1nUGF0aDtcbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlPlxuICAgMTU2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYm9vay5nZXRUaXRsZSgpICU+XCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMHB4OyBtYXgtaGVpZ2h0OiAxNTBweDtcIj5cbiAgIDE1N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjdXJyZW50SW1hZ2VVcmxcIiB2YWx1ZT1cIjwlPSBib29rLmdldEltYWdlVXJsKCkgJT5cIj5cbiAgIDE1OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTU5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgMTYwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb3JtLWhpbnRcIj5TZWxlY3QgYW4gaW1hZ2UgZmlsZSB0byB1cGxvYWQuIFN1cHBvcnRlZCBmb3JtYXRzOiBKUEcsIFBORywgR0lGLjwvcD5cbiAgIDE2MVx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNjJcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI5YjUxNDRlMi00YWJlLTQzMmItODYwOS00ZmNjMjcyMzkwZDc7dG9vbHVfdnJ0eF8wMUxlcGI2WU5tR1hkYkFTUHR4NFFSOEoiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzczpcbiAgICAgMVx0LyogR2xvYmFsIFN0eWxlcyAqL1xuICAgICAyXHQqIHtcbiAgICAgM1x0ICBtYXJnaW46IDA7XG4gICAgIDRcdCAgcGFkZGluZzogMDtcbiAgICAgNVx0ICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICA2XHR9XG4gICAgIDdcdFxuICAgICA4XHRib2R5IHtcbiAgICAgOVx0ICBmb250LWZhbWlseTogXCJTZWdvZSBVSVwiLCBUYWhvbWEsIEdlbmV2YSwgVmVyZGFuYSwgc2Fucy1zZXJpZjtcbiAgICAxMFx0ICBsaW5lLWhlaWdodDogMS42O1xuICAgIDExXHQgIGNvbG9yOiAjMzMzO1xuICAgIDEyXHQgIGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7XG4gICAgMTNcdCAgcGFkZGluZy10b3A6IDgwcHg7IC8qIEFkZCBwYWRkaW5nIHRvIGFjY291bnQgZm9yIGZpeGVkIGhlYWRlciAqL1xuICAgIDE0XHR9XG4gICAgMTVcdFxuICAgIDE2XHQuYmFja2dyb3VuZC13cmFwcGVyIHtcbiAgICAxN1x0ICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uL2ltYWdlcy9lYm9vay1iYWNrZ3JvdW5kLmpwZycpO1xuICAgIDE4XHQgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgMTlcdCAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xuICAgIDIwXHQgIGJhY2tncm91bmQtYXR0YWNobWVudDogZml4ZWQ7XG4gICAgMjFcdCAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIDIyXHR9XG4gICAgMjNcdFxuICAgIDI0XHQuYmFja2dyb3VuZC13cmFwcGVyOjpiZWZvcmUge1xuICAgIDI1XHQgIGNvbnRlbnQ6ICcnO1xuICAgIDI2XHQgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAyN1x0ICB0b3A6IDA7XG4gICAgMjhcdCAgbGVmdDogMDtcbiAgICAyOVx0ICB3aWR0aDogMTAwJTtcbiAgICAzMFx0ICBoZWlnaHQ6IDEwMCU7XG4gICAgMzFcdCAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjg1KTtcbiAgICAzMlx0ICB6LWluZGV4OiAtMTtcbiAgICAzM1x0fVxuICAgIDM0XHRcbiAgICAzNVx0LmNvbnRhaW5lciB7XG4gICAgMzZcdCAgd2lkdGg6IDEwMCU7XG4gICAgMzdcdCAgbWF4LXdpZHRoOiAxMjAwcHg7XG4gICAgMzhcdCAgbWFyZ2luOiAwIGF1dG87XG4gICAgMzlcdCAgcGFkZGluZzogMjBweDtcbiAgICA0MFx0fVxuICAgIDQxXHRcbiAgICA0Mlx0YSB7XG4gICAgNDNcdCAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIDQ0XHQgIGNvbG9yOiAjMDA3YmZmO1xuICAgIDQ1XHR9XG4gICAgNDZcdFxuICAgIDQ3XHRhOmhvdmVyIHtcbiAgICA0OFx0ICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICA0OVx0fVxuICAgIDUwXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDIwMDdcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjBiZGY5NTg3LTVhZWQtNGYzNS05NzU1LWE4Nzk4ZDFhM2EwMzt0b29sdV92cnR4XzAxR3duTHVRTXVpRjNqNVlDOVVWMXZYTSI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlIGFyZSB0aGUgcmVzdWx0cyBmcm9tIGV4ZWN1dGluZyB0aGUgY29tbWFuZC5cbiAgICAgICAgPHJldHVybi1jb2RlPlxuICAgICAgICAwXG4gICAgICAgIDwvcmV0dXJuLWNvZGU+XG4gICAgICAgIDxzdGRvdXQ+XG4gICAgICAgIDM0NDoubWFpbi1uYXYgLmFkbWluLWxpbmsge1xuMzUyOi5tYWluLW5hdiAuYWRtaW4tbGluazpob3ZlciB7XG4zNTk6Lm1haW4tbmF2IC5hZG1pbi1saW5rLmFjdGl2ZSB7XG5cbiAgICAgICAgPC9zdGRvdXQ+XG4gICAgICAgIDxzdGRlcnI+XG4gICAgICAgIFxuICAgICAgICA8L3N0ZGVycj4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIwODRiMDg2Zi0wMTZiLTQwMmEtYWYwZC00MjAwZjMyZDBjMmU7dG9vbHVfdnJ0eF8wMUFWOU1acVJIb1E0WVJvcWh5VkN5UGciOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSBhcmUgdGhlIHJlc3VsdHMgZnJvbSBleGVjdXRpbmcgdGhlIGNvbW1hbmQuXG4gICAgICAgIDxyZXR1cm4tY29kZT5cbiAgICAgICAgMFxuICAgICAgICA8L3JldHVybi1jb2RlPlxuICAgICAgICA8c3Rkb3V0PlxuICAgICAgICA5MDogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbjk1OiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuMTM4Oi5mb3JtLWdyb3VwIHtcbjE0MjouZm9ybS10ZXh0IHtcbjE0OTouZm9ybS1yb3cge1xuMTU1Oi5mb3JtLXJvdyAuZm9ybS1ncm91cCB7XG4yMDE6ICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG4yMzY6LmZvcm0tYWN0aW9ucyB7XG4yNTE6ICBmcm9tIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTsgfVxuMjUyOiAgdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH1cbjMwODouc2VhcmNoLWJhciBmb3JtIHtcbjUxMDogIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbjYwNzogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbjYzODogIHRyYW5zZm9ybTogbm9uZTtcbjY2ODogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTBweCk7XG42OTg6ICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC41cyBlYXNlO1xuNzAyOiAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcbjc3NzogIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7XG43ODA6LmJvb2staW5mbyBmb3JtIHtcbjgxMjogIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcblxuICAgICAgICA8L3N0ZG91dD5cbiAgICAgICAgPHN0ZGVycj5cbiAgICAgICAgXG4gICAgICAgIDwvc3RkZXJyPiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjQ3MWVhODlkLWQ4ZTUtNGRjMi1iNzIxLThmNGY5OGY3ZWY5Yjt0b29sdV92cnR4XzAxQ1VXUG9zR0FTNGE3WGtIUmV0R0pmcSI6eyJwaGFzZSI6NiwicmVzdWx0Ijp7InRleHQiOiJGYWlsZWQgdG8gZWRpdCB0aGUgZmlsZSBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzcy4gU2VlIGJlbG93IGZvciBkZXRhaWxzLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuTm8gcmVwbGFjZW1lbnQgd2FzIHBlcmZvcm1lZCwgb2xkU3RyIGRpZCBub3QgYXBwZWFyIHZlcmJhdGltIGluIHNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzLlxuVGhlIGNvbnRlbnQgaW4gdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG4gICAxMzRcdCAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgIDEzNVx0fVxuICAgMTM2XHRcbiAgIDEzN1x0LyogRm9ybXMgKi9cbiAgIDEzOFx0LmZvcm0tZ3JvdXAge1xuICAgMTM5XHQgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAxNDBcdH1cbiAgIDE0MVx0XG4gICAxNDJcdC5mb3JtLXRleHQge1xuICAgMTQzXHQgIGRpc3BsYXk6IGJsb2NrO1xuICAgMTQ0XHQgIG1hcmdpbi10b3A6IDVweDtcbiAgIDE0NVx0ICBmb250LXNpemU6IDAuODVlbTtcbiAgIDE0Nlx0ICBjb2xvcjogIzZjNzU3ZDtcbiAgIDE0N1x0fVxuICAgMTQ4XHRcbiAgIDE0OVx0LmZvcm0tcm93IHtcbiAgIDE1MFx0ICBkaXNwbGF5OiBmbGV4O1xuICAgMTUxXHQgIGdhcDogMjBweDtcbiAgIDE1Mlx0ICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgMTUzXHR9XG4gICAxNTRcdFxuICAgMTU1XHQuZm9ybS1yb3cgLmZvcm0tZ3JvdXAge1xuICAgMTU2XHQgIGZsZXg6IDE7XG4gICAxNTdcdCAgbWFyZ2luLWJvdHRvbTogMDtcbiAgIDE1OFx0fVxuICAgMTU5XHRcbiAgIDE2MFx0bGFiZWwge1xuICAgMTYxXHQgIGRpc3BsYXk6IGJsb2NrO1xuXG5EaWZmIGJldHdlZW4gb2xkU3RyIGFuZCB0aGUgc3BlY2lmaWVkIHJlZ2lvbiBpczpcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi0tLSBvbGRTdHJcbisrKyByZWdpb25Db250ZW50XG5AQCAtMSwyMSArMSwyMCBAQFxuLS8qIEZvcm0gU3R5bGVzICovXG4gLmZvcm0tZ3JvdXAge1xuICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiB9XG4gXG4gLmZvcm0tdGV4dCB7XG4tICB3aWR0aDogMTAwJTtcbi0gIHBhZGRpbmc6IDEwcHg7XG4tICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuLSAgYm9yZGVyLXJhZGl1czogNHB4O1xuKyAgZGlzcGxheTogYmxvY2s7XG4rICBtYXJnaW4tdG9wOiA1cHg7XG4rICBmb250LXNpemU6IDAuODVlbTtcbisgIGNvbG9yOiAjNmM3NTdkO1xuIH1cbiBcbiAuZm9ybS1yb3cge1xuICAgZGlzcGxheTogZmxleDtcbi0gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgIGdhcDogMjBweDtcbisgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gfVxuIFxuIC5mb3JtLXJvdyAuZm9ybS1ncm91cCB7XG4gICBmbGV4OiAxO1xuLX1cbisgIG1hcmdpbi1ib3R0b206IDA7XG5cblxuRml4IGZhaWxlZCBzdHJfcmVwbGFjZV9lbnRyaWVzIGFjY29yZGluZ2x5IGFuZCB0cnkgYWdhaW4uXG4iLCJpc0Vycm9yIjp0cnVlLCJyZXF1ZXN0SWQiOiIifX0sIjYzYTBkODE2LTQ4MjEtNGEyZC1hYWIyLTI0NTkyMmZiOThhMzt0b29sdV92cnR4XzAxTlhUMktzVGU0YzVtUWhyRDFoeks2SiI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzOlxuICAgMTMwXHQgIHBhZGRpbmc6IDVweCAxMHB4O1xuICAgMTMxXHQgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAxMzJcdCAgbWFyZ2luOiAycHg7XG4gICAxMzNcdCAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgMTM0XHQgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAxMzVcdH1cbiAgIDEzNlx0XG4gICAxMzdcdC8qIEZvcm1zICovXG4gICAxMzhcdC5mb3JtLWdyb3VwIHtcbiAgIDEzOVx0ICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgMTQwXHR9XG4gICAxNDFcdFxuICAgMTQyXHQuZm9ybS10ZXh0IHtcbiAgIDE0M1x0ICBkaXNwbGF5OiBibG9jaztcbiAgIDE0NFx0ICBtYXJnaW4tdG9wOiA1cHg7XG4gICAxNDVcdCAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAxNDZcdCAgY29sb3I6ICM2Yzc1N2Q7XG4gICAxNDdcdH1cbiAgIDE0OFx0XG4gICAxNDlcdC5mb3JtLXJvdyB7XG4gICAxNTBcdCAgZGlzcGxheTogZmxleDtcbiAgIDE1MVx0ICBnYXA6IDIwcHg7XG4gICAxNTJcdCAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgIDE1M1x0fVxuICAgMTU0XHRcbiAgIDE1NVx0LmZvcm0tcm93IC5mb3JtLWdyb3VwIHtcbiAgIDE1Nlx0ICBmbGV4OiAxO1xuICAgMTU3XHQgIG1hcmdpbi1ib3R0b206IDA7XG4gICAxNThcdH1cbiAgIDE1OVx0XG4gICAxNjBcdGxhYmVsIHtcbiAgIDE2MVx0ICBkaXNwbGF5OiBibG9jaztcbiAgIDE2Mlx0ICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAxNjNcdCAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgIDE2NFx0fVxuICAgMTY1XHRcbiAgIDE2Nlx0aW5wdXRbdHlwZT1cInRleHRcIl0sXG4gICAxNjdcdGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXSxcbiAgIDE2OFx0aW5wdXRbdHlwZT1cImVtYWlsXCJdLFxuICAgMTY5XHRpbnB1dFt0eXBlPVwibnVtYmVyXCJdLFxuICAgMTcwXHRzZWxlY3QsXG4gICAxNzFcdHRleHRhcmVhIHtcbiAgIDE3Mlx0ICB3aWR0aDogMTAwJTtcbiAgIDE3M1x0ICBwYWRkaW5nOiAxMnB4IDE1cHg7XG4gICAxNzRcdCAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgIDE3NVx0ICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAxNzZcdCAgZm9udC1zaXplOiAxZW07XG4gICAxNzdcdCAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcbiAgIDE3OFx0ICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgIDE3OVx0fVxuICAgMTgwXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDIwMDdcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImYxNDExZTAyLWEzZWMtNDBjZS05ODc1LTQ2NjM2MmNhMzFiMjt0b29sdV92cnR4XzAxQVFnVUNjQzlDSE5NU2d0Z1NjbUVpeiI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzOlxuICAgMjMwXHRcbiAgIDIzMVx0dGV4dGFyZWEge1xuICAgMjMyXHQgIHJlc2l6ZTogdmVydGljYWw7XG4gICAyMzNcdCAgbWluLWhlaWdodDogMTAwcHg7XG4gICAyMzRcdH1cbiAgIDIzNVx0XG4gICAyMzZcdC5mb3JtLWFjdGlvbnMge1xuICAgMjM3XHQgIGRpc3BsYXk6IGZsZXg7XG4gICAyMzhcdCAgZ2FwOiAxMHB4O1xuICAgMjM5XHQgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAyNDBcdH1cbiAgIDI0MVx0XG4gICAyNDJcdC8qIEFsZXJ0cyAqL1xuICAgMjQzXHQuYWxlcnQge1xuICAgMjQ0XHQgIHBhZGRpbmc6IDE1cHg7XG4gICAyNDVcdCAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgIDI0Nlx0ICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAyNDdcdCAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgIDI0OFx0fVxuICAgMjQ5XHRcbiAgIDI1MFx0QGtleWZyYW1lcyBmYWRlSW4ge1xuVG90YWwgbGluZXMgaW4gZmlsZTogMjAwN1xuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiM2UxYTQ5OGUtOTI4Yy00MDE0LWFmYmQtMTNlMTJjOTUyODM5O3Rvb2x1X3ZydHhfMDFKZTRwNWVYR0V1OFZYTFBqVU0xRTkzIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vd2ViYXBwL2Nzcy9zdHlsZS5jc3MuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIzMlx0ICByZXNpemU6IHZlcnRpY2FsO1xuICAgMjMzXHQgIG1pbi1oZWlnaHQ6IDEwMHB4O1xuICAgMjM0XHR9XG4gICAyMzVcdFxuICAgMjM2XHQuZm9ybS1hY3Rpb25zIHtcbiAgIDIzN1x0ICBkaXNwbGF5OiBmbGV4O1xuICAgMjM4XHQgIGdhcDogMTBweDtcbiAgIDIzOVx0ICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgMjQwXHR9XG4gICAyNDFcdFxuICAgMjQyXHQvKiBCb29rIGltYWdlIHVwbG9hZCBzdHlsZXMgKi9cbiAgIDI0M1x0LmN1cnJlbnQtaW1hZ2Uge1xuICAgMjQ0XHQgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAyNDVcdCAgcGFkZGluZzogMTBweDtcbiAgIDI0Nlx0ICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgMjQ3XHQgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgIDI0OFx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1xuICAgMjQ5XHQgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgIDI1MFx0fVxuICAgMjUxXHRcbiAgIDI1Mlx0LmN1cnJlbnQtaW1hZ2UgaW1nIHtcbiAgIDI1M1x0ICBkaXNwbGF5OiBibG9jaztcbiAgIDI1NFx0ICBtYXJnaW46IDVweCAwO1xuICAgMjU1XHQgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAyNTZcdCAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgIDI1N1x0fVxuICAgMjU4XHRcbiAgIDI1OVx0LyogQWxlcnRzICovXG4gICAyNjBcdC5hbGVydCB7XG4gICAyNjFcdCAgcGFkZGluZzogMTVweDtcbiAgIDI2Mlx0ICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgMjYzXHQgIGJvcmRlci1yYWRpdXM6IDRweDtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNjg4NjY2NmUtOTVmMy00NTU2LTlhMjUtNjY1MjY3MmNlM2ViO3Rvb2x1X3ZydHhfMDFOQ29Zanl2Rm5MQ1FvRm01VWJNV0p5Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3A6XG4gICAxNDVcdFxuICAgMTQ2XHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgMTQ3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImJvb2tJbWFnZVwiPkJvb2sgSW1hZ2U8L2xhYmVsPlxuICAgMTQ4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJib29rSW1hZ2VcIiBuYW1lPVwiYm9va0ltYWdlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG9uY2hhbmdlPVwiY29uc29sZS5sb2coJ0ZpbGUgc2VsZWN0ZWQ6ICcgKyB0aGlzLmZpbGVzWzBdLm5hbWUpO1wiPlxuICAgMTQ5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGJvb2sgIT0gbnVsbCAmJiBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCAmJiAhYm9vay5nZXRJbWFnZVVybCgpLmlzRW1wdHkoKSkgeyAlPlxuICAgMTUwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN1cnJlbnQtaW1hZ2VcIj5cbiAgIDE1MVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJyZW50IGltYWdlOjwvcD5cbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JVxuICAgMTUzXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWdQYXRoID0gYm9vay5nZXRJbWFnZVVybCgpO1xuICAgMTU0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmdWxsSW1hZ2VQYXRoID0gcmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpICsgXCIvXCIgKyBpbWdQYXRoO1xuICAgMTU1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XG4gICAxNTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCI8JT0gZnVsbEltYWdlUGF0aCAlPlwiIGFsdD1cIjwlPSBib29rLmdldFRpdGxlKCkgJT5cIiBzdHlsZT1cIm1heC13aWR0aDogMTAwcHg7IG1heC1oZWlnaHQ6IDE1MHB4O1wiPlxuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImN1cnJlbnRJbWFnZVVybFwiIHZhbHVlPVwiPCU9IGJvb2suZ2V0SW1hZ2VVcmwoKSAlPlwiPlxuICAgMTU4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNTlcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU+XG4gICAxNjBcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZvcm0taGludFwiPlNlbGVjdCBhbiBpbWFnZSBmaWxlIHRvIHVwbG9hZC4gU3VwcG9ydGVkIGZvcm1hdHM6IEpQRywgUE5HLCBHSUYuPC9wPlxuICAgMTYxXHQgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE2Mlx0XG4gICAxNjNcdCAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWFjdGlvbnNcIj5cbiAgIDE2NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCIgaWQ9XCJzYXZlQnV0dG9uXCI+U2F2ZTwvYnV0dG9uPlxuICAgMTY1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIjwlPXJlcXVlc3QuZ2V0Q29udGV4dFBhdGgoKSU+L2FkbWluL2Jvb2tzXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiPkNhbmNlbDwvYT5cblRvdGFsIGxpbmVzIGluIGZpbGU6IDE5OVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMTFhZDZmNzEtOGJiYS00YmNiLWFmOTgtYmEzY2M5ZWI2YmUwO3Rvb2x1X3ZydHhfMDEyRUNwc1BqRVJkQ1lXOW82UHF3M2ZuIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3A6XG4gICAxOTBcdCAgICAgICAgICAgICAgICAgICAgPCUgfSAlPlxuICAgMTkxXHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxOTJcdCAgICAgICAgICAgIDwvZGl2PlxuICAgMTkzXHQgICAgICAgIDwvZGl2PlxuICAgMTk0XHQgICAgPC9kaXY+XG4gICAxOTVcdFxuICAgMTk2XHQgICAgPGpzcDppbmNsdWRlIHBhZ2U9XCIuLi9mb290ZXIuanNwXCIgLz5cbiAgIDE5N1x0PC9ib2R5PlxuICAgMTk4XHQ8L2h0bWw+XG4gICAxOTlcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTk5XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJjZTBjNjBjNS0yMGJkLTRiZGYtYjUxMy0wMjU0YjViZWMzYTM7dG9vbHVfdnJ0eF8wMUFTcFYyMW1zbmh2RnNib1d3WjZMWHIiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi93ZWJhcHAvYWRtaW4vYm9vay1mb3JtLmpzcC5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMTQyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgaWQ9XCJzdG9ja1wiIG5hbWU9XCJzdG9ja1wiIG1pbj1cIjBcIiB2YWx1ZT1cIjwlPSBib29rICE9IG51bGwgPyBib29rLmdldFN0b2NrKCkgOiBcIlwiICU+XCIgcmVxdWlyZWQ+XG4gICAxNDNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE0NFx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNDVcdFxuICAgMTQ2XHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgMTQ3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImJvb2tJbWFnZVwiPkJvb2sgSW1hZ2U8L2xhYmVsPlxuICAgMTQ4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN1c3RvbS1maWxlLXVwbG9hZFwiPlxuICAgMTQ5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiYm9va0ltYWdlXCIgbmFtZT1cImJvb2tJbWFnZVwiIGFjY2VwdD1cImltYWdlLypcIiBvbmNoYW5nZT1cInByZXZpZXdJbWFnZSh0aGlzKTtcIiBjbGFzcz1cImZpbGUtaW5wdXRcIj5cbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYm9va0ltYWdlXCIgY2xhc3M9XCJmaWxlLWxhYmVsXCI+Q2hvb3NlIGEgZmlsZTwvbGFiZWw+XG4gICAxNTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJmaWxlLW5hbWVcIj5ObyBmaWxlIGNob3Nlbjwvc3Bhbj5cbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTUzXHRcbiAgIDE1NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJpbWFnZS1wcmV2aWV3LWNvbnRhaW5lclwiIGNsYXNzPVwiPCU9IChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpID8gXCJcIiA6IFwiaGlkZGVuXCIgJT5cIj5cbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3VycmVudC1pbWFnZVwiPlxuICAgMTU2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD1cInByZXZpZXctbGFiZWxcIj48JT0gKGJvb2sgIT0gbnVsbCAmJiBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCAmJiAhYm9vay5nZXRJbWFnZVVybCgpLmlzRW1wdHkoKSkgPyBcIkN1cnJlbnQgaW1hZ2U6XCIgOiBcIlByZXZpZXc6XCIgJT48L3A+XG4gICAxNTdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlXG4gICAxNThcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBpbWdQYXRoID0gKGJvb2sgIT0gbnVsbCAmJiBib29rLmdldEltYWdlVXJsKCkgIT0gbnVsbCkgPyBib29rLmdldEltYWdlVXJsKCkgOiBcIlwiO1xuICAgMTU5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgZnVsbEltYWdlUGF0aCA9IGltZ1BhdGguaXNFbXB0eSgpID8gXCJcIiA6IChyZXF1ZXN0LmdldENvbnRleHRQYXRoKCkgKyBcIi9cIiArIGltZ1BhdGgpO1xuICAgMTYwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYWx0VGV4dCA9IChib29rICE9IG51bGwpID8gYm9vay5nZXRUaXRsZSgpIDogXCJQcmV2aWV3XCI7XG4gICAxNjFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICU+XG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgaWQ9XCJpbWFnZS1wcmV2aWV3XCIgc3JjPVwiPCU9IGZ1bGxJbWFnZVBhdGggJT5cIiBhbHQ9XCI8JT0gYWx0VGV4dCAlPlwiIHN0eWxlPVwibWF4LXdpZHRoOiAxNTBweDsgbWF4LWhlaWdodDogMjAwcHg7XCI+XG4gICAxNjNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChib29rICE9IG51bGwgJiYgYm9vay5nZXRJbWFnZVVybCgpICE9IG51bGwgJiYgIWJvb2suZ2V0SW1hZ2VVcmwoKS5pc0VtcHR5KCkpIHsgJT5cbiAgIDE2NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiY3VycmVudEltYWdlVXJsXCIgdmFsdWU9XCI8JT0gYm9vay5nZXRJbWFnZVVybCgpICU+XCI+XG4gICAxNjVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT5cbiAgIDE2Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDE2N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTY4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb3JtLWhpbnRcIj5TZWxlY3QgYW4gaW1hZ2UgZmlsZSB0byB1cGxvYWQuIFN1cHBvcnRlZCBmb3JtYXRzOiBKUEcsIFBORywgR0lGLjwvcD5cbiAgIDE2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNzBcdFxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICA8c2NyaXB0PlxuICAgMTcyXHQgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcmV2aWV3SW1hZ2UoaW5wdXQpIHtcbiAgIDE3M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTmFtZVNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1uYW1lJyk7XG4gICAxNzRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3LWNvbnRhaW5lcicpO1xuICAgMTc1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3Jyk7XG4gICAxNzZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0xhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctbGFiZWwnKTtcbiAgIDE3N1x0XG4gICAxNzhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgIDE3OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBpbnB1dC5maWxlc1swXS5uYW1lO1xuICAgMTgwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lU3Bhbi50ZXh0Q29udGVudCA9IGZpbGVOYW1lO1xuICAgMTgxXHRcbiAgIDE4Mlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgIDE4M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkge1xuICAgMTg0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3JjID0gZS50YXJnZXQucmVzdWx0O1xuICAgMTg1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3TGFiZWwudGV4dENvbnRlbnQgPSAnUHJldmlldzonO1xuICAgMTg2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgMTg3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAxODhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xuICAgMTg5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE5MFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZVNwYW4udGV4dENvbnRlbnQgPSAnTm8gZmlsZSBjaG9zZW4nO1xuICAgMTkxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgMTkyXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAxOTNcdCAgICAgICAgICAgICAgICAgICAgICAgIDwvc2NyaXB0PlxuICAgMTk0XHRcbiAgIDE5NVx0ICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tYWN0aW9uc1wiPlxuICAgMTk2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiBpZD1cInNhdmVCdXR0b25cIj5TYXZlPC9idXR0b24+XG4gICAxOTdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiPCU9cmVxdWVzdC5nZXRDb250ZXh0UGF0aCgpJT4vYWRtaW4vYm9va3NcIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCI+Q2FuY2VsPC9hPlxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJjMWI2YmMwZi1hMzFiLTQzOTctOTBmNC00ZDZlMzdlYWJlZmU7dG9vbHVfdnJ0eF8wMTE3aFJhaFpIQ1VoQkY5UWVxS0xxZ3QiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzcy5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjM4XHQgIGdhcDogMTBweDtcbiAgIDIzOVx0ICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgMjQwXHR9XG4gICAyNDFcdFxuICAgMjQyXHQvKiBCb29rIGltYWdlIHVwbG9hZCBzdHlsZXMgKi9cbiAgIDI0M1x0LmN1cnJlbnQtaW1hZ2Uge1xuICAgMjQ0XHQgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAyNDVcdCAgcGFkZGluZzogMTBweDtcbiAgIDI0Nlx0ICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgMjQ3XHQgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgIDI0OFx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1xuICAgMjQ5XHQgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgIDI1MFx0fVxuICAgMjUxXHRcbiAgIDI1Mlx0LmN1cnJlbnQtaW1hZ2UgaW1nIHtcbiAgIDI1M1x0ICBkaXNwbGF5OiBibG9jaztcbiAgIDI1NFx0ICBtYXJnaW46IDVweCAwO1xuICAgMjU1XHQgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAyNTZcdCAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgIDI1N1x0fVxuICAgMjU4XHRcbiAgIDI1OVx0LyogQ3VzdG9tIGZpbGUgdXBsb2FkIGJ1dHRvbiAqL1xuICAgMjYwXHQuY3VzdG9tLWZpbGUtdXBsb2FkIHtcbiAgIDI2MVx0ICBkaXNwbGF5OiBmbGV4O1xuICAgMjYyXHQgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAyNjNcdCAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgIDI2NFx0fVxuICAgMjY1XHRcbiAgIDI2Nlx0LmZpbGUtaW5wdXQge1xuICAgMjY3XHQgIHdpZHRoOiAwLjFweDtcbiAgIDI2OFx0ICBoZWlnaHQ6IDAuMXB4O1xuICAgMjY5XHQgIG9wYWNpdHk6IDA7XG4gICAyNzBcdCAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgIDI3MVx0ICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAyNzJcdCAgei1pbmRleDogLTE7XG4gICAyNzNcdH1cbiAgIDI3NFx0XG4gICAyNzVcdC5maWxlLWxhYmVsIHtcbiAgIDI3Nlx0ICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAyNzdcdCAgcGFkZGluZzogMTBweCAxNXB4O1xuICAgMjc4XHQgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XG4gICAyNzlcdCAgY29sb3I6IHdoaXRlO1xuICAgMjgwXHQgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgIDI4MVx0ICBjdXJzb3I6IHBvaW50ZXI7XG4gICAyODJcdCAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgMjgzXHQgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcztcbiAgIDI4NFx0ICBmb250LXdlaWdodDogNTAwO1xuICAgMjg1XHR9XG4gICAyODZcdFxuICAgMjg3XHQuZmlsZS1sYWJlbDpob3ZlciB7XG4gICAyODhcdCAgYmFja2dyb3VuZC1jb2xvcjogIzAwNjlkOTtcbiAgIDI4OVx0fVxuICAgMjkwXHRcbiAgIDI5MVx0LmZpbGUtbGFiZWw6YWN0aXZlIHtcbiAgIDI5Mlx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2MmNjO1xuICAgMjkzXHR9XG4gICAyOTRcdFxuICAgMjk1XHQjZmlsZS1uYW1lIHtcbiAgIDI5Nlx0ICBmb250LXNpemU6IDAuOWVtO1xuICAgMjk3XHQgIGNvbG9yOiAjNjY2O1xuICAgMjk4XHR9XG4gICAyOTlcdFxuICAgMzAwXHQuaGlkZGVuIHtcbiAgIDMwMVx0ICBkaXNwbGF5OiBub25lO1xuICAgMzAyXHR9XG4gICAzMDNcdFxuICAgMzA0XHQvKiBBbGVydHMgKi9cbiAgIDMwNVx0LmFsZXJ0IHtcbiAgIDMwNlx0ICBwYWRkaW5nOiAxNXB4O1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJmZGU1ZDA3Mi0zOGEwLTRkODMtOGU3OC02OGE2ODlmNjBhM2Q7dG9vbHVfdnJ0eF8wMURzZXVVdUFrY2dkUFRBZUxWTXdKbngiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzcy5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjcxXHQgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgIDI3Mlx0ICB6LWluZGV4OiAtMTtcbiAgIDI3M1x0fVxuICAgMjc0XHRcbiAgIDI3NVx0LmZpbGUtbGFiZWwge1xuICAgMjc2XHQgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgIDI3N1x0ICBwYWRkaW5nOiAxMnB4IDIwcHg7XG4gICAyNzhcdCAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjtcbiAgIDI3OVx0ICBjb2xvcjogd2hpdGU7XG4gICAyODBcdCAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgMjgxXHQgIGN1cnNvcjogcG9pbnRlcjtcbiAgIDI4Mlx0ICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gICAyODNcdCAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcbiAgIDI4NFx0ICBmb250LXdlaWdodDogNjAwO1xuICAgMjg1XHQgIGZvbnQtc2l6ZTogMS4wNWVtO1xuICAgMjg2XHQgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAyODdcdCAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgIDI4OFx0ICBsZXR0ZXItc3BhY2luZzogMC41cHg7XG4gICAyODlcdH1cbiAgIDI5MFx0XG4gICAyOTFcdC5maWxlLWxhYmVsOmhvdmVyIHtcbiAgIDI5Mlx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2OWQ5O1xuICAgMjkzXHQgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbiAgIDI5NFx0ICBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgMjk1XHR9XG4gICAyOTZcdFxuICAgMjk3XHQuZmlsZS1sYWJlbDphY3RpdmUge1xuICAgMjk4XHQgIGJhY2tncm91bmQtY29sb3I6ICMwMDYyY2M7XG4gICAyOTlcdCAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgMzAwXHQgIGJveC1zaGFkb3c6IDAgMnB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAzMDFcdH1cbiAgIDMwMlx0XG4gICAzMDNcdCNmaWxlLW5hbWUge1xuICAgMzA0XHQgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAzMDVcdCAgY29sb3I6ICM2NjY7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjVhYzc1MWFhLTc0MDItNDc3Zi1hY2FkLTNhMTI0MTRkZDEyYzt0b29sdV92cnR4XzAxUjNnQmYyYndTOVdIYktVVGtUVk5FOSI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyOTlcdCAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgMzAwXHQgIGJveC1zaGFkb3c6IDAgMnB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAzMDFcdH1cbiAgIDMwMlx0XG4gICAzMDNcdCNmaWxlLW5hbWUge1xuICAgMzA0XHQgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgMzA1XHQgIGNvbG9yOiAjNTU1O1xuICAgMzA2XHQgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgMzA3XHQgIGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7XG4gICAzMDhcdCAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgMzA5XHQgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzAwN2JmZjtcbiAgIDMxMFx0ICBtYXgtd2lkdGg6IDI1MHB4O1xuICAgMzExXHQgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAzMTJcdCAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgIDMxM1x0ICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgIDMxNFx0fVxuICAgMzE1XHRcbiAgIDMxNlx0LmhpZGRlbiB7XG4gICAzMTdcdCAgZGlzcGxheTogbm9uZTtcbiAgIDMxOFx0fVxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIzM2UwZjRmYi0yMWUzLTQ0ODgtYjE2OC0wN2UzZTViZTkyOTU7dG9vbHVfdnJ0eF8wMUp6ZnNhS0xIS1JXa0FoRnFUSDYxNmYiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi93ZWJhcHAvY3NzL3N0eWxlLmNzcy5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjU2XHQgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7XG4gICAyNTdcdH1cbiAgIDI1OFx0XG4gICAyNTlcdC8qIEN1c3RvbSBmaWxlIHVwbG9hZCBidXR0b24gKi9cbiAgIDI2MFx0LmN1c3RvbS1maWxlLXVwbG9hZCB7XG4gICAyNjFcdCAgZGlzcGxheTogZmxleDtcbiAgIDI2Mlx0ICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgMjYzXHQgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAyNjRcdCAgcGFkZGluZzogMTBweCAwO1xuICAgMjY1XHR9XG4gICAyNjZcdFxuICAgMjY3XHQuZmlsZS1pbnB1dCB7XG4gICAyNjhcdCAgd2lkdGg6IDAuMXB4O1xuICAgMjY5XHQgIGhlaWdodDogMC4xcHg7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjVhMjA2ZWI3LTk4N2ItNDI0Yy05ZDVhLWM3ZjMyOTdiZDU4Nzt0b29sdV92cnR4XzAxTU1oblNIckZKVlc4TTdXMmp5Q2laeCI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyMzlcdCAgbWFyZ2luLXRvcDogMjBweDtcbiAgIDI0MFx0fVxuICAgMjQxXHRcbiAgIDI0Mlx0LyogQm9vayBpbWFnZSB1cGxvYWQgc3R5bGVzICovXG4gICAyNDNcdC5jdXJyZW50LWltYWdlIHtcbiAgIDI0NFx0ICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgMjQ1XHQgIHBhZGRpbmc6IDE1cHg7XG4gICAyNDZcdCAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgIDI0N1x0ICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAyNDhcdCAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTtcbiAgIDI0OVx0ICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAyNTBcdCAgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgIDI1MVx0ICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xuICAgMjUyXHR9XG4gICAyNTNcdFxuICAgMjU0XHQuY3VycmVudC1pbWFnZTpob3ZlciB7XG4gICAyNTVcdCAgYm94LXNoYWRvdzogMCA1cHggMTBweCByZ2JhKDAsMCwwLDAuMTUpO1xuICAgMjU2XHQgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbiAgIDI1N1x0fVxuICAgMjU4XHRcbiAgIDI1OVx0LmN1cnJlbnQtaW1hZ2UgcCB7XG4gICAyNjBcdCAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgIDI2MVx0ICBjb2xvcjogIzQ0NDtcbiAgIDI2Mlx0ICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgMjYzXHR9XG4gICAyNjRcdFxuICAgMjY1XHQuY3VycmVudC1pbWFnZSBpbWcge1xuICAgMjY2XHQgIGRpc3BsYXk6IGJsb2NrO1xuICAgMjY3XHQgIG1hcmdpbjogNXB4IDA7XG4gICAyNjhcdCAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgIDI2OVx0ICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAyNzBcdCAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgIDI3MVx0ICBtYXgtd2lkdGg6IDIwMHB4O1xuICAgMjcyXHQgIG1heC1oZWlnaHQ6IDI1MHB4O1xuICAgMjczXHQgIG9iamVjdC1maXQ6IGNvbnRhaW47XG4gICAyNzRcdH1cbiAgIDI3NVx0XG4gICAyNzZcdC8qIEN1c3RvbSBmaWxlIHVwbG9hZCBidXR0b24gKi9cbiAgIDI3N1x0LmN1c3RvbS1maWxlLXVwbG9hZCB7XG4gICAyNzhcdCAgZGlzcGxheTogZmxleDtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMjFlMTJhM2EtYzA1Ni00OTQzLWI4MDMtODVmY2FlZjFhYmYzO3Rvb2x1X3ZydHhfMDFEcjd3NkJOVTZ1dEVhR2JjcHFlSnNoIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vd2ViYXBwL2FkbWluL2Jvb2stZm9ybS5qc3AuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDE2N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTY4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb3JtLWhpbnRcIj5TZWxlY3QgYW4gaW1hZ2UgZmlsZSB0byB1cGxvYWQuIFN1cHBvcnRlZCBmb3JtYXRzOiBKUEcsIFBORywgR0lGLjwvcD5cbiAgIDE2OVx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxNzBcdFxuICAgMTcxXHQgICAgICAgICAgICAgICAgICAgICAgICA8c2NyaXB0PlxuICAgMTcyXHQgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcmV2aWV3SW1hZ2UoaW5wdXQpIHtcbiAgIDE3M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTmFtZVNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1uYW1lJyk7XG4gICAxNzRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3LWNvbnRhaW5lcicpO1xuICAgMTc1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3Jyk7XG4gICAxNzZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlld0xhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctbGFiZWwnKTtcbiAgIDE3N1x0XG4gICAxNzhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgIDE3OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBpbnB1dC5maWxlc1swXS5uYW1lO1xuICAgMTgwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lU3Bhbi50ZXh0Q29udGVudCA9IGZpbGVOYW1lO1xuICAgMTgxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lU3Bhbi5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSAnIzI4YTc0NSc7IC8vIEdyZWVuIGJvcmRlciBmb3Igc3VjY2Vzc1xuICAgMTgyXHRcbiAgIDE4M1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgIDE4NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkge1xuICAgMTg1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBmYWRlLWluIGVmZmVjdFxuICAgMTg2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgIDE4N1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0ltYWdlLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgIDE4OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0xhYmVsLnRleHRDb250ZW50ID0gJ1ByZXZpZXc6JztcbiAgIDE4OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgIDE5MFx0XG4gICAxOTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhZGUgaW4gdGhlIGltYWdlXG4gICAxOTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAxOTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5IDAuNXMgZWFzZSc7XG4gICAxOTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2Uuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgIDE5NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTApO1xuICAgMTk2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAxOTdcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xuICAgMTk4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE5OVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZVNwYW4udGV4dENvbnRlbnQgPSAnTm8gZmlsZSBjaG9zZW4nO1xuICAgMjAwXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lU3Bhbi5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSAnIzAwN2JmZic7IC8vIFJlc2V0IGJvcmRlciBjb2xvclxuICAgMjAxXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgMjAyXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAyMDNcdFxuICAgMjA0XHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYW5pbWF0aW9uIHRvIHRoZSBDaG9vc2UgZmlsZSBidXR0b24gd2hlbiB0aGUgcGFnZSBsb2Fkc1xuICAgMjA1XHQgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gICAyMDZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbGUtbGFiZWwnKTtcbiAgIDIwN1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMYWJlbC5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAwLjVzIGVhc2UnO1xuICAgMjA4XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUxhYmVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcbiAgIDIwOVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMYWJlbC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgMjEwXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgIDIxMVx0ICAgICAgICAgICAgICAgICAgICAgICAgPC9zY3JpcHQ+XG4gICAyMTJcdFxuICAgMjEzXHQgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1hY3Rpb25zXCI+XG4gICAyMTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIGlkPVwic2F2ZUJ1dHRvblwiPlNhdmU8L2J1dHRvbj5cbiAgIDIxNVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCI8JT1yZXF1ZXN0LmdldENvbnRleHRQYXRoKCklPi9hZG1pbi9ib29rc1wiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIj5DYW5jZWw8L2E+XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjdhODRlNzk0LTdiOTAtNGJmYy1iYjZjLTAzZTU5ZmM2ODZmMTt0b29sdV92cnR4XzAxTjhMa2RDQkhycVJMNUVRcW9TNkxDcSI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9tYWluL3dlYmFwcC9jc3Mvc3R5bGUuY3NzLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyODlcdCAgcG9zaXRpb246IGFic29sdXRlO1xuICAgMjkwXHQgIHotaW5kZXg6IC0xO1xuICAgMjkxXHR9XG4gICAyOTJcdFxuICAgMjkzXHQuZmlsZS1sYWJlbCB7XG4gICAyOTRcdCAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgMjk1XHQgIHBhZGRpbmc6IDEycHggMjBweDtcbiAgIDI5Nlx0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xuICAgMjk3XHQgIGNvbG9yOiB3aGl0ZTtcbiAgIDI5OFx0ICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAyOTlcdCAgY3Vyc29yOiBwb2ludGVyO1xuICAgMzAwXHQgIG1hcmdpbi1yaWdodDogMTVweDtcbiAgIDMwMVx0ICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xuICAgMzAyXHQgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAzMDNcdCAgZm9udC1zaXplOiAxLjA1ZW07XG4gICAzMDRcdCAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgIDMwNVx0ICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgMzA2XHQgIGxldHRlci1zcGFjaW5nOiAwLjVweDtcbiAgIDMwN1x0ICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAzMDhcdCAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgIDMwOVx0fVxuICAgMzEwXHRcbiAgIDMxMVx0LmZpbGUtbGFiZWw6OmFmdGVyIHtcbiAgIDMxMlx0ICBjb250ZW50OiAnJztcbiAgIDMxM1x0ICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAzMTRcdCAgdG9wOiAwO1xuICAgMzE1XHQgIGxlZnQ6IC0xMDAlO1xuICAgMzE2XHQgIHdpZHRoOiAxMDAlO1xuICAgMzE3XHQgIGhlaWdodDogMTAwJTtcbiAgIDMxOFx0ICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHRyYW5zcGFyZW50LCByZ2JhKDI1NSwyNTUsMjU1LDAuMiksIHRyYW5zcGFyZW50KTtcbiAgIDMxOVx0ICB0cmFuc2l0aW9uOiAwLjVzO1xuICAgMzIwXHR9XG4gICAzMjFcdFxuICAgMzIyXHQuZmlsZS1sYWJlbDpob3Zlcjo6YWZ0ZXIge1xuICAgMzIzXHQgIGxlZnQ6IDEwMCU7XG4gICAzMjRcdH1cbiAgIDMyNVx0XG4gICAzMjZcdC5maWxlLWxhYmVsOmhvdmVyIHtcbiAgIDMyN1x0ICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2OWQ5O1xuICAgMzI4XHQgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fX0sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoiIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCJ9XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0YXR1cyI6ImRyYWZ0In0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjp0cnVlLCJleHRyYURhdGEiOnsiaXNBZ2VudENvbnZlcnNhdGlvbiI6dHJ1ZSwiaGFzRGlydHlFZGl0cyI6ZmFsc2UsImJhc2VsaW5lVGltZXN0YW1wIjoxNzQ3NzM4MDQwMDQxfSwicGVyc29uYVR5cGUiOjB9fSwiYWdlbnRFeGVjdXRpb25Nb2RlIjoibWFudWFsIiwiaXNBZ2VudEVkaXRzQ29sbGFwc2VkIjp0cnVlfQ==" />
      </map>
    </option>
  </component>
</project>